{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Downloads\\\\project (10)\\\\src\\\\components\\\\EconomicManagementPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst EconomicManagementPage = ({\n  transactions,\n  onAddTransaction,\n  onDeleteTransaction,\n  animals,\n  employees,\n  payslips,\n  thirdPartyPayments,\n  currentUser\n}) => {\n  _s();\n  const [transaction, setTransaction] = useState({\n    type: 'ingreso',\n    category: '',\n    amount: '',\n    // Para ingresos, gastos, compras\n    description: '',\n    animalId: '',\n    // Opcional\n    // Campos específicos para Venta\n    product: '',\n    quantity: '',\n    unit: '',\n    pricePerUnit: '',\n    client: '',\n    date: new Date().toISOString().split('T')[0],\n    // Fecha de registro/emisión de la transacción\n    // Nuevos campos para ingresos con rango de fechas\n    startDate: '',\n    endDate: ''\n  });\n  const [reportPeriod, setReportPeriod] = useState('monthly'); // 'daily', 'weekly', 'monthly'\n  const [selectedDate, setSelectedDate] = useState(new Date().toISOString().split('T')[0]); // Para reporte diario\n  const [selectedMonth, setSelectedMonth] = useState(new Date().toISOString().slice(0, 7)); // Para reporte mensual (YYYY-MM)\n  const [selectedWeek, setSelectedWeek] = useState(getWeekNumber(new Date())); // Para reporte semanal {year, week}\n\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setTransaction({\n      ...transaction,\n      [name]: value\n    });\n  };\n  const calculateTotalSale = () => {\n    const qty = parseFloat(transaction.quantity);\n    const price = parseFloat(transaction.pricePerUnit);\n    return (qty * price).toFixed(2);\n  };\n  const handleSubmit = () => {\n    if (!transaction.date) {\n      alert('Por favor, selecciona la fecha de la transacción.');\n      return;\n    }\n    if (transaction.type === 'ingreso' && (!transaction.startDate || !transaction.endDate)) {\n      alert('Para ingresos, por favor, selecciona la fecha de inicio y fin del período.');\n      return;\n    }\n    let finalTransaction = {\n      ...transaction\n    };\n    if (transaction.type === 'venta') {\n      finalTransaction.total = parseFloat(calculateTotalSale());\n    } else {\n      finalTransaction.total = parseFloat(transaction.amount);\n    }\n    const newId = `TRX-${Date.now().toString().slice(-5)}`;\n    onAddTransaction({\n      ...finalTransaction,\n      id: newId\n    });\n    alert(`Transacción de ${finalTransaction.type} registrada por $${finalTransaction.total}.`);\n    // Limpiar formulario\n    setTransaction({\n      type: 'ingreso',\n      category: '',\n      amount: '',\n      description: '',\n      animalId: '',\n      product: '',\n      quantity: '',\n      unit: '',\n      pricePerUnit: '',\n      client: '',\n      date: new Date().toISOString().split('T')[0],\n      // Resetear fecha a hoy\n      startDate: '',\n      endDate: '' // Resetear campos de fecha de período\n    });\n  };\n  const handleGenerateInvoice = saleData => {\n    if (!saleData || !saleData.client || !saleData.product || !saleData.quantity || !saleData.pricePerUnit) {\n      alert('Por favor, completa todos los campos de la venta para generar la factura.');\n      return;\n    }\n    const farmName = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.farmName) || 'Mi Finca Ganadera';\n    const adminName = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.fullName) || 'Administrador';\n    const logoPlaceholder = 'https://via.placeholder.com/60x60?text=LOGO';\n    const precioUnitario = parseFloat(saleData.pricePerUnit || 0);\n    const cantidad = parseFloat(saleData.quantity || 0);\n    const total = cantidad * precioUnitario;\n    const tempDiv = document.createElement('div');\n    tempDiv.style.width = '210mm';\n    tempDiv.style.padding = '20mm';\n    tempDiv.style.fontFamily = 'Arial, sans-serif';\n    tempDiv.style.fontSize = '11pt';\n    tempDiv.style.color = '#333';\n    tempDiv.style.position = 'absolute';\n    tempDiv.style.left = '-9999px';\n    tempDiv.style.top = '-9999px';\n    tempDiv.style.backgroundColor = '#fff';\n    tempDiv.innerHTML = `\n    <div style=\"border: 2px solid #ccc; border-radius: 10px; padding: 20px;\">\n      <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;\">\n        <img src=\"${logoPlaceholder}\" style=\"width: 60px;\" alt=\"Logo Finca\" />\n        <div style=\"text-align: right;\">\n          <h1 style=\"margin: 0; color: #2c3e50;\">${farmName}</h1>\n          <p style=\"margin: 0; color: #7f8c8d;\">Factura de Venta</p>\n        </div>\n      </div>\n\n      <div style=\"margin-bottom: 15px;\">\n        <p><strong>ID Factura:</strong> ${saleData.id || 'N/A'}</p>\n        <p><strong>Fecha:</strong> ${saleData.date || 'N/A'}</p>\n        <p><strong>Cliente:</strong> ${saleData.client || 'N/A'}</p>\n      </div>\n\n      <table style=\"width: 100%; border-collapse: collapse; margin-top: 10px; margin-bottom: 20px;\">\n        <thead style=\"background-color: #f4f4f4;\">\n          <tr>\n            <th style=\"padding: 10px; border: 1px solid #ccc;\">Producto</th>\n            <th style=\"padding: 10px; border: 1px solid #ccc;\">Cantidad</th>\n            <th style=\"padding: 10px; border: 1px solid #ccc;\">Unidad</th>\n            <th style=\"padding: 10px; border: 1px solid #ccc;\">Precio Unitario</th>\n            <th style=\"padding: 10px; border: 1px solid #ccc;\">Total</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td style=\"padding: 10px; border: 1px solid #ccc;\">${saleData.product}</td>\n            <td style=\"padding: 10px; border: 1px solid #ccc;\">${saleData.quantity}</td>\n            <td style=\"padding: 10px; border: 1px solid #ccc;\">${saleData.unit}</td>\n            <td style=\"padding: 10px; border: 1px solid #ccc;\">$${precioUnitario.toFixed(2)}</td>\n            <td style=\"padding: 10px; border: 1px solid #ccc;\">$${total.toFixed(2)}</td>\n          </tr>\n        </tbody>\n      </table>\n\n      <h2 style=\"text-align: right; color: #2c3e50;\">Total: $${total.toFixed(2)}</h2>\n\n      <p style=\"text-align: center; font-size: 10pt; color: #7f8c8d; margin-top: 40px;\">\n        Generado por Campo Inteligente | ${adminName}\n      </p>\n    </div>\n  `;\n    document.body.appendChild(tempDiv);\n    html2canvas(tempDiv, {\n      scale: 2\n    }).then(canvas => {\n      const imgData = canvas.toDataURL('image/png');\n      const pdf = new jsPDF('p', 'mm', 'a4');\n      const imgWidth = 210;\n      const pageHeight = 297;\n      const imgHeight = canvas.height * imgWidth / canvas.width;\n      let heightLeft = imgHeight;\n      let position = 0;\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pageHeight;\n      while (heightLeft >= 0) {\n        position = heightLeft - imgHeight;\n        pdf.addPage();\n        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n        heightLeft -= pageHeight;\n      }\n      pdf.save(`factura_${saleData.client || 'sin_cliente'}_${saleData.id || 'sin_id'}.pdf`);\n      document.body.removeChild(tempDiv);\n    });\n  };\n\n  // --- Funciones de Utilidad de Fechas ---\n  const normalizeDate = date => {\n    const d = new Date(date);\n    d.setHours(0, 0, 0, 0);\n    return d;\n  };\n  function getWeekNumber(d) {\n    d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));\n    d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay() || 7));\n    const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\n    const weekNo = Math.ceil(((d - yearStart) / 86400000 + 1) / 7);\n    return {\n      year: d.getUTCFullYear(),\n      week: weekNo\n    };\n  }\n  const getStartAndEndOfWeek = (year, week) => {\n    const date = new Date(year, 0, 1 + (week - 1) * 7); // Start of the week in the given year\n    const day = date.getDay(); // Day of week (0-6)\n    const diff = date.getDate() - day + (day === 0 ? -6 : 1); // Adjust to Monday\n    const startOfWeek = normalizeDate(new Date(date.setDate(diff)));\n    const endOfWeek = normalizeDate(new Date(startOfWeek));\n    endOfWeek.setDate(startOfWeek.getDate() + 6);\n    return {\n      start: startOfWeek,\n      end: endOfWeek\n    };\n  };\n\n  // --- Lógica de Filtrado de Reportes ---\n  const filterItemsBySelectedPeriod = (items, dateProp) => {\n    return items.filter(item => {\n      const itemDate = normalizeDate(item[dateProp]);\n      if (reportPeriod === 'daily') {\n        const selectedDay = normalizeDate(selectedDate);\n        return itemDate.getTime() === selectedDay.getTime();\n      } else if (reportPeriod === 'weekly') {\n        const {\n          start,\n          end\n        } = getStartAndEndOfWeek(selectedWeek.year, selectedWeek.week);\n        return itemDate >= start && itemDate <= end;\n      } else if (reportPeriod === 'monthly') {\n        const [year, month] = selectedMonth.split('-').map(Number);\n        return itemDate.getFullYear() === year && itemDate.getMonth() === month - 1;\n      }\n      return false; // No debería llegar aquí\n    });\n  };\n  const currentPeriodTransactions = filterItemsBySelectedPeriod(transactions, 'date');\n  const currentPeriodPayslips = filterItemsBySelectedPeriod(payslips, 'paymentDate');\n  const currentPeriodThirdPartyPayments = filterItemsBySelectedPeriod(thirdPartyPayments, 'date'); // Filtrar pagos a terceros\n\n  // Calcular ingresos del período\n  const totalIncomePeriod = currentPeriodTransactions.filter(t => t.type === 'ingreso' || t.type === 'venta').reduce((sum, t) => sum + t.total, 0);\n\n  // Calcular gastos del período (compras, gastos, y nómina)\n  const transactionExpensesPeriod = currentPeriodTransactions.filter(t => t.type === 'gasto' || t.type === 'compra').reduce((sum, t) => sum + t.total, 0);\n  const payslipExpensesPeriod = currentPeriodPayslips.reduce((sum, ps) => sum + (parseFloat(ps.netSalary) || 0), 0);\n  const thirdPartyExpensesPeriod = currentPeriodThirdPartyPayments.reduce((sum, tpp) => sum + (parseFloat(tpp.amount) || 0), 0);\n  const totalExpensesPeriod = transactionExpensesPeriod + payslipExpensesPeriod + thirdPartyExpensesPeriod;\n\n  // Calcular ganancia neta del período\n  const netProfitPeriod = totalIncomePeriod - totalExpensesPeriod;\n\n  // --- Depuración (puedes quitar estos useEffects una vez que funcione) ---\n  useEffect(() => {\n    console.log(`--- Reporte ${reportPeriod} ---`);\n    console.log('Transacciones filtradas:', currentPeriodTransactions);\n    console.log('Fichas de pago filtradas:', currentPeriodPayslips);\n    console.log('Pagos a terceros filtrados:', currentPeriodThirdPartyPayments);\n    console.log('Ingresos del periodo:', totalIncomePeriod);\n    console.log('Gastos de transacciones del periodo:', transactionExpensesPeriod);\n    console.log('Gastos de nómina del periodo:', payslipExpensesPeriod);\n    console.log('Gastos de terceros del periodo:', thirdPartyExpensesPeriod);\n    console.log('Gastos Totales del periodo:', totalExpensesPeriod);\n    console.log('Ganancia Neta del periodo:', netProfitPeriod);\n  }, [reportPeriod, selectedDate, selectedMonth, selectedWeek, transactions, payslips, thirdPartyPayments]);\n\n  // --- Rentabilidad por Animal (se mantiene igual, no depende del periodo de reporte) ---\n  const safeEmployees = employees || [];\n  const safeAnimals = animals || [];\n  const totalSalaries = safeEmployees.reduce((sum, emp) => sum + (parseFloat(emp.salary) || 0), 0);\n  const cowsInProductionCount = safeAnimals.filter(a => a.tipoProduccion === 'leche' && a.status === 'en_produccion').length;\n  const laborCostPerCow = cowsInProductionCount > 0 ? totalSalaries / cowsInProductionCount : 0;\n  const animalProfitability = safeAnimals.map(animal => {\n    const animalIncome = transactions.filter(t => t.animalId === animal.id && t.type === 'venta').reduce((sum, t) => sum + t.total, 0);\n    const animalExpenses = transactions.filter(t => t.animalId === animal.id && (t.type === 'gasto' || t.type === 'compra')).reduce((sum, t) => sum + t.total, 0);\n    let proratedLaborCost = 0;\n    if (animal.tipoProduccion === 'leche' && animal.status === 'en_produccion') {\n      proratedLaborCost = laborCostPerCow;\n    }\n    const totalCost = animalExpenses + proratedLaborCost;\n    const netProfitAnimal = animalIncome - totalCost;\n    return {\n      id: animal.id,\n      name: animal.name,\n      tipoProduccion: animal.tipoProduccion,\n      status: animal.status,\n      income: animalIncome,\n      expenses: animalExpenses,\n      proratedLabor: proratedLaborCost,\n      totalCost: totalCost,\n      netProfit: netProfitAnimal\n    };\n  });\n\n  // Información de la finca/criador para PDFs\n  const farmName = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.farmName) || 'Mi Finca Ganadera';\n  const adminName = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.fullName) || 'Administrador';\n  const logoPlaceholder = 'https://via.placeholder.com/50x50?text=LOGO'; // Placeholder de logo\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white p-6 rounded-lg shadow-md\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-xl font-semibold mb-4\",\n      children: \"Gesti\\xF3n Econ\\xF3mica\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-8 p-4 border rounded-lg bg-green-50\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-lg font-semibold mb-3\",\n        children: \"Reportes Financieros Peri\\xF3dicos\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center mb-4 space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setReportPeriod('daily'),\n          className: `px-4 py-2 rounded-lg ${reportPeriod === 'daily' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'} hover:bg-blue-700 transition-colors`,\n          children: \"Diario\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setReportPeriod('weekly'),\n          className: `px-4 py-2 rounded-lg ${reportPeriod === 'weekly' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'} hover:bg-blue-700 transition-colors`,\n          children: \"Semanal\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setReportPeriod('monthly'),\n          className: `px-4 py-2 rounded-lg ${reportPeriod === 'monthly' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'} hover:bg-blue-700 transition-colors`,\n          children: \"Mensual\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4 flex justify-center\",\n        children: [reportPeriod === 'daily' && /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          value: selectedDate,\n          onChange: e => setSelectedDate(e.target.value),\n          className: \"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 13\n        }, this), reportPeriod === 'weekly' && /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"week\" // Input tipo week (YYYY-WNN)\n          ,\n          value: `${selectedWeek.year}-W${String(selectedWeek.week).padStart(2, '0')}`,\n          onChange: e => {\n            const [year, week] = e.target.value.split('-W');\n            setSelectedWeek({\n              year: Number(year),\n              week: Number(week)\n            });\n          },\n          className: \"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 13\n        }, this), reportPeriod === 'monthly' && /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"month\" // Input tipo month (YYYY-MM)\n          ,\n          value: selectedMonth,\n          onChange: e => setSelectedMonth(e.target.value),\n          className: \"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-3 gap-4 text-center mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-3 bg-green-100 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm font-medium\",\n            children: \"Ingresos del Periodo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-2xl font-bold\",\n            children: [\"$\", totalIncomePeriod.toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-3 bg-red-100 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm font-medium\",\n            children: \"Gastos del Periodo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-2xl font-bold\",\n            children: [\"$\", totalExpensesPeriod.toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-3 bg-blue-100 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm font-medium\",\n            children: \"Ganancia Neta del Periodo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-2xl font-bold\",\n            children: [\"$\", netProfitPeriod.toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-8 p-4 border rounded-lg bg-yellow-50\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-lg font-semibold mb-3\",\n        children: \"Rentabilidad por Animal\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overflow-x-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"min-w-full bg-white border\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"bg-gray-100\",\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"ID Animal\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 372,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"Nombre\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"Tipo Prod.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"Ingresos\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"Gastos Directos\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"Mano Obra Prorrat.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 377,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"Costo Total\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 378,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"Ganancia Neta\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 379,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"Acciones\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 380,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: animalProfitability.map(ap => /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"hover:bg-gray-50\",\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-2 px-4 border\",\n                children: ap.id\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-2 px-4 border\",\n                children: ap.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-2 px-4 border\",\n                children: ap.tipoProduccion\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 388,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-2 px-4 border\",\n                children: [\"$\", ap.income.toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 389,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-2 px-4 border\",\n                children: [\"$\", ap.expenses.toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 390,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-2 px-4 border\",\n                children: [\"$\", ap.proratedLabor.toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 391,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-2 px-4 border\",\n                children: [\"$\", ap.totalCost.toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: `py-2 px-4 border ${ap.netProfit >= 0 ? 'text-green-600' : 'text-red-600'}`,\n                children: [\"$\", ap.netProfit.toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-2 px-4 border\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 396,\n                columnNumber: 19\n              }, this)]\n            }, ap.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-8 p-4 border rounded-lg bg-gray-50\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-lg font-semibold mb-3\",\n        children: \"Registrar Nueva Transacci\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"type\",\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          value: transaction.type,\n          onChange: handleInputChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"ingreso\",\n            children: \"Ingreso\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"gasto\",\n            children: \"Gasto\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"compra\",\n            children: \"Compra\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"venta\",\n            children: \"Venta\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"category\",\n          placeholder: \"Categor\\xEDa (Ej: Alimento, Venta de Leche)\",\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          value: transaction.category,\n          onChange: handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 11\n        }, this), transaction.type !== 'venta' && /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"amount\",\n          placeholder: \"Monto\",\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          value: transaction.amount,\n          onChange: handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 432,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"description\",\n          placeholder: \"Descripci\\xF3n Detallada\",\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          value: transaction.description,\n          onChange: handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"animalId\",\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          value: transaction.animalId,\n          onChange: handleInputChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Asociar a Animal (Opcional)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 456,\n            columnNumber: 13\n          }, this), safeAnimals.map(animal => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: animal.id,\n            children: [animal.name, \" (\", animal.id, \")\"]\n          }, animal.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 11\n        }, this), transaction.type === 'venta' && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"product\",\n            placeholder: \"Producto (Ej: Leche, Carne)\",\n            className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n            value: transaction.product,\n            onChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            name: \"quantity\",\n            placeholder: \"Cantidad\",\n            className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n            value: transaction.quantity,\n            onChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"unit\",\n            placeholder: \"Unidad (Ej: litros, kg)\",\n            className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n            value: transaction.unit,\n            onChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 481,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            name: \"pricePerUnit\",\n            placeholder: \"Precio por unidad\",\n            className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n            value: transaction.pricePerUnit,\n            onChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"client\",\n            placeholder: \"Cliente\",\n            className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n            value: transaction.client,\n            onChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 497,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-span-full p-2 bg-gray-100 rounded-lg\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"font-semibold\",\n              children: [\"Total de Venta: $\", calculateTotalSale()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 506,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 505,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), transaction.type === 'ingreso' && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            name: \"startDate\",\n            placeholder: \"Fecha Inicio Per\\xEDodo Ingreso\",\n            className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n            value: transaction.startDate,\n            onChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 513,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            name: \"endDate\",\n            placeholder: \"Fecha Fin Per\\xEDodo Ingreso\",\n            className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n            value: transaction.endDate,\n            onChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 521,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          name: \"date\",\n          placeholder: \"Fecha de Transacci\\xF3n\",\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          value: transaction.date,\n          onChange: handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 531,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSubmit,\n        className: \"mt-6 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors mr-2\",\n        children: \"Registrar Transacci\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 540,\n        columnNumber: 9\n      }, this), transaction.type === 'venta' && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleGenerateInvoice(transaction) // Pasar la transacción actual para generar PDF\n        ,\n        className: \"mt-6 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors\",\n        children: \"Generar Factura\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 547,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 408,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      className: \"text-lg font-semibold mb-3\",\n      children: \"Historial de Transacciones\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 557,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"overflow-x-auto\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"min-w-full bg-white border\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"bg-gray-100\",\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"py-2 px-4 border\",\n              children: \"ID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 562,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"py-2 px-4 border\",\n              children: \"Tipo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 563,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"py-2 px-4 border\",\n              children: \"Categor\\xEDa\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 564,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"py-2 px-4 border\",\n              children: \"Descripci\\xF3n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 565,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"py-2 px-4 border\",\n              children: \"Monto\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 566,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"py-2 px-4 border\",\n              children: \"Animal ID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 567,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"py-2 px-4 border\",\n              children: \"Fecha\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 568,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"py-2 px-4 border\",\n              children: \"Acciones\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 569,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 561,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 560,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: transactions.map(trx => /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"hover:bg-gray-50\",\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"py-2 px-4 border\",\n              children: trx.id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 575,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"py-2 px-4 border\",\n              children: trx.type\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 576,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"py-2 px-4 border\",\n              children: trx.category\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 577,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"py-2 px-4 border\",\n              children: trx.description || trx.product\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 578,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"py-2 px-4 border\",\n              children: [\"$\", trx.total.toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 579,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"py-2 px-4 border\",\n              children: trx.animalId || 'N/A'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 580,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"py-2 px-4 border\",\n              children: trx.date || 'N/A'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 581,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"py-2 px-4 border\",\n              children: [trx.type === 'venta' && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleGenerateInvoice(trx) // Pasar la transacción para generar PDF\n                ,\n                className: \"text-blue-600 hover:underline mr-2\",\n                children: \"Ver PDF\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 584,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => onDeleteTransaction(trx.id),\n                className: \"text-red-600 hover:underline\",\n                children: \"Eliminar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 591,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 582,\n              columnNumber: 17\n            }, this)]\n          }, trx.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 574,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 572,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 559,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 558,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 291,\n    columnNumber: 5\n  }, this);\n};\n_s(EconomicManagementPage, \"F9SfS+6Cfvjfyl4vzO+Gc9nCgdE=\");\n_c = EconomicManagementPage;\nexport default EconomicManagementPage;\nvar _c;\n$RefreshReg$(_c, \"EconomicManagementPage\");","map":{"version":3,"names":["React","useState","useEffect","jsPDF","html2canvas","jsxDEV","_jsxDEV","Fragment","_Fragment","EconomicManagementPage","transactions","onAddTransaction","onDeleteTransaction","animals","employees","payslips","thirdPartyPayments","currentUser","_s","transaction","setTransaction","type","category","amount","description","animalId","product","quantity","unit","pricePerUnit","client","date","Date","toISOString","split","startDate","endDate","reportPeriod","setReportPeriod","selectedDate","setSelectedDate","selectedMonth","setSelectedMonth","slice","selectedWeek","setSelectedWeek","getWeekNumber","handleInputChange","e","name","value","target","calculateTotalSale","qty","parseFloat","price","toFixed","handleSubmit","alert","finalTransaction","total","newId","now","toString","id","handleGenerateInvoice","saleData","farmName","adminName","fullName","logoPlaceholder","precioUnitario","cantidad","tempDiv","document","createElement","style","width","padding","fontFamily","fontSize","color","position","left","top","backgroundColor","innerHTML","body","appendChild","scale","then","canvas","imgData","toDataURL","pdf","imgWidth","pageHeight","imgHeight","height","heightLeft","addImage","addPage","save","removeChild","normalizeDate","d","setHours","UTC","getFullYear","getMonth","getDate","setUTCDate","getUTCDate","getUTCDay","yearStart","getUTCFullYear","weekNo","Math","ceil","year","week","getStartAndEndOfWeek","day","getDay","diff","startOfWeek","setDate","endOfWeek","start","end","filterItemsBySelectedPeriod","items","dateProp","filter","item","itemDate","selectedDay","getTime","month","map","Number","currentPeriodTransactions","currentPeriodPayslips","currentPeriodThirdPartyPayments","totalIncomePeriod","t","reduce","sum","transactionExpensesPeriod","payslipExpensesPeriod","ps","netSalary","thirdPartyExpensesPeriod","tpp","totalExpensesPeriod","netProfitPeriod","console","log","safeEmployees","safeAnimals","totalSalaries","emp","salary","cowsInProductionCount","a","tipoProduccion","status","length","laborCostPerCow","animalProfitability","animal","animalIncome","animalExpenses","proratedLaborCost","totalCost","netProfitAnimal","income","expenses","proratedLabor","netProfit","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onChange","String","padStart","ap","placeholder","trx","_c","$RefreshReg$"],"sources":["C:/Users/User/Downloads/project (10)/src/components/EconomicManagementPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\n\nconst EconomicManagementPage = ({ transactions, onAddTransaction, onDeleteTransaction, animals, employees, payslips, thirdPartyPayments, currentUser }) => {\n  const [transaction, setTransaction] = useState({\n    type: 'ingreso',\n    category: '',\n    amount: '', // Para ingresos, gastos, compras\n    description: '',\n    animalId: '', // Opcional\n    // Campos específicos para Venta\n    product: '',\n    quantity: '',\n    unit: '',\n    pricePerUnit: '',\n    client: '',\n    date: new Date().toISOString().split('T')[0], // Fecha de registro/emisión de la transacción\n    // Nuevos campos para ingresos con rango de fechas\n    startDate: '',\n    endDate: '',\n  });\n  const [reportPeriod, setReportPeriod] = useState('monthly'); // 'daily', 'weekly', 'monthly'\n  const [selectedDate, setSelectedDate] = useState(new Date().toISOString().split('T')[0]); // Para reporte diario\n  const [selectedMonth, setSelectedMonth] = useState(new Date().toISOString().slice(0, 7)); // Para reporte mensual (YYYY-MM)\n  const [selectedWeek, setSelectedWeek] = useState(getWeekNumber(new Date())); // Para reporte semanal {year, week}\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setTransaction({ ...transaction, [name]: value });\n  };\n\n  const calculateTotalSale = () => {\n    const qty = parseFloat(transaction.quantity);\n    const price = parseFloat(transaction.pricePerUnit);\n    return (qty * price).toFixed(2);\n  };\n\n  const handleSubmit = () => {\n    if (!transaction.date) {\n      alert('Por favor, selecciona la fecha de la transacción.');\n      return;\n    }\n    if (transaction.type === 'ingreso' && (!transaction.startDate || !transaction.endDate)) {\n      alert('Para ingresos, por favor, selecciona la fecha de inicio y fin del período.');\n      return;\n    }\n\n    let finalTransaction = { ...transaction };\n    if (transaction.type === 'venta') {\n      finalTransaction.total = parseFloat(calculateTotalSale());\n    } else {\n      finalTransaction.total = parseFloat(transaction.amount);\n    }\n    \n    const newId = `TRX-${Date.now().toString().slice(-5)}`;\n    onAddTransaction({ ...finalTransaction, id: newId });\n    alert(`Transacción de ${finalTransaction.type} registrada por $${finalTransaction.total}.`);\n    // Limpiar formulario\n    setTransaction({\n      type: 'ingreso', category: '', amount: '', description: '',\n      animalId: '', product: '', quantity: '', unit: '', pricePerUnit: '', client: '',\n      date: new Date().toISOString().split('T')[0], // Resetear fecha a hoy\n      startDate: '', endDate: '', // Resetear campos de fecha de período\n    });\n  };\n\n  const handleGenerateInvoice = (saleData) => {\n  if (!saleData || !saleData.client || !saleData.product || !saleData.quantity || !saleData.pricePerUnit) {\n    alert('Por favor, completa todos los campos de la venta para generar la factura.');\n    return;\n  }\n\n  const farmName = currentUser?.farmName || 'Mi Finca Ganadera';\n  const adminName = currentUser?.fullName || 'Administrador';\n  const logoPlaceholder = 'https://via.placeholder.com/60x60?text=LOGO';\n\n  const precioUnitario = parseFloat(saleData.pricePerUnit || 0);\n  const cantidad = parseFloat(saleData.quantity || 0);\n  const total = cantidad * precioUnitario;\n\n  const tempDiv = document.createElement('div');\n  tempDiv.style.width = '210mm';\n  tempDiv.style.padding = '20mm';\n  tempDiv.style.fontFamily = 'Arial, sans-serif';\n  tempDiv.style.fontSize = '11pt';\n  tempDiv.style.color = '#333';\n  tempDiv.style.position = 'absolute';\n  tempDiv.style.left = '-9999px';\n  tempDiv.style.top = '-9999px';\n  tempDiv.style.backgroundColor = '#fff';\n\n  tempDiv.innerHTML = `\n    <div style=\"border: 2px solid #ccc; border-radius: 10px; padding: 20px;\">\n      <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;\">\n        <img src=\"${logoPlaceholder}\" style=\"width: 60px;\" alt=\"Logo Finca\" />\n        <div style=\"text-align: right;\">\n          <h1 style=\"margin: 0; color: #2c3e50;\">${farmName}</h1>\n          <p style=\"margin: 0; color: #7f8c8d;\">Factura de Venta</p>\n        </div>\n      </div>\n\n      <div style=\"margin-bottom: 15px;\">\n        <p><strong>ID Factura:</strong> ${saleData.id || 'N/A'}</p>\n        <p><strong>Fecha:</strong> ${saleData.date || 'N/A'}</p>\n        <p><strong>Cliente:</strong> ${saleData.client || 'N/A'}</p>\n      </div>\n\n      <table style=\"width: 100%; border-collapse: collapse; margin-top: 10px; margin-bottom: 20px;\">\n        <thead style=\"background-color: #f4f4f4;\">\n          <tr>\n            <th style=\"padding: 10px; border: 1px solid #ccc;\">Producto</th>\n            <th style=\"padding: 10px; border: 1px solid #ccc;\">Cantidad</th>\n            <th style=\"padding: 10px; border: 1px solid #ccc;\">Unidad</th>\n            <th style=\"padding: 10px; border: 1px solid #ccc;\">Precio Unitario</th>\n            <th style=\"padding: 10px; border: 1px solid #ccc;\">Total</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td style=\"padding: 10px; border: 1px solid #ccc;\">${saleData.product}</td>\n            <td style=\"padding: 10px; border: 1px solid #ccc;\">${saleData.quantity}</td>\n            <td style=\"padding: 10px; border: 1px solid #ccc;\">${saleData.unit}</td>\n            <td style=\"padding: 10px; border: 1px solid #ccc;\">$${precioUnitario.toFixed(2)}</td>\n            <td style=\"padding: 10px; border: 1px solid #ccc;\">$${total.toFixed(2)}</td>\n          </tr>\n        </tbody>\n      </table>\n\n      <h2 style=\"text-align: right; color: #2c3e50;\">Total: $${total.toFixed(2)}</h2>\n\n      <p style=\"text-align: center; font-size: 10pt; color: #7f8c8d; margin-top: 40px;\">\n        Generado por Campo Inteligente | ${adminName}\n      </p>\n    </div>\n  `;\n\n  document.body.appendChild(tempDiv);\n\n  html2canvas(tempDiv, { scale: 2 }).then(canvas => {\n    const imgData = canvas.toDataURL('image/png');\n    const pdf = new jsPDF('p', 'mm', 'a4');\n    const imgWidth = 210;\n    const pageHeight = 297;\n    const imgHeight = canvas.height * imgWidth / canvas.width;\n    let heightLeft = imgHeight;\n    let position = 0;\n\n    pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n    heightLeft -= pageHeight;\n\n    while (heightLeft >= 0) {\n      position = heightLeft - imgHeight;\n      pdf.addPage();\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pageHeight;\n    }\n\n    pdf.save(`factura_${saleData.client || 'sin_cliente'}_${saleData.id || 'sin_id'}.pdf`);\n    document.body.removeChild(tempDiv);\n  });\n};\n\n  // --- Funciones de Utilidad de Fechas ---\n  const normalizeDate = (date) => {\n    const d = new Date(date);\n    d.setHours(0, 0, 0, 0);\n    return d;\n  };\n\n  function getWeekNumber(d) {\n    d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));\n    d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay() || 7));\n    const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\n    const weekNo = Math.ceil((((d - yearStart) / 86400000) + 1) / 7);\n    return { year: d.getUTCFullYear(), week: weekNo };\n  }\n\n  const getStartAndEndOfWeek = (year, week) => {\n    const date = new Date(year, 0, 1 + (week - 1) * 7); // Start of the week in the given year\n    const day = date.getDay(); // Day of week (0-6)\n    const diff = date.getDate() - day + (day === 0 ? -6 : 1); // Adjust to Monday\n    const startOfWeek = normalizeDate(new Date(date.setDate(diff)));\n    const endOfWeek = normalizeDate(new Date(startOfWeek));\n    endOfWeek.setDate(startOfWeek.getDate() + 6);\n    return { start: startOfWeek, end: endOfWeek };\n  };\n\n  // --- Lógica de Filtrado de Reportes ---\n  const filterItemsBySelectedPeriod = (items, dateProp) => {\n    return items.filter(item => {\n      const itemDate = normalizeDate(item[dateProp]);\n\n      if (reportPeriod === 'daily') {\n        const selectedDay = normalizeDate(selectedDate);\n        return itemDate.getTime() === selectedDay.getTime();\n      } else if (reportPeriod === 'weekly') {\n        const { start, end } = getStartAndEndOfWeek(selectedWeek.year, selectedWeek.week);\n        return itemDate >= start && itemDate <= end;\n      } else if (reportPeriod === 'monthly') {\n        const [year, month] = selectedMonth.split('-').map(Number);\n        return itemDate.getFullYear() === year && itemDate.getMonth() === (month - 1);\n      }\n      return false; // No debería llegar aquí\n    });\n  };\n\n  const currentPeriodTransactions = filterItemsBySelectedPeriod(transactions, 'date');\n  const currentPeriodPayslips = filterItemsBySelectedPeriod(payslips, 'paymentDate');\n  const currentPeriodThirdPartyPayments = filterItemsBySelectedPeriod(thirdPartyPayments, 'date'); // Filtrar pagos a terceros\n\n  // Calcular ingresos del período\n  const totalIncomePeriod = currentPeriodTransactions\n    .filter(t => t.type === 'ingreso' || t.type === 'venta')\n    .reduce((sum, t) => sum + t.total, 0);\n  \n  // Calcular gastos del período (compras, gastos, y nómina)\n  const transactionExpensesPeriod = currentPeriodTransactions\n    .filter(t => t.type === 'gasto' || t.type === 'compra')\n    .reduce((sum, t) => sum + t.total, 0);\n  \n  const payslipExpensesPeriod = currentPeriodPayslips\n    .reduce((sum, ps) => sum + (parseFloat(ps.netSalary) || 0), 0);\n\n  const thirdPartyExpensesPeriod = currentPeriodThirdPartyPayments\n    .reduce((sum, tpp) => sum + (parseFloat(tpp.amount) || 0), 0);\n  \n  const totalExpensesPeriod = transactionExpensesPeriod + payslipExpensesPeriod + thirdPartyExpensesPeriod;\n\n  // Calcular ganancia neta del período\n  const netProfitPeriod = totalIncomePeriod - totalExpensesPeriod;\n\n  // --- Depuración (puedes quitar estos useEffects una vez que funcione) ---\n  useEffect(() => {\n    console.log(`--- Reporte ${reportPeriod} ---`);\n    console.log('Transacciones filtradas:', currentPeriodTransactions);\n    console.log('Fichas de pago filtradas:', currentPeriodPayslips);\n    console.log('Pagos a terceros filtrados:', currentPeriodThirdPartyPayments);\n    console.log('Ingresos del periodo:', totalIncomePeriod);\n    console.log('Gastos de transacciones del periodo:', transactionExpensesPeriod);\n    console.log('Gastos de nómina del periodo:', payslipExpensesPeriod);\n    console.log('Gastos de terceros del periodo:', thirdPartyExpensesPeriod);\n    console.log('Gastos Totales del periodo:', totalExpensesPeriod);\n    console.log('Ganancia Neta del periodo:', netProfitPeriod);\n  }, [reportPeriod, selectedDate, selectedMonth, selectedWeek, transactions, payslips, thirdPartyPayments]);\n\n  // --- Rentabilidad por Animal (se mantiene igual, no depende del periodo de reporte) ---\n  const safeEmployees = employees || [];\n  const safeAnimals = animals || [];\n\n  const totalSalaries = safeEmployees.reduce((sum, emp) => sum + (parseFloat(emp.salary) || 0), 0);\n  const cowsInProductionCount = safeAnimals.filter(a => a.tipoProduccion === 'leche' && a.status === 'en_produccion').length;\n  const laborCostPerCow = cowsInProductionCount > 0 ? totalSalaries / cowsInProductionCount : 0;\n\n  const animalProfitability = safeAnimals.map(animal => {\n    const animalIncome = transactions\n      .filter(t => t.animalId === animal.id && t.type === 'venta')\n      .reduce((sum, t) => sum + t.total, 0);\n\n    const animalExpenses = transactions\n      .filter(t => t.animalId === animal.id && (t.type === 'gasto' || t.type === 'compra'))\n      .reduce((sum, t) => sum + t.total, 0);\n\n    let proratedLaborCost = 0;\n    if (animal.tipoProduccion === 'leche' && animal.status === 'en_produccion') {\n      proratedLaborCost = laborCostPerCow;\n    }\n\n    const totalCost = animalExpenses + proratedLaborCost;\n    const netProfitAnimal = animalIncome - totalCost;\n\n    return {\n      id: animal.id,\n      name: animal.name,\n      tipoProduccion: animal.tipoProduccion,\n      status: animal.status,\n      income: animalIncome,\n      expenses: animalExpenses,\n      proratedLabor: proratedLaborCost,\n      totalCost: totalCost,\n      netProfit: netProfitAnimal,\n    };\n  });\n\n  // Información de la finca/criador para PDFs\n  const farmName = currentUser?.farmName || 'Mi Finca Ganadera';\n  const adminName = currentUser?.fullName || 'Administrador';\n  const logoPlaceholder = 'https://via.placeholder.com/50x50?text=LOGO'; // Placeholder de logo\n\n  return (\n    <div className=\"bg-white p-6 rounded-lg shadow-md\">\n      <h3 className=\"text-xl font-semibold mb-4\">Gestión Económica</h3>\n\n      {/* Sección de Reportes Financieros Periódicos */}\n      <div className=\"mb-8 p-4 border rounded-lg bg-green-50\">\n        <h4 className=\"text-lg font-semibold mb-3\">Reportes Financieros Periódicos</h4>\n        <div className=\"flex justify-center mb-4 space-x-2\">\n          <button\n            onClick={() => setReportPeriod('daily')}\n            className={`px-4 py-2 rounded-lg ${reportPeriod === 'daily' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'} hover:bg-blue-700 transition-colors`}\n          >\n            Diario\n          </button>\n          <button\n            onClick={() => setReportPeriod('weekly')}\n            className={`px-4 py-2 rounded-lg ${reportPeriod === 'weekly' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'} hover:bg-blue-700 transition-colors`}\n          >\n            Semanal\n          </button>\n          <button\n            onClick={() => setReportPeriod('monthly')}\n            className={`px-4 py-2 rounded-lg ${reportPeriod === 'monthly' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'} hover:bg-blue-700 transition-colors`}\n          >\n            Mensual\n          </button>\n        </div>\n\n        {/* Controles de selección de fecha/período */}\n        <div className=\"mb-4 flex justify-center\">\n          {reportPeriod === 'daily' && (\n            <input\n              type=\"date\"\n              value={selectedDate}\n              onChange={(e) => setSelectedDate(e.target.value)}\n              className=\"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            />\n          )}\n          {reportPeriod === 'weekly' && (\n            <input\n              type=\"week\" // Input tipo week (YYYY-WNN)\n              value={`${selectedWeek.year}-W${String(selectedWeek.week).padStart(2, '0')}`}\n              onChange={(e) => {\n                const [year, week] = e.target.value.split('-W');\n                setSelectedWeek({ year: Number(year), week: Number(week) });\n              }}\n              className=\"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            />\n          )}\n          {reportPeriod === 'monthly' && (\n            <input\n              type=\"month\" // Input tipo month (YYYY-MM)\n              value={selectedMonth}\n              onChange={(e) => setSelectedMonth(e.target.value)}\n              className=\"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            />\n          )}\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-center mb-6\">\n          <div className=\"p-3 bg-green-100 rounded-lg\">\n            <p className=\"text-sm font-medium\">Ingresos del Periodo</p>\n            <p className=\"text-2xl font-bold\">${totalIncomePeriod.toFixed(2)}</p>\n          </div>\n          <div className=\"p-3 bg-red-100 rounded-lg\">\n            <p className=\"text-sm font-medium\">Gastos del Periodo</p>\n            <p className=\"text-2xl font-bold\">${totalExpensesPeriod.toFixed(2)}</p>\n          </div>\n          <div className=\"p-3 bg-blue-100 rounded-lg\">\n            <p className=\"text-sm font-medium\">Ganancia Neta del Periodo</p>\n            <p className=\"text-2xl font-bold\">${netProfitPeriod.toFixed(2)}</p>\n          </div>\n        </div>\n      </div>\n\n      {/* Sección de Rentabilidad por Animal */}\n      <div className=\"mb-8 p-4 border rounded-lg bg-yellow-50\">\n        <h4 className=\"text-lg font-semibold mb-3\">Rentabilidad por Animal</h4>\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full bg-white border\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"py-2 px-4 border\">ID Animal</th>\n                <th className=\"py-2 px-4 border\">Nombre</th>\n                <th className=\"py-2 px-4 border\">Tipo Prod.</th>\n                <th className=\"py-2 px-4 border\">Ingresos</th>\n                <th className=\"py-2 px-4 border\">Gastos Directos</th>\n                <th className=\"py-2 px-4 border\">Mano Obra Prorrat.</th>\n                <th className=\"py-2 px-4 border\">Costo Total</th>\n                <th className=\"py-2 px-4 border\">Ganancia Neta</th>\n                <th className=\"py-2 px-4 border\">Acciones</th>\n              </tr>\n            </thead>\n            <tbody>\n              {animalProfitability.map(ap => (\n                <tr key={ap.id} className=\"hover:bg-gray-50\">\n                  <td className=\"py-2 px-4 border\">{ap.id}</td>\n                  <td className=\"py-2 px-4 border\">{ap.name}</td>\n                  <td className=\"py-2 px-4 border\">{ap.tipoProduccion}</td>\n                  <td className=\"py-2 px-4 border\">${ap.income.toFixed(2)}</td>\n                  <td className=\"py-2 px-4 border\">${ap.expenses.toFixed(2)}</td>\n                  <td className=\"py-2 px-4 border\">${ap.proratedLabor.toFixed(2)}</td>\n                  <td className=\"py-2 px-4 border\">${ap.totalCost.toFixed(2)}</td>\n                  <td className={`py-2 px-4 border ${ap.netProfit >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                    ${ap.netProfit.toFixed(2)}\n                  </td>\n                  <td className=\"py-2 px-4 border\">\n                    {/* No hay una función de eliminación directa para la rentabilidad, ya que es un reporte */}\n                    {/* Podrías añadir un botón para ver detalles del animal o sus transacciones */}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Sección de Registro de Transacciones */}\n      <div className=\"mb-8 p-4 border rounded-lg bg-gray-50\">\n        <h4 className=\"text-lg font-semibold mb-3\">Registrar Nueva Transacción</h4>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <select\n            name=\"type\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={transaction.type}\n            onChange={handleInputChange}\n          >\n            <option value=\"ingreso\">Ingreso</option>\n            <option value=\"gasto\">Gasto</option>\n            <option value=\"compra\">Compra</option>\n            <option value=\"venta\">Venta</option>\n          </select>\n          <input\n            type=\"text\"\n            name=\"category\"\n            placeholder=\"Categoría (Ej: Alimento, Venta de Leche)\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={transaction.category}\n            onChange={handleInputChange}\n          />\n          \n          {transaction.type !== 'venta' && (\n            <input\n              type=\"number\"\n              name=\"amount\"\n              placeholder=\"Monto\"\n              className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n              value={transaction.amount}\n              onChange={handleInputChange}\n            />\n          )}\n\n          <input\n            type=\"text\"\n            name=\"description\"\n            placeholder=\"Descripción Detallada\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={transaction.description}\n            onChange={handleInputChange}\n          />\n          <select\n            name=\"animalId\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={transaction.animalId}\n            onChange={handleInputChange}\n          >\n            <option value=\"\">Asociar a Animal (Opcional)</option>\n            {safeAnimals.map(animal => (\n              <option key={animal.id} value={animal.id}>{animal.name} ({animal.id})</option>\n            ))}\n          </select>\n\n          {/* Campos específicos para Venta */}\n          {transaction.type === 'venta' && (\n            <>\n              <input\n                type=\"text\"\n                name=\"product\"\n                placeholder=\"Producto (Ej: Leche, Carne)\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                value={transaction.product}\n                onChange={handleInputChange}\n              />\n              <input\n                type=\"number\"\n                name=\"quantity\"\n                placeholder=\"Cantidad\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                value={transaction.quantity}\n                onChange={handleInputChange}\n              />\n              <input\n                type=\"text\"\n                name=\"unit\"\n                placeholder=\"Unidad (Ej: litros, kg)\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                value={transaction.unit}\n                onChange={handleInputChange}\n              />\n              <input\n                type=\"number\"\n                name=\"pricePerUnit\"\n                placeholder=\"Precio por unidad\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                value={transaction.pricePerUnit}\n                onChange={handleInputChange}\n              />\n              <input\n                type=\"text\"\n                name=\"client\"\n                placeholder=\"Cliente\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                value={transaction.client}\n                onChange={handleInputChange}\n              />\n              <div className=\"col-span-full p-2 bg-gray-100 rounded-lg\">\n                <p className=\"font-semibold\">Total de Venta: ${calculateTotalSale()}</p>\n              </div>\n            </>\n          )}\n          {/* Campos de fecha de período para Ingreso */}\n          {transaction.type === 'ingreso' && (\n            <>\n              <input\n                type=\"date\"\n                name=\"startDate\"\n                placeholder=\"Fecha Inicio Período Ingreso\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                value={transaction.startDate}\n                onChange={handleInputChange}\n              />\n              <input\n                type=\"date\"\n                name=\"endDate\"\n                placeholder=\"Fecha Fin Período Ingreso\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                value={transaction.endDate}\n                onChange={handleInputChange}\n              />\n            </>\n          )}\n          <input\n            type=\"date\"\n            name=\"date\"\n            placeholder=\"Fecha de Transacción\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={transaction.date}\n            onChange={handleInputChange}\n          />\n        </div>\n        <button\n          onClick={handleSubmit}\n          className=\"mt-6 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors mr-2\"\n        >\n          Registrar Transacción\n        </button>\n        {transaction.type === 'venta' && (\n          <button\n            onClick={() => handleGenerateInvoice(transaction)} // Pasar la transacción actual para generar PDF\n            className=\"mt-6 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            Generar Factura\n          </button>\n        )}\n      </div>\n\n      {/* Historial de Transacciones */}\n      <h4 className=\"text-lg font-semibold mb-3\">Historial de Transacciones</h4>\n      <div className=\"overflow-x-auto\">\n        <table className=\"min-w-full bg-white border\">\n          <thead>\n            <tr className=\"bg-gray-100\">\n              <th className=\"py-2 px-4 border\">ID</th>\n              <th className=\"py-2 px-4 border\">Tipo</th>\n              <th className=\"py-2 px-4 border\">Categoría</th>\n              <th className=\"py-2 px-4 border\">Descripción</th>\n              <th className=\"py-2 px-4 border\">Monto</th>\n              <th className=\"py-2 px-4 border\">Animal ID</th>\n              <th className=\"py-2 px-4 border\">Fecha</th>\n              <th className=\"py-2 px-4 border\">Acciones</th>\n            </tr>\n          </thead>\n          <tbody>\n            {transactions.map(trx => (\n              <tr key={trx.id} className=\"hover:bg-gray-50\">\n                <td className=\"py-2 px-4 border\">{trx.id}</td>\n                <td className=\"py-2 px-4 border\">{trx.type}</td>\n                <td className=\"py-2 px-4 border\">{trx.category}</td>\n                <td className=\"py-2 px-4 border\">{trx.description || trx.product}</td>\n                <td className=\"py-2 px-4 border\">${trx.total.toFixed(2)}</td>\n                <td className=\"py-2 px-4 border\">{trx.animalId || 'N/A'}</td>\n                <td className=\"py-2 px-4 border\">{trx.date || 'N/A'}</td>\n                <td className=\"py-2 px-4 border\">\n                  {trx.type === 'venta' && (\n                    <button\n                      onClick={() => handleGenerateInvoice(trx)} // Pasar la transacción para generar PDF\n                      className=\"text-blue-600 hover:underline mr-2\"\n                    >\n                      Ver PDF\n                    </button>\n                  )}\n                  <button\n                    onClick={() => onDeleteTransaction(trx.id)}\n                    className=\"text-red-600 hover:underline\"\n                  >\n                    Eliminar\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n\nexport default EconomicManagementPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _objectSpread from\"C:/Users/User/Downloads/project (10)/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useRef,useEffect}from'react';import{exportToCsv,exportTableToPdf}from'../utils/exportHelpers';// Importar funciones de exportación\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ProductionControlPage=_ref=>{let{animals,onUpdateAnimalProduction,onRegisterProductionRecord,productionRecords,setProductionRecords,currentUser,logoUrl}=_ref;const[currentProductionSection,setCurrentProductionSection]=useState('general');// 'general', 'leche', 'carne', 'potreros'\nconst[productionData,setProductionData]=useState({animalId:'',fechaRegistro:'',tipoProduccion:'',// 'leche', 'carne'\ncantidad:'',// Cantidad de producción (ej. litros de leche, kg de carne)\nunidadMedida:'',// 'litros', 'kg'\nobservaciones:''});const[editingRecord,setEditingRecord]=useState(null);// To hold the record being edited\nconst productionTableRef=useRef(null);// Ref for the production history table\n// Estados para el análisis de tendencias y consejos de IA\nconst[milkTrend,setMilkTrend]=useState('estable');// 'aumentando', 'decayendo', 'estable'\nconst[meatTrend,setMeatTrend]=useState('estable');// 'aumentando', 'decayendo', 'estable'\nconst[milkAdvice,setMilkAdvice]=useState('');const[meatAdvice,setMeatAdvice]=useState('');const[aiAdviceHistory,setAiAdviceHistory]=useState([]);// Nuevo estado para el historial de consejos\n// Estados para el control de potreros\nconst[pastureMap,setPastureMap]=useState(null);const[pastureData,setPastureData]=useState({name:'',size:'',// en hectáreas o m2\ngrassType:'',status:'disponible',// 'disponible', 'en_uso', 'no_disponible'\nlastUsedDate:'',// Fecha de finalización de uso\ncowCount:'',// Cantidad de vacas a pastorear\nrecommendedDays:''// Días recomendados por la IA\n});const[pastures,setPastures]=useState([]);// Lista de potreros registrados\n// Función para calcular la tendencia y generar consejos\nconst analyzeProductionAndAdvise=(records,type)=>{const relevantRecords=records.filter(record=>record.tipoProduccion===type).sort((a,b)=>new Date(a.fechaRegistro)-new Date(b.fechaRegistro));if(relevantRecords.length<2){return{trend:'estable',advice:'Necesitamos más datos para analizar la tendencia de producción.'};}const latestRecords=relevantRecords.slice(-3);// Tomar los últimos 3 registros para un análisis simple\nif(latestRecords.length<2){return{trend:'estable',advice:'Necesitamos al menos dos registros para analizar la tendencia.'};}let increasingCount=0;let decreasingCount=0;for(let i=1;i<latestRecords.length;i++){if(latestRecords[i].cantidad>latestRecords[i-1].cantidad){increasingCount++;}else if(latestRecords[i].cantidad<latestRecords[i-1].cantidad){decreasingCount++;}}let trend='estable';let advice='';if(increasingCount>decreasingCount){trend='aumentando';advice=\"\\xA1Excelente! La producci\\xF3n de \".concat(type,\" est\\xE1 aumentando. Sigue con las buenas pr\\xE1cticas de alimentaci\\xF3n y manejo.\");}else if(decreasingCount>increasingCount){trend='decayendo';advice=\"\\xA1Atenci\\xF3n! La producci\\xF3n de \".concat(type,\" est\\xE1 decayendo. Considera revisar la dieta, el estado de salud del animal o el manejo del estr\\xE9s.\");}else{trend='estable';advice=\"La producci\\xF3n de \".concat(type,\" se mantiene estable. Si buscas mejorarla, eval\\xFAa optimizar la alimentaci\\xF3n o el confort del animal.\");}return{trend,advice};};useEffect(()=>{const{trend:milkT,advice:milkA}=analyzeProductionAndAdvise(productionRecords,'leche');setMilkTrend(milkT);setMilkAdvice(milkA);if(milkA&&milkA!=='Necesitamos más datos para analizar la tendencia de producción.'&&milkA!=='Necesitamos al menos dos registros para analizar la tendencia.'){setAiAdviceHistory(prev=>[...prev,{date:new Date().toISOString().split('T')[0],type:'leche',advice:milkA}]);}const{trend:meatT,advice:meatA}=analyzeProductionAndAdvise(productionRecords,'carne');setMeatTrend(meatT);setMeatAdvice(meatA);if(meatA&&meatA!=='Necesitamos más datos para analizar la tendencia de producción.'&&meatA!=='Necesitamos al menos dos registros para analizar la tendencia.'){setAiAdviceHistory(prev=>[...prev,{date:new Date().toISOString().split('T')[0],type:'carne',advice:meatA}]);}},[productionRecords]);const handleProductionChange=e=>{const{name,value}=e.target;setProductionData(_objectSpread(_objectSpread({},productionData),{},{[name]:value}));};const handleProductionSubmit=()=>{const{animalId,fechaRegistro,tipoProduccion,cantidad,unidadMedida,observaciones}=productionData;if(!animalId||!fechaRegistro||!tipoProduccion||!cantidad||!unidadMedida){alert('¡Ups! Para registrar la producción, necesitamos que completes todos los campos obligatorios. ¡No te rindas, ya casi lo logras!');return;}onRegisterProductionRecord({id:\"PROD-\".concat(Date.now().toString().slice(-5)),// Generar ID único\nanimalId,fechaRegistro,tipoProduccion,cantidad:parseFloat(cantidad),unidadMedida,observaciones});alert('¡Producción registrada con éxito! ¡Tus animales son unos campeones!');setProductionData({animalId:'',fechaRegistro:'',tipoProduccion:'',cantidad:'',unidadMedida:'',observaciones:''});};const handleDeleteProductionRecord=recordId=>{if(window.confirm('¿Estás seguro de que quieres eliminar este registro de producción? ¡Esta acción no se puede deshacer!')){const updatedRecords=productionRecords.filter(record=>record.id!==recordId);setProductionRecords(updatedRecords);// Update state in App.js via prop\nalert('¡Registro de producción eliminado! Como si nunca hubiera existido.');}};const startEditingProductionRecord=record=>{setEditingRecord(_objectSpread({},record));// Create a copy to edit\nalert('¡A editar se ha dicho! Modifica los campos y guarda los cambios.');};const handleEditingProductionChange=e=>{const{name,value}=e.target;setEditingRecord(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const saveEditedProductionRecord=()=>{const updatedRecords=productionRecords.map(record=>record.id===editingRecord.id?editingRecord:record);setProductionRecords(updatedRecords);// Update state in App.js via prop\nsetEditingRecord(null);// Exit editing mode\nalert('¡Cambios guardados! Tu historial de producción está al día.');};const cancelEditingProductionRecord=()=>{setEditingRecord(null);// Exit editing mode\nalert('¡Edición cancelada! No te preocupes, tus datos están a salvo.');};const handleExportProductionHistory=async format=>{if(productionRecords.length===0){alert('¡No hay registros de producción para exportar! ¿Qué esperas para empezar a registrar?');return;}const filename=\"historial_produccion_\".concat(new Date().toISOString().split('T')[0]);const farmName=(currentUser===null||currentUser===void 0?void 0:currentUser.farmName)||'Mi Finca Ganadera';const adminName=(currentUser===null||currentUser===void 0?void 0:currentUser.fullName)||'Administrador';if(format==='csv'){exportToCsv(productionRecords,filename);alert('¡Exportando a CSV! Tu historial estará listo en un santiamén.');}else if(format==='pdf'){await exportTableToPdf(productionTableRef.current,filename,'Historial de Producción',farmName,adminName,logoUrl);alert('¡Generando PDF! Tu historial se verá de lujo en papel.');}};const filteredProductionRecords=productionRecords.filter(record=>{if(currentProductionSection==='carne'&&record.tipoProduccion!=='carne'){return false;}if(currentProductionSection==='leche'&&record.tipoProduccion!=='leche'){return false;}return true;});// --- Lógica de Potreros ---\nconst handlePastureMapUpload=e=>{const file=e.target.files[0];if(file){const reader=new FileReader();reader.onloadend=()=>{setPastureMap(reader.result);alert('¡Mapa de potreros subido con éxito!');};reader.readAsDataURL(file);}};const calculateRecommendedDays=(cowCount,pastureSizeM2)=>{// Asumiendo 5000m2 por potrero como base para las reglas dadas\n// Reglas: 18-20 vacas = 1 día, 10 vacas = 2 días\n// Esto es una simplificación, la capacidad de carga real depende de muchos factores\nconst baseAreaPerCowPerDay=5000/18;// m2 por vaca por día (para 18 vacas en 5000m2)\nif(cowCount<=0||pastureSizeM2<=0)return 0;const totalCowDaysCapacity=pastureSizeM2/baseAreaPerCowPerDay;const days=totalCowDaysCapacity/cowCount;return Math.round(days);};const handlePastureDataChange=e=>{const{name,value}=e.target;let updatedPastureData=_objectSpread(_objectSpread({},pastureData),{},{[name]:value});if(name==='cowCount'||name==='size'){const currentCowCount=name==='cowCount'?parseFloat(value):parseFloat(pastureData.cowCount);const currentPastureSize=name==='size'?parseFloat(value):parseFloat(pastureData.size);if(!isNaN(currentCowCount)&&!isNaN(currentPastureSize)&&currentPastureSize>0){updatedPastureData.recommendedDays=calculateRecommendedDays(currentCowCount,currentPastureSize);}else{updatedPastureData.recommendedDays='';}}setPastureData(updatedPastureData);};const handleAddPasture=()=>{if(!pastureData.name||!pastureData.size||!pastureData.grassType||!pastureData.cowCount){alert('¡Faltan datos! Por favor, completa el nombre, tamaño, tipo de pasto y cantidad de vacas.');return;}const newPasture=_objectSpread(_objectSpread({},pastureData),{},{id:\"POT-\".concat(Date.now().toString().slice(-5))});setPastures(prev=>[...prev,newPasture]);alert(\"\\xA1Potrero \".concat(newPasture.name,\" registrado con \\xE9xito!\"));setPastureData({name:'',size:'',grassType:'',status:'disponible',lastUsedDate:'',cowCount:'',recommendedDays:''});};const handleUsePasture=id=>{setPastures(prev=>prev.map(p=>p.id===id?_objectSpread(_objectSpread({},p),{},{status:'en_uso',lastUsedDate:''}):p));alert('¡Potrero marcado como en uso!');};const handleFinalizePastureUse=id=>{setPastures(prev=>prev.map(p=>p.id===id?_objectSpread(_objectSpread({},p),{},{status:'no_disponible',lastUsedDate:new Date().toISOString().split('T')[0]}):p));alert('¡Uso de potrero finalizado! Iniciando periodo de descanso.');};// Automatización de estado de potreros\nuseEffect(()=>{const today=new Date();const updatedPastures=pastures.map(p=>{if(p.status==='no_disponible'&&p.lastUsedDate){const lastUsed=new Date(p.lastUsedDate);const diffTime=Math.abs(today-lastUsed);const diffDays=Math.ceil(diffTime/(1000*60*60*24));if(diffDays>=30){// 30 días de descanso\nreturn _objectSpread(_objectSpread({},p),{},{status:'disponible'});}}return p;});setPastures(updatedPastures);// Aviso de no dejar pasar el potrero de no más de 90 días\npastures.forEach(p=>{if(p.status==='disponible'&&p.lastUsedDate){const lastUsed=new Date(p.lastUsedDate);const diffTime=Math.abs(today-lastUsed);const diffDays=Math.ceil(diffTime/(1000*60*60*24));if(diffDays>90){console.warn(\"\\xA1Atenci\\xF3n! El potrero \".concat(p.name,\" lleva \").concat(diffDays,\" d\\xEDas sin usarse. Considera rotarlo.\"));}}});},[pastures]);return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-4 text-gray-800\",children:\"Control de Producci\\xF3n y Potreros\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center mb-8 space-x-4 p-2 bg-gray-100 rounded-lg shadow-inner\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentProductionSection('general'),className:\"px-6 py-2 rounded-lg font-semibold transition-all duration-300 \".concat(currentProductionSection==='general'?'bg-blue-600 text-white shadow-md':'bg-transparent text-gray-700 hover:bg-gray-200'),children:\"Producci\\xF3n General\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentProductionSection('leche'),className:\"px-6 py-2 rounded-lg font-semibold transition-all duration-300 \".concat(currentProductionSection==='leche'?'bg-blue-600 text-white shadow-md':'bg-transparent text-gray-700 hover:bg-gray-200'),children:\"Producci\\xF3n de Leche\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentProductionSection('carne'),className:\"px-6 py-2 rounded-lg font-semibold transition-all duration-300 \".concat(currentProductionSection==='carne'?'bg-blue-600 text-white':'bg-transparent text-gray-700 hover:bg-gray-200'),children:\"Producci\\xF3n de Carne\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentProductionSection('potreros'),className:\"px-6 py-2 rounded-lg font-semibold transition-all duration-300 \".concat(currentProductionSection==='potreros'?'bg-blue-600 text-white':'bg-transparent text-gray-700 hover:bg-gray-200'),children:\"Control de Potreros\"})]}),currentProductionSection!=='potreros'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 border border-gray-200 rounded-lg bg-gray-50 shadow-sm mb-8\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold mb-4 text-gray-800\",children:\"An\\xE1lisis de Tendencias de Producci\\xF3n\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-white rounded-lg shadow-inner border border-gray-100\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 font-bold mb-2\",children:\"Tendencia de Leche:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xl font-bold \".concat(milkTrend==='aumentando'?'text-green-600':milkTrend==='decayendo'?'text-red-600':'text-gray-600'),children:milkTrend==='aumentando'?'¡Aumentando! 📈':milkTrend==='decayendo'?'¡Decayendo! 📉':'Estable ↔️'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-2\",children:milkAdvice})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-white rounded-lg shadow-inner border border-gray-100\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 font-bold mb-2\",children:\"Tendencia de Carne:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xl font-bold \".concat(meatTrend==='aumentando'?'text-green-600':meatTrend==='decayendo'?'text-red-600':'text-gray-600'),children:meatTrend==='aumentando'?'¡Aumentando! 📈':meatTrend==='decayendo'?'¡Decayendo! 📉':'Estable ↔️'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-2\",children:meatAdvice})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 border border-blue-200 rounded-lg bg-blue-50 shadow-sm mb-8\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold mb-4 text-blue-800\",children:\"Historial de Consejos de la IA\"}),aiAdviceHistory.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"A\\xFAn no hay consejos de la IA. \\xA1Registra m\\xE1s producci\\xF3n para obtenerlos!\"}):/*#__PURE__*/_jsx(\"div\",{className:\"max-h-60 overflow-y-auto custom-scrollbar p-2\",children:aiAdviceHistory.map((advice,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 p-3 bg-blue-100 rounded-lg border border-blue-200 flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600 text-xl\",children:\"\\uD83D\\uDCA1\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-800 font-medium\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold\",children:[advice.date,\" - \",advice.type.charAt(0).toUpperCase()+advice.type.slice(1),\":\"]})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-700 mt-1\",children:advice.advice})]})]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 border border-gray-200 rounded-lg bg-gray-50 shadow-sm mb-8\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold mb-4 text-gray-800\",children:\"Registrar Nueva Producci\\xF3n\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"animalId\",className:\"block text-gray-700 text-sm font-bold mb-1\",children:\"Animal:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"animalId\",name:\"animalId\",className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition\",value:productionData.animalId,onChange:handleProductionChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecciona Animal\"}),animals.map(animal=>/*#__PURE__*/_jsxs(\"option\",{value:animal.id,children:[animal.name,\" (\",animal.id,\")\"]},animal.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fechaRegistro\",className:\"block text-gray-700 text-sm font-bold mb-1\",children:\"Fecha de Registro:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"fechaRegistro\",name:\"fechaRegistro\",placeholder:\"Fecha de Registro\",className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition\",value:productionData.fechaRegistro,onChange:handleProductionChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"tipoProduccion\",className:\"block text-gray-700 text-sm font-bold mb-1\",children:\"Tipo de Producci\\xF3n:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"tipoProduccion\",name:\"tipoProduccion\",className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition\",value:productionData.tipoProduccion,onChange:handleProductionChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecciona Tipo\"}),/*#__PURE__*/_jsx(\"option\",{value:\"leche\",children:\"Leche\"}),/*#__PURE__*/_jsx(\"option\",{value:\"carne\",children:\"Carne\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"cantidad\",className:\"block text-gray-700 text-sm font-bold mb-1\",children:\"Cantidad:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"cantidad\",name:\"cantidad\",placeholder:\"Cantidad\",className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition\",value:productionData.cantidad,onChange:handleProductionChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"unidadMedida\",className:\"block text-gray-700 text-sm font-bold mb-1\",children:\"Unidad de Medida:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"unidadMedida\",name:\"unidadMedida\",placeholder:\"Unidad de Medida (ej. litros, kg)\",className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition\",value:productionData.unidadMedida,onChange:handleProductionChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col col-span-full\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"observaciones\",className:\"block text-gray-700 text-sm font-bold mb-1\",children:\"Observaciones:\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"observaciones\",name:\"observaciones\",placeholder:\"Observaciones\",rows:\"2\",className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition resize-none\",value:productionData.observaciones,onChange:handleProductionChange})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleProductionSubmit,className:\"w-full mt-6 bg-black text-white py-2 rounded-lg hover:bg-gray-800 transition-colors shadow-md\",children:\"Registrar Producci\\xF3n\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 border border-gray-200 rounded-lg bg-gray-50 shadow-sm\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold mb-4 text-gray-800\",children:\"Historial de Producci\\xF3n\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end mb-4 space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleExportProductionHistory('csv'),className:\"bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors shadow-md\",children:\"Exportar a CSV\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleExportProductionHistory('pdf'),className:\"bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition-colors shadow-md\",children:\"Exportar a PDF\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto rounded-lg shadow-md border border-gray-200\",children:/*#__PURE__*/_jsxs(\"table\",{ref:productionTableRef,className:\"min-w-full bg-white text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-800 text-white\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold rounded-tl-lg\",children:\"ID Registro\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold\",children:\"ID Animal\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold\",children:\"Fecha\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold\",children:\"Tipo\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold\",children:\"Cantidad\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold\",children:\"Unidad\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold\",children:\"Observaciones\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold rounded-tr-lg\",children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"divide-y divide-gray-200\",children:filteredProductionRecords.map(record=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-100 transition-colors\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:record.id}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:record.animalId}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:record.fechaRegistro}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:record.tipoProduccion}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:record.cantidad}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:record.unidadMedida}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:record.observaciones}),/*#__PURE__*/_jsxs(\"td\",{className:\"py-3 px-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>startEditingProductionRecord(record),className:\"text-blue-600 hover:text-blue-800 font-medium mr-2 transition-colors\",children:\"Editar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteProductionRecord(record.id),className:\"text-red-600 hover:text-red-800 font-medium transition-colors\",children:\"Eliminar\"})]})]},record.id))})]})}),editingRecord&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8 p-6 border border-yellow-300 rounded-lg bg-yellow-50 shadow-lg\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-lg font-semibold mb-4 text-gray-800\",children:[\"Editar Registro de Producci\\xF3n: \",editingRecord.id]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-1\",children:\"ID Animal:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"animalId\",className:\"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-200 cursor-not-allowed\",value:editingRecord.animalId,readOnly:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-1\",children:\"Fecha Registro:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"fechaRegistro\",className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition\",value:editingRecord.fechaRegistro,onChange:handleEditingProductionChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-1\",children:\"Tipo Producci\\xF3n:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"tipoProduccion\",className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition\",value:editingRecord.tipoProduccion,onChange:handleEditingProductionChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-1\",children:\"Cantidad:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"cantidad\",className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition\",value:editingRecord.cantidad,onChange:handleEditingProductionChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-1\",children:\"Unidad Medida:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"unidadMedida\",className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition\",value:editingRecord.unidadMedida,onChange:handleEditingProductionChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col col-span-full\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-1\",children:\"Observaciones:\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"observaciones\",rows:\"3\",className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition resize-none\",value:editingRecord.observaciones,onChange:handleEditingProductionChange})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 flex justify-end space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:saveEditedProductionRecord,className:\"bg-green-600 text-white py-2 px-5 rounded-lg hover:bg-green-700 transition-colors shadow-md\",children:\"Guardar Cambios\"}),/*#__PURE__*/_jsx(\"button\",{onClick:cancelEditingProductionRecord,className:\"bg-gray-600 text-white py-2 px-5 rounded-lg hover:bg-gray-700 transition-colors shadow-md\",children:\"Cancelar Edici\\xF3n\"})]})]})]})]}),currentProductionSection==='potreros'&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 border border-gray-200 rounded-lg bg-gray-50 shadow-sm\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold mb-4 text-gray-800\",children:\"Control de Potreros\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 p-4 border border-gray-200 rounded-lg bg-white shadow-inner\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",children:\"Subir Mapa de Potreros (JPG)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/jpeg\",onChange:handlePastureMapUpload,className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition\"}),pastureMap&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 text-center p-2 border border-gray-200 rounded-lg bg-gray-50\",children:/*#__PURE__*/_jsx(\"img\",{src:pastureMap,alt:\"Mapa de Potreros\",className:\"max-h-80 mx-auto rounded-lg shadow-md\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 border border-gray-200 rounded-lg bg-gray-100 shadow-inner mb-8\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-md font-semibold mb-4 text-gray-800\",children:\"Registrar Nuevo Potrero\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"pastureName\",className:\"block text-gray-700 text-sm font-bold mb-1\",children:\"Nombre/N\\xFAmero del Potrero:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"pastureName\",name:\"name\",placeholder:\"Ej. Potrero 1, La Loma\",className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition\",value:pastureData.name,onChange:handlePastureDataChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"pastureSize\",className:\"block text-gray-700 text-sm font-bold mb-1\",children:\"Tama\\xF1o (m\\xB2):\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"pastureSize\",name:\"size\",placeholder:\"Ej. 5000\",className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition\",value:pastureData.size,onChange:handlePastureDataChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"grassType\",className:\"block text-gray-700 text-sm font-bold mb-1\",children:\"Tipo de Pasto:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"grassType\",name:\"grassType\",placeholder:\"Ej. Brachiaria, Estrella\",className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition\",value:pastureData.grassType,onChange:handlePastureDataChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"cowCount\",className:\"block text-gray-700 text-sm font-bold mb-1\",children:\"Cantidad de Vacas a Pastorear:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"cowCount\",name:\"cowCount\",placeholder:\"Ej. 15\",className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition\",value:pastureData.cowCount,onChange:handlePastureDataChange})]}),pastureData.recommendedDays!==''&&/*#__PURE__*/_jsxs(\"p\",{className:\"col-span-full text-sm text-gray-700 font-bold p-2 bg-blue-100 rounded-lg border border-blue-200\",children:[\"Recomendaci\\xF3n IA: Este potrero puede usarse por \",/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-700 font-extrabold\",children:pastureData.recommendedDays}),\" d\\xEDas con \",/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-700 font-extrabold\",children:pastureData.cowCount}),\" vacas.\"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddPasture,className:\"w-full mt-6 bg-black text-white py-2 rounded-lg hover:bg-gray-800 transition-colors shadow-md\",children:\"Registrar Potrero\"})]}),/*#__PURE__*/_jsx(\"h5\",{className:\"text-lg font-semibold mb-4 text-gray-800\",children:\"Estado de Potreros\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto rounded-lg shadow-md border border-gray-200\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full bg-white text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-800 text-white\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold\",children:\"Nombre\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold\",children:\"Tama\\xF1o\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold\",children:\"Tipo de Pasto\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold\",children:\"Estado\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold\",children:\"\\xDAltimo Uso\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold\",children:\"Vacas\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold\",children:\"D\\xEDas Rec.\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold\",children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"divide-y divide-gray-200\",children:pastures.map(pasture=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-100 transition-colors\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:pasture.name}),/*#__PURE__*/_jsxs(\"td\",{className:\"py-3 px-4\",children:[pasture.size,\" m\\xB2\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:pasture.grassType}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"font-bold \".concat(pasture.status==='disponible'?'text-green-600':pasture.status==='en_uso'?'text-blue-600':'text-red-600'),children:pasture.status.replace('_',' ').toUpperCase()})}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:pasture.lastUsedDate||'N/A'}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:pasture.cowCount||'N/A'}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:pasture.recommendedDays||'N/A'}),/*#__PURE__*/_jsxs(\"td\",{className:\"py-3 px-4\",children:[pasture.status==='disponible'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleUsePasture(pasture.id),className:\"bg-blue-500 text-white py-1 px-3 rounded-lg hover:bg-blue-600 transition-colors text-xs shadow-sm mr-2\",children:\"Usar\"}),pasture.status==='en_uso'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleFinalizePastureUse(pasture.id),className:\"bg-orange-500 text-white py-1 px-3 rounded-lg hover:bg-orange-600 transition-colors text-xs shadow-sm mr-2\",children:\"Finalizar Uso\"})]})]},pasture.id))})]})})]})]});};export default ProductionControlPage;","map":{"version":3,"names":["React","useState","useRef","useEffect","exportToCsv","exportTableToPdf","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProductionControlPage","_ref","animals","onUpdateAnimalProduction","onRegisterProductionRecord","productionRecords","setProductionRecords","currentUser","logoUrl","currentProductionSection","setCurrentProductionSection","productionData","setProductionData","animalId","fechaRegistro","tipoProduccion","cantidad","unidadMedida","observaciones","editingRecord","setEditingRecord","productionTableRef","milkTrend","setMilkTrend","meatTrend","setMeatTrend","milkAdvice","setMilkAdvice","meatAdvice","setMeatAdvice","aiAdviceHistory","setAiAdviceHistory","pastureMap","setPastureMap","pastureData","setPastureData","name","size","grassType","status","lastUsedDate","cowCount","recommendedDays","pastures","setPastures","analyzeProductionAndAdvise","records","type","relevantRecords","filter","record","sort","a","b","Date","length","trend","advice","latestRecords","slice","increasingCount","decreasingCount","i","concat","milkT","milkA","prev","date","toISOString","split","meatT","meatA","handleProductionChange","e","value","target","_objectSpread","handleProductionSubmit","alert","id","now","toString","parseFloat","handleDeleteProductionRecord","recordId","window","confirm","updatedRecords","startEditingProductionRecord","handleEditingProductionChange","saveEditedProductionRecord","map","cancelEditingProductionRecord","handleExportProductionHistory","format","filename","farmName","adminName","fullName","current","filteredProductionRecords","handlePastureMapUpload","file","files","reader","FileReader","onloadend","result","readAsDataURL","calculateRecommendedDays","pastureSizeM2","baseAreaPerCowPerDay","totalCowDaysCapacity","days","Math","round","handlePastureDataChange","updatedPastureData","currentCowCount","currentPastureSize","isNaN","handleAddPasture","newPasture","handleUsePasture","p","handleFinalizePastureUse","today","updatedPastures","lastUsed","diffTime","abs","diffDays","ceil","forEach","console","warn","className","children","onClick","index","charAt","toUpperCase","htmlFor","onChange","animal","placeholder","rows","ref","readOnly","accept","src","alt","pasture","replace"],"sources":["C:/Users/User/Downloads/project (10)/src/components/ProductionControlPage.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { exportToCsv, exportTableToPdf } from '../utils/exportHelpers'; // Importar funciones de exportación\n\nconst ProductionControlPage = ({ animals, onUpdateAnimalProduction, onRegisterProductionRecord, productionRecords, setProductionRecords, currentUser, logoUrl }) => {\n  const [currentProductionSection, setCurrentProductionSection] = useState('general'); // 'general', 'leche', 'carne', 'potreros'\n\n  const [productionData, setProductionData] = useState({\n    animalId: '',\n    fechaRegistro: '',\n    tipoProduccion: '', // 'leche', 'carne'\n    cantidad: '', // Cantidad de producción (ej. litros de leche, kg de carne)\n    unidadMedida: '', // 'litros', 'kg'\n    observaciones: '',\n  });\n\n  const [editingRecord, setEditingRecord] = useState(null); // To hold the record being edited\n  const productionTableRef = useRef(null); // Ref for the production history table\n\n  // Estados para el análisis de tendencias y consejos de IA\n  const [milkTrend, setMilkTrend] = useState('estable'); // 'aumentando', 'decayendo', 'estable'\n  const [meatTrend, setMeatTrend] = useState('estable'); // 'aumentando', 'decayendo', 'estable'\n  const [milkAdvice, setMilkAdvice] = useState('');\n  const [meatAdvice, setMeatAdvice] = useState('');\n  const [aiAdviceHistory, setAiAdviceHistory] = useState([]); // Nuevo estado para el historial de consejos\n\n  // Estados para el control de potreros\n  const [pastureMap, setPastureMap] = useState(null);\n  const [pastureData, setPastureData] = useState({\n    name: '',\n    size: '', // en hectáreas o m2\n    grassType: '',\n    status: 'disponible', // 'disponible', 'en_uso', 'no_disponible'\n    lastUsedDate: '', // Fecha de finalización de uso\n    cowCount: '', // Cantidad de vacas a pastorear\n    recommendedDays: '', // Días recomendados por la IA\n  });\n  const [pastures, setPastures] = useState([]); // Lista de potreros registrados\n\n  // Función para calcular la tendencia y generar consejos\n  const analyzeProductionAndAdvise = (records, type) => {\n    const relevantRecords = records\n      .filter(record => record.tipoProduccion === type)\n      .sort((a, b) => new Date(a.fechaRegistro) - new Date(b.fechaRegistro));\n\n    if (relevantRecords.length < 2) {\n      return { trend: 'estable', advice: 'Necesitamos más datos para analizar la tendencia de producción.' };\n    }\n\n    const latestRecords = relevantRecords.slice(-3); // Tomar los últimos 3 registros para un análisis simple\n\n    if (latestRecords.length < 2) {\n      return { trend: 'estable', advice: 'Necesitamos al menos dos registros para analizar la tendencia.' };\n    }\n\n    let increasingCount = 0;\n    let decreasingCount = 0;\n\n    for (let i = 1; i < latestRecords.length; i++) {\n      if (latestRecords[i].cantidad > latestRecords[i - 1].cantidad) {\n        increasingCount++;\n      } else if (latestRecords[i].cantidad < latestRecords[i - 1].cantidad) {\n        decreasingCount++;\n      }\n    }\n\n    let trend = 'estable';\n    let advice = '';\n\n    if (increasingCount > decreasingCount) {\n      trend = 'aumentando';\n      advice = `¡Excelente! La producción de ${type} está aumentando. Sigue con las buenas prácticas de alimentación y manejo.`;\n    } else if (decreasingCount > increasingCount) {\n      trend = 'decayendo';\n      advice = `¡Atención! La producción de ${type} está decayendo. Considera revisar la dieta, el estado de salud del animal o el manejo del estrés.`;\n    } else {\n      trend = 'estable';\n      advice = `La producción de ${type} se mantiene estable. Si buscas mejorarla, evalúa optimizar la alimentación o el confort del animal.`;\n    }\n\n    return { trend, advice };\n  };\n\n  useEffect(() => {\n    const { trend: milkT, advice: milkA } = analyzeProductionAndAdvise(productionRecords, 'leche');\n    setMilkTrend(milkT);\n    setMilkAdvice(milkA);\n    if (milkA && milkA !== 'Necesitamos más datos para analizar la tendencia de producción.' && milkA !== 'Necesitamos al menos dos registros para analizar la tendencia.') {\n      setAiAdviceHistory(prev => [...prev, { date: new Date().toISOString().split('T')[0], type: 'leche', advice: milkA }]);\n    }\n\n    const { trend: meatT, advice: meatA } = analyzeProductionAndAdvise(productionRecords, 'carne');\n    setMeatTrend(meatT);\n    setMeatAdvice(meatA);\n    if (meatA && meatA !== 'Necesitamos más datos para analizar la tendencia de producción.' && meatA !== 'Necesitamos al menos dos registros para analizar la tendencia.') {\n      setAiAdviceHistory(prev => [...prev, { date: new Date().toISOString().split('T')[0], type: 'carne', advice: meatA }]);\n    }\n  }, [productionRecords]);\n\n  const handleProductionChange = (e) => {\n    const { name, value } = e.target;\n    setProductionData({ ...productionData, [name]: value });\n  };\n\n  const handleProductionSubmit = () => {\n    const { animalId, fechaRegistro, tipoProduccion, cantidad, unidadMedida, observaciones } = productionData;\n\n    if (!animalId || !fechaRegistro || !tipoProduccion || !cantidad || !unidadMedida) {\n      alert('¡Ups! Para registrar la producción, necesitamos que completes todos los campos obligatorios. ¡No te rindas, ya casi lo logras!');\n      return;\n    }\n\n    onRegisterProductionRecord({\n      id: `PROD-${Date.now().toString().slice(-5)}`, // Generar ID único\n      animalId,\n      fechaRegistro,\n      tipoProduccion,\n      cantidad: parseFloat(cantidad),\n      unidadMedida,\n      observaciones,\n    });\n\n    alert('¡Producción registrada con éxito! ¡Tus animales son unos campeones!');\n    setProductionData({\n      animalId: '',\n      fechaRegistro: '',\n      tipoProduccion: '',\n      cantidad: '',\n      unidadMedida: '',\n      observaciones: '',\n    });\n  };\n\n  const handleDeleteProductionRecord = (recordId) => {\n    if (window.confirm('¿Estás seguro de que quieres eliminar este registro de producción? ¡Esta acción no se puede deshacer!')) {\n      const updatedRecords = productionRecords.filter(record => record.id !== recordId);\n      setProductionRecords(updatedRecords); // Update state in App.js via prop\n      alert('¡Registro de producción eliminado! Como si nunca hubiera existido.');\n    }\n  };\n\n  const startEditingProductionRecord = (record) => {\n    setEditingRecord({ ...record }); // Create a copy to edit\n    alert('¡A editar se ha dicho! Modifica los campos y guarda los cambios.');\n  };\n\n  const handleEditingProductionChange = (e) => {\n    const { name, value } = e.target;\n    setEditingRecord(prev => ({ ...prev, [name]: value }));\n  };\n\n  const saveEditedProductionRecord = () => {\n    const updatedRecords = productionRecords.map(record =>\n      record.id === editingRecord.id ? editingRecord : record\n    );\n    setProductionRecords(updatedRecords); // Update state in App.js via prop\n    setEditingRecord(null); // Exit editing mode\n    alert('¡Cambios guardados! Tu historial de producción está al día.');\n  };\n\n  const cancelEditingProductionRecord = () => {\n    setEditingRecord(null); // Exit editing mode\n    alert('¡Edición cancelada! No te preocupes, tus datos están a salvo.');\n  };\n\n  const handleExportProductionHistory = async (format) => {\n    if (productionRecords.length === 0) {\n      alert('¡No hay registros de producción para exportar! ¿Qué esperas para empezar a registrar?');\n      return;\n    }\n\n    const filename = `historial_produccion_${new Date().toISOString().split('T')[0]}`;\n    const farmName = currentUser?.farmName || 'Mi Finca Ganadera';\n    const adminName = currentUser?.fullName || 'Administrador';\n\n    if (format === 'csv') {\n      exportToCsv(productionRecords, filename);\n      alert('¡Exportando a CSV! Tu historial estará listo en un santiamén.');\n    } else if (format === 'pdf') {\n      await exportTableToPdf(productionTableRef.current, filename, 'Historial de Producción', farmName, adminName, logoUrl);\n      alert('¡Generando PDF! Tu historial se verá de lujo en papel.');\n    }\n  };\n\n  const filteredProductionRecords = productionRecords.filter(record => {\n    if (currentProductionSection === 'carne' && record.tipoProduccion !== 'carne') {\n      return false;\n    }\n    if (currentProductionSection === 'leche' && record.tipoProduccion !== 'leche') {\n      return false;\n    }\n    return true;\n  });\n\n  // --- Lógica de Potreros ---\n  const handlePastureMapUpload = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setPastureMap(reader.result);\n        alert('¡Mapa de potreros subido con éxito!');\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const calculateRecommendedDays = (cowCount, pastureSizeM2) => {\n    // Asumiendo 5000m2 por potrero como base para las reglas dadas\n    // Reglas: 18-20 vacas = 1 día, 10 vacas = 2 días\n    // Esto es una simplificación, la capacidad de carga real depende de muchos factores\n    const baseAreaPerCowPerDay = 5000 / 18; // m2 por vaca por día (para 18 vacas en 5000m2)\n\n    if (cowCount <= 0 || pastureSizeM2 <= 0) return 0;\n\n    const totalCowDaysCapacity = pastureSizeM2 / baseAreaPerCowPerDay;\n    const days = totalCowDaysCapacity / cowCount;\n\n    return Math.round(days);\n  };\n\n  const handlePastureDataChange = (e) => {\n    const { name, value } = e.target;\n    let updatedPastureData = { ...pastureData, [name]: value };\n\n    if (name === 'cowCount' || name === 'size') {\n      const currentCowCount = name === 'cowCount' ? parseFloat(value) : parseFloat(pastureData.cowCount);\n      const currentPastureSize = name === 'size' ? parseFloat(value) : parseFloat(pastureData.size);\n      if (!isNaN(currentCowCount) && !isNaN(currentPastureSize) && currentPastureSize > 0) {\n        updatedPastureData.recommendedDays = calculateRecommendedDays(currentCowCount, currentPastureSize);\n      } else {\n        updatedPastureData.recommendedDays = '';\n      }\n    }\n    setPastureData(updatedPastureData);\n  };\n\n  const handleAddPasture = () => {\n    if (!pastureData.name || !pastureData.size || !pastureData.grassType || !pastureData.cowCount) {\n      alert('¡Faltan datos! Por favor, completa el nombre, tamaño, tipo de pasto y cantidad de vacas.');\n      return;\n    }\n    const newPasture = { ...pastureData, id: `POT-${Date.now().toString().slice(-5)}` };\n    setPastures(prev => [...prev, newPasture]);\n    alert(`¡Potrero ${newPasture.name} registrado con éxito!`);\n    setPastureData({ name: '', size: '', grassType: '', status: 'disponible', lastUsedDate: '', cowCount: '', recommendedDays: '' });\n  };\n\n  const handleUsePasture = (id) => {\n    setPastures(prev => prev.map(p => p.id === id ? { ...p, status: 'en_uso', lastUsedDate: '' } : p));\n    alert('¡Potrero marcado como en uso!');\n  };\n\n  const handleFinalizePastureUse = (id) => {\n    setPastures(prev => prev.map(p => p.id === id ? { ...p, status: 'no_disponible', lastUsedDate: new Date().toISOString().split('T')[0] } : p));\n    alert('¡Uso de potrero finalizado! Iniciando periodo de descanso.');\n  };\n\n  // Automatización de estado de potreros\n  useEffect(() => {\n    const today = new Date();\n    const updatedPastures = pastures.map(p => {\n      if (p.status === 'no_disponible' && p.lastUsedDate) {\n        const lastUsed = new Date(p.lastUsedDate);\n        const diffTime = Math.abs(today - lastUsed);\n        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n        if (diffDays >= 30) { // 30 días de descanso\n          return { ...p, status: 'disponible' };\n        }\n      }\n      return p;\n    });\n    setPastures(updatedPastures);\n\n    // Aviso de no dejar pasar el potrero de no más de 90 días\n    pastures.forEach(p => {\n      if (p.status === 'disponible' && p.lastUsedDate) {\n        const lastUsed = new Date(p.lastUsedDate);\n        const diffTime = Math.abs(today - lastUsed);\n        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n        if (diffDays > 90) {\n          console.warn(`¡Atención! El potrero ${p.name} lleva ${diffDays} días sin usarse. Considera rotarlo.`);\n        }\n      }\n    });\n  }, [pastures]);\n\n\n  return (\n    <div className=\"bg-white p-6 rounded-lg shadow-md\">\n      <h3 className=\"text-xl font-semibold mb-4 text-gray-800\">Control de Producción y Potreros</h3>\n\n      {/* Navegación de Secciones */}\n      <div className=\"flex justify-center mb-8 space-x-4 p-2 bg-gray-100 rounded-lg shadow-inner\">\n        <button\n          onClick={() => setCurrentProductionSection('general')}\n          className={`px-6 py-2 rounded-lg font-semibold transition-all duration-300 ${currentProductionSection === 'general' ? 'bg-blue-600 text-white shadow-md' : 'bg-transparent text-gray-700 hover:bg-gray-200'}`}\n        >\n          Producción General\n        </button>\n        <button\n          onClick={() => setCurrentProductionSection('leche')}\n          className={`px-6 py-2 rounded-lg font-semibold transition-all duration-300 ${currentProductionSection === 'leche' ? 'bg-blue-600 text-white shadow-md' : 'bg-transparent text-gray-700 hover:bg-gray-200'}`}\n        >\n          Producción de Leche\n        </button>\n        <button\n          onClick={() => setCurrentProductionSection('carne')}\n          className={`px-6 py-2 rounded-lg font-semibold transition-all duration-300 ${currentProductionSection === 'carne' ? 'bg-blue-600 text-white' : 'bg-transparent text-gray-700 hover:bg-gray-200'}`}\n        >\n          Producción de Carne\n        </button>\n        <button\n          onClick={() => setCurrentProductionSection('potreros')}\n          className={`px-6 py-2 rounded-lg font-semibold transition-all duration-300 ${currentProductionSection === 'potreros' ? 'bg-blue-600 text-white' : 'bg-transparent text-gray-700 hover:bg-gray-200'}`}\n        >\n          Control de Potreros\n        </button>\n      </div>\n\n      {currentProductionSection !== 'potreros' && (\n        <>\n          {/* Sección de Tendencias y Consejos */}\n          <div className=\"p-6 border border-gray-200 rounded-lg bg-gray-50 shadow-sm mb-8\">\n            <h4 className=\"text-lg font-semibold mb-4 text-gray-800\">Análisis de Tendencias de Producción</h4>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div className=\"p-4 bg-white rounded-lg shadow-inner border border-gray-100\">\n                <p className=\"text-gray-700 font-bold mb-2\">Tendencia de Leche:</p>\n                <span className={`text-xl font-bold ${milkTrend === 'aumentando' ? 'text-green-600' : milkTrend === 'decayendo' ? 'text-red-600' : 'text-gray-600'}`}>\n                  {milkTrend === 'aumentando' ? '¡Aumentando! 📈' : milkTrend === 'decayendo' ? '¡Decayendo! 📉' : 'Estable ↔️'}\n                </span>\n                <p className=\"text-sm text-gray-600 mt-2\">{milkAdvice}</p>\n              </div>\n              <div className=\"p-4 bg-white rounded-lg shadow-inner border border-gray-100\">\n                <p className=\"text-gray-700 font-bold mb-2\">Tendencia de Carne:</p>\n                <span className={`text-xl font-bold ${meatTrend === 'aumentando' ? 'text-green-600' : meatTrend === 'decayendo' ? 'text-red-600' : 'text-gray-600'}`}>\n                  {meatTrend === 'aumentando' ? '¡Aumentando! 📈' : meatTrend === 'decayendo' ? '¡Decayendo! 📉' : 'Estable ↔️'}\n                </span>\n                <p className=\"text-sm text-gray-600 mt-2\">{meatAdvice}</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Historial de Consejos de la IA */}\n          <div className=\"p-6 border border-blue-200 rounded-lg bg-blue-50 shadow-sm mb-8\">\n            <h4 className=\"text-lg font-semibold mb-4 text-blue-800\">Historial de Consejos de la IA</h4>\n            {aiAdviceHistory.length === 0 ? (\n              <p className=\"text-gray-600\">Aún no hay consejos de la IA. ¡Registra más producción para obtenerlos!</p>\n            ) : (\n              <div className=\"max-h-60 overflow-y-auto custom-scrollbar p-2\">\n                {aiAdviceHistory.map((advice, index) => (\n                  <div key={index} className=\"mb-3 p-3 bg-blue-100 rounded-lg border border-blue-200 flex items-start space-x-3\">\n                    <span className=\"text-blue-600 text-xl\">💡</span>\n                    <div>\n                      <p className=\"text-sm text-gray-800 font-medium\">\n                        <span className=\"font-bold\">{advice.date} - {advice.type.charAt(0).toUpperCase() + advice.type.slice(1)}:</span>\n                      </p>\n                      <p className=\"text-sm text-gray-700 mt-1\">{advice.advice}</p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n\n          {/* Formulario de Registro de Producción */}\n          <div className=\"p-6 border border-gray-200 rounded-lg bg-gray-50 shadow-sm mb-8\">\n            <h4 className=\"text-lg font-semibold mb-4 text-gray-800\">Registrar Nueva Producción</h4>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"flex flex-col\">\n                <label htmlFor=\"animalId\" className=\"block text-gray-700 text-sm font-bold mb-1\">Animal:</label>\n                <select\n                  id=\"animalId\"\n                  name=\"animalId\"\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition\"\n                  value={productionData.animalId}\n                  onChange={handleProductionChange}\n                >\n                  <option value=\"\">Selecciona Animal</option>\n                  {animals.map(animal => (\n                    <option key={animal.id} value={animal.id}>{animal.name} ({animal.id})</option>\n                  ))}\n                </select>\n              </div>\n              <div className=\"flex flex-col\">\n                <label htmlFor=\"fechaRegistro\" className=\"block text-gray-700 text-sm font-bold mb-1\">Fecha de Registro:</label>\n                <input\n                  type=\"date\"\n                  id=\"fechaRegistro\"\n                  name=\"fechaRegistro\"\n                  placeholder=\"Fecha de Registro\"\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition\"\n                  value={productionData.fechaRegistro}\n                  onChange={handleProductionChange}\n                />\n              </div>\n              <div className=\"flex flex-col\">\n                <label htmlFor=\"tipoProduccion\" className=\"block text-gray-700 text-sm font-bold mb-1\">Tipo de Producción:</label>\n                <select\n                  id=\"tipoProduccion\"\n                  name=\"tipoProduccion\"\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition\"\n                  value={productionData.tipoProduccion}\n                  onChange={handleProductionChange}\n                >\n                  <option value=\"\">Selecciona Tipo</option>\n                  <option value=\"leche\">Leche</option>\n                  <option value=\"carne\">Carne</option>\n                </select>\n              </div>\n              <div className=\"flex flex-col\">\n                <label htmlFor=\"cantidad\" className=\"block text-gray-700 text-sm font-bold mb-1\">Cantidad:</label>\n                <input\n                  type=\"number\"\n                  id=\"cantidad\"\n                  name=\"cantidad\"\n                  placeholder=\"Cantidad\"\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition\"\n                  value={productionData.cantidad}\n                  onChange={handleProductionChange}\n                />\n              </div>\n              <div className=\"flex flex-col\">\n                <label htmlFor=\"unidadMedida\" className=\"block text-gray-700 text-sm font-bold mb-1\">Unidad de Medida:</label>\n                <input\n                  type=\"text\"\n                  id=\"unidadMedida\"\n                  name=\"unidadMedida\"\n                  placeholder=\"Unidad de Medida (ej. litros, kg)\"\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition\"\n                  value={productionData.unidadMedida}\n                  onChange={handleProductionChange}\n                />\n              </div>\n              <div className=\"flex flex-col col-span-full\">\n                <label htmlFor=\"observaciones\" className=\"block text-gray-700 text-sm font-bold mb-1\">Observaciones:</label>\n                <textarea\n                  id=\"observaciones\"\n                  name=\"observaciones\"\n                  placeholder=\"Observaciones\"\n                  rows=\"2\"\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition resize-none\"\n                  value={productionData.observaciones}\n                  onChange={handleProductionChange}\n                ></textarea>\n              </div>\n            </div>\n            <button\n              onClick={handleProductionSubmit}\n              className=\"w-full mt-6 bg-black text-white py-2 rounded-lg hover:bg-gray-800 transition-colors shadow-md\"\n            >\n              Registrar Producción\n            </button>\n          </div>\n\n          {/* Historial de Producción */}\n          <div className=\"p-6 border border-gray-200 rounded-lg bg-gray-50 shadow-sm\">\n            <h4 className=\"text-lg font-semibold mb-4 text-gray-800\">Historial de Producción</h4>\n            <div className=\"flex justify-end mb-4 space-x-2\">\n              <button\n                onClick={() => handleExportProductionHistory('csv')}\n                className=\"bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors shadow-md\"\n              >\n                Exportar a CSV\n              </button>\n              <button\n                onClick={() => handleExportProductionHistory('pdf')}\n                className=\"bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition-colors shadow-md\"\n              >\n                Exportar a PDF\n              </button>\n            </div>\n            <div className=\"overflow-x-auto rounded-lg shadow-md border border-gray-200\">\n              <table ref={productionTableRef} className=\"min-w-full bg-white text-sm\">\n                <thead className=\"bg-gray-800 text-white\">\n                  <tr>\n                    <th className=\"py-3 px-4 text-left font-semibold rounded-tl-lg\">ID Registro</th>\n                    <th className=\"py-3 px-4 text-left font-semibold\">ID Animal</th>\n                    <th className=\"py-3 px-4 text-left font-semibold\">Fecha</th>\n                    <th className=\"py-3 px-4 text-left font-semibold\">Tipo</th>\n                    <th className=\"py-3 px-4 text-left font-semibold\">Cantidad</th>\n                    <th className=\"py-3 px-4 text-left font-semibold\">Unidad</th>\n                    <th className=\"py-3 px-4 text-left font-semibold\">Observaciones</th>\n                    <th className=\"py-3 px-4 text-left font-semibold rounded-tr-lg\">Acciones</th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-gray-200\">\n                  {filteredProductionRecords.map((record) => (\n                    <tr key={record.id} className=\"hover:bg-gray-100 transition-colors\">\n                      <td className=\"py-3 px-4\">{record.id}</td>\n                      <td className=\"py-3 px-4\">{record.animalId}</td>\n                      <td className=\"py-3 px-4\">{record.fechaRegistro}</td>\n                      <td className=\"py-3 px-4\">{record.tipoProduccion}</td>\n                      <td className=\"py-3 px-4\">{record.cantidad}</td>\n                      <td className=\"py-3 px-4\">{record.unidadMedida}</td>\n                      <td className=\"py-3 px-4\">{record.observaciones}</td>\n                      <td className=\"py-3 px-4\">\n                        <button\n                          onClick={() => startEditingProductionRecord(record)}\n                          className=\"text-blue-600 hover:text-blue-800 font-medium mr-2 transition-colors\"\n                        >\n                          Editar\n                        </button>\n                        <button\n                          onClick={() => handleDeleteProductionRecord(record.id)}\n                          className=\"text-red-600 hover:text-red-800 font-medium transition-colors\"\n                        >\n                          Eliminar\n                        </button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n\n            {/* Edit Form for Production Record */}\n            {editingRecord && (\n              <div className=\"mt-8 p-6 border border-yellow-300 rounded-lg bg-yellow-50 shadow-lg\">\n                <h4 className=\"text-lg font-semibold mb-4 text-gray-800\">Editar Registro de Producción: {editingRecord.id}</h4>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div className=\"flex flex-col\">\n                    <label className=\"block text-gray-700 text-sm font-bold mb-1\">ID Animal:</label>\n                    <input\n                      type=\"text\"\n                      name=\"animalId\"\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-200 cursor-not-allowed\"\n                      value={editingRecord.animalId}\n                      readOnly\n                    />\n                  </div>\n                  <div className=\"flex flex-col\">\n                    <label className=\"block text-gray-700 text-sm font-bold mb-1\">Fecha Registro:</label>\n                    <input\n                      type=\"date\"\n                      name=\"fechaRegistro\"\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition\"\n                      value={editingRecord.fechaRegistro}\n                      onChange={handleEditingProductionChange}\n                    />\n                  </div>\n                  <div className=\"flex flex-col\">\n                    <label className=\"block text-gray-700 text-sm font-bold mb-1\">Tipo Producción:</label>\n                    <input\n                      type=\"text\"\n                      name=\"tipoProduccion\"\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition\"\n                      value={editingRecord.tipoProduccion}\n                      onChange={handleEditingProductionChange}\n                    />\n                  </div>\n                  <div className=\"flex flex-col\">\n                    <label className=\"block text-gray-700 text-sm font-bold mb-1\">Cantidad:</label>\n                    <input\n                      type=\"number\"\n                      name=\"cantidad\"\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition\"\n                      value={editingRecord.cantidad}\n                      onChange={handleEditingProductionChange}\n                    />\n                  </div>\n                  <div className=\"flex flex-col\">\n                    <label className=\"block text-gray-700 text-sm font-bold mb-1\">Unidad Medida:</label>\n                    <input\n                      type=\"text\"\n                      name=\"unidadMedida\"\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition\"\n                      value={editingRecord.unidadMedida}\n                      onChange={handleEditingProductionChange}\n                    />\n                  </div>\n                  <div className=\"flex flex-col col-span-full\">\n                    <label className=\"block text-gray-700 text-sm font-bold mb-1\">Observaciones:</label>\n                    <textarea\n                      name=\"observaciones\"\n                      rows=\"3\"\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition resize-none\"\n                      value={editingRecord.observaciones}\n                      onChange={handleEditingProductionChange}\n                    ></textarea>\n                  </div>\n                </div>\n                <div className=\"mt-6 flex justify-end space-x-3\">\n                  <button\n                    onClick={saveEditedProductionRecord}\n                    className=\"bg-green-600 text-white py-2 px-5 rounded-lg hover:bg-green-700 transition-colors shadow-md\"\n                  >\n                    Guardar Cambios\n                  </button>\n                  <button\n                    onClick={cancelEditingProductionRecord}\n                    className=\"bg-gray-600 text-white py-2 px-5 rounded-lg hover:bg-gray-700 transition-colors shadow-md\"\n                  >\n                    Cancelar Edición\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n        </>\n      )}\n\n      {currentProductionSection === 'potreros' && (\n        <div className=\"p-6 border border-gray-200 rounded-lg bg-gray-50 shadow-sm\">\n          <h4 className=\"text-lg font-semibold mb-4 text-gray-800\">Control de Potreros</h4>\n\n          {/* Subir Mapa de Potreros */}\n          <div className=\"mb-6 p-4 border border-gray-200 rounded-lg bg-white shadow-inner\">\n            <label className=\"block text-gray-700 text-sm font-bold mb-2\">Subir Mapa de Potreros (JPG)</label>\n            <input\n              type=\"file\"\n              accept=\"image/jpeg\"\n              onChange={handlePastureMapUpload}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition\"\n            />\n            {pastureMap && (\n              <div className=\"mt-4 text-center p-2 border border-gray-200 rounded-lg bg-gray-50\">\n                <img src={pastureMap} alt=\"Mapa de Potreros\" className=\"max-h-80 mx-auto rounded-lg shadow-md\" />\n              </div>\n            )}\n          </div>\n\n          {/* Registrar Potrero */}\n          <div className=\"p-6 border border-gray-200 rounded-lg bg-gray-100 shadow-inner mb-8\">\n            <h5 className=\"text-md font-semibold mb-4 text-gray-800\">Registrar Nuevo Potrero</h5>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"flex flex-col\">\n                <label htmlFor=\"pastureName\" className=\"block text-gray-700 text-sm font-bold mb-1\">Nombre/Número del Potrero:</label>\n                <input\n                  type=\"text\"\n                  id=\"pastureName\"\n                  name=\"name\"\n                  placeholder=\"Ej. Potrero 1, La Loma\"\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition\"\n                  value={pastureData.name}\n                  onChange={handlePastureDataChange}\n                />\n              </div>\n              <div className=\"flex flex-col\">\n                <label htmlFor=\"pastureSize\" className=\"block text-gray-700 text-sm font-bold mb-1\">Tamaño (m²):</label>\n                <input\n                  type=\"number\"\n                  id=\"pastureSize\"\n                  name=\"size\"\n                  placeholder=\"Ej. 5000\"\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition\"\n                  value={pastureData.size}\n                  onChange={handlePastureDataChange}\n                />\n              </div>\n              <div className=\"flex flex-col\">\n                <label htmlFor=\"grassType\" className=\"block text-gray-700 text-sm font-bold mb-1\">Tipo de Pasto:</label>\n                <input\n                  type=\"text\"\n                  id=\"grassType\"\n                  name=\"grassType\"\n                  placeholder=\"Ej. Brachiaria, Estrella\"\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition\"\n                  value={pastureData.grassType}\n                  onChange={handlePastureDataChange}\n                />\n              </div>\n              <div className=\"flex flex-col\">\n                <label htmlFor=\"cowCount\" className=\"block text-gray-700 text-sm font-bold mb-1\">Cantidad de Vacas a Pastorear:</label>\n                <input\n                  type=\"number\"\n                  id=\"cowCount\"\n                  name=\"cowCount\"\n                  placeholder=\"Ej. 15\"\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black transition\"\n                  value={pastureData.cowCount}\n                  onChange={handlePastureDataChange}\n                />\n              </div>\n              {pastureData.recommendedDays !== '' && (\n                <p className=\"col-span-full text-sm text-gray-700 font-bold p-2 bg-blue-100 rounded-lg border border-blue-200\">\n                  Recomendación IA: Este potrero puede usarse por <span className=\"text-blue-700 font-extrabold\">{pastureData.recommendedDays}</span> días con <span className=\"text-blue-700 font-extrabold\">{pastureData.cowCount}</span> vacas.\n                </p>\n              )}\n            </div>\n            <button\n              onClick={handleAddPasture}\n              className=\"w-full mt-6 bg-black text-white py-2 rounded-lg hover:bg-gray-800 transition-colors shadow-md\"\n            >\n              Registrar Potrero\n            </button>\n          </div>\n\n          {/* Lista de Potreros */}\n          <h5 className=\"text-lg font-semibold mb-4 text-gray-800\">Estado de Potreros</h5>\n          <div className=\"overflow-x-auto rounded-lg shadow-md border border-gray-200\">\n            <table className=\"min-w-full bg-white text-sm\">\n              <thead className=\"bg-gray-800 text-white\">\n                <tr>\n                  <th className=\"py-3 px-4 text-left font-semibold\">Nombre</th>\n                  <th className=\"py-3 px-4 text-left font-semibold\">Tamaño</th>\n                  <th className=\"py-3 px-4 text-left font-semibold\">Tipo de Pasto</th>\n                  <th className=\"py-3 px-4 text-left font-semibold\">Estado</th>\n                  <th className=\"py-3 px-4 text-left font-semibold\">Último Uso</th>\n                  <th className=\"py-3 px-4 text-left font-semibold\">Vacas</th>\n                  <th className=\"py-3 px-4 text-left font-semibold\">Días Rec.</th>\n                  <th className=\"py-3 px-4 text-left font-semibold\">Acciones</th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-gray-200\">\n                {pastures.map(pasture => (\n                  <tr key={pasture.id} className=\"hover:bg-gray-100 transition-colors\">\n                    <td className=\"py-3 px-4\">{pasture.name}</td>\n                    <td className=\"py-3 px-4\">{pasture.size} m²</td>\n                    <td className=\"py-3 px-4\">{pasture.grassType}</td>\n                    <td className=\"py-3 px-4\">\n                      <span className={`font-bold ${\n                        pasture.status === 'disponible' ? 'text-green-600' :\n                        pasture.status === 'en_uso' ? 'text-blue-600' :\n                        'text-red-600'\n                      }`}>\n                        {pasture.status.replace('_', ' ').toUpperCase()}\n                      </span>\n                    </td>\n                    <td className=\"py-3 px-4\">{pasture.lastUsedDate || 'N/A'}</td>\n                    <td className=\"py-3 px-4\">{pasture.cowCount || 'N/A'}</td>\n                    <td className=\"py-3 px-4\">{pasture.recommendedDays || 'N/A'}</td>\n                    <td className=\"py-3 px-4\">\n                      {pasture.status === 'disponible' && (\n                        <button\n                          onClick={() => handleUsePasture(pasture.id)}\n                          className=\"bg-blue-500 text-white py-1 px-3 rounded-lg hover:bg-blue-600 transition-colors text-xs shadow-sm mr-2\"\n                        >\n                          Usar\n                        </button>\n                      )}\n                      {pasture.status === 'en_uso' && (\n                        <button\n                          onClick={() => handleFinalizePastureUse(pasture.id)}\n                          className=\"bg-orange-500 text-white py-1 px-3 rounded-lg hover:bg-orange-600 transition-colors text-xs shadow-sm mr-2\"\n                        >\n                          Finalizar Uso\n                        </button>\n                      )}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ProductionControlPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
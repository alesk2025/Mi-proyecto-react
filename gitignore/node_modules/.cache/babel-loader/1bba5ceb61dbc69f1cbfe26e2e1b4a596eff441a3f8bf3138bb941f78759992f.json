{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Downloads\\\\project (10)\\\\src\\\\components\\\\AnimalRegistrationPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\nimport { classifyAnimalAge } from '../utils/helpers'; // Importar la función de utilidad\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AnimalRegistrationPage = ({\n  onRegisterAnimal,\n  onUpdateAnimalProduction,\n  animals,\n  currentUser,\n  logoUrl\n}) => {\n  _s();\n  const [animalData, setAnimalData] = useState({\n    id: '',\n    // Campo para el ID manual\n    name: '',\n    raza: '',\n    peso: '',\n    sexo: '',\n    fechaNacimiento: '',\n    fechaCompra: '',\n    tipoProduccion: '',\n    dailyMilk: 0,\n    foto: null,\n    idpadre: '',\n    idmadre: '',\n    estadoReproductivo: 'Desarrollo',\n    edadClasificada: '' // Nuevo campo para la clasificación de edad\n  });\n  const [selectedAnimalForGenealogy, setSelectedAnimalForGenealogy] = useState('');\n  const [genealogyTree, setGenealogyTree] = useState(null);\n  useEffect(() => {\n    const {\n      fechaNacimiento,\n      sexo\n    } = animalData;\n    if (fechaNacimiento && sexo) {\n      setAnimalData(prevData => ({\n        ...prevData,\n        edadClasificada: classifyAnimalAge(fechaNacimiento, sexo)\n      }));\n    } else {\n      setAnimalData(prevData => ({\n        ...prevData,\n        edadClasificada: ''\n      }));\n    }\n  }, [animalData.fechaNacimiento, animalData.sexo]);\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setAnimalData({\n      ...animalData,\n      [name]: value\n    });\n  };\n  const handleFileChange = e => {\n    setAnimalData({\n      ...animalData,\n      foto: e.target.files[0]\n    });\n  };\n  const handleSubmit = () => {\n    if (!animalData.id) {\n      alert('Por favor, ingresa un ID para el animal.');\n      return;\n    }\n    // Validar que el ID sea único\n    if (animals.some(animal => animal.id === animalData.id)) {\n      alert('El ID del animal ya existe. Por favor, ingresa un ID único.');\n      return;\n    }\n    const animalToRegister = {\n      ...animalData\n    };\n    onRegisterAnimal(animalToRegister);\n    alert(`Animal ${animalToRegister.name} (${animalToRegister.id}) registrado.`);\n    setAnimalData({\n      id: '',\n      name: '',\n      raza: '',\n      peso: '',\n      sexo: '',\n      fechaNacimiento: '',\n      fechaCompra: '',\n      tipoProduccion: '',\n      dailyMilk: 0,\n      foto: null,\n      idpadre: '',\n      idmadre: '',\n      estadoReproductivo: 'desarrollo',\n      edadClasificada: ''\n    });\n  };\n  const handleDownloadPDF = (animal, currentUser, logoUrl) => {\n    if (!animal || !animal.id) {\n      alert('Por favor, selecciona un animal válido.');\n      return;\n    }\n    const farmName = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.farmName) || 'Mi Finca Ganadera';\n    const adminName = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.fullName) || 'Administrador';\n    const defaultLogo = 'https://via.placeholder.com/80x80?text=LOGO'; // Default logo if none uploaded\n    const qrURL = `https://api.qrserver.com/v1/create-qr-code/?data=${animal.id}&size=100x100`; // QR más grande\n\n    const tempDiv = document.createElement('div');\n    tempDiv.style.width = '210mm'; // Ancho A4\n    tempDiv.style.padding = '15mm'; // Menos padding para más contenido\n    tempDiv.style.fontFamily = 'Arial, sans-serif';\n    tempDiv.style.fontSize = '10pt';\n    tempDiv.style.backgroundColor = '#f8f8f8'; // Fondo ligeramente gris\n    tempDiv.style.position = 'absolute';\n    tempDiv.style.left = '-9999px';\n    tempDiv.style.top = '-9999px';\n    const colorEstado = animal.estadoReproductivo === 'en_produccion' ? '#27ae60' : animal.estadoReproductivo === 'seca' ? '#e67e22' : animal.estadoReproductivo === 'preñada' ? '#9b59b6' : '#7f8c8d';\n    tempDiv.innerHTML = `\n      <div style=\"border: 1px solid #ddd; border-radius: 12px; overflow: hidden; background-color: #fff; box-shadow: 0 4px 8px rgba(0,0,0,0.1);\">\n        <div style=\"background-color: #2c3e50; color: #fff; padding: 20px; display: flex; justify-content: space-between; align-items: center; border-top-left-radius: 10px; border-top-right-radius: 10px;\">\n          <img src=\"${logoUrl || defaultLogo}\" style=\"width: 80px; height: 80px; border-radius: 50%; object-fit: cover;\" alt=\"Logo Finca\">\n          <div style=\"text-align: right;\">\n            <h1 style=\"margin: 0; font-size: 24pt; font-weight: bold;\">${farmName}</h1>\n            <p style=\"margin: 0; font-size: 12pt; opacity: 0.8;\">Ficha de Registro Animal</p>\n          </div>\n        </div>\n\n        <div style=\"padding: 25px; display: flex; gap: 25px; align-items: flex-start;\">\n          <div style=\"flex-shrink: 0; text-align: center;\">\n            <img src=\"${animal.foto ? URL.createObjectURL(animal.foto) : 'https://via.placeholder.com/150x150?text=Sin+Foto'}\" style=\"width: 150px; height: 150px; border-radius: 8px; object-fit: cover; border: 2px solid #eee; box-shadow: 0 2px 4px rgba(0,0,0,0.05);\" alt=\"Foto del animal\">\n            <h2 style=\"font-size: 18pt; margin-top: 15px; margin-bottom: 5px; color: #333;\">${animal.name || 'N/A'}</h2>\n            <p style=\"font-size: 12pt; color: #777; margin: 0;\">ID: ${animal.id || 'N/A'}</p>\n          </div>\n          <div style=\"flex-grow: 1;\">\n            <table style=\"width: 100%; border-collapse: collapse; margin-top: 10px;\">\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Raza:</strong></td><td style=\"padding: 8px 0;\">${animal.raza || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Peso:</strong></td><td style=\"padding: 8px 0;\">${animal.peso || 'N/A'} kg</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Sexo:</strong></td><td style=\"padding: 8px 0;\">${animal.sexo || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Fecha Nacimiento:</strong></td><td style=\"padding: 8px 0;\">${animal.fechaNacimiento || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Clasificación Edad:</strong></td><td style=\"padding: 8px 0;\">${animal.edadClasificada || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Fecha Compra:</strong></td><td style=\"padding: 8px 0;\">${animal.fechaCompra || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>ID Padre:</strong></td><td style=\"padding: 8px 0;\">${animal.idpadre || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>ID Madre:</strong></td><td style=\"padding: 8px 0;\">${animal.idmadre || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Estado Reproductivo:</strong></td><td style=\"padding: 8px 0; color: ${colorEstado}; font-weight: bold;\">${animal.estadoReproductivo || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Tipo Producción:</strong></td><td style=\"padding: 8px 0;\">${animal.tipoProduccion || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Litros Leche Diarios:</strong></td><td style=\"padding: 8px 0;\">${animal.dailyMilk || 'N/A'}</td></tr>\n            </table>\n          </div>\n        </div>\n\n        <div style=\"text-align: center; padding: 20px; background-color: #f0f0f0; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;\">\n          <img src=\"${qrURL}\" style=\"width: 100px; height: 100px; margin-bottom: 10px;\" alt=\"QR Code del animal\">\n          <p style=\"font-size: 9pt; color: #555; margin: 0;\">Escanea para más información</p>\n        </div>\n\n        <div style=\"text-align: right; font-size: 8pt; padding: 10px 20px; color: #aaa; background-color: #f8f8f8; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;\">\n          <p style=\"margin: 0;\">Generado por Campo Inteligente | Administrador: ${adminName}</p>\n          <p style=\"margin: 0;\">Fecha de Generación: ${new Date().toLocaleDateString()}</p>\n        </div>\n      </div>\n    `;\n    document.body.appendChild(tempDiv);\n    html2canvas(tempDiv, {\n      scale: 2,\n      useCORS: true\n    }).then(canvas => {\n      const imgData = canvas.toDataURL('image/png');\n      const pdf = new jsPDF('p', 'mm', 'a4');\n      const imgWidth = 210;\n      const pageHeight = 297;\n      const imgHeight = canvas.height * imgWidth / canvas.width;\n      let heightLeft = imgHeight;\n      let position = 0;\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pageHeight;\n      while (heightLeft > 0) {\n        position = heightLeft - imgHeight;\n        pdf.addPage();\n        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n        heightLeft -= pageHeight;\n      }\n      pdf.save(`ficha_animal_${animal.name || 'sin_nombre'}_${animal.id || 'sin_id'}.pdf`);\n      document.body.removeChild(tempDiv);\n    });\n  };\n  const handleUpdateProduction = () => {\n    if (animalData.id) {\n      onUpdateAnimalProduction(animalData.id, animalData.estadoReproductivo, animalData.dailyMilk);\n      alert(`Producción/Estado de ${animalData.id} actualizado.`);\n    } else {\n      alert('Por favor, ingresa el ID del animal para actualizar su producción/estado.');\n    }\n  };\n\n  // --- Lógica del Árbol Genealógico ---\n  const buildGenealogyTree = (animalId, allAnimals) => {\n    const animal = allAnimals.find(a => a.id === animalId);\n    if (!animal) return null;\n    const tree = {\n      id: animal.id,\n      name: animal.name,\n      raza: animal.raza,\n      sexo: animal.sexo,\n      children: []\n    };\n\n    // Buscar hijos directos\n    const children = allAnimals.filter(a => a.idpadre === animal.id || a.idmadre === animal.id);\n    if (children.length > 0) {\n      tree.children = children.map(child => ({\n        id: child.id,\n        name: child.name,\n        raza: child.raza,\n        sexo: child.sexo\n      }));\n    }\n\n    // Buscar padres directos\n    if (animal.idpadre) {\n      tree.father = allAnimals.find(a => a.id === animal.idpadre);\n    }\n    if (animal.idmadre) {\n      tree.mother = allAnimals.find(a => a.id === animal.idmadre);\n    }\n    return tree;\n  };\n  const handleViewGenealogy = () => {\n    if (!selectedAnimalForGenealogy) {\n      alert('Por favor, selecciona un animal para ver su árbol genealógico.');\n      return;\n    }\n    const tree = buildGenealogyTree(selectedAnimalForGenealogy, animals);\n    setGenealogyTree(tree);\n    if (!tree) {\n      alert('Animal no encontrado o sin información genealógica.');\n    }\n  };\n  const handleDownloadGenealogyPDF = () => {\n    if (!genealogyTree) {\n      alert('Primero visualiza un árbol genealógico para descargarlo.');\n      return;\n    }\n    const farmName = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.farmName) || 'Mi Finca Ganadera';\n    const adminName = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.fullName) || 'Administrador';\n    const defaultLogo = 'https://via.placeholder.com/60x60?text=LOGO'; // Default logo if none uploaded\n\n    const treeDiv = document.createElement('div');\n    treeDiv.style.width = '210mm'; // Ancho A4\n    treeDiv.style.padding = '15mm';\n    treeDiv.style.fontFamily = 'Arial, sans-serif';\n    treeDiv.style.fontSize = '10pt';\n    treeDiv.style.backgroundColor = '#f8f8f8';\n    treeDiv.style.position = 'absolute';\n    treeDiv.style.left = '-9999px';\n    treeDiv.style.top = '-9999px';\n\n    // Función para renderizar un nodo del árbol con estilo moderno\n    const renderNode = (node, type = 'main') => {\n      let bgColor = '#e0f7fa'; // Default for main\n      let textColor = '#00796b';\n      let borderColor = '#00bcd4';\n      let title = 'Animal Principal';\n      if (type === 'father') {\n        bgColor = '#e8f5e9';\n        textColor = '#2e7d32';\n        borderColor = '#4caf50';\n        title = 'Padre';\n      } else if (type === 'mother') {\n        bgColor = '#fce4ec';\n        textColor = '#c2185b';\n        borderColor = '#e91e63';\n        title = 'Madre';\n      } else if (type === 'child') {\n        bgColor = '#fff3e0';\n        textColor = '#ef6c00';\n        borderColor = '#ff9800';\n        title = 'Hijo/a';\n      }\n      return `\n        <div style=\"background-color: ${bgColor}; border: 1px solid ${borderColor}; border-radius: 8px; padding: 15px; margin-bottom: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.05);\">\n          <h4 style=\"margin: 0 0 8px 0; font-size: 12pt; color: ${textColor}; font-weight: bold;\">${title}</h4>\n          <p style=\"margin: 0; font-size: 11pt; color: #333;\"><strong>${node.name}</strong> (${node.id})</p>\n          <p style=\"margin: 5px 0 0 0; font-size: 10pt; color: #555;\">Raza: ${node.raza}, Sexo: ${node.sexo}</p>\n        </div>\n      `;\n    };\n    treeDiv.innerHTML = `\n      <div style=\"border: 1px solid #ddd; border-radius: 12px; overflow: hidden; background-color: #fff; box-shadow: 0 4px 8px rgba(0,0,0,0.1);\">\n        <div style=\"background-color: #2c3e50; color: #fff; padding: 20px; display: flex; justify-content: space-between; align-items: center; border-top-left-radius: 10px; border-top-right-radius: 10px;\">\n          <img src=\"${logoUrl || defaultLogo}\" style=\"width: 60px; height: 60px; border-radius: 50%; object-fit: cover;\" alt=\"Logo Finca\">\n          <div style=\"text-align: right;\">\n            <h1 style=\"margin: 0; font-size: 20pt; font-weight: bold;\">${farmName}</h1>\n            <p style=\"margin: 0; font-size: 10pt; opacity: 0.8;\">Árbol Genealógico</p>\n          </div>\n        </div>\n\n        <div style=\"padding: 25px;\">\n          <h3 style=\"font-size: 16pt; margin-bottom: 20px; text-align: center; color: #333;\">Genealogía de ${genealogyTree.name} (${genealogyTree.id})</h3>\n          \n          <div style=\"display: flex; flex-direction: column; align-items: center;\">\n            ${renderNode(genealogyTree, 'main')}\n            \n            <div style=\"display: flex; justify-content: center; gap: 20px; width: 100%; margin-top: 20px;\">\n              ${genealogyTree.father ? renderNode(genealogyTree.father, 'father') : ''}\n              ${genealogyTree.mother ? renderNode(genealogyTree.mother, 'mother') : ''}\n            </div>\n\n            ${genealogyTree.children.length > 0 ? `\n              <h4 style=\"font-size: 14pt; margin-top: 30px; margin-bottom: 15px; color: #333;\">Hijos Directos:</h4>\n              <div style=\"display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; width: 100%;\">\n                ${genealogyTree.children.map(child => renderNode(child, 'child')).join('')}\n              </div>\n            ` : ''}\n          </div>\n        </div>\n\n        <div style=\"text-align: right; font-size: 8pt; padding: 10px 20px; color: #aaa; background-color: #f8f8f8; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;\">\n          <p style=\"margin: 0;\">Generado por Campo Inteligente | Administrador: ${adminName}</p>\n          <p style=\"margin: 0;\">Fecha de Generación: ${new Date().toLocaleDateString()}</p>\n        </div>\n      </div>\n    `;\n    document.body.appendChild(treeDiv);\n    html2canvas(treeDiv, {\n      scale: 2,\n      useCORS: true\n    }).then(canvas => {\n      const imgData = canvas.toDataURL('image/png');\n      const pdf = new jsPDF('p', 'mm', 'a4');\n      const imgWidth = 210;\n      const pageHeight = 297;\n      const imgHeight = canvas.height * imgWidth / canvas.width;\n      let heightLeft = imgHeight;\n      let position = 0;\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pageHeight;\n      while (heightLeft > 0) {\n        position = heightLeft - imgHeight;\n        pdf.addPage();\n        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n        heightLeft -= pageHeight;\n      }\n      pdf.save(`arbol_genealogico_${genealogyTree.name || 'sin_nombre'}_${genealogyTree.id || 'sin_id'}.pdf`);\n      document.body.removeChild(treeDiv);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white p-6 rounded-lg shadow-md\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-xl font-semibold mb-4\",\n      children: \"Registro Animal Avanzado\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"id\",\n        placeholder: \"ID del Animal (\\xDAnico)\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.id,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        placeholder: \"Nombre del Animal\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.name,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"raza\",\n        placeholder: \"Raza\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.raza,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"peso\",\n        placeholder: \"Peso\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.peso,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"sexo\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.sexo,\n        onChange: handleInputChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Selecciona Sexo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"macho\",\n          children: \"Macho\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"hembra\",\n          children: \"Hembra\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"date\",\n        name: \"fechaNacimiento\",\n        placeholder: \"Fecha de Nacimiento\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.fechaNacimiento,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 9\n      }, this), animalData.edadClasificada && /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"edadClasificada\",\n        placeholder: \"Clasificaci\\xF3n de Edad\",\n        className: \"w-full px-4 py-2 border rounded-lg bg-gray-100 cursor-not-allowed\",\n        value: animalData.edadClasificada,\n        readOnly: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"date\",\n        name: \"fechaCompra\",\n        placeholder: \"Fecha de Compra (Opcional)\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.fechaCompra,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"tipoProduccion\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.tipoProduccion,\n        onChange: handleInputChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Tipo de Producci\\xF3n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"carne\",\n          children: \"Carne\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"leche\",\n          children: \"Leche\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 9\n      }, this), animalData.tipoProduccion === 'leche' && animalData.sexo === 'hembra' && /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"dailyMilk\",\n        placeholder: \"Litros Promedio Diarios\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.dailyMilk,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"idpadre\",\n        placeholder: \"ID Padre (Opcional)\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.idpadre,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"idmadre\",\n        placeholder: \"ID Madre (Opcional)\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.idmadre,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-span-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-2\",\n          children: \"Foto del Animal\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          name: \"foto\",\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          onChange: handleFileChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 451,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 449,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSubmit,\n      className: \"mt-6 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors mr-2\",\n      children: \"Registrar Animal\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 459,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => handleDownloadPDF(animalData, currentUser, logoUrl) // Pasar el logoUrl\n      ,\n      className: \"mt-6 bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors\",\n      children: \"Descargar Ficha PDF\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-8 pt-4 border-t border-gray-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-lg font-semibold mb-3\",\n        children: \"Actualizar Producci\\xF3n/Estado\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"id\",\n          placeholder: \"ID del Animal a Actualizar\",\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          value: animalData.id,\n          onChange: handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"estadoReproductivo\",\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          value: animalData.estadoReproductivo,\n          onChange: handleInputChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"desarrollo\",\n            children: \"En Desarrollo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"en_produccion\",\n            children: \"En Producci\\xF3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 490,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"seca\",\n            children: \"Seca\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 491,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"pre\\xF1ada\",\n            children: \"Pre\\xF1ada\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 492,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 11\n        }, this), animalData.estadoReproductivo === 'en_produccion' && animalData.tipoProduccion === 'leche' && /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"dailyMilk\",\n          placeholder: \"Litros de leche diarios\",\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          value: animalData.dailyMilk,\n          onChange: handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 495,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleUpdateProduction,\n        className: \"mt-4 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors\",\n        children: \"Actualizar Producci\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 505,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 472,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-8 pt-4 border-t border-gray-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-lg font-semibold mb-3\",\n        children: \"\\xC1rbol Geneal\\xF3gico\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 514,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          value: selectedAnimalForGenealogy,\n          onChange: e => setSelectedAnimalForGenealogy(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Selecciona Animal para Genealog\\xEDa\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 521,\n            columnNumber: 13\n          }, this), animals.map(animal => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: animal.id,\n            children: [animal.name, \" (\", animal.id, \")\"]\n          }, animal.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 523,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleViewGenealogy,\n          className: \"bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors\",\n          children: \"Ver \\xC1rbol Geneal\\xF3gico\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 526,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 515,\n        columnNumber: 9\n      }, this), genealogyTree && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 p-4 border rounded-lg bg-gray-50\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"font-semibold\",\n          children: [\"\\xC1rbol Geneal\\xF3gico de \", genealogyTree.name, \" (\", genealogyTree.id, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Raza: \", genealogyTree.raza, \", Sexo: \", genealogyTree.sexo]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 537,\n          columnNumber: 13\n        }, this), genealogyTree.father && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"ml-4\",\n          children: [\"Padre: \", genealogyTree.father.name, \" (\", genealogyTree.father.id, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 15\n        }, this), genealogyTree.mother && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"ml-4\",\n          children: [\"Madre: \", genealogyTree.mother.name, \" (\", genealogyTree.mother.id, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 542,\n          columnNumber: 15\n        }, this), genealogyTree.children.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"font-semibold\",\n            children: \"Hijos:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 546,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"list-disc list-inside ml-4\",\n            children: genealogyTree.children.map(child => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [child.name, \" (\", child.id, \") - \", child.raza]\n            }, child.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 549,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 547,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 545,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleDownloadGenealogyPDF,\n          className: \"mt-4 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors\",\n          children: \"Descargar \\xC1rbol (PDF)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 554,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 513,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 340,\n    columnNumber: 5\n  }, this);\n};\n_s(AnimalRegistrationPage, \"HNhWDUsTj6YB5ygSJf6XKexSDBk=\");\n_c = AnimalRegistrationPage;\nexport default AnimalRegistrationPage;\nvar _c;\n$RefreshReg$(_c, \"AnimalRegistrationPage\");","map":{"version":3,"names":["React","useState","useEffect","jsPDF","html2canvas","classifyAnimalAge","jsxDEV","_jsxDEV","AnimalRegistrationPage","onRegisterAnimal","onUpdateAnimalProduction","animals","currentUser","logoUrl","_s","animalData","setAnimalData","id","name","raza","peso","sexo","fechaNacimiento","fechaCompra","tipoProduccion","dailyMilk","foto","idpadre","idmadre","estadoReproductivo","edadClasificada","selectedAnimalForGenealogy","setSelectedAnimalForGenealogy","genealogyTree","setGenealogyTree","prevData","handleInputChange","e","value","target","handleFileChange","files","handleSubmit","alert","some","animal","animalToRegister","handleDownloadPDF","farmName","adminName","fullName","defaultLogo","qrURL","tempDiv","document","createElement","style","width","padding","fontFamily","fontSize","backgroundColor","position","left","top","colorEstado","innerHTML","URL","createObjectURL","Date","toLocaleDateString","body","appendChild","scale","useCORS","then","canvas","imgData","toDataURL","pdf","imgWidth","pageHeight","imgHeight","height","heightLeft","addImage","addPage","save","removeChild","handleUpdateProduction","buildGenealogyTree","animalId","allAnimals","find","a","tree","children","filter","length","map","child","father","mother","handleViewGenealogy","handleDownloadGenealogyPDF","treeDiv","renderNode","node","type","bgColor","textColor","borderColor","title","join","className","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","onChange","readOnly","onClick","_c","$RefreshReg$"],"sources":["C:/Users/User/Downloads/project (10)/src/components/AnimalRegistrationPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\nimport { classifyAnimalAge } from '../utils/helpers'; // Importar la función de utilidad\n\nconst AnimalRegistrationPage = ({ onRegisterAnimal, onUpdateAnimalProduction, animals, currentUser, logoUrl }) => {\n  const [animalData, setAnimalData] = useState({\n    id: '', // Campo para el ID manual\n    name: '',\n    raza: '',\n    peso: '',\n    sexo: '',\n    fechaNacimiento: '',\n    fechaCompra: '',\n    tipoProduccion: '',\n    dailyMilk: 0,\n    foto: null,\n    idpadre: '',\n    idmadre: '',\n    estadoReproductivo: 'Desarrollo',\n    edadClasificada: '', // Nuevo campo para la clasificación de edad\n  });\n  const [selectedAnimalForGenealogy, setSelectedAnimalForGenealogy] = useState('');\n  const [genealogyTree, setGenealogyTree] = useState(null);\n\n  useEffect(() => {\n    const { fechaNacimiento, sexo } = animalData;\n    if (fechaNacimiento && sexo) {\n      setAnimalData(prevData => ({\n        ...prevData,\n        edadClasificada: classifyAnimalAge(fechaNacimiento, sexo),\n      }));\n    } else {\n      setAnimalData(prevData => ({\n        ...prevData,\n        edadClasificada: '',\n      }));\n    }\n  }, [animalData.fechaNacimiento, animalData.sexo]);\n\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setAnimalData({ ...animalData, [name]: value });\n  };\n\n  const handleFileChange = (e) => {\n    setAnimalData({ ...animalData, foto: e.target.files[0] });\n  };\n\n  const handleSubmit = () => {\n    if (!animalData.id) {\n      alert('Por favor, ingresa un ID para el animal.');\n      return;\n    }\n    // Validar que el ID sea único\n    if (animals.some(animal => animal.id === animalData.id)) {\n      alert('El ID del animal ya existe. Por favor, ingresa un ID único.');\n      return;\n    }\n\n    const animalToRegister = { ...animalData };\n    onRegisterAnimal(animalToRegister);\n    alert(`Animal ${animalToRegister.name} (${animalToRegister.id}) registrado.`);\n    setAnimalData({\n      id: '', name: '', raza: '', peso: '', sexo: '', fechaNacimiento: '', fechaCompra: '',\n      tipoProduccion: '', dailyMilk: 0, foto: null, idpadre: '', idmadre: '',\n      estadoReproductivo: 'desarrollo', edadClasificada: '',\n    });\n  };\n\n  const handleDownloadPDF = (animal, currentUser, logoUrl) => {\n    if (!animal || !animal.id) {\n      alert('Por favor, selecciona un animal válido.');\n      return;\n    }\n\n    const farmName = currentUser?.farmName || 'Mi Finca Ganadera';\n    const adminName = currentUser?.fullName || 'Administrador';\n    const defaultLogo = 'https://via.placeholder.com/80x80?text=LOGO'; // Default logo if none uploaded\n    const qrURL = `https://api.qrserver.com/v1/create-qr-code/?data=${animal.id}&size=100x100`; // QR más grande\n\n    const tempDiv = document.createElement('div');\n    tempDiv.style.width = '210mm'; // Ancho A4\n    tempDiv.style.padding = '15mm'; // Menos padding para más contenido\n    tempDiv.style.fontFamily = 'Arial, sans-serif';\n    tempDiv.style.fontSize = '10pt';\n    tempDiv.style.backgroundColor = '#f8f8f8'; // Fondo ligeramente gris\n    tempDiv.style.position = 'absolute';\n    tempDiv.style.left = '-9999px';\n    tempDiv.style.top = '-9999px';\n\n    const colorEstado = animal.estadoReproductivo === 'en_produccion' ? '#27ae60' :\n                        animal.estadoReproductivo === 'seca' ? '#e67e22' :\n                        animal.estadoReproductivo === 'preñada' ? '#9b59b6' : '#7f8c8d';\n\n    tempDiv.innerHTML = `\n      <div style=\"border: 1px solid #ddd; border-radius: 12px; overflow: hidden; background-color: #fff; box-shadow: 0 4px 8px rgba(0,0,0,0.1);\">\n        <div style=\"background-color: #2c3e50; color: #fff; padding: 20px; display: flex; justify-content: space-between; align-items: center; border-top-left-radius: 10px; border-top-right-radius: 10px;\">\n          <img src=\"${logoUrl || defaultLogo}\" style=\"width: 80px; height: 80px; border-radius: 50%; object-fit: cover;\" alt=\"Logo Finca\">\n          <div style=\"text-align: right;\">\n            <h1 style=\"margin: 0; font-size: 24pt; font-weight: bold;\">${farmName}</h1>\n            <p style=\"margin: 0; font-size: 12pt; opacity: 0.8;\">Ficha de Registro Animal</p>\n          </div>\n        </div>\n\n        <div style=\"padding: 25px; display: flex; gap: 25px; align-items: flex-start;\">\n          <div style=\"flex-shrink: 0; text-align: center;\">\n            <img src=\"${animal.foto ? URL.createObjectURL(animal.foto) : 'https://via.placeholder.com/150x150?text=Sin+Foto'}\" style=\"width: 150px; height: 150px; border-radius: 8px; object-fit: cover; border: 2px solid #eee; box-shadow: 0 2px 4px rgba(0,0,0,0.05);\" alt=\"Foto del animal\">\n            <h2 style=\"font-size: 18pt; margin-top: 15px; margin-bottom: 5px; color: #333;\">${animal.name || 'N/A'}</h2>\n            <p style=\"font-size: 12pt; color: #777; margin: 0;\">ID: ${animal.id || 'N/A'}</p>\n          </div>\n          <div style=\"flex-grow: 1;\">\n            <table style=\"width: 100%; border-collapse: collapse; margin-top: 10px;\">\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Raza:</strong></td><td style=\"padding: 8px 0;\">${animal.raza || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Peso:</strong></td><td style=\"padding: 8px 0;\">${animal.peso || 'N/A'} kg</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Sexo:</strong></td><td style=\"padding: 8px 0;\">${animal.sexo || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Fecha Nacimiento:</strong></td><td style=\"padding: 8px 0;\">${animal.fechaNacimiento || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Clasificación Edad:</strong></td><td style=\"padding: 8px 0;\">${animal.edadClasificada || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Fecha Compra:</strong></td><td style=\"padding: 8px 0;\">${animal.fechaCompra || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>ID Padre:</strong></td><td style=\"padding: 8px 0;\">${animal.idpadre || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>ID Madre:</strong></td><td style=\"padding: 8px 0;\">${animal.idmadre || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Estado Reproductivo:</strong></td><td style=\"padding: 8px 0; color: ${colorEstado}; font-weight: bold;\">${animal.estadoReproductivo || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Tipo Producción:</strong></td><td style=\"padding: 8px 0;\">${animal.tipoProduccion || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Litros Leche Diarios:</strong></td><td style=\"padding: 8px 0;\">${animal.dailyMilk || 'N/A'}</td></tr>\n            </table>\n          </div>\n        </div>\n\n        <div style=\"text-align: center; padding: 20px; background-color: #f0f0f0; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;\">\n          <img src=\"${qrURL}\" style=\"width: 100px; height: 100px; margin-bottom: 10px;\" alt=\"QR Code del animal\">\n          <p style=\"font-size: 9pt; color: #555; margin: 0;\">Escanea para más información</p>\n        </div>\n\n        <div style=\"text-align: right; font-size: 8pt; padding: 10px 20px; color: #aaa; background-color: #f8f8f8; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;\">\n          <p style=\"margin: 0;\">Generado por Campo Inteligente | Administrador: ${adminName}</p>\n          <p style=\"margin: 0;\">Fecha de Generación: ${new Date().toLocaleDateString()}</p>\n        </div>\n      </div>\n    `;\n\n    document.body.appendChild(tempDiv);\n\n    html2canvas(tempDiv, { scale: 2, useCORS: true }).then(canvas => {\n      const imgData = canvas.toDataURL('image/png');\n      const pdf = new jsPDF('p', 'mm', 'a4');\n      const imgWidth = 210;\n      const pageHeight = 297;\n      const imgHeight = canvas.height * imgWidth / canvas.width;\n      let heightLeft = imgHeight;\n      let position = 0;\n\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pageHeight;\n\n      while (heightLeft > 0) {\n        position = heightLeft - imgHeight;\n        pdf.addPage();\n        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n        heightLeft -= pageHeight;\n      }\n\n      pdf.save(`ficha_animal_${animal.name || 'sin_nombre'}_${animal.id || 'sin_id'}.pdf`);\n      document.body.removeChild(tempDiv);\n    });\n  };\n\n  const handleUpdateProduction = () => {\n    if (animalData.id) {\n      onUpdateAnimalProduction(animalData.id, animalData.estadoReproductivo, animalData.dailyMilk);\n      alert(`Producción/Estado de ${animalData.id} actualizado.`);\n    } else {\n      alert('Por favor, ingresa el ID del animal para actualizar su producción/estado.');\n    }\n  };\n\n  // --- Lógica del Árbol Genealógico ---\n  const buildGenealogyTree = (animalId, allAnimals) => {\n    const animal = allAnimals.find(a => a.id === animalId);\n    if (!animal) return null;\n\n    const tree = {\n      id: animal.id,\n      name: animal.name,\n      raza: animal.raza,\n      sexo: animal.sexo,\n      children: []\n    };\n\n    // Buscar hijos directos\n    const children = allAnimals.filter(a => a.idpadre === animal.id || a.idmadre === animal.id);\n    if (children.length > 0) {\n      tree.children = children.map(child => ({\n        id: child.id,\n        name: child.name,\n        raza: child.raza,\n        sexo: child.sexo,\n      }));\n    }\n\n    // Buscar padres directos\n    if (animal.idpadre) {\n      tree.father = allAnimals.find(a => a.id === animal.idpadre);\n    }\n    if (animal.idmadre) {\n      tree.mother = allAnimals.find(a => a.id === animal.idmadre);\n    }\n\n    return tree;\n  };\n\n  const handleViewGenealogy = () => {\n    if (!selectedAnimalForGenealogy) {\n      alert('Por favor, selecciona un animal para ver su árbol genealógico.');\n      return;\n    }\n    const tree = buildGenealogyTree(selectedAnimalForGenealogy, animals);\n    setGenealogyTree(tree);\n    if (!tree) {\n      alert('Animal no encontrado o sin información genealógica.');\n    }\n  };\n\n  const handleDownloadGenealogyPDF = () => {\n    if (!genealogyTree) {\n      alert('Primero visualiza un árbol genealógico para descargarlo.');\n      return;\n    }\n\n    const farmName = currentUser?.farmName || 'Mi Finca Ganadera';\n    const adminName = currentUser?.fullName || 'Administrador';\n    const defaultLogo = 'https://via.placeholder.com/60x60?text=LOGO'; // Default logo if none uploaded\n\n    const treeDiv = document.createElement('div');\n    treeDiv.style.width = '210mm'; // Ancho A4\n    treeDiv.style.padding = '15mm';\n    treeDiv.style.fontFamily = 'Arial, sans-serif';\n    treeDiv.style.fontSize = '10pt';\n    treeDiv.style.backgroundColor = '#f8f8f8';\n    treeDiv.style.position = 'absolute';\n    treeDiv.style.left = '-9999px';\n    treeDiv.style.top = '-9999px';\n\n    // Función para renderizar un nodo del árbol con estilo moderno\n    const renderNode = (node, type = 'main') => {\n      let bgColor = '#e0f7fa'; // Default for main\n      let textColor = '#00796b';\n      let borderColor = '#00bcd4';\n      let title = 'Animal Principal';\n\n      if (type === 'father') {\n        bgColor = '#e8f5e9';\n        textColor = '#2e7d32';\n        borderColor = '#4caf50';\n        title = 'Padre';\n      } else if (type === 'mother') {\n        bgColor = '#fce4ec';\n        textColor = '#c2185b';\n        borderColor = '#e91e63';\n        title = 'Madre';\n      } else if (type === 'child') {\n        bgColor = '#fff3e0';\n        textColor = '#ef6c00';\n        borderColor = '#ff9800';\n        title = 'Hijo/a';\n      }\n\n      return `\n        <div style=\"background-color: ${bgColor}; border: 1px solid ${borderColor}; border-radius: 8px; padding: 15px; margin-bottom: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.05);\">\n          <h4 style=\"margin: 0 0 8px 0; font-size: 12pt; color: ${textColor}; font-weight: bold;\">${title}</h4>\n          <p style=\"margin: 0; font-size: 11pt; color: #333;\"><strong>${node.name}</strong> (${node.id})</p>\n          <p style=\"margin: 5px 0 0 0; font-size: 10pt; color: #555;\">Raza: ${node.raza}, Sexo: ${node.sexo}</p>\n        </div>\n      `;\n    };\n\n    treeDiv.innerHTML = `\n      <div style=\"border: 1px solid #ddd; border-radius: 12px; overflow: hidden; background-color: #fff; box-shadow: 0 4px 8px rgba(0,0,0,0.1);\">\n        <div style=\"background-color: #2c3e50; color: #fff; padding: 20px; display: flex; justify-content: space-between; align-items: center; border-top-left-radius: 10px; border-top-right-radius: 10px;\">\n          <img src=\"${logoUrl || defaultLogo}\" style=\"width: 60px; height: 60px; border-radius: 50%; object-fit: cover;\" alt=\"Logo Finca\">\n          <div style=\"text-align: right;\">\n            <h1 style=\"margin: 0; font-size: 20pt; font-weight: bold;\">${farmName}</h1>\n            <p style=\"margin: 0; font-size: 10pt; opacity: 0.8;\">Árbol Genealógico</p>\n          </div>\n        </div>\n\n        <div style=\"padding: 25px;\">\n          <h3 style=\"font-size: 16pt; margin-bottom: 20px; text-align: center; color: #333;\">Genealogía de ${genealogyTree.name} (${genealogyTree.id})</h3>\n          \n          <div style=\"display: flex; flex-direction: column; align-items: center;\">\n            ${renderNode(genealogyTree, 'main')}\n            \n            <div style=\"display: flex; justify-content: center; gap: 20px; width: 100%; margin-top: 20px;\">\n              ${genealogyTree.father ? renderNode(genealogyTree.father, 'father') : ''}\n              ${genealogyTree.mother ? renderNode(genealogyTree.mother, 'mother') : ''}\n            </div>\n\n            ${genealogyTree.children.length > 0 ? `\n              <h4 style=\"font-size: 14pt; margin-top: 30px; margin-bottom: 15px; color: #333;\">Hijos Directos:</h4>\n              <div style=\"display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; width: 100%;\">\n                ${genealogyTree.children.map(child => renderNode(child, 'child')).join('')}\n              </div>\n            ` : ''}\n          </div>\n        </div>\n\n        <div style=\"text-align: right; font-size: 8pt; padding: 10px 20px; color: #aaa; background-color: #f8f8f8; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;\">\n          <p style=\"margin: 0;\">Generado por Campo Inteligente | Administrador: ${adminName}</p>\n          <p style=\"margin: 0;\">Fecha de Generación: ${new Date().toLocaleDateString()}</p>\n        </div>\n      </div>\n    `;\n\n    document.body.appendChild(treeDiv);\n\n    html2canvas(treeDiv, { scale: 2, useCORS: true }).then(canvas => {\n      const imgData = canvas.toDataURL('image/png');\n      const pdf = new jsPDF('p', 'mm', 'a4');\n      const imgWidth = 210;\n      const pageHeight = 297;\n      const imgHeight = canvas.height * imgWidth / canvas.width;\n      let heightLeft = imgHeight;\n      let position = 0;\n\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pageHeight;\n\n      while (heightLeft > 0) {\n        position = heightLeft - imgHeight;\n        pdf.addPage();\n        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n        heightLeft -= pageHeight;\n      }\n      pdf.save(`arbol_genealogico_${genealogyTree.name || 'sin_nombre'}_${genealogyTree.id || 'sin_id'}.pdf`);\n      document.body.removeChild(treeDiv);\n    });\n  };\n\n  return (\n    <div className=\"bg-white p-6 rounded-lg shadow-md\">\n      <h3 className=\"text-xl font-semibold mb-4\">Registro Animal Avanzado</h3>\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        <input\n          type=\"text\"\n          name=\"id\"\n          placeholder=\"ID del Animal (Único)\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.id}\n          onChange={handleInputChange}\n        />\n        <input\n          type=\"text\"\n          name=\"name\"\n          placeholder=\"Nombre del Animal\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.name}\n          onChange={handleInputChange}\n        />\n        <input\n          type=\"text\"\n          name=\"raza\"\n          placeholder=\"Raza\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.raza}\n          onChange={handleInputChange}\n\n        />\n        <input\n          type=\"number\"\n          name=\"peso\"\n          placeholder=\"Peso\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.peso}\n          onChange={handleInputChange}\n\n        />\n        <select\n          name=\"sexo\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.sexo}\n          onChange={handleInputChange}\n        >\n          <option value=\"\">Selecciona Sexo</option>\n          <option value=\"macho\">Macho</option>\n          <option value=\"hembra\">Hembra</option>\n        </select>\n        <input\n          type=\"date\"\n          name=\"fechaNacimiento\"\n          placeholder=\"Fecha de Nacimiento\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.fechaNacimiento}\n          onChange={handleInputChange}\n        />\n        {animalData.edadClasificada && (\n          <input\n            type=\"text\"\n            name=\"edadClasificada\"\n            placeholder=\"Clasificación de Edad\"\n            className=\"w-full px-4 py-2 border rounded-lg bg-gray-100 cursor-not-allowed\"\n            value={animalData.edadClasificada}\n            readOnly\n          />\n        )}\n        <input\n          type=\"date\"\n          name=\"fechaCompra\"\n          placeholder=\"Fecha de Compra (Opcional)\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.fechaCompra}\n          onChange={handleInputChange}\n        />\n        <select\n          name=\"tipoProduccion\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.tipoProduccion}\n          onChange={handleInputChange}\n        >\n          <option value=\"\">Tipo de Producción</option>\n          <option value=\"carne\">Carne</option>\n          <option value=\"leche\">Leche</option>\n        </select>\n        {animalData.tipoProduccion === 'leche' && animalData.sexo === 'hembra' && (\n          <input\n            type=\"number\"\n            name=\"dailyMilk\"\n            placeholder=\"Litros Promedio Diarios\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={animalData.dailyMilk}\n            onChange={handleInputChange}\n          />\n        )}\n        <input\n          type=\"text\"\n          name=\"idpadre\"\n          placeholder=\"ID Padre (Opcional)\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.idpadre}\n          onChange={handleInputChange}\n        />\n        <input\n          type=\"text\"\n          name=\"idmadre\"\n          placeholder=\"ID Madre (Opcional)\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.idmadre}\n          onChange={handleInputChange}\n        />\n        <div className=\"col-span-full\">\n          <label className=\"block text-gray-700 text-sm font-bold mb-2\">Foto del Animal</label>\n          <input\n            type=\"file\"\n            name=\"foto\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            onChange={handleFileChange}\n          />\n        </div>\n      </div>\n      <button\n        onClick={handleSubmit}\n        className=\"mt-6 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors mr-2\"\n      >\n        Registrar Animal\n      </button>\n      <button\n        onClick={() => handleDownloadPDF(animalData, currentUser, logoUrl)} // Pasar el logoUrl\n        className=\"mt-6 bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors\"\n      >\n        Descargar Ficha PDF\n      </button>\n\n      <div className=\"mt-8 pt-4 border-t border-gray-200\">\n        <h4 className=\"text-lg font-semibold mb-3\">Actualizar Producción/Estado</h4>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <input\n            type=\"text\"\n            name=\"id\"\n            placeholder=\"ID del Animal a Actualizar\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={animalData.id}\n            onChange={handleInputChange}\n          />\n          <select\n            name=\"estadoReproductivo\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={animalData.estadoReproductivo}\n            onChange={handleInputChange}\n          >\n            <option value=\"desarrollo\">En Desarrollo</option>\n            <option value=\"en_produccion\">En Producción</option>\n            <option value=\"seca\">Seca</option>\n            <option value=\"preñada\">Preñada</option>\n          </select>\n          {animalData.estadoReproductivo === 'en_produccion' && animalData.tipoProduccion === 'leche' && (\n            <input\n              type=\"number\"\n              name=\"dailyMilk\"\n              placeholder=\"Litros de leche diarios\"\n              className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n              value={animalData.dailyMilk}\n              onChange={handleInputChange}\n            />\n          )}\n        </div>\n        <button\n          onClick={handleUpdateProduction}\n          className=\"mt-4 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors\"\n        >\n          Actualizar Producción\n        </button>\n      </div>\n\n      <div className=\"mt-8 pt-4 border-t border-gray-200\">\n        <h4 className=\"text-lg font-semibold mb-3\">Árbol Genealógico</h4>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <select\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={selectedAnimalForGenealogy}\n            onChange={(e) => setSelectedAnimalForGenealogy(e.target.value)}\n          >\n            <option value=\"\">Selecciona Animal para Genealogía</option>\n            {animals.map(animal => (\n              <option key={animal.id} value={animal.id}>{animal.name} ({animal.id})</option>\n            ))}\n          </select>\n          <button\n            onClick={handleViewGenealogy}\n            className=\"bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors\"\n          >\n            Ver Árbol Genealógico\n          </button>\n        </div>\n\n        {genealogyTree && (\n          <div className=\"mt-4 p-4 border rounded-lg bg-gray-50\">\n            <h5 className=\"font-semibold\">Árbol Genealógico de {genealogyTree.name} ({genealogyTree.id})</h5>\n            <p>Raza: {genealogyTree.raza}, Sexo: {genealogyTree.sexo}</p>\n            {genealogyTree.father && (\n              <p className=\"ml-4\">Padre: {genealogyTree.father.name} ({genealogyTree.father.id})</p>\n            )}\n            {genealogyTree.mother && (\n              <p className=\"ml-4\">Madre: {genealogyTree.mother.name} ({genealogyTree.mother.id})</p>\n            )}\n            {genealogyTree.children.length > 0 && (\n              <div className=\"mt-2\">\n                <p className=\"font-semibold\">Hijos:</p>\n                <ul className=\"list-disc list-inside ml-4\">\n                  {genealogyTree.children.map(child => (\n                    <li key={child.id}>{child.name} ({child.id}) - {child.raza}</li>\n                  ))}\n                </ul>\n              </div>\n            )}\n            <button\n              onClick={handleDownloadGenealogyPDF}\n              className=\"mt-4 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors\"\n            >\n              Descargar Árbol (PDF)\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AnimalRegistrationPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Downloads\\\\project (10)\\\\src\\\\components\\\\AnimalRegistrationPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AnimalRegistrationPage = ({\n  onRegisterAnimal,\n  onUpdateAnimalProduction,\n  animals,\n  currentUser\n}) => {\n  _s();\n  const [animalData, setAnimalData] = useState({\n    id: '',\n    // Campo para el ID manual\n    name: '',\n    raza: '',\n    peso: '',\n    sexo: '',\n    fechaNacimiento: '',\n    fechaCompra: '',\n    tipoProduccion: '',\n    dailyMilk: 0,\n    foto: null,\n    idpadre: '',\n    idmadre: '',\n    estadoReproductivo: 'Desarrollo',\n    edadClasificada: '' // Nuevo campo para la clasificación de edad\n  });\n  const [selectedAnimalForGenealogy, setSelectedAnimalForGenealogy] = useState('');\n  const [genealogyTree, setGenealogyTree] = useState(null);\n\n  // Función para calcular la edad y clasificar el animal\n  const classifyAnimalAge = (fechaNacimiento, sexo) => {\n    if (!fechaNacimiento) return '';\n    const birthDate = new Date(fechaNacimiento);\n    const today = new Date();\n    const diffTime = Math.abs(today - birthDate);\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    if (sexo === 'macho') {\n      if (diffDays <= 365) return 'Ternero'; // Hasta 1 año\n      if (diffDays > 365 && diffDays <= 730) return 'Mauto'; // 1 a 2 años\n      if (diffDays > 730) return 'Toro'; // Más de 2 años\n    } else if (sexo === 'hembra') {\n      if (diffDays <= 365) return 'Ternera'; // Hasta 1 año\n      if (diffDays > 365 && diffDays <= 730) return 'Mauta'; // 1 a 2 años\n      if (diffDays > 730 && diffDays <= 1095) return 'Novilla'; // 2 a 3 años\n      if (diffDays > 1095) return 'Vaca'; // Más de 3 años\n    }\n    return '';\n  };\n  useEffect(() => {\n    const {\n      fechaNacimiento,\n      sexo\n    } = animalData;\n    if (fechaNacimiento && sexo) {\n      setAnimalData(prevData => ({\n        ...prevData,\n        edadClasificada: classifyAnimalAge(fechaNacimiento, sexo)\n      }));\n    } else {\n      setAnimalData(prevData => ({\n        ...prevData,\n        edadClasificada: ''\n      }));\n    }\n  }, [animalData.fechaNacimiento, animalData.sexo]);\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setAnimalData({\n      ...animalData,\n      [name]: value\n    });\n  };\n  const handleFileChange = e => {\n    setAnimalData({\n      ...animalData,\n      foto: e.target.files[0]\n    });\n  };\n  const handleSubmit = () => {\n    if (!animalData.id) {\n      alert('Por favor, ingresa un ID para el animal.');\n      return;\n    }\n    // Validar que el ID sea único\n    if (animals.some(animal => animal.id === animalData.id)) {\n      alert('El ID del animal ya existe. Por favor, ingresa un ID único.');\n      return;\n    }\n    const animalToRegister = {\n      ...animalData\n    };\n    onRegisterAnimal(animalToRegister);\n    alert(`Animal ${animalToRegister.name} (${animalToRegister.id}) registrado.`);\n    setAnimalData({\n      id: '',\n      name: '',\n      raza: '',\n      peso: '',\n      sexo: '',\n      fechaNacimiento: '',\n      fechaCompra: '',\n      tipoProduccion: '',\n      dailyMilk: 0,\n      foto: null,\n      idpadre: '',\n      idmadre: '',\n      estadoReproductivo: 'desarrollo',\n      edadClasificada: ''\n    });\n  };\n  const handleDownloadPDF = (animal, currentUser) => {\n    if (!animal || !animal.id) {\n      alert('Por favor, selecciona un animal válido.');\n      return;\n    }\n    const farmName = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.farmName) || 'Mi Finca Ganadera';\n    const adminName = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.fullName) || 'Administrador';\n    const logoPlaceholder = 'https://via.placeholder.com/80x80?text=LOGO'; // Logo más grande\n    const qrURL = `https://api.qrserver.com/v1/create-qr-code/?data=${animal.id}&size=100x100`; // QR más grande\n\n    const tempDiv = document.createElement('div');\n    tempDiv.style.width = '210mm'; // Ancho A4\n    tempDiv.style.padding = '15mm'; // Menos padding para más contenido\n    tempDiv.style.fontFamily = 'Arial, sans-serif';\n    tempDiv.style.fontSize = '10pt';\n    tempDiv.style.backgroundColor = '#f8f8f8'; // Fondo ligeramente gris\n    tempDiv.style.position = 'absolute';\n    tempDiv.style.left = '-9999px';\n    tempDiv.style.top = '-9999px';\n    const colorEstado = animal.estadoReproductivo === 'en_produccion' ? '#27ae60' : animal.estadoReproductivo === 'seca' ? '#e67e22' : animal.estadoReproductivo === 'preñada' ? '#9b59b6' : '#7f8c8d';\n    tempDiv.innerHTML = `\n      <div style=\"border: 1px solid #ddd; border-radius: 12px; overflow: hidden; background-color: #fff; box-shadow: 0 4px 8px rgba(0,0,0,0.1);\">\n        <div style=\"background-color: #2c3e50; color: #fff; padding: 20px; display: flex; justify-content: space-between; align-items: center; border-top-left-radius: 10px; border-top-right-radius: 10px;\">\n          <img src=\"${logoPlaceholder}\" style=\"width: 80px; height: 80px; border-radius: 50%; object-fit: cover;\" alt=\"Logo Finca\">\n          <div style=\"text-align: right;\">\n            <h1 style=\"margin: 0; font-size: 24pt; font-weight: bold;\">${farmName}</h1>\n            <p style=\"margin: 0; font-size: 12pt; opacity: 0.8;\">Ficha de Registro Animal</p>\n          </div>\n        </div>\n\n        <div style=\"padding: 25px; display: flex; gap: 25px; align-items: flex-start;\">\n          <div style=\"flex-shrink: 0; text-align: center;\">\n            <img src=\"${animal.foto ? URL.createObjectURL(animal.foto) : 'https://via.placeholder.com/150x150?text=Sin+Foto'}\" style=\"width: 150px; height: 150px; border-radius: 8px; object-fit: cover; border: 2px solid #eee; box-shadow: 0 2px 4px rgba(0,0,0,0.05);\" alt=\"Foto del animal\">\n            <h2 style=\"font-size: 18pt; margin-top: 15px; margin-bottom: 5px; color: #333;\">${animal.name || 'N/A'}</h2>\n            <p style=\"font-size: 12pt; color: #777; margin: 0;\">ID: ${animal.id || 'N/A'}</p>\n          </div>\n          <div style=\"flex-grow: 1;\">\n            <table style=\"width: 100%; border-collapse: collapse; margin-top: 10px;\">\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Raza:</strong></td><td style=\"padding: 8px 0;\">${animal.raza || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Peso:</strong></td><td style=\"padding: 8px 0;\">${animal.peso || 'N/A'} kg</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Sexo:</strong></td><td style=\"padding: 8px 0;\">${animal.sexo || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Fecha Nacimiento:</strong></td><td style=\"padding: 8px 0;\">${animal.fechaNacimiento || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Clasificación Edad:</strong></td><td style=\"padding: 8px 0;\">${animal.edadClasificada || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Fecha Compra:</strong></td><td style=\"padding: 8px 0;\">${animal.fechaCompra || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>ID Padre:</strong></td><td style=\"padding: 8px 0;\">${animal.idpadre || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>ID Madre:</strong></td><td style=\"padding: 8px 0;\">${animal.idmadre || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Estado Reproductivo:</strong></td><td style=\"padding: 8px 0; color: ${colorEstado}; font-weight: bold;\">${animal.estadoReproductivo || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Tipo Producción:</strong></td><td style=\"padding: 8px 0;\">${animal.tipoProduccion || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Litros Leche Diarios:</strong></td><td style=\"padding: 8px 0;\">${animal.dailyMilk || 'N/A'}</td></tr>\n            </table>\n          </div>\n        </div>\n\n        <div style=\"text-align: center; padding: 20px; background-color: #f0f0f0; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;\">\n          <img src=\"${qrURL}\" style=\"width: 100px; height: 100px; margin-bottom: 10px;\" alt=\"QR Code del animal\">\n          <p style=\"font-size: 9pt; color: #555; margin: 0;\">Escanea para más información</p>\n        </div>\n\n        <div style=\"text-align: right; font-size: 8pt; padding: 10px 20px; color: #aaa; background-color: #f8f8f8; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;\">\n          <p style=\"margin: 0;\">Generado por Campo Inteligente | Administrador: ${adminName}</p>\n          <p style=\"margin: 0;\">Fecha de Generación: ${new Date().toLocaleDateString()}</p>\n        </div>\n      </div>\n    `;\n    document.body.appendChild(tempDiv);\n    html2canvas(tempDiv, {\n      scale: 2,\n      useCORS: true\n    }).then(canvas => {\n      const imgData = canvas.toDataURL('image/png');\n      const pdf = new jsPDF('p', 'mm', 'a4');\n      const imgWidth = 210;\n      const pageHeight = 297;\n      const imgHeight = canvas.height * imgWidth / canvas.width;\n      let heightLeft = imgHeight;\n      let position = 0;\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pageHeight;\n      while (heightLeft > 0) {\n        position = heightLeft - imgHeight;\n        pdf.addPage();\n        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n        heightLeft -= pageHeight;\n      }\n      pdf.save(`ficha_animal_${animal.name || 'sin_nombre'}_${animal.id || 'sin_id'}.pdf`);\n      document.body.removeChild(tempDiv);\n    });\n  };\n  const handleUpdateProduction = () => {\n    if (animalData.id) {\n      onUpdateAnimalProduction(animalData.id, animalData.estadoReproductivo, animalData.dailyMilk);\n      alert(`Producción/Estado de ${animalData.id} actualizado.`);\n    } else {\n      alert('Por favor, ingresa el ID del animal para actualizar su producción/estado.');\n    }\n  };\n\n  // --- Lógica del Árbol Genealógico ---\n  const buildGenealogyTree = (animalId, allAnimals) => {\n    const animal = allAnimals.find(a => a.id === animalId);\n    if (!animal) return null;\n    const tree = {\n      id: animal.id,\n      name: animal.name,\n      raza: animal.raza,\n      sexo: animal.sexo,\n      children: []\n    };\n\n    // Buscar hijos directos\n    const children = allAnimals.filter(a => a.idpadre === animal.id || a.idmadre === animal.id);\n    if (children.length > 0) {\n      tree.children = children.map(child => ({\n        id: child.id,\n        name: child.name,\n        raza: child.raza,\n        sexo: child.sexo\n      }));\n    }\n\n    // Buscar padres directos\n    if (animal.idpadre) {\n      tree.father = allAnimals.find(a => a.id === animal.idpadre);\n    }\n    if (animal.idmadre) {\n      tree.mother = allAnimals.find(a => a.id === animal.idmadre);\n    }\n    return tree;\n  };\n  const handleViewGenealogy = () => {\n    if (!selectedAnimalForGenealogy) {\n      alert('Por favor, selecciona un animal para ver su árbol genealógico.');\n      return;\n    }\n    const tree = buildGenealogyTree(selectedAnimalForGenealogy, animals);\n    setGenealogyTree(tree);\n    if (!tree) {\n      alert('Animal no encontrado o sin información genealógica.');\n    }\n  };\n  const handleDownloadGenealogyPDF = () => {\n    if (!genealogyTree) {\n      alert('Primero visualiza un árbol genealógico para descargarlo.');\n      return;\n    }\n    const farmName = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.farmName) || 'Mi Finca Ganadera';\n    const adminName = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.fullName) || 'Administrador';\n    const logoPlaceholder = 'https://via.placeholder.com/60x60?text=LOGO'; // Logo más pequeño para el árbol\n\n    const treeDiv = document.createElement('div');\n    treeDiv.style.width = '210mm'; // Ancho A4\n    treeDiv.style.padding = '15mm';\n    treeDiv.style.fontFamily = 'Arial, sans-serif';\n    treeDiv.style.fontSize = '10pt';\n    treeDiv.style.backgroundColor = '#f8f8f8';\n    treeDiv.style.position = 'absolute';\n    treeDiv.style.left = '-9999px';\n    treeDiv.style.top = '-9999px';\n\n    // Función para renderizar un nodo del árbol con estilo moderno\n    const renderNode = (node, type = 'main') => {\n      let bgColor = '#e0f7fa'; // Default for main\n      let textColor = '#00796b';\n      let borderColor = '#00bcd4';\n      let title = 'Animal Principal';\n      if (type === 'father') {\n        bgColor = '#e8f5e9';\n        textColor = '#2e7d32';\n        borderColor = '#4caf50';\n        title = 'Padre';\n      } else if (type === 'mother') {\n        bgColor = '#fce4ec';\n        textColor = '#c2185b';\n        borderColor = '#e91e63';\n        title = 'Madre';\n      } else if (type === 'child') {\n        bgColor = '#fff3e0';\n        textColor = '#ef6c00';\n        borderColor = '#ff9800';\n        title = 'Hijo/a';\n      }\n      return `\n        <div style=\"background-color: ${bgColor}; border: 1px solid ${borderColor}; border-radius: 8px; padding: 15px; margin-bottom: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.05);\">\n          <h4 style=\"margin: 0 0 8px 0; font-size: 12pt; color: ${textColor}; font-weight: bold;\">${title}</h4>\n          <p style=\"margin: 0; font-size: 11pt; color: #333;\"><strong>${node.name}</strong> (${node.id})</p>\n          <p style=\"margin: 5px 0 0 0; font-size: 10pt; color: #555;\">Raza: ${node.raza}, Sexo: ${node.sexo}</p>\n        </div>\n      `;\n    };\n    treeDiv.innerHTML = `\n      <div style=\"border: 1px solid #ddd; border-radius: 12px; overflow: hidden; background-color: #fff; box-shadow: 0 4px 8px rgba(0,0,0,0.1);\">\n        <div style=\"background-color: #2c3e50; color: #fff; padding: 20px; display: flex; justify-content: space-between; align-items: center; border-top-left-radius: 10px; border-top-right-radius: 10px;\">\n          <img src=\"${logoPlaceholder}\" style=\"width: 60px; height: 60px; border-radius: 50%; object-fit: cover;\" alt=\"Logo Finca\">\n          <div style=\"text-align: right;\">\n            <h1 style=\"margin: 0; font-size: 20pt; font-weight: bold;\">${farmName}</h1>\n            <p style=\"margin: 0; font-size: 10pt; opacity: 0.8;\">Árbol Genealógico</p>\n          </div>\n        </div>\n\n        <div style=\"padding: 25px;\">\n          <h3 style=\"font-size: 16pt; margin-bottom: 20px; text-align: center; color: #333;\">Genealogía de ${genealogyTree.name} (${genealogyTree.id})</h3>\n          \n          <div style=\"display: flex; flex-direction: column; align-items: center;\">\n            ${renderNode(genealogyTree, 'main')}\n            \n            <div style=\"display: flex; justify-content: center; gap: 20px; width: 100%; margin-top: 20px;\">\n              ${genealogyTree.father ? renderNode(genealogyTree.father, 'father') : ''}\n              ${genealogyTree.mother ? renderNode(genealogyTree.mother, 'mother') : ''}\n            </div>\n\n            ${genealogyTree.children.length > 0 ? `\n              <h4 style=\"font-size: 14pt; margin-top: 30px; margin-bottom: 15px; color: #333;\">Hijos Directos:</h4>\n              <div style=\"display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; width: 100%;\">\n                ${genealogyTree.children.map(child => renderNode(child, 'child')).join('')}\n              </div>\n            ` : ''}\n          </div>\n        </div>\n\n        <div style=\"text-align: right; font-size: 8pt; padding: 10px 20px; color: #aaa; background-color: #f8f8f8; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;\">\n          <p style=\"margin: 0;\">Generado por Campo Inteligente | Administrador: ${adminName}</p>\n          <p style=\"margin: 0;\">Fecha de Generación: ${new Date().toLocaleDateString()}</p>\n        </div>\n      </div>\n    `;\n    document.body.appendChild(treeDiv);\n    html2canvas(treeDiv, {\n      scale: 2,\n      useCORS: true\n    }).then(canvas => {\n      const imgData = canvas.toDataURL('image/png');\n      const pdf = new jsPDF('p', 'mm', 'a4');\n      const imgWidth = 210;\n      const pageHeight = 297;\n      const imgHeight = canvas.height * imgWidth / canvas.width;\n      let heightLeft = imgHeight;\n      let position = 0;\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pageHeight;\n      while (heightLeft > 0) {\n        position = heightLeft - imgHeight;\n        pdf.addPage();\n        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n        heightLeft -= pageHeight;\n      }\n      pdf.save(`arbol_genealogico_${genealogyTree.name || 'sin_nombre'}_${genealogyTree.id || 'sin_id'}.pdf`);\n      document.body.removeChild(treeDiv);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white p-6 rounded-lg shadow-md\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-xl font-semibold mb-4\",\n      children: \"Registro Animal Avanzado\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"id\",\n        placeholder: \"ID del Animal (\\xDAnico)\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.id,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        placeholder: \"Nombre del Animal\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.name,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"raza\",\n        placeholder: \"Raza\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.raza,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"peso\",\n        placeholder: \"Peso\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.peso,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"sexo\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.sexo,\n        onChange: handleInputChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Selecciona Sexo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"macho\",\n          children: \"Macho\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"hembra\",\n          children: \"Hembra\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"date\",\n        name: \"fechaNacimiento\",\n        placeholder: \"Fecha de Nacimiento\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.fechaNacimiento,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 9\n      }, this), animalData.edadClasificada && /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"edadClasificada\",\n        placeholder: \"Clasificaci\\xF3n de Edad\",\n        className: \"w-full px-4 py-2 border rounded-lg bg-gray-100 cursor-not-allowed\",\n        value: animalData.edadClasificada,\n        readOnly: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 417,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"date\",\n        name: \"fechaCompra\",\n        placeholder: \"Fecha de Compra (Opcional)\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.fechaCompra,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"tipoProduccion\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.tipoProduccion,\n        onChange: handleInputChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Tipo de Producci\\xF3n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"carne\",\n          children: \"Carne\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"leche\",\n          children: \"Leche\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 9\n      }, this), animalData.tipoProduccion === 'leche' && animalData.sexo === 'hembra' && /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"dailyMilk\",\n        placeholder: \"Litros Promedio Diarios\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.dailyMilk,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"idpadre\",\n        placeholder: \"ID Padre (Opcional)\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.idpadre,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"idmadre\",\n        placeholder: \"ID Madre (Opcional)\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.idmadre,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-span-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-2\",\n          children: \"Foto del Animal\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 471,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          name: \"foto\",\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          onChange: handleFileChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSubmit,\n      className: \"mt-6 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors mr-2\",\n      children: \"Registrar Animal\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 480,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => handleDownloadPDF(animalData, currentUser) // Pasar el animalData actual para generar PDF\n      ,\n      className: \"mt-6 bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors\",\n      children: \"Descargar Ficha PDF\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 486,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-8 pt-4 border-t border-gray-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-lg font-semibold mb-3\",\n        children: \"Actualizar Producci\\xF3n/Estado\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"id\",\n          placeholder: \"ID del Animal a Actualizar\",\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          value: animalData.id,\n          onChange: handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"estadoReproductivo\",\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          value: animalData.estadoReproductivo,\n          onChange: handleInputChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"desarrollo\",\n            children: \"En Desarrollo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 510,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"en_produccion\",\n            children: \"En Producci\\xF3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 511,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"seca\",\n            children: \"Seca\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 512,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"pre\\xF1ada\",\n            children: \"Pre\\xF1ada\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 513,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 504,\n          columnNumber: 11\n        }, this), animalData.estadoReproductivo === 'en_produccion' && animalData.tipoProduccion === 'leche' && /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"dailyMilk\",\n          placeholder: \"Litros de leche diarios\",\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          value: animalData.dailyMilk,\n          onChange: handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 495,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleUpdateProduction,\n        className: \"mt-4 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors\",\n        children: \"Actualizar Producci\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 526,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 493,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-8 pt-4 border-t border-gray-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-lg font-semibold mb-3\",\n        children: \"\\xC1rbol Geneal\\xF3gico\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          value: selectedAnimalForGenealogy,\n          onChange: e => setSelectedAnimalForGenealogy(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Selecciona Animal para Genealog\\xEDa\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 542,\n            columnNumber: 13\n          }, this), animals.map(animal => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: animal.id,\n            children: [animal.name, \" (\", animal.id, \")\"]\n          }, animal.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 544,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 537,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleViewGenealogy,\n          className: \"bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors\",\n          children: \"Ver \\xC1rbol Geneal\\xF3gico\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 547,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 536,\n        columnNumber: 9\n      }, this), genealogyTree && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 p-4 border rounded-lg bg-gray-50\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"font-semibold\",\n          children: [\"\\xC1rbol Geneal\\xF3gico de \", genealogyTree.name, \" (\", genealogyTree.id, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 557,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Raza: \", genealogyTree.raza, \", Sexo: \", genealogyTree.sexo]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 558,\n          columnNumber: 13\n        }, this), genealogyTree.father && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"ml-4\",\n          children: [\"Padre: \", genealogyTree.father.name, \" (\", genealogyTree.father.id, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 560,\n          columnNumber: 15\n        }, this), genealogyTree.mother && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"ml-4\",\n          children: [\"Madre: \", genealogyTree.mother.name, \" (\", genealogyTree.mother.id, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 563,\n          columnNumber: 15\n        }, this), genealogyTree.children.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"font-semibold\",\n            children: \"Hijos:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 567,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"list-disc list-inside ml-4\",\n            children: genealogyTree.children.map(child => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [child.name, \" (\", child.id, \") - \", child.raza]\n            }, child.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 570,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 568,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 566,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleDownloadGenealogyPDF,\n          className: \"mt-4 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors\",\n          children: \"Descargar \\xC1rbol (PDF)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 575,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 556,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 534,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 361,\n    columnNumber: 5\n  }, this);\n};\n_s(AnimalRegistrationPage, \"HNhWDUsTj6YB5ygSJf6XKexSDBk=\");\n_c = AnimalRegistrationPage;\nexport default AnimalRegistrationPage;\n\n// DONE\nvar _c;\n$RefreshReg$(_c, \"AnimalRegistrationPage\");","map":{"version":3,"names":["React","useState","useEffect","jsPDF","html2canvas","jsxDEV","_jsxDEV","AnimalRegistrationPage","onRegisterAnimal","onUpdateAnimalProduction","animals","currentUser","_s","animalData","setAnimalData","id","name","raza","peso","sexo","fechaNacimiento","fechaCompra","tipoProduccion","dailyMilk","foto","idpadre","idmadre","estadoReproductivo","edadClasificada","selectedAnimalForGenealogy","setSelectedAnimalForGenealogy","genealogyTree","setGenealogyTree","classifyAnimalAge","birthDate","Date","today","diffTime","Math","abs","diffDays","ceil","prevData","handleInputChange","e","value","target","handleFileChange","files","handleSubmit","alert","some","animal","animalToRegister","handleDownloadPDF","farmName","adminName","fullName","logoPlaceholder","qrURL","tempDiv","document","createElement","style","width","padding","fontFamily","fontSize","backgroundColor","position","left","top","colorEstado","innerHTML","URL","createObjectURL","toLocaleDateString","body","appendChild","scale","useCORS","then","canvas","imgData","toDataURL","pdf","imgWidth","pageHeight","imgHeight","height","heightLeft","addImage","addPage","save","removeChild","handleUpdateProduction","buildGenealogyTree","animalId","allAnimals","find","a","tree","children","filter","length","map","child","father","mother","handleViewGenealogy","handleDownloadGenealogyPDF","treeDiv","renderNode","node","type","bgColor","textColor","borderColor","title","join","className","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","onChange","readOnly","onClick","_c","$RefreshReg$"],"sources":["C:/Users/User/Downloads/project (10)/src/components/AnimalRegistrationPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\n\nconst AnimalRegistrationPage = ({ onRegisterAnimal, onUpdateAnimalProduction, animals, currentUser }) => {\n  const [animalData, setAnimalData] = useState({\n    id: '', // Campo para el ID manual\n    name: '',\n    raza: '',\n    peso: '',\n    sexo: '',\n    fechaNacimiento: '',\n    fechaCompra: '',\n    tipoProduccion: '',\n    dailyMilk: 0,\n    foto: null,\n    idpadre: '',\n    idmadre: '',\n    estadoReproductivo: 'Desarrollo',\n    edadClasificada: '', // Nuevo campo para la clasificación de edad\n  });\n  const [selectedAnimalForGenealogy, setSelectedAnimalForGenealogy] = useState('');\n  const [genealogyTree, setGenealogyTree] = useState(null);\n\n  // Función para calcular la edad y clasificar el animal\n  const classifyAnimalAge = (fechaNacimiento, sexo) => {\n    if (!fechaNacimiento) return '';\n\n    const birthDate = new Date(fechaNacimiento);\n    const today = new Date();\n    const diffTime = Math.abs(today - birthDate);\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n\n    if (sexo === 'macho') {\n      if (diffDays <= 365) return 'Ternero'; // Hasta 1 año\n      if (diffDays > 365 && diffDays <= 730) return 'Mauto'; // 1 a 2 años\n      if (diffDays > 730) return 'Toro'; // Más de 2 años\n    } else if (sexo === 'hembra') {\n      if (diffDays <= 365) return 'Ternera'; // Hasta 1 año\n      if (diffDays > 365 && diffDays <= 730) return 'Mauta'; // 1 a 2 años\n      if (diffDays > 730 && diffDays <= 1095) return 'Novilla'; // 2 a 3 años\n      if (diffDays > 1095) return 'Vaca'; // Más de 3 años\n    }\n    return '';\n  };\n\n  useEffect(() => {\n    const { fechaNacimiento, sexo } = animalData;\n    if (fechaNacimiento && sexo) {\n      setAnimalData(prevData => ({\n        ...prevData,\n        edadClasificada: classifyAnimalAge(fechaNacimiento, sexo),\n      }));\n    } else {\n      setAnimalData(prevData => ({\n        ...prevData,\n        edadClasificada: '',\n      }));\n    }\n  }, [animalData.fechaNacimiento, animalData.sexo]);\n\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setAnimalData({ ...animalData, [name]: value });\n  };\n\n  const handleFileChange = (e) => {\n    setAnimalData({ ...animalData, foto: e.target.files[0] });\n  };\n\n  const handleSubmit = () => {\n    if (!animalData.id) {\n      alert('Por favor, ingresa un ID para el animal.');\n      return;\n    }\n    // Validar que el ID sea único\n    if (animals.some(animal => animal.id === animalData.id)) {\n      alert('El ID del animal ya existe. Por favor, ingresa un ID único.');\n      return;\n    }\n\n    const animalToRegister = { ...animalData };\n    onRegisterAnimal(animalToRegister);\n    alert(`Animal ${animalToRegister.name} (${animalToRegister.id}) registrado.`);\n    setAnimalData({\n      id: '', name: '', raza: '', peso: '', sexo: '', fechaNacimiento: '', fechaCompra: '',\n      tipoProduccion: '', dailyMilk: 0, foto: null, idpadre: '', idmadre: '',\n      estadoReproductivo: 'desarrollo', edadClasificada: '',\n    });\n  };\n\n  const handleDownloadPDF = (animal, currentUser) => {\n    if (!animal || !animal.id) {\n      alert('Por favor, selecciona un animal válido.');\n      return;\n    }\n\n    const farmName = currentUser?.farmName || 'Mi Finca Ganadera';\n    const adminName = currentUser?.fullName || 'Administrador';\n    const logoPlaceholder = 'https://via.placeholder.com/80x80?text=LOGO'; // Logo más grande\n    const qrURL = `https://api.qrserver.com/v1/create-qr-code/?data=${animal.id}&size=100x100`; // QR más grande\n\n    const tempDiv = document.createElement('div');\n    tempDiv.style.width = '210mm'; // Ancho A4\n    tempDiv.style.padding = '15mm'; // Menos padding para más contenido\n    tempDiv.style.fontFamily = 'Arial, sans-serif';\n    tempDiv.style.fontSize = '10pt';\n    tempDiv.style.backgroundColor = '#f8f8f8'; // Fondo ligeramente gris\n    tempDiv.style.position = 'absolute';\n    tempDiv.style.left = '-9999px';\n    tempDiv.style.top = '-9999px';\n\n    const colorEstado = animal.estadoReproductivo === 'en_produccion' ? '#27ae60' :\n                        animal.estadoReproductivo === 'seca' ? '#e67e22' :\n                        animal.estadoReproductivo === 'preñada' ? '#9b59b6' : '#7f8c8d';\n\n    tempDiv.innerHTML = `\n      <div style=\"border: 1px solid #ddd; border-radius: 12px; overflow: hidden; background-color: #fff; box-shadow: 0 4px 8px rgba(0,0,0,0.1);\">\n        <div style=\"background-color: #2c3e50; color: #fff; padding: 20px; display: flex; justify-content: space-between; align-items: center; border-top-left-radius: 10px; border-top-right-radius: 10px;\">\n          <img src=\"${logoPlaceholder}\" style=\"width: 80px; height: 80px; border-radius: 50%; object-fit: cover;\" alt=\"Logo Finca\">\n          <div style=\"text-align: right;\">\n            <h1 style=\"margin: 0; font-size: 24pt; font-weight: bold;\">${farmName}</h1>\n            <p style=\"margin: 0; font-size: 12pt; opacity: 0.8;\">Ficha de Registro Animal</p>\n          </div>\n        </div>\n\n        <div style=\"padding: 25px; display: flex; gap: 25px; align-items: flex-start;\">\n          <div style=\"flex-shrink: 0; text-align: center;\">\n            <img src=\"${animal.foto ? URL.createObjectURL(animal.foto) : 'https://via.placeholder.com/150x150?text=Sin+Foto'}\" style=\"width: 150px; height: 150px; border-radius: 8px; object-fit: cover; border: 2px solid #eee; box-shadow: 0 2px 4px rgba(0,0,0,0.05);\" alt=\"Foto del animal\">\n            <h2 style=\"font-size: 18pt; margin-top: 15px; margin-bottom: 5px; color: #333;\">${animal.name || 'N/A'}</h2>\n            <p style=\"font-size: 12pt; color: #777; margin: 0;\">ID: ${animal.id || 'N/A'}</p>\n          </div>\n          <div style=\"flex-grow: 1;\">\n            <table style=\"width: 100%; border-collapse: collapse; margin-top: 10px;\">\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Raza:</strong></td><td style=\"padding: 8px 0;\">${animal.raza || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Peso:</strong></td><td style=\"padding: 8px 0;\">${animal.peso || 'N/A'} kg</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Sexo:</strong></td><td style=\"padding: 8px 0;\">${animal.sexo || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Fecha Nacimiento:</strong></td><td style=\"padding: 8px 0;\">${animal.fechaNacimiento || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Clasificación Edad:</strong></td><td style=\"padding: 8px 0;\">${animal.edadClasificada || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Fecha Compra:</strong></td><td style=\"padding: 8px 0;\">${animal.fechaCompra || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>ID Padre:</strong></td><td style=\"padding: 8px 0;\">${animal.idpadre || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>ID Madre:</strong></td><td style=\"padding: 8px 0;\">${animal.idmadre || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Estado Reproductivo:</strong></td><td style=\"padding: 8px 0; color: ${colorEstado}; font-weight: bold;\">${animal.estadoReproductivo || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Tipo Producción:</strong></td><td style=\"padding: 8px 0;\">${animal.tipoProduccion || 'N/A'}</td></tr>\n              <tr style=\"border-bottom: 1px solid #eee;\"><td style=\"padding: 8px 0;\"><strong>Litros Leche Diarios:</strong></td><td style=\"padding: 8px 0;\">${animal.dailyMilk || 'N/A'}</td></tr>\n            </table>\n          </div>\n        </div>\n\n        <div style=\"text-align: center; padding: 20px; background-color: #f0f0f0; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;\">\n          <img src=\"${qrURL}\" style=\"width: 100px; height: 100px; margin-bottom: 10px;\" alt=\"QR Code del animal\">\n          <p style=\"font-size: 9pt; color: #555; margin: 0;\">Escanea para más información</p>\n        </div>\n\n        <div style=\"text-align: right; font-size: 8pt; padding: 10px 20px; color: #aaa; background-color: #f8f8f8; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;\">\n          <p style=\"margin: 0;\">Generado por Campo Inteligente | Administrador: ${adminName}</p>\n          <p style=\"margin: 0;\">Fecha de Generación: ${new Date().toLocaleDateString()}</p>\n        </div>\n      </div>\n    `;\n\n    document.body.appendChild(tempDiv);\n\n    html2canvas(tempDiv, { scale: 2, useCORS: true }).then(canvas => {\n      const imgData = canvas.toDataURL('image/png');\n      const pdf = new jsPDF('p', 'mm', 'a4');\n      const imgWidth = 210;\n      const pageHeight = 297;\n      const imgHeight = canvas.height * imgWidth / canvas.width;\n      let heightLeft = imgHeight;\n      let position = 0;\n\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pageHeight;\n\n      while (heightLeft > 0) {\n        position = heightLeft - imgHeight;\n        pdf.addPage();\n        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n        heightLeft -= pageHeight;\n      }\n\n      pdf.save(`ficha_animal_${animal.name || 'sin_nombre'}_${animal.id || 'sin_id'}.pdf`);\n      document.body.removeChild(tempDiv);\n    });\n  };\n\n  const handleUpdateProduction = () => {\n    if (animalData.id) {\n      onUpdateAnimalProduction(animalData.id, animalData.estadoReproductivo, animalData.dailyMilk);\n      alert(`Producción/Estado de ${animalData.id} actualizado.`);\n    } else {\n      alert('Por favor, ingresa el ID del animal para actualizar su producción/estado.');\n    }\n  };\n\n  // --- Lógica del Árbol Genealógico ---\n  const buildGenealogyTree = (animalId, allAnimals) => {\n    const animal = allAnimals.find(a => a.id === animalId);\n    if (!animal) return null;\n\n    const tree = {\n      id: animal.id,\n      name: animal.name,\n      raza: animal.raza,\n      sexo: animal.sexo,\n      children: []\n    };\n\n    // Buscar hijos directos\n    const children = allAnimals.filter(a => a.idpadre === animal.id || a.idmadre === animal.id);\n    if (children.length > 0) {\n      tree.children = children.map(child => ({\n        id: child.id,\n        name: child.name,\n        raza: child.raza,\n        sexo: child.sexo,\n      }));\n    }\n\n    // Buscar padres directos\n    if (animal.idpadre) {\n      tree.father = allAnimals.find(a => a.id === animal.idpadre);\n    }\n    if (animal.idmadre) {\n      tree.mother = allAnimals.find(a => a.id === animal.idmadre);\n    }\n\n    return tree;\n  };\n\n  const handleViewGenealogy = () => {\n    if (!selectedAnimalForGenealogy) {\n      alert('Por favor, selecciona un animal para ver su árbol genealógico.');\n      return;\n    }\n    const tree = buildGenealogyTree(selectedAnimalForGenealogy, animals);\n    setGenealogyTree(tree);\n    if (!tree) {\n      alert('Animal no encontrado o sin información genealógica.');\n    }\n  };\n\n  const handleDownloadGenealogyPDF = () => {\n    if (!genealogyTree) {\n      alert('Primero visualiza un árbol genealógico para descargarlo.');\n      return;\n    }\n\n    const farmName = currentUser?.farmName || 'Mi Finca Ganadera';\n    const adminName = currentUser?.fullName || 'Administrador';\n    const logoPlaceholder = 'https://via.placeholder.com/60x60?text=LOGO'; // Logo más pequeño para el árbol\n\n    const treeDiv = document.createElement('div');\n    treeDiv.style.width = '210mm'; // Ancho A4\n    treeDiv.style.padding = '15mm';\n    treeDiv.style.fontFamily = 'Arial, sans-serif';\n    treeDiv.style.fontSize = '10pt';\n    treeDiv.style.backgroundColor = '#f8f8f8';\n    treeDiv.style.position = 'absolute';\n    treeDiv.style.left = '-9999px';\n    treeDiv.style.top = '-9999px';\n\n    // Función para renderizar un nodo del árbol con estilo moderno\n    const renderNode = (node, type = 'main') => {\n      let bgColor = '#e0f7fa'; // Default for main\n      let textColor = '#00796b';\n      let borderColor = '#00bcd4';\n      let title = 'Animal Principal';\n\n      if (type === 'father') {\n        bgColor = '#e8f5e9';\n        textColor = '#2e7d32';\n        borderColor = '#4caf50';\n        title = 'Padre';\n      } else if (type === 'mother') {\n        bgColor = '#fce4ec';\n        textColor = '#c2185b';\n        borderColor = '#e91e63';\n        title = 'Madre';\n      } else if (type === 'child') {\n        bgColor = '#fff3e0';\n        textColor = '#ef6c00';\n        borderColor = '#ff9800';\n        title = 'Hijo/a';\n      }\n\n      return `\n        <div style=\"background-color: ${bgColor}; border: 1px solid ${borderColor}; border-radius: 8px; padding: 15px; margin-bottom: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.05);\">\n          <h4 style=\"margin: 0 0 8px 0; font-size: 12pt; color: ${textColor}; font-weight: bold;\">${title}</h4>\n          <p style=\"margin: 0; font-size: 11pt; color: #333;\"><strong>${node.name}</strong> (${node.id})</p>\n          <p style=\"margin: 5px 0 0 0; font-size: 10pt; color: #555;\">Raza: ${node.raza}, Sexo: ${node.sexo}</p>\n        </div>\n      `;\n    };\n\n    treeDiv.innerHTML = `\n      <div style=\"border: 1px solid #ddd; border-radius: 12px; overflow: hidden; background-color: #fff; box-shadow: 0 4px 8px rgba(0,0,0,0.1);\">\n        <div style=\"background-color: #2c3e50; color: #fff; padding: 20px; display: flex; justify-content: space-between; align-items: center; border-top-left-radius: 10px; border-top-right-radius: 10px;\">\n          <img src=\"${logoPlaceholder}\" style=\"width: 60px; height: 60px; border-radius: 50%; object-fit: cover;\" alt=\"Logo Finca\">\n          <div style=\"text-align: right;\">\n            <h1 style=\"margin: 0; font-size: 20pt; font-weight: bold;\">${farmName}</h1>\n            <p style=\"margin: 0; font-size: 10pt; opacity: 0.8;\">Árbol Genealógico</p>\n          </div>\n        </div>\n\n        <div style=\"padding: 25px;\">\n          <h3 style=\"font-size: 16pt; margin-bottom: 20px; text-align: center; color: #333;\">Genealogía de ${genealogyTree.name} (${genealogyTree.id})</h3>\n          \n          <div style=\"display: flex; flex-direction: column; align-items: center;\">\n            ${renderNode(genealogyTree, 'main')}\n            \n            <div style=\"display: flex; justify-content: center; gap: 20px; width: 100%; margin-top: 20px;\">\n              ${genealogyTree.father ? renderNode(genealogyTree.father, 'father') : ''}\n              ${genealogyTree.mother ? renderNode(genealogyTree.mother, 'mother') : ''}\n            </div>\n\n            ${genealogyTree.children.length > 0 ? `\n              <h4 style=\"font-size: 14pt; margin-top: 30px; margin-bottom: 15px; color: #333;\">Hijos Directos:</h4>\n              <div style=\"display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; width: 100%;\">\n                ${genealogyTree.children.map(child => renderNode(child, 'child')).join('')}\n              </div>\n            ` : ''}\n          </div>\n        </div>\n\n        <div style=\"text-align: right; font-size: 8pt; padding: 10px 20px; color: #aaa; background-color: #f8f8f8; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;\">\n          <p style=\"margin: 0;\">Generado por Campo Inteligente | Administrador: ${adminName}</p>\n          <p style=\"margin: 0;\">Fecha de Generación: ${new Date().toLocaleDateString()}</p>\n        </div>\n      </div>\n    `;\n\n    document.body.appendChild(treeDiv);\n\n    html2canvas(treeDiv, { scale: 2, useCORS: true }).then(canvas => {\n      const imgData = canvas.toDataURL('image/png');\n      const pdf = new jsPDF('p', 'mm', 'a4');\n      const imgWidth = 210;\n      const pageHeight = 297;\n      const imgHeight = canvas.height * imgWidth / canvas.width;\n      let heightLeft = imgHeight;\n      let position = 0;\n\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pageHeight;\n\n      while (heightLeft > 0) {\n        position = heightLeft - imgHeight;\n        pdf.addPage();\n        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n        heightLeft -= pageHeight;\n      }\n      pdf.save(`arbol_genealogico_${genealogyTree.name || 'sin_nombre'}_${genealogyTree.id || 'sin_id'}.pdf`);\n      document.body.removeChild(treeDiv);\n    });\n  };\n\n  return (\n    <div className=\"bg-white p-6 rounded-lg shadow-md\">\n      <h3 className=\"text-xl font-semibold mb-4\">Registro Animal Avanzado</h3>\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        <input\n          type=\"text\"\n          name=\"id\"\n          placeholder=\"ID del Animal (Único)\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.id}\n          onChange={handleInputChange}\n        />\n        <input\n          type=\"text\"\n          name=\"name\"\n          placeholder=\"Nombre del Animal\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.name}\n          onChange={handleInputChange}\n        />\n        <input\n          type=\"text\"\n          name=\"raza\"\n          placeholder=\"Raza\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.raza}\n          onChange={handleInputChange}\n\n        />\n        <input\n          type=\"number\"\n          name=\"peso\"\n          placeholder=\"Peso\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.peso}\n          onChange={handleInputChange}\n\n        />\n        <select\n          name=\"sexo\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.sexo}\n          onChange={handleInputChange}\n        >\n          <option value=\"\">Selecciona Sexo</option>\n          <option value=\"macho\">Macho</option>\n          <option value=\"hembra\">Hembra</option>\n        </select>\n        <input\n          type=\"date\"\n          name=\"fechaNacimiento\"\n          placeholder=\"Fecha de Nacimiento\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.fechaNacimiento}\n          onChange={handleInputChange}\n        />\n        {animalData.edadClasificada && (\n          <input\n            type=\"text\"\n            name=\"edadClasificada\"\n            placeholder=\"Clasificación de Edad\"\n            className=\"w-full px-4 py-2 border rounded-lg bg-gray-100 cursor-not-allowed\"\n            value={animalData.edadClasificada}\n            readOnly\n          />\n        )}\n        <input\n          type=\"date\"\n          name=\"fechaCompra\"\n          placeholder=\"Fecha de Compra (Opcional)\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.fechaCompra}\n          onChange={handleInputChange}\n        />\n        <select\n          name=\"tipoProduccion\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.tipoProduccion}\n          onChange={handleInputChange}\n        >\n          <option value=\"\">Tipo de Producción</option>\n          <option value=\"carne\">Carne</option>\n          <option value=\"leche\">Leche</option>\n        </select>\n        {animalData.tipoProduccion === 'leche' && animalData.sexo === 'hembra' && (\n          <input\n            type=\"number\"\n            name=\"dailyMilk\"\n            placeholder=\"Litros Promedio Diarios\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={animalData.dailyMilk}\n            onChange={handleInputChange}\n          />\n        )}\n        <input\n          type=\"text\"\n          name=\"idpadre\"\n          placeholder=\"ID Padre (Opcional)\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.idpadre}\n          onChange={handleInputChange}\n        />\n        <input\n          type=\"text\"\n          name=\"idmadre\"\n          placeholder=\"ID Madre (Opcional)\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.idmadre}\n          onChange={handleInputChange}\n        />\n        <div className=\"col-span-full\">\n          <label className=\"block text-gray-700 text-sm font-bold mb-2\">Foto del Animal</label>\n          <input\n            type=\"file\"\n            name=\"foto\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            onChange={handleFileChange}\n          />\n        </div>\n      </div>\n      <button\n        onClick={handleSubmit}\n        className=\"mt-6 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors mr-2\"\n      >\n        Registrar Animal\n      </button>\n      <button\n        onClick={() => handleDownloadPDF(animalData, currentUser)} // Pasar el animalData actual para generar PDF\n        className=\"mt-6 bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors\"\n      >\n        Descargar Ficha PDF\n      </button>\n\n      <div className=\"mt-8 pt-4 border-t border-gray-200\">\n        <h4 className=\"text-lg font-semibold mb-3\">Actualizar Producción/Estado</h4>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <input\n            type=\"text\"\n            name=\"id\"\n            placeholder=\"ID del Animal a Actualizar\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={animalData.id}\n            onChange={handleInputChange}\n          />\n          <select\n            name=\"estadoReproductivo\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={animalData.estadoReproductivo}\n            onChange={handleInputChange}\n          >\n            <option value=\"desarrollo\">En Desarrollo</option>\n            <option value=\"en_produccion\">En Producción</option>\n            <option value=\"seca\">Seca</option>\n            <option value=\"preñada\">Preñada</option>\n          </select>\n          {animalData.estadoReproductivo === 'en_produccion' && animalData.tipoProduccion === 'leche' && (\n            <input\n              type=\"number\"\n              name=\"dailyMilk\"\n              placeholder=\"Litros de leche diarios\"\n              className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n              value={animalData.dailyMilk}\n              onChange={handleInputChange}\n            />\n          )}\n        </div>\n        <button\n          onClick={handleUpdateProduction}\n          className=\"mt-4 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors\"\n        >\n          Actualizar Producción\n        </button>\n      </div>\n\n      <div className=\"mt-8 pt-4 border-t border-gray-200\">\n        <h4 className=\"text-lg font-semibold mb-3\">Árbol Genealógico</h4>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <select\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={selectedAnimalForGenealogy}\n            onChange={(e) => setSelectedAnimalForGenealogy(e.target.value)}\n          >\n            <option value=\"\">Selecciona Animal para Genealogía</option>\n            {animals.map(animal => (\n              <option key={animal.id} value={animal.id}>{animal.name} ({animal.id})</option>\n            ))}\n          </select>\n          <button\n            onClick={handleViewGenealogy}\n            className=\"bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors\"\n          >\n            Ver Árbol Genealógico\n          </button>\n        </div>\n\n        {genealogyTree && (\n          <div className=\"mt-4 p-4 border rounded-lg bg-gray-50\">\n            <h5 className=\"font-semibold\">Árbol Genealógico de {genealogyTree.name} ({genealogyTree.id})</h5>\n            <p>Raza: {genealogyTree.raza}, Sexo: {genealogyTree.sexo}</p>\n            {genealogyTree.father && (\n              <p className=\"ml-4\">Padre: {genealogyTree.father.name} ({genealogyTree.father.id})</p>\n            )}\n            {genealogyTree.mother && (\n              <p className=\"ml-4\">Madre: {genealogyTree.mother.name} ({genealogyTree.mother.id})</p>\n            )}\n            {genealogyTree.children.length > 0 && (\n              <div className=\"mt-2\">\n                <p className=\"font-semibold\">Hijos:</p>\n                <ul className=\"list-disc list-inside ml-4\">\n                  {genealogyTree.children.map(child => (\n                    <li key={child.id}>{child.name} ({child.id}) - {child.raza}</li>\n                  ))}\n                </ul>\n              </div>\n            )}\n            <button\n              onClick={handleDownloadGenealogyPDF}\n              className=\"mt-4 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors\"\n            >\n              Descargar Árbol (PDF)\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AnimalRegistrationPage;\n\n// DONE"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import jsPDF from'jspdf';import html2canvas from'html2canvas';export const exportToCsv=(data,filename)=>{if(!data||data.length===0){alert('No hay datos para exportar.');return;}const headers=Object.keys(data[0]);const csv=[headers.join(','),...data.map(row=>headers.map(fieldName=>JSON.stringify(row[fieldName])).join(','))].join('\\n');const blob=new Blob([csv],{type:'text/csv;charset=utf-8;'});const link=document.createElement('a');if(link.download!==undefined){const url=URL.createObjectURL(blob);link.setAttribute('href',url);link.setAttribute('download',\"\".concat(filename,\".csv\"));link.style.visibility='hidden';document.body.appendChild(link);link.click();document.body.removeChild(link);}};export const exportTableToPdf=async(tableElement,filename,title,farmName,adminName,logoUrl)=>{if(!tableElement){alert('No se encontró la tabla para exportar.');return;}const tempDiv=document.createElement('div');tempDiv.style.width='210mm';// A4 width\ntempDiv.style.padding='15mm';tempDiv.style.fontFamily='Arial, sans-serif';tempDiv.style.fontSize='10pt';tempDiv.style.backgroundColor='#f8f8f8';tempDiv.style.position='absolute';tempDiv.style.left='-9999px';tempDiv.style.top='-9999px';const defaultLogo='https://via.placeholder.com/60x60?text=LOGO';// Default logo if none uploaded\ntempDiv.innerHTML=\"\\n    <div style=\\\"border: 1px solid #ddd; border-radius: 12px; overflow: hidden; background-color: #fff; box-shadow: 0 4px 8px rgba(0,0,0,0.1);\\\">\\n      <div style=\\\"background-color: #2c3e50; color: #fff; padding: 20px; display: flex; justify-content: space-between; align-items: center; border-top-left-radius: 10px; border-top-right-radius: 10px;\\\">\\n        <img src=\\\"\".concat(logoUrl||defaultLogo,\"\\\" style=\\\"width: 60px; height: 60px; border-radius: 50%; object-fit: cover;\\\" alt=\\\"Logo Finca\\\">\\n        <div style=\\\"text-align: right;\\\">\\n          <h1 style=\\\"margin: 0; font-size: 20pt; font-weight: bold;\\\">\").concat(farmName||'Mi Finca Ganadera',\"</h1>\\n          <p style=\\\"margin: 0; font-size: 10pt; opacity: 0.8;\\\">\").concat(title,\"</p>\\n        </div>\\n      </div>\\n      <div style=\\\"padding: 25px;\\\">\\n        \").concat(tableElement.outerHTML,\"\\n      </div>\\n      <div style=\\\"text-align: right; font-size: 8pt; padding: 10px 20px; color: #aaa; background-color: #f8f8f8; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;\\\">\\n        <p style=\\\"margin: 0;\\\">Generado por Campo Inteligente | Administrador: \").concat(adminName||'N/A',\"</p>\\n        <p style=\\\"margin: 0;\\\">Fecha de Generaci\\xF3n: \").concat(new Date().toLocaleDateString(),\"</p>\\n      </div>\\n    </div>\\n  \");document.body.appendChild(tempDiv);try{const canvas=await html2canvas(tempDiv,{scale:2,useCORS:true});const imgData=canvas.toDataURL('image/png');const pdf=new jsPDF('p','mm','a4');const imgWidth=210;const pageHeight=297;const imgHeight=canvas.height*imgWidth/canvas.width;let heightLeft=imgHeight;let position=0;pdf.addImage(imgData,'PNG',0,position,imgWidth,imgHeight);heightLeft-=pageHeight;while(heightLeft>0){position=heightLeft-imgHeight;pdf.addPage();pdf.addImage(imgData,'PNG',0,position,imgWidth,imgHeight);heightLeft-=pageHeight;}pdf.save(\"\".concat(filename,\".pdf\"));}catch(error){console.error(\"Error al generar PDF:\",error);alert(\"Hubo un error al generar el PDF. Inténtalo de nuevo.\");}finally{document.body.removeChild(tempDiv);}};","map":{"version":3,"names":["jsPDF","html2canvas","exportToCsv","data","filename","length","alert","headers","Object","keys","csv","join","map","row","fieldName","JSON","stringify","blob","Blob","type","link","document","createElement","download","undefined","url","URL","createObjectURL","setAttribute","concat","style","visibility","body","appendChild","click","removeChild","exportTableToPdf","tableElement","title","farmName","adminName","logoUrl","tempDiv","width","padding","fontFamily","fontSize","backgroundColor","position","left","top","defaultLogo","innerHTML","outerHTML","Date","toLocaleDateString","canvas","scale","useCORS","imgData","toDataURL","pdf","imgWidth","pageHeight","imgHeight","height","heightLeft","addImage","addPage","save","error","console"],"sources":["C:/Users/User/Downloads/project (10)/src/utils/exportHelpers.js"],"sourcesContent":["import jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\n\nexport const exportToCsv = (data, filename) => {\n  if (!data || data.length === 0) {\n    alert('No hay datos para exportar.');\n    return;\n  }\n\n  const headers = Object.keys(data[0]);\n  const csv = [\n    headers.join(','),\n    ...data.map(row => headers.map(fieldName => JSON.stringify(row[fieldName])).join(','))\n  ].join('\\n');\n\n  const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\n  const link = document.createElement('a');\n  if (link.download !== undefined) {\n    const url = URL.createObjectURL(blob);\n    link.setAttribute('href', url);\n    link.setAttribute('download', `${filename}.csv`);\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  }\n};\n\nexport const exportTableToPdf = async (tableElement, filename, title, farmName, adminName, logoUrl) => {\n  if (!tableElement) {\n    alert('No se encontró la tabla para exportar.');\n    return;\n  }\n\n  const tempDiv = document.createElement('div');\n  tempDiv.style.width = '210mm'; // A4 width\n  tempDiv.style.padding = '15mm';\n  tempDiv.style.fontFamily = 'Arial, sans-serif';\n  tempDiv.style.fontSize = '10pt';\n  tempDiv.style.backgroundColor = '#f8f8f8';\n  tempDiv.style.position = 'absolute';\n  tempDiv.style.left = '-9999px';\n  tempDiv.style.top = '-9999px';\n\n  const defaultLogo = 'https://via.placeholder.com/60x60?text=LOGO'; // Default logo if none uploaded\n\n  tempDiv.innerHTML = `\n    <div style=\"border: 1px solid #ddd; border-radius: 12px; overflow: hidden; background-color: #fff; box-shadow: 0 4px 8px rgba(0,0,0,0.1);\">\n      <div style=\"background-color: #2c3e50; color: #fff; padding: 20px; display: flex; justify-content: space-between; align-items: center; border-top-left-radius: 10px; border-top-right-radius: 10px;\">\n        <img src=\"${logoUrl || defaultLogo}\" style=\"width: 60px; height: 60px; border-radius: 50%; object-fit: cover;\" alt=\"Logo Finca\">\n        <div style=\"text-align: right;\">\n          <h1 style=\"margin: 0; font-size: 20pt; font-weight: bold;\">${farmName || 'Mi Finca Ganadera'}</h1>\n          <p style=\"margin: 0; font-size: 10pt; opacity: 0.8;\">${title}</p>\n        </div>\n      </div>\n      <div style=\"padding: 25px;\">\n        ${tableElement.outerHTML}\n      </div>\n      <div style=\"text-align: right; font-size: 8pt; padding: 10px 20px; color: #aaa; background-color: #f8f8f8; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;\">\n        <p style=\"margin: 0;\">Generado por Campo Inteligente | Administrador: ${adminName || 'N/A'}</p>\n        <p style=\"margin: 0;\">Fecha de Generación: ${new Date().toLocaleDateString()}</p>\n      </div>\n    </div>\n  `;\n\n  document.body.appendChild(tempDiv);\n\n  try {\n    const canvas = await html2canvas(tempDiv, { scale: 2, useCORS: true });\n    const imgData = canvas.toDataURL('image/png');\n    const pdf = new jsPDF('p', 'mm', 'a4');\n    const imgWidth = 210;\n    const pageHeight = 297;\n    const imgHeight = canvas.height * imgWidth / canvas.width;\n    let heightLeft = imgHeight;\n    let position = 0;\n\n    pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n    heightLeft -= pageHeight;\n\n    while (heightLeft > 0) {\n      position = heightLeft - imgHeight;\n      pdf.addPage();\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pageHeight;\n    }\n\n    pdf.save(`${filename}.pdf`);\n  } catch (error) {\n    console.error(\"Error al generar PDF:\", error);\n    alert(\"Hubo un error al generar el PDF. Inténtalo de nuevo.\");\n  } finally {\n    document.body.removeChild(tempDiv);\n  }\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
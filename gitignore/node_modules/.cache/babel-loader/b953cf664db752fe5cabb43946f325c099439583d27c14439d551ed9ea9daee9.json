{"ast":null,"code":"import jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\nexport const exportToCsv = (data, filename) => {\n  if (!data || data.length === 0) {\n    alert('No hay datos para exportar.');\n    return;\n  }\n  const headers = Object.keys(data[0]);\n  const csv = [headers.join(','), ...data.map(row => headers.map(fieldName => JSON.stringify(row[fieldName])).join(','))].join('\\n');\n  const blob = new Blob([csv], {\n    type: 'text/csv;charset=utf-8;'\n  });\n  const link = document.createElement('a');\n  if (link.download !== undefined) {\n    const url = URL.createObjectURL(blob);\n    link.setAttribute('href', url);\n    link.setAttribute('download', `${filename}.csv`);\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  }\n};\nexport const exportTableToPdf = async (tableElement, filename, title, farmName, adminName, logoUrl) => {\n  if (!tableElement) {\n    alert('No se encontró la tabla para exportar.');\n    return;\n  }\n  const tempDiv = document.createElement('div');\n  tempDiv.style.width = '210mm'; // A4 width\n  tempDiv.style.padding = '15mm';\n  tempDiv.style.fontFamily = 'Arial, sans-serif';\n  tempDiv.style.fontSize = '10pt';\n  tempDiv.style.backgroundColor = '#f8f8f8';\n  tempDiv.style.position = 'absolute';\n  tempDiv.style.left = '-9999px';\n  tempDiv.style.top = '-9999px';\n  const defaultLogo = 'https://via.placeholder.com/60x60?text=LOGO'; // Default logo if none uploaded\n\n  tempDiv.innerHTML = `\n    <div style=\"border: 1px solid #ddd; border-radius: 12px; overflow: hidden; background-color: #fff; box-shadow: 0 4px 8px rgba(0,0,0,0.1);\">\n      <div style=\"background-color: #2c3e50; color: #fff; padding: 20px; display: flex; justify-content: space-between; align-items: center; border-top-left-radius: 10px; border-top-right-radius: 10px;\">\n        <img src=\"${logoUrl || defaultLogo}\" style=\"width: 60px; height: 60px; border-radius: 50%; object-fit: cover;\" alt=\"Logo Finca\">\n        <div style=\"text-align: right;\">\n          <h1 style=\"margin: 0; font-size: 20pt; font-weight: bold;\">${farmName || 'Mi Finca Ganadera'}</h1>\n          <p style=\"margin: 0; font-size: 10pt; opacity: 0.8;\">${title}</p>\n        </div>\n      </div>\n      <div style=\"padding: 25px;\">\n        ${tableElement.outerHTML}\n      </div>\n      <div style=\"text-align: right; font-size: 8pt; padding: 10px 20px; color: #aaa; background-color: #f8f8f8; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;\">\n        <p style=\"margin: 0;\">Generado por Campo Inteligente | Administrador: ${adminName || 'N/A'}</p>\n        <p style=\"margin: 0;\">Fecha de Generación: ${new Date().toLocaleDateString()}</p>\n      </div>\n    </div>\n  `;\n  document.body.appendChild(tempDiv);\n  try {\n    const canvas = await html2canvas(tempDiv, {\n      scale: 2,\n      useCORS: true\n    });\n    const imgData = canvas.toDataURL('image/png');\n    const pdf = new jsPDF('p', 'mm', 'a4');\n    const imgWidth = 210;\n    const pageHeight = 297;\n    const imgHeight = canvas.height * imgWidth / canvas.width;\n    let heightLeft = imgHeight;\n    let position = 0;\n    pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n    heightLeft -= pageHeight;\n    while (heightLeft > 0) {\n      position = heightLeft - imgHeight;\n      pdf.addPage();\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pageHeight;\n    }\n    pdf.save(`${filename}.pdf`);\n  } catch (error) {\n    console.error(\"Error al generar PDF:\", error);\n    alert(\"Hubo un error al generar el PDF. Inténtalo de nuevo.\");\n  } finally {\n    document.body.removeChild(tempDiv);\n  }\n};","map":{"version":3,"names":["jsPDF","html2canvas","exportToCsv","data","filename","length","alert","headers","Object","keys","csv","join","map","row","fieldName","JSON","stringify","blob","Blob","type","link","document","createElement","download","undefined","url","URL","createObjectURL","setAttribute","style","visibility","body","appendChild","click","removeChild","exportTableToPdf","tableElement","title","farmName","adminName","logoUrl","tempDiv","width","padding","fontFamily","fontSize","backgroundColor","position","left","top","defaultLogo","innerHTML","outerHTML","Date","toLocaleDateString","canvas","scale","useCORS","imgData","toDataURL","pdf","imgWidth","pageHeight","imgHeight","height","heightLeft","addImage","addPage","save","error","console"],"sources":["C:/Users/User/Downloads/project (10)/src/utils/exportHelpers.js"],"sourcesContent":["import jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\n\nexport const exportToCsv = (data, filename) => {\n  if (!data || data.length === 0) {\n    alert('No hay datos para exportar.');\n    return;\n  }\n\n  const headers = Object.keys(data[0]);\n  const csv = [\n    headers.join(','),\n    ...data.map(row => headers.map(fieldName => JSON.stringify(row[fieldName])).join(','))\n  ].join('\\n');\n\n  const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\n  const link = document.createElement('a');\n  if (link.download !== undefined) {\n    const url = URL.createObjectURL(blob);\n    link.setAttribute('href', url);\n    link.setAttribute('download', `${filename}.csv`);\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  }\n};\n\nexport const exportTableToPdf = async (tableElement, filename, title, farmName, adminName, logoUrl) => {\n  if (!tableElement) {\n    alert('No se encontró la tabla para exportar.');\n    return;\n  }\n\n  const tempDiv = document.createElement('div');\n  tempDiv.style.width = '210mm'; // A4 width\n  tempDiv.style.padding = '15mm';\n  tempDiv.style.fontFamily = 'Arial, sans-serif';\n  tempDiv.style.fontSize = '10pt';\n  tempDiv.style.backgroundColor = '#f8f8f8';\n  tempDiv.style.position = 'absolute';\n  tempDiv.style.left = '-9999px';\n  tempDiv.style.top = '-9999px';\n\n  const defaultLogo = 'https://via.placeholder.com/60x60?text=LOGO'; // Default logo if none uploaded\n\n  tempDiv.innerHTML = `\n    <div style=\"border: 1px solid #ddd; border-radius: 12px; overflow: hidden; background-color: #fff; box-shadow: 0 4px 8px rgba(0,0,0,0.1);\">\n      <div style=\"background-color: #2c3e50; color: #fff; padding: 20px; display: flex; justify-content: space-between; align-items: center; border-top-left-radius: 10px; border-top-right-radius: 10px;\">\n        <img src=\"${logoUrl || defaultLogo}\" style=\"width: 60px; height: 60px; border-radius: 50%; object-fit: cover;\" alt=\"Logo Finca\">\n        <div style=\"text-align: right;\">\n          <h1 style=\"margin: 0; font-size: 20pt; font-weight: bold;\">${farmName || 'Mi Finca Ganadera'}</h1>\n          <p style=\"margin: 0; font-size: 10pt; opacity: 0.8;\">${title}</p>\n        </div>\n      </div>\n      <div style=\"padding: 25px;\">\n        ${tableElement.outerHTML}\n      </div>\n      <div style=\"text-align: right; font-size: 8pt; padding: 10px 20px; color: #aaa; background-color: #f8f8f8; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;\">\n        <p style=\"margin: 0;\">Generado por Campo Inteligente | Administrador: ${adminName || 'N/A'}</p>\n        <p style=\"margin: 0;\">Fecha de Generación: ${new Date().toLocaleDateString()}</p>\n      </div>\n    </div>\n  `;\n\n  document.body.appendChild(tempDiv);\n\n  try {\n    const canvas = await html2canvas(tempDiv, { scale: 2, useCORS: true });\n    const imgData = canvas.toDataURL('image/png');\n    const pdf = new jsPDF('p', 'mm', 'a4');\n    const imgWidth = 210;\n    const pageHeight = 297;\n    const imgHeight = canvas.height * imgWidth / canvas.width;\n    let heightLeft = imgHeight;\n    let position = 0;\n\n    pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n    heightLeft -= pageHeight;\n\n    while (heightLeft > 0) {\n      position = heightLeft - imgHeight;\n      pdf.addPage();\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pageHeight;\n    }\n\n    pdf.save(`${filename}.pdf`);\n  } catch (error) {\n    console.error(\"Error al generar PDF:\", error);\n    alert(\"Hubo un error al generar el PDF. Inténtalo de nuevo.\");\n  } finally {\n    document.body.removeChild(tempDiv);\n  }\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
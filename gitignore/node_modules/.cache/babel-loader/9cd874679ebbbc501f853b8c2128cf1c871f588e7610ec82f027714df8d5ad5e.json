{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Downloads\\\\project (10)\\\\src\\\\components\\\\AnimalRegistrationPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AnimalRegistrationPage = ({\n  onRegisterAnimal,\n  onUpdateAnimalProduction,\n  animals,\n  currentUser\n}) => {\n  _s();\n  const [animalData, setAnimalData] = useState({\n    id: '',\n    // Campo para el ID manual\n    name: '',\n    raza: '',\n    peso: '',\n    sexo: '',\n    fechaNacimiento: '',\n    fechaCompra: '',\n    tipoProduccion: '',\n    dailyMilk: 0,\n    foto: null,\n    idpadre: '',\n    idmadre: '',\n    estadoReproductivo: 'Desarrollo',\n    edadClasificada: '' // Nuevo campo para la clasificación de edad\n  });\n  const [selectedAnimalForGenealogy, setSelectedAnimalForGenealogy] = useState('');\n  const [genealogyTree, setGenealogyTree] = useState(null);\n\n  // Función para calcular la edad y clasificar el animal\n  const classifyAnimalAge = (fechaNacimiento, sexo) => {\n    if (!fechaNacimiento) return '';\n    const birthDate = new Date(fechaNacimiento);\n    const today = new Date();\n    const diffTime = Math.abs(today - birthDate);\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    if (sexo === 'macho') {\n      if (diffDays <= 365) return 'Ternero'; // Hasta 1 año\n      if (diffDays > 365 && diffDays <= 730) return 'Mauto'; // 1 a 2 años\n      if (diffDays > 730) return 'Toro'; // Más de 2 años\n    } else if (sexo === 'hembra') {\n      if (diffDays <= 365) return 'Ternera'; // Hasta 1 año\n      if (diffDays > 365 && diffDays <= 730) return 'Mauta'; // 1 a 2 años\n      if (diffDays > 730 && diffDays <= 1095) return 'Novilla'; // 2 a 3 años\n      if (diffDays > 1095) return 'Vaca'; // Más de 3 años\n    }\n    return '';\n  };\n  useEffect(() => {\n    const {\n      fechaNacimiento,\n      sexo\n    } = animalData;\n    if (fechaNacimiento && sexo) {\n      setAnimalData(prevData => ({\n        ...prevData,\n        edadClasificada: classifyAnimalAge(fechaNacimiento, sexo)\n      }));\n    } else {\n      setAnimalData(prevData => ({\n        ...prevData,\n        edadClasificada: ''\n      }));\n    }\n  }, [animalData.fechaNacimiento, animalData.sexo]);\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setAnimalData({\n      ...animalData,\n      [name]: value\n    });\n  };\n  const handleFileChange = e => {\n    setAnimalData({\n      ...animalData,\n      foto: e.target.files[0]\n    });\n  };\n  const handleSubmit = () => {\n    if (!animalData.id) {\n      alert('Por favor, ingresa un ID para el animal.');\n      return;\n    }\n    // Validar que el ID sea único\n    if (animals.some(animal => animal.id === animalData.id)) {\n      alert('El ID del animal ya existe. Por favor, ingresa un ID único.');\n      return;\n    }\n    const animalToRegister = {\n      ...animalData\n    };\n    onRegisterAnimal(animalToRegister);\n    alert(`Animal ${animalToRegister.name} (${animalToRegister.id}) registrado.`);\n    setAnimalData({\n      id: '',\n      name: '',\n      raza: '',\n      peso: '',\n      sexo: '',\n      fechaNacimiento: '',\n      fechaCompra: '',\n      tipoProduccion: '',\n      dailyMilk: 0,\n      foto: null,\n      idpadre: '',\n      idmadre: '',\n      estadoReproductivo: 'desarrollo',\n      edadClasificada: ''\n    });\n  };\n  const handleDownloadPDF = (animal, currentUser) => {\n    if (!animal || !animal.id) {\n      alert('Por favor, selecciona un animal válido.');\n      return;\n    }\n    const farmName = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.farmName) || 'Mi Finca Ganadera';\n    const adminName = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.fullName) || 'Administrador';\n    const logoPlaceholder = 'https://via.placeholder.com/60x60?text=LOGO';\n    const qrURL = `https://api.qrserver.com/v1/create-qr-code/?data=${animal.id}&size=80x80`;\n    const tempDiv = document.createElement('div');\n    tempDiv.style.width = '210mm';\n    tempDiv.style.padding = '20mm';\n    tempDiv.style.fontFamily = 'Arial, sans-serif';\n    tempDiv.style.fontSize = '11pt';\n    tempDiv.style.backgroundColor = '#fff';\n    tempDiv.style.position = 'absolute';\n    tempDiv.style.left = '-9999px';\n    tempDiv.style.top = '-9999px';\n    const colorEstado = animal.estadoReproductivo === 'en_produccion' ? '#27ae60' : animal.estadoReproductivo === 'seca' ? '#e67e22' : animal.estadoReproductivo === 'preñada' ? '#9b59b6' : '#7f8c8d';\n    tempDiv.innerHTML = `\n    <div style=\"border: 2px solid #ccc; border-radius: 10px; padding: 20px;\">\n      <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n        <img src=\"${logoPlaceholder}\" style=\"width: 60px;\" alt=\"Logo Finca\">\n        <div style=\"text-align: right;\">\n          <h1 style=\"margin: 0; color: #2c3e50;\">${farmName}</h1>\n          <p style=\"margin: 0; color: #7f8c8d;\">Ficha de Registro Animal</p>\n        </div>\n      </div>\n\n      <div style=\"display: flex; margin-top: 20px; gap: 20px;\">\n        <div style=\"flex-shrink: 0;\">\n          <img src=\"${animal.foto ? URL.createObjectURL(animal.foto) : 'https://via.placeholder.com/120x120?text=Sin+Foto'}\" style=\"width: 120px; border-radius: 8px; border: 1px solid #ccc;\" alt=\"Foto del animal\">\n        </div>\n        <div style=\"flex-grow: 1;\">\n          <table style=\"width: 100%; border-collapse: collapse; border: 2px solid #000;\">\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 12px;\"><strong>Nombre:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.name || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10x 16px;\"><strong>ID:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.id || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>Raza:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.raza || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>Peso:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.peso || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>Sexo:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.sexo || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>Fecha Nacimiento:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.fechaNacimiento || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>Edad Clasificada:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.edadClasificada || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>Fecha Compra:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.fechaCompra || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>ID Padre:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.idpadre || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>ID Madre:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.idmadre || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>Estado:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px; color: ${colorEstado};\">${animal.estadoReproductivo || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>Tipo Producción:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.tipoProduccion || 'N/A'}</td></tr>\n          </table>\n        </div>\n      </div>\n\n      <div style=\"text-align: center; margin-top: 30px;\">\n        <img src=\"${qrURL}\" style=\"width: 80px;\" alt=\"QR Code del animal\">\n      </div>\n\n      <p style=\"text-align: right; font-size: 10px; margin-top: 30px; color: #aaa;\">\n        Generado por Campo Inteligente | ${adminName}\n      </p>\n    </div>\n  `;\n    document.body.appendChild(tempDiv);\n    html2canvas(tempDiv, {\n      scale: 2\n    }).then(canvas => {\n      const imgData = canvas.toDataURL('image/png');\n      const pdf = new jsPDF('p', 'mm', 'a4');\n      const imgWidth = 210;\n      const pageHeight = 297;\n      const imgHeight = canvas.height * imgWidth / canvas.width;\n      let heightLeft = imgHeight;\n      let position = 0;\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pageHeight;\n      while (heightLeft > 0) {\n        position = heightLeft - imgHeight;\n        pdf.addPage();\n        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n        heightLeft -= pageHeight;\n      }\n      pdf.save(`ficha_animal_${animal.name || 'sin_nombre'}_${animal.id || 'sin_id'}.pdf`);\n      document.body.removeChild(tempDiv);\n    });\n  };\n  const handleUpdateProduction = () => {\n    if (animalData.id) {\n      onUpdateAnimalProduction(animalData.id, animalData.estadoReproductivo, animalData.dailyMilk);\n      alert(`Producción/Estado de ${animalData.id} actualizado.`);\n    } else {\n      alert('Por favor, ingresa el ID del animal para actualizar su producción/estado.');\n    }\n  };\n\n  // --- Lógica del Árbol Genealógico ---\n  const buildGenealogyTree = (animalId, allAnimals) => {\n    const animal = allAnimals.find(a => a.id === animalId);\n    if (!animal) return null;\n    const tree = {\n      id: animal.id,\n      name: animal.name,\n      raza: animal.raza,\n      sexo: animal.sexo,\n      children: []\n    };\n\n    // Buscar hijos (simplificado: solo busca una generación hacia abajo)\n    const children = allAnimals.filter(a => a.idpadre === animal.id || a.idmadre === animal.id);\n    if (children.length > 0) {\n      tree.children = children.map(child => ({\n        id: child.id,\n        name: child.name,\n        raza: child.raza,\n        sexo: child.sexo\n        // Para un árbol completo, esto sería recursivo:\n        // children: buildGenealogyTree(child.id, allAnimals).children\n      }));\n    }\n\n    // Buscar padres (una generación hacia arriba)\n    if (animal.idpadre) {\n      tree.father = allAnimals.find(a => a.id === animal.idpadre);\n    }\n    if (animal.idmadre) {\n      tree.mother = allAnimals.find(a => a.id === animal.idmadre);\n    }\n    return tree;\n  };\n  const handleViewGenealogy = () => {\n    if (!selectedAnimalForGenealogy) {\n      alert('Por favor, selecciona un animal para ver su árbol genealógico.');\n      return;\n    }\n    const tree = buildGenealogyTree(selectedAnimalForGenealogy, animals);\n    setGenealogyTree(tree);\n    if (!tree) {\n      alert('Animal no encontrado o sin información genealógica.');\n    }\n  };\n  const handleDownloadGenealogyJPG = () => {\n    if (!genealogyTree) {\n      alert('Primero visualiza un árbol genealógico para descargarlo.');\n      return;\n    }\n    const farmName = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.farmName) || 'Mi Finca Ganadera';\n    const adminName = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.fullName) || 'Administrador';\n    const logoPlaceholder = 'https://via.placeholder.com/50x50?text=LOGO';\n\n    // Crear un div temporal para el árbol genealógico\n    const treeDiv = document.createElement('div');\n    treeDiv.style.width = '297mm'; // Ancho A4 horizontal\n    treeDiv.style.height = '210mm'; // Alto A4 horizontal\n    treeDiv.style.padding = '10mm';\n    treeDiv.style.fontFamily = 'Arial, sans-serif';\n    treeDiv.style.fontSize = '8pt';\n    treeDiv.style.color = '#333';\n    treeDiv.style.position = 'absolute';\n    treeDiv.style.left = '-9999px';\n    treeDiv.style.top = '-9999px';\n    treeDiv.style.backgroundColor = '#fff';\n    treeDiv.style.display = 'flex';\n    treeDiv.style.flexDirection = 'column';\n    treeDiv.style.justifyContent = 'space-between';\n\n    // Función para renderizar un nodo del árbol (simplificado)\n    const renderNode = (node, level = 0) => {\n      let html = `<div style=\"margin-left: ${level * 10}mm; margin-bottom: 5mm; border: 1px solid #ccc; padding: 5mm; border-radius: 5px; background-color: #f9f9f9;\">`;\n      html += `<p><strong>${node.name}</strong> (${node.id})</p>`;\n      html += `<p>Raza: ${node.raza}, Sexo: ${node.sexo}</p>`;\n      if (node.father || node.mother || node.children.length > 0) {\n        html += `<div style=\"margin-top: 5mm;\">`;\n        if (node.father) html += `<p>Padre: ${node.father.name} (${node.father.id})</p>`;\n        if (node.mother) html += `<p>Madre: ${node.mother.name} (${node.mother.id})</p>`;\n        if (node.children.length > 0) {\n          html += `<p>Hijos:</p><ul style=\"list-style: none; padding: 0; margin: 0;\">`;\n          node.children.forEach(child => {\n            html += `<li style=\"margin-left: 10mm;\">${child.name} (${child.id})</li>`;\n          });\n          html += `</ul>`;\n        }\n        html += `</div>`;\n      }\n      html += `</div>`;\n      return html;\n    };\n    treeDiv.innerHTML = `\n      <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 10mm; padding-bottom: 5mm; border-bottom: 1px solid #eee;\">\n        <img src=\"${logoPlaceholder}\" alt=\"Logo Finca\" style=\"width: 15mm; height: 15mm; object-fit: contain;\" />\n        <div style=\"text-align: right;\">\n          <h1 style=\"font-size: 16pt; margin: 0; color: #2c3e50;\">${farmName}</h1>\n          <p style=\"font-size: 9pt; margin: 0; color: #7f8c8d;\">Árbol Genealógico</p>\n        </div>\n      </div>\n      <div style=\"flex-grow: 1; overflow: auto; display: flex; flex-direction: column; align-items: flex-start;\">\n        ${renderNode(genealogyTree)}\n        ${genealogyTree.father ? renderNode(genealogyTree.father, 1) : ''}\n        ${genealogyTree.mother ? renderNode(genealogyTree.mother, 1) : ''}\n        ${genealogyTree.children.map(child => renderNode(child, 1)).join('')}\n      </div>\n      <div style=\"text-align: center; margin-top: 10mm; font-size: 8pt; color: #7f8c8d; border-top: 1px solid #eee; padding-top: 5mm;\">\n        <p>Generado por Campo Inteligente</p>\n        <p>Administrador: ${adminName}</p>\n      </div>\n    `;\n    document.body.appendChild(treeDiv);\n    html2canvas(treeDiv, {\n      scale: 2\n    }).then(canvas => {\n      const imgData = canvas.toDataURL('image/png');\n      const pdf = new jsPDF('l', 'mm', 'a4'); // 'l' para orientación horizontal\n      const imgWidth = 297; // A4 horizontal width in mm\n      const pageHeight = 210; // A4 horizontal height in mm\n      const imgHeight = canvas.height * imgWidth / canvas.width;\n      let heightLeft = imgHeight;\n      let position = 0;\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pageHeight;\n      while (heightLeft >= 0) {\n        position = heightLeft - imgHeight;\n        pdf.addPage();\n        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n        heightLeft -= pageHeight;\n      }\n      pdf.save(`arbol_genealogico_${genealogyTree.name || 'sin_nombre'}_${genealogyTree.id || 'sin_id'}.pdf`);\n      document.body.removeChild(treeDiv);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white p-6 rounded-lg shadow-md\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-xl font-semibold mb-4\",\n      children: \"Registro Animal Avanzado\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"id\",\n        placeholder: \"ID del Animal (\\xDAnico)\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.id,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        placeholder: \"Nombre del Animal\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.name,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"raza\",\n        placeholder: \"Raza\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.raza,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"peso\",\n        placeholder: \"Peso\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.peso,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"sexo\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.sexo,\n        onChange: handleInputChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Selecciona Sexo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"macho\",\n          children: \"Macho\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"hembra\",\n          children: \"Hembra\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"date\",\n        name: \"fechaNacimiento\",\n        placeholder: \"Fecha de Nacimiento\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.fechaNacimiento,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 9\n      }, this), animalData.edadClasificada && /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"edadClasificada\",\n        placeholder: \"Clasificaci\\xF3n de Edad\",\n        className: \"w-full px-4 py-2 border rounded-lg bg-gray-100 cursor-not-allowed\",\n        value: animalData.edadClasificada,\n        readOnly: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"date\",\n        name: \"fechaCompra\",\n        placeholder: \"Fecha de Compra (Opcional)\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.fechaCompra,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"tipoProduccion\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.tipoProduccion,\n        onChange: handleInputChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Tipo de Producci\\xF3n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"carne\",\n          children: \"Carne\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"leche\",\n          children: \"Leche\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 9\n      }, this), animalData.tipoProduccion === 'leche' && animalData.sexo === 'hembra' && /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"dailyMilk\",\n        placeholder: \"Litros Promedio Diarios\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.dailyMilk,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"idpadre\",\n        placeholder: \"ID Padre (Opcional)\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.idpadre,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"idmadre\",\n        placeholder: \"ID Madre (Opcional)\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.idmadre,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-span-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-2\",\n          children: \"Foto del Animal\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          name: \"foto\",\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          onChange: handleFileChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 447,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSubmit,\n      className: \"mt-6 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors mr-2\",\n      children: \"Registrar Animal\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 457,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => handleDownloadPDF(animalData, currentUser) // Pasar el animalData actual para generar PDF\n      ,\n      className: \"mt-6 bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors\",\n      children: \"Descargar Ficha PDF\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 463,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-8 pt-4 border-t border-gray-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-lg font-semibold mb-3\",\n        children: \"Actualizar Producci\\xF3n/Estado\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 471,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"id\",\n          placeholder: \"ID del Animal a Actualizar\",\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          value: animalData.id,\n          onChange: handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"estadoReproductivo\",\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          value: animalData.estadoReproductivo,\n          onChange: handleInputChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"desarrollo\",\n            children: \"En Desarrollo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 487,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"en_produccion\",\n            children: \"En Producci\\xF3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 488,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"seca\",\n            children: \"Seca\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"pre\\xF1ada\",\n            children: \"Pre\\xF1ada\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 490,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 11\n        }, this), animalData.estadoReproductivo === 'en_produccion' && animalData.tipoProduccion === 'leche' && /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"dailyMilk\",\n          placeholder: \"Litros de leche diarios\",\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          value: animalData.dailyMilk,\n          onChange: handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleUpdateProduction,\n        className: \"mt-4 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors\",\n        children: \"Actualizar Producci\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 503,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 470,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-8 pt-4 border-t border-gray-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-lg font-semibold mb-3\",\n        children: \"\\xC1rbol Geneal\\xF3gico\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          value: selectedAnimalForGenealogy,\n          onChange: e => setSelectedAnimalForGenealogy(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Selecciona Animal para Genealog\\xEDa\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 519,\n            columnNumber: 13\n          }, this), animals.map(animal => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: animal.id,\n            children: [animal.name, \" (\", animal.id, \")\"]\n          }, animal.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 521,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 514,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleViewGenealogy,\n          className: \"bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors\",\n          children: \"Ver \\xC1rbol Geneal\\xF3gico\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 524,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 513,\n        columnNumber: 9\n      }, this), genealogyTree && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 p-4 border rounded-lg bg-gray-50\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"font-semibold\",\n          children: [\"\\xC1rbol Geneal\\xF3gico de \", genealogyTree.name, \" (\", genealogyTree.id, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Raza: \", genealogyTree.raza, \", Sexo: \", genealogyTree.sexo]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 13\n        }, this), genealogyTree.father && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"ml-4\",\n          children: [\"Padre: \", genealogyTree.father.name, \" (\", genealogyTree.father.id, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 537,\n          columnNumber: 15\n        }, this), genealogyTree.mother && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"ml-4\",\n          children: [\"Madre: \", genealogyTree.mother.name, \" (\", genealogyTree.mother.id, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 15\n        }, this), genealogyTree.children.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"font-semibold\",\n            children: \"Hijos:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 544,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"list-disc list-inside ml-4\",\n            children: genealogyTree.children.map(child => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [child.name, \" (\", child.id, \") - \", child.raza]\n            }, child.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 547,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 545,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 543,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleDownloadGenealogyJPG,\n          className: \"mt-4 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors\",\n          children: \"Descargar \\xC1rbol (JPG)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 533,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 511,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 338,\n    columnNumber: 5\n  }, this);\n};\n_s(AnimalRegistrationPage, \"HNhWDUsTj6YB5ygSJf6XKexSDBk=\");\n_c = AnimalRegistrationPage;\nexport default AnimalRegistrationPage;\nvar _c;\n$RefreshReg$(_c, \"AnimalRegistrationPage\");","map":{"version":3,"names":["React","useState","useEffect","jsPDF","html2canvas","jsxDEV","_jsxDEV","AnimalRegistrationPage","onRegisterAnimal","onUpdateAnimalProduction","animals","currentUser","_s","animalData","setAnimalData","id","name","raza","peso","sexo","fechaNacimiento","fechaCompra","tipoProduccion","dailyMilk","foto","idpadre","idmadre","estadoReproductivo","edadClasificada","selectedAnimalForGenealogy","setSelectedAnimalForGenealogy","genealogyTree","setGenealogyTree","classifyAnimalAge","birthDate","Date","today","diffTime","Math","abs","diffDays","ceil","prevData","handleInputChange","e","value","target","handleFileChange","files","handleSubmit","alert","some","animal","animalToRegister","handleDownloadPDF","farmName","adminName","fullName","logoPlaceholder","qrURL","tempDiv","document","createElement","style","width","padding","fontFamily","fontSize","backgroundColor","position","left","top","colorEstado","innerHTML","URL","createObjectURL","body","appendChild","scale","then","canvas","imgData","toDataURL","pdf","imgWidth","pageHeight","imgHeight","height","heightLeft","addImage","addPage","save","removeChild","handleUpdateProduction","buildGenealogyTree","animalId","allAnimals","find","a","tree","children","filter","length","map","child","father","mother","handleViewGenealogy","handleDownloadGenealogyJPG","treeDiv","color","display","flexDirection","justifyContent","renderNode","node","level","html","forEach","join","className","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","readOnly","onClick","_c","$RefreshReg$"],"sources":["C:/Users/User/Downloads/project (10)/src/components/AnimalRegistrationPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\n\nconst AnimalRegistrationPage = ({ onRegisterAnimal, onUpdateAnimalProduction, animals, currentUser }) => {\n  const [animalData, setAnimalData] = useState({\n    id: '', // Campo para el ID manual\n    name: '',\n    raza: '',\n    peso: '',\n    sexo: '',\n    fechaNacimiento: '',\n    fechaCompra: '',\n    tipoProduccion: '',\n    dailyMilk: 0,\n    foto: null,\n    idpadre: '',\n    idmadre: '',\n    estadoReproductivo: 'Desarrollo',\n    edadClasificada: '', // Nuevo campo para la clasificación de edad\n  });\n  const [selectedAnimalForGenealogy, setSelectedAnimalForGenealogy] = useState('');\n  const [genealogyTree, setGenealogyTree] = useState(null);\n\n  // Función para calcular la edad y clasificar el animal\n  const classifyAnimalAge = (fechaNacimiento, sexo) => {\n    if (!fechaNacimiento) return '';\n\n    const birthDate = new Date(fechaNacimiento);\n    const today = new Date();\n    const diffTime = Math.abs(today - birthDate);\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n\n    if (sexo === 'macho') {\n      if (diffDays <= 365) return 'Ternero'; // Hasta 1 año\n      if (diffDays > 365 && diffDays <= 730) return 'Mauto'; // 1 a 2 años\n      if (diffDays > 730) return 'Toro'; // Más de 2 años\n    } else if (sexo === 'hembra') {\n      if (diffDays <= 365) return 'Ternera'; // Hasta 1 año\n      if (diffDays > 365 && diffDays <= 730) return 'Mauta'; // 1 a 2 años\n      if (diffDays > 730 && diffDays <= 1095) return 'Novilla'; // 2 a 3 años\n      if (diffDays > 1095) return 'Vaca'; // Más de 3 años\n    }\n    return '';\n  };\n\n  useEffect(() => {\n    const { fechaNacimiento, sexo } = animalData;\n    if (fechaNacimiento && sexo) {\n      setAnimalData(prevData => ({\n        ...prevData,\n        edadClasificada: classifyAnimalAge(fechaNacimiento, sexo),\n      }));\n    } else {\n      setAnimalData(prevData => ({\n        ...prevData,\n        edadClasificada: '',\n      }));\n    }\n  }, [animalData.fechaNacimiento, animalData.sexo]);\n\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setAnimalData({ ...animalData, [name]: value });\n  };\n\n  const handleFileChange = (e) => {\n    setAnimalData({ ...animalData, foto: e.target.files[0] });\n  };\n\n  const handleSubmit = () => {\n    if (!animalData.id) {\n      alert('Por favor, ingresa un ID para el animal.');\n      return;\n    }\n    // Validar que el ID sea único\n    if (animals.some(animal => animal.id === animalData.id)) {\n      alert('El ID del animal ya existe. Por favor, ingresa un ID único.');\n      return;\n    }\n\n    const animalToRegister = { ...animalData };\n    onRegisterAnimal(animalToRegister);\n    alert(`Animal ${animalToRegister.name} (${animalToRegister.id}) registrado.`);\n    setAnimalData({\n      id: '', name: '', raza: '', peso: '', sexo: '', fechaNacimiento: '', fechaCompra: '',\n      tipoProduccion: '', dailyMilk: 0, foto: null, idpadre: '', idmadre: '',\n      estadoReproductivo: 'desarrollo', edadClasificada: '',\n    });\n  };\n\n  const handleDownloadPDF = (animal, currentUser) => {\n  if (!animal || !animal.id) {\n    alert('Por favor, selecciona un animal válido.');\n    return;\n  }\n\n  const farmName = currentUser?.farmName || 'Mi Finca Ganadera';\n  const adminName = currentUser?.fullName || 'Administrador';\n  const logoPlaceholder = 'https://via.placeholder.com/60x60?text=LOGO';\n  const qrURL = `https://api.qrserver.com/v1/create-qr-code/?data=${animal.id}&size=80x80`;\n\n  const tempDiv = document.createElement('div');\n  tempDiv.style.width = '210mm';\n  tempDiv.style.padding = '20mm';\n  tempDiv.style.fontFamily = 'Arial, sans-serif';\n  tempDiv.style.fontSize = '11pt';\n  tempDiv.style.backgroundColor = '#fff';\n  tempDiv.style.position = 'absolute';\n  tempDiv.style.left = '-9999px';\n  tempDiv.style.top = '-9999px';\n\n  const colorEstado = animal.estadoReproductivo === 'en_produccion' ? '#27ae60' :\n                      animal.estadoReproductivo === 'seca' ? '#e67e22' :\n                      animal.estadoReproductivo === 'preñada' ? '#9b59b6' : '#7f8c8d';\n\n  tempDiv.innerHTML = `\n    <div style=\"border: 2px solid #ccc; border-radius: 10px; padding: 20px;\">\n      <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n        <img src=\"${logoPlaceholder}\" style=\"width: 60px;\" alt=\"Logo Finca\">\n        <div style=\"text-align: right;\">\n          <h1 style=\"margin: 0; color: #2c3e50;\">${farmName}</h1>\n          <p style=\"margin: 0; color: #7f8c8d;\">Ficha de Registro Animal</p>\n        </div>\n      </div>\n\n      <div style=\"display: flex; margin-top: 20px; gap: 20px;\">\n        <div style=\"flex-shrink: 0;\">\n          <img src=\"${animal.foto ? URL.createObjectURL(animal.foto) : 'https://via.placeholder.com/120x120?text=Sin+Foto'}\" style=\"width: 120px; border-radius: 8px; border: 1px solid #ccc;\" alt=\"Foto del animal\">\n        </div>\n        <div style=\"flex-grow: 1;\">\n          <table style=\"width: 100%; border-collapse: collapse; border: 2px solid #000;\">\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 12px;\"><strong>Nombre:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.name || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10x 16px;\"><strong>ID:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.id || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>Raza:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.raza || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>Peso:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.peso || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>Sexo:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.sexo || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>Fecha Nacimiento:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.fechaNacimiento || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>Edad Clasificada:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.edadClasificada || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>Fecha Compra:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.fechaCompra || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>ID Padre:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.idpadre || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>ID Madre:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.idmadre || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>Estado:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px; color: ${colorEstado};\">${animal.estadoReproductivo || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>Tipo Producción:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.tipoProduccion || 'N/A'}</td></tr>\n          </table>\n        </div>\n      </div>\n\n      <div style=\"text-align: center; margin-top: 30px;\">\n        <img src=\"${qrURL}\" style=\"width: 80px;\" alt=\"QR Code del animal\">\n      </div>\n\n      <p style=\"text-align: right; font-size: 10px; margin-top: 30px; color: #aaa;\">\n        Generado por Campo Inteligente | ${adminName}\n      </p>\n    </div>\n  `;\n\n  document.body.appendChild(tempDiv);\n\n  html2canvas(tempDiv, { scale: 2 }).then(canvas => {\n    const imgData = canvas.toDataURL('image/png');\n    const pdf = new jsPDF('p', 'mm', 'a4');\n    const imgWidth = 210;\n    const pageHeight = 297;\n    const imgHeight = canvas.height * imgWidth / canvas.width;\n    let heightLeft = imgHeight;\n    let position = 0;\n\n    pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n    heightLeft -= pageHeight;\n\n    while (heightLeft > 0) {\n      position = heightLeft - imgHeight;\n      pdf.addPage();\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pageHeight;\n    }\n\n    pdf.save(`ficha_animal_${animal.name || 'sin_nombre'}_${animal.id || 'sin_id'}.pdf`);\n    document.body.removeChild(tempDiv);\n  });\n};\n\n  const handleUpdateProduction = () => {\n    if (animalData.id) {\n      onUpdateAnimalProduction(animalData.id, animalData.estadoReproductivo, animalData.dailyMilk);\n      alert(`Producción/Estado de ${animalData.id} actualizado.`);\n    } else {\n      alert('Por favor, ingresa el ID del animal para actualizar su producción/estado.');\n    }\n  };\n\n  // --- Lógica del Árbol Genealógico ---\n  const buildGenealogyTree = (animalId, allAnimals) => {\n    const animal = allAnimals.find(a => a.id === animalId);\n    if (!animal) return null;\n\n    const tree = {\n      id: animal.id,\n      name: animal.name,\n      raza: animal.raza,\n      sexo: animal.sexo,\n      children: []\n    };\n\n    // Buscar hijos (simplificado: solo busca una generación hacia abajo)\n    const children = allAnimals.filter(a => a.idpadre === animal.id || a.idmadre === animal.id);\n    if (children.length > 0) {\n      tree.children = children.map(child => ({\n        id: child.id,\n        name: child.name,\n        raza: child.raza,\n        sexo: child.sexo,\n        // Para un árbol completo, esto sería recursivo:\n        // children: buildGenealogyTree(child.id, allAnimals).children\n      }));\n    }\n\n    // Buscar padres (una generación hacia arriba)\n    if (animal.idpadre) {\n      tree.father = allAnimals.find(a => a.id === animal.idpadre);\n    }\n    if (animal.idmadre) {\n      tree.mother = allAnimals.find(a => a.id === animal.idmadre);\n    }\n\n    return tree;\n  };\n\n  const handleViewGenealogy = () => {\n    if (!selectedAnimalForGenealogy) {\n      alert('Por favor, selecciona un animal para ver su árbol genealógico.');\n      return;\n    }\n    const tree = buildGenealogyTree(selectedAnimalForGenealogy, animals);\n    setGenealogyTree(tree);\n    if (!tree) {\n      alert('Animal no encontrado o sin información genealógica.');\n    }\n  };\n\n  const handleDownloadGenealogyJPG = () => {\n    if (!genealogyTree) {\n      alert('Primero visualiza un árbol genealógico para descargarlo.');\n      return;\n    }\n\n    const farmName = currentUser?.farmName || 'Mi Finca Ganadera';\n    const adminName = currentUser?.fullName || 'Administrador';\n    const logoPlaceholder = 'https://via.placeholder.com/50x50?text=LOGO';\n\n    // Crear un div temporal para el árbol genealógico\n    const treeDiv = document.createElement('div');\n    treeDiv.style.width = '297mm'; // Ancho A4 horizontal\n    treeDiv.style.height = '210mm'; // Alto A4 horizontal\n    treeDiv.style.padding = '10mm';\n    treeDiv.style.fontFamily = 'Arial, sans-serif';\n    treeDiv.style.fontSize = '8pt';\n    treeDiv.style.color = '#333';\n    treeDiv.style.position = 'absolute';\n    treeDiv.style.left = '-9999px';\n    treeDiv.style.top = '-9999px';\n    treeDiv.style.backgroundColor = '#fff';\n    treeDiv.style.display = 'flex';\n    treeDiv.style.flexDirection = 'column';\n    treeDiv.style.justifyContent = 'space-between';\n\n    // Función para renderizar un nodo del árbol (simplificado)\n    const renderNode = (node, level = 0) => {\n      let html = `<div style=\"margin-left: ${level * 10}mm; margin-bottom: 5mm; border: 1px solid #ccc; padding: 5mm; border-radius: 5px; background-color: #f9f9f9;\">`;\n      html += `<p><strong>${node.name}</strong> (${node.id})</p>`;\n      html += `<p>Raza: ${node.raza}, Sexo: ${node.sexo}</p>`;\n      if (node.father || node.mother || node.children.length > 0) {\n        html += `<div style=\"margin-top: 5mm;\">`;\n        if (node.father) html += `<p>Padre: ${node.father.name} (${node.father.id})</p>`;\n        if (node.mother) html += `<p>Madre: ${node.mother.name} (${node.mother.id})</p>`;\n        if (node.children.length > 0) {\n          html += `<p>Hijos:</p><ul style=\"list-style: none; padding: 0; margin: 0;\">`;\n          node.children.forEach(child => {\n            html += `<li style=\"margin-left: 10mm;\">${child.name} (${child.id})</li>`;\n          });\n          html += `</ul>`;\n        }\n        html += `</div>`;\n      }\n      html += `</div>`;\n      return html;\n    };\n\n    treeDiv.innerHTML = `\n      <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 10mm; padding-bottom: 5mm; border-bottom: 1px solid #eee;\">\n        <img src=\"${logoPlaceholder}\" alt=\"Logo Finca\" style=\"width: 15mm; height: 15mm; object-fit: contain;\" />\n        <div style=\"text-align: right;\">\n          <h1 style=\"font-size: 16pt; margin: 0; color: #2c3e50;\">${farmName}</h1>\n          <p style=\"font-size: 9pt; margin: 0; color: #7f8c8d;\">Árbol Genealógico</p>\n        </div>\n      </div>\n      <div style=\"flex-grow: 1; overflow: auto; display: flex; flex-direction: column; align-items: flex-start;\">\n        ${renderNode(genealogyTree)}\n        ${genealogyTree.father ? renderNode(genealogyTree.father, 1) : ''}\n        ${genealogyTree.mother ? renderNode(genealogyTree.mother, 1) : ''}\n        ${genealogyTree.children.map(child => renderNode(child, 1)).join('')}\n      </div>\n      <div style=\"text-align: center; margin-top: 10mm; font-size: 8pt; color: #7f8c8d; border-top: 1px solid #eee; padding-top: 5mm;\">\n        <p>Generado por Campo Inteligente</p>\n        <p>Administrador: ${adminName}</p>\n      </div>\n    `;\n\n    document.body.appendChild(treeDiv);\n\n    html2canvas(treeDiv, { scale: 2 }).then(canvas => {\n      const imgData = canvas.toDataURL('image/png');\n      const pdf = new jsPDF('l', 'mm', 'a4'); // 'l' para orientación horizontal\n      const imgWidth = 297; // A4 horizontal width in mm\n      const pageHeight = 210; // A4 horizontal height in mm\n      const imgHeight = canvas.height * imgWidth / canvas.width;\n      let heightLeft = imgHeight;\n      let position = 0;\n\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pageHeight;\n\n      while (heightLeft >= 0) {\n        position = heightLeft - imgHeight;\n        pdf.addPage();\n        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n        heightLeft -= pageHeight;\n      }\n      pdf.save(`arbol_genealogico_${genealogyTree.name || 'sin_nombre'}_${genealogyTree.id || 'sin_id'}.pdf`);\n      document.body.removeChild(treeDiv);\n    });\n  };\n\n  return (\n    <div className=\"bg-white p-6 rounded-lg shadow-md\">\n      <h3 className=\"text-xl font-semibold mb-4\">Registro Animal Avanzado</h3>\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        <input\n          type=\"text\"\n          name=\"id\"\n          placeholder=\"ID del Animal (Único)\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.id}\n          onChange={handleInputChange}\n        />\n        <input\n          type=\"text\"\n          name=\"name\"\n          placeholder=\"Nombre del Animal\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.name}\n          onChange={handleInputChange}\n        />\n        <input\n          type=\"text\"\n          name=\"raza\"\n          placeholder=\"Raza\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.raza}\n          onChange={handleInputChange}\n\n        />\n        <input\n          type=\"number\"\n          name=\"peso\"\n          placeholder=\"Peso\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.peso}\n          onChange={handleInputChange}\n\n        />\n        <select\n          name=\"sexo\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.sexo}\n          onChange={handleInputChange}\n        >\n          <option value=\"\">Selecciona Sexo</option>\n          <option value=\"macho\">Macho</option>\n          <option value=\"hembra\">Hembra</option>\n        </select>\n        <input\n          type=\"date\"\n          name=\"fechaNacimiento\"\n          placeholder=\"Fecha de Nacimiento\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.fechaNacimiento}\n          onChange={handleInputChange}\n        />\n        {animalData.edadClasificada && (\n          <input\n            type=\"text\"\n            name=\"edadClasificada\"\n            placeholder=\"Clasificación de Edad\"\n            className=\"w-full px-4 py-2 border rounded-lg bg-gray-100 cursor-not-allowed\"\n            value={animalData.edadClasificada}\n            readOnly\n          />\n        )}\n        <input\n          type=\"date\"\n          name=\"fechaCompra\"\n          placeholder=\"Fecha de Compra (Opcional)\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.fechaCompra}\n          onChange={handleInputChange}\n        />\n        <select\n          name=\"tipoProduccion\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.tipoProduccion}\n          onChange={handleInputChange}\n        >\n          <option value=\"\">Tipo de Producción</option>\n          <option value=\"carne\">Carne</option>\n          <option value=\"leche\">Leche</option>\n        </select>\n        {animalData.tipoProduccion === 'leche' && animalData.sexo === 'hembra' && (\n          <input\n            type=\"number\"\n            name=\"dailyMilk\"\n            placeholder=\"Litros Promedio Diarios\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={animalData.dailyMilk}\n            onChange={handleInputChange}\n          />\n        )}\n        <input\n          type=\"text\"\n          name=\"idpadre\"\n          placeholder=\"ID Padre (Opcional)\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.idpadre}\n          onChange={handleInputChange}\n        />\n        <input\n          type=\"text\"\n          name=\"idmadre\"\n          placeholder=\"ID Madre (Opcional)\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.idmadre}\n          onChange={handleInputChange}\n        />\n        <div className=\"col-span-full\">\n          <label className=\"block text-gray-700 text-sm font-bold mb-2\">Foto del Animal</label>\n          <input\n            type=\"file\"\n            name=\"foto\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            onChange={handleFileChange}\n          />\n        </div>\n      </div>\n      <button\n        onClick={handleSubmit}\n        className=\"mt-6 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors mr-2\"\n      >\n        Registrar Animal\n      </button>\n      <button\n        onClick={() => handleDownloadPDF(animalData, currentUser)} // Pasar el animalData actual para generar PDF\n        className=\"mt-6 bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors\"\n      >\n        Descargar Ficha PDF\n      </button>\n\n      <div className=\"mt-8 pt-4 border-t border-gray-200\">\n        <h4 className=\"text-lg font-semibold mb-3\">Actualizar Producción/Estado</h4>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <input\n            type=\"text\"\n            name=\"id\"\n            placeholder=\"ID del Animal a Actualizar\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={animalData.id}\n            onChange={handleInputChange}\n          />\n          <select\n            name=\"estadoReproductivo\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={animalData.estadoReproductivo}\n            onChange={handleInputChange}\n          >\n            <option value=\"desarrollo\">En Desarrollo</option>\n            <option value=\"en_produccion\">En Producción</option>\n            <option value=\"seca\">Seca</option>\n            <option value=\"preñada\">Preñada</option>\n          </select>\n          {animalData.estadoReproductivo === 'en_produccion' && animalData.tipoProduccion === 'leche' && (\n            <input\n              type=\"number\"\n              name=\"dailyMilk\"\n              placeholder=\"Litros de leche diarios\"\n              className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n              value={animalData.dailyMilk}\n              onChange={handleInputChange}\n            />\n          )}\n        </div>\n        <button\n          onClick={handleUpdateProduction}\n          className=\"mt-4 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors\"\n        >\n          Actualizar Producción\n        </button>\n      </div>\n\n      <div className=\"mt-8 pt-4 border-t border-gray-200\">\n        <h4 className=\"text-lg font-semibold mb-3\">Árbol Genealógico</h4>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <select\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={selectedAnimalForGenealogy}\n            onChange={(e) => setSelectedAnimalForGenealogy(e.target.value)}\n          >\n            <option value=\"\">Selecciona Animal para Genealogía</option>\n            {animals.map(animal => (\n              <option key={animal.id} value={animal.id}>{animal.name} ({animal.id})</option>\n            ))}\n          </select>\n          <button\n            onClick={handleViewGenealogy}\n            className=\"bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors\"\n          >\n            Ver Árbol Genealógico\n          </button>\n        </div>\n\n        {genealogyTree && (\n          <div className=\"mt-4 p-4 border rounded-lg bg-gray-50\">\n            <h5 className=\"font-semibold\">Árbol Genealógico de {genealogyTree.name} ({genealogyTree.id})</h5>\n            <p>Raza: {genealogyTree.raza}, Sexo: {genealogyTree.sexo}</p>\n            {genealogyTree.father && (\n              <p className=\"ml-4\">Padre: {genealogyTree.father.name} ({genealogyTree.father.id})</p>\n            )}\n            {genealogyTree.mother && (\n              <p className=\"ml-4\">Madre: {genealogyTree.mother.name} ({genealogyTree.mother.id})</p>\n            )}\n            {genealogyTree.children.length > 0 && (\n              <div className=\"mt-2\">\n                <p className=\"font-semibold\">Hijos:</p>\n                <ul className=\"list-disc list-inside ml-4\">\n                  {genealogyTree.children.map(child => (\n                    <li key={child.id}>{child.name} ({child.id}) - {child.raza}</li>\n                  ))}\n                </ul>\n              </div>\n            )}\n            <button\n              onClick={handleDownloadGenealogyJPG}\n              className=\"mt-4 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors\"\n            >\n              Descargar Árbol (JPG)\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AnimalRegistrationPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
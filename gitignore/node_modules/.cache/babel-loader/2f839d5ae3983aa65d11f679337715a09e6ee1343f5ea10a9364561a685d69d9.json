{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Downloads\\\\project (10)\\\\src\\\\components\\\\ReproductiveControlPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { classifyAnimalAge } from '../utils/helpers'; // Importar la función de utilidad\nimport { exportToCsv, exportTableToPdf } from '../utils/exportHelpers'; // Importar funciones de exportación\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst GESTATION_DAYS = 283; // Días promedio de gestación para bovinos\n\nconst ReproductiveControlPage = ({\n  animals,\n  onUpdateAnimalProduction,\n  onRegisterReproductiveEvent,\n  onDeletePregnantCow,\n  reproductiveRecords,\n  setReproductiveRecords,\n  onRegisterAnimal,\n  currentUser,\n  logoUrl\n}) => {\n  _s();\n  const [currentSection, setCurrentSection] = useState('montaNatural'); // 'montaNatural', 'inseminacion', 'gestacion', 'historial'\n\n  const [montaNaturalData, setMontaNaturalData] = useState({\n    vacaId: '',\n    toroId: '',\n    fechaMonta: '',\n    observaciones: ''\n  });\n  const [inseminacionData, setInseminacionData] = useState({\n    vacaId: '',\n    semenId: '',\n    // ID del semen utilizado\n    fechaInseminacion: '',\n    inseminador: '',\n    observaciones: ''\n  });\n  const [gestacionData, setGestacionData] = useState({\n    vacaId: '',\n    fechaDiagnostico: '',\n    resultadoDiagnostico: '',\n    // 'positiva', 'negativa'\n    fechaPartoEstimada: '',\n    // Calculada\n    fechaPartoReal: '',\n    pesoTernero: '',\n    sexoTernero: '',\n    nombreTernero: '',\n    observacionesParto: '',\n    padreTerneroId: '',\n    // ID del padre si está registrado\n    padreTerneroNombre: '',\n    // Nombre del padre si es nuevo\n    razaPadreTernero: '',\n    // Raza del padre si es nuevo\n    isPadreRegistered: false // Para controlar si el padre está registrado\n  });\n  const [editingRecord, setEditingRecord] = useState(null); // To hold the record being edited\n  const historyTableRef = useRef(null); // Ref for the history table\n\n  const [filterStartDate, setFilterStartDate] = useState('');\n  const [filterEndDate, setFilterEndDate] = useState('');\n\n  // Función auxiliar para calcular días restantes\n  const calcularDiasRestantes = fechaPartoEstimada => {\n    const hoy = new Date();\n    const fecha = new Date(fechaPartoEstimada);\n    // Verificar si la fecha es válida antes de calcular la diferencia\n    if (isNaN(fecha.getTime())) {\n      return NaN; // Retorna NaN si la fecha no es válida\n    }\n    const diferencia = fecha.getTime() - hoy.getTime(); // Usar getTime() para operar con milisegundos\n    return Math.ceil(diferencia / (1000 * 60 * 60 * 24));\n  };\n\n  // useEffect para evaluar registros reproductivos y actualizar estados\n  useEffect(() => {\n    if (!reproductiveRecords || reproductiveRecords.length === 0) {\n      return;\n    }\n    let animalStatusUpdates = [];\n    let recordStatusUpdates = [];\n    reproductiveRecords.forEach(record => {\n      const currentAnimal = animals.find(a => a.id === record.idAnimal);\n      if (!currentAnimal) return; // Animal not found, skip\n\n      // Logic for 'preñada' records that are not yet finalized\n      if (record.tipoEvento === 'diagnóstico' && record.estadoPosterior === 'preñada' && record.estado !== 'finalizado') {\n        let estimatedBirthDateStr = record.fechaPartoEstimada;\n\n        // If estimated birth date is missing, calculate it from the diagnosis date\n        if (!estimatedBirthDateStr) {\n          const diagnosisDate = new Date(record.fechaEvento);\n          if (diagnosisDate instanceof Date && !isNaN(diagnosisDate.getTime())) {\n            const estimatedDate = new Date(diagnosisDate);\n            estimatedDate.setDate(estimatedDate.getDate() + GESTATION_DAYS);\n            estimatedBirthDateStr = estimatedDate.toISOString().split('T')[0];\n            // Update the record itself with the estimated date for persistence\n            recordStatusUpdates.push({\n              id: record.id,\n              update: {\n                fechaPartoEstimada: estimatedBirthDateStr\n              }\n            });\n          }\n        }\n        if (estimatedBirthDateStr) {\n          const dias = calcularDiasRestantes(estimatedBirthDateStr);\n\n          // Solo aplicar reglas si los días restantes son un número válido\n          if (!isNaN(dias)) {\n            // Rule 1: Change to SECA if less than 100 days to birth AND animal is not already 'seca'\n            if (dias <= 100 && dias > 0 && currentAnimal.estadoReproductivo !== 'seca') {\n              animalStatusUpdates.push({\n                id: record.idAnimal,\n                update: {\n                  estadoReproductivo: 'seca'\n                }\n              });\n            }\n\n            // Rule 2: Change to PRODUCCIÓN if estimated birth date passed AND animal is not already 'produccion'\n            if (dias <= 0 && currentAnimal.estadoReproductivo !== 'produccion') {\n              animalStatusUpdates.push({\n                id: record.idAnimal,\n                update: {\n                  estadoReproductivo: 'produccion',\n                  fechaUltimoParto: estimatedBirthDateStr\n                }\n              });\n              // Mark the reproductive record as finalized after birth\n              recordStatusUpdates.push({\n                id: record.id,\n                update: {\n                  estado: 'finalizado'\n                }\n              });\n            }\n          }\n        }\n      }\n    });\n\n    // Apply animal status updates\n    animalStatusUpdates.forEach(update => {\n      onUpdateAnimalProduction(update.id, update.update);\n    });\n\n    // Apply reproductive record status updates\n    if (recordStatusUpdates.length > 0) {\n      const newReproductiveRecords = reproductiveRecords.map(rec => {\n        const update = recordStatusUpdates.find(u => u.id === rec.id);\n        return update ? {\n          ...rec,\n          ...update.update\n        } : rec;\n      });\n      setReproductiveRecords(newReproductiveRecords);\n    }\n  }, [reproductiveRecords, animals, onUpdateAnimalProduction, setReproductiveRecords]); // Dependencies\n\n  const handleMontaNaturalChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setMontaNaturalData({\n      ...montaNaturalData,\n      [name]: value\n    });\n  };\n  const handleInseminacionChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setInseminacionData({\n      ...inseminacionData,\n      [name]: value\n    });\n  };\n  const handleGestacionChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    if (type === 'checkbox') {\n      setGestacionData({\n        ...gestacionData,\n        [name]: checked\n      });\n    } else {\n      setGestacionData({\n        ...gestacionData,\n        [name]: value\n      });\n    }\n  };\n  const handleMontaNaturalSubmit = () => {\n    const {\n      vacaId,\n      toroId,\n      fechaMonta,\n      observaciones\n    } = montaNaturalData;\n    if (!vacaId || !toroId || !fechaMonta) {\n      alert('¡Ups! Parece que te faltan algunos datos para registrar la monta natural. ¡Completa todos los campos y lo intentamos de nuevo!');\n      return;\n    }\n\n    // Calcular fecha de parto estimada para el registro\n    const montaDateObj = new Date(fechaMonta);\n    let estimatedBirthDateForRecord = '';\n    if (montaDateObj instanceof Date && !isNaN(montaDateObj.getTime())) {\n      const estimatedDate = new Date(montaDateObj);\n      estimatedDate.setDate(estimatedDate.getDate() + GESTATION_DAYS);\n      estimatedBirthDateForRecord = estimatedDate.toISOString().split('T')[0];\n    }\n    onRegisterReproductiveEvent({\n      id: `REC-${Date.now().toString().slice(-5)}`,\n      // Generar ID único\n      idAnimal: vacaId,\n      tipoEvento: 'monta',\n      fechaEvento: fechaMonta,\n      observaciones,\n      estadoPosterior: 'posiblemente preñada',\n      // Estado inicial después de monta/inseminación\n      toroId,\n      fechaPartoEstimada: estimatedBirthDateForRecord // Guardar fecha de parto estimada\n    });\n    alert('¡Excelente! La monta natural ha sido registrada con éxito. ¡Esperemos que pronto tengamos buenas noticias!');\n    setMontaNaturalData({\n      vacaId: '',\n      toroId: '',\n      fechaMonta: '',\n      observaciones: ''\n    });\n  };\n  const handleInseminacionSubmit = () => {\n    const {\n      vacaId,\n      semenId,\n      fechaInseminacion,\n      observaciones\n    } = inseminacionData;\n    if (!vacaId || !semenId || !fechaInseminacion) {\n      alert('¡Uy! Para registrar la inseminación, necesitamos que llenes todos los campos. ¡No te rindas, ya casi lo logras!');\n      return;\n    }\n\n    // Calcular fecha de parto estimada para el registro\n    const inseminacionDateObj = new Date(fechaInseminacion);\n    let estimatedBirthDateForRecord = '';\n    if (inseminacionDateObj instanceof Date && !isNaN(inseminacionDateObj.getTime())) {\n      const estimatedDate = new Date(inseminacionDateObj);\n      estimatedDate.setDate(estimatedDate.getDate() + GESTATION_DAYS);\n      estimatedBirthDateForRecord = estimatedDate.toISOString().split('T')[0];\n    }\n    onRegisterReproductiveEvent({\n      id: `REC-${Date.now().toString().slice(-5)}`,\n      // Generar ID único\n      idAnimal: vacaId,\n      tipoEvento: 'inseminacion',\n      fechaEvento: fechaInseminacion,\n      observaciones,\n      estadoPosterior: 'posiblemente preñada',\n      // Estado inicial después de monta/inseminación\n      toroId: semenId,\n      // opcional\n      fechaPartoEstimada: estimatedBirthDateForRecord // Guardar fecha de parto estimada\n    });\n    alert('¡Genial! La inseminación ha sido registrada. ¡Crucemos los dedos por un buen resultado!');\n    setInseminacionData({\n      vacaId: '',\n      semenId: '',\n      fechaInseminacion: '',\n      observaciones: ''\n    });\n  };\n  const handleGestacionSubmit = () => {\n    const {\n      vacaId,\n      fechaDiagnostico,\n      resultadoDiagnostico,\n      pesoTernero,\n      sexoTernero,\n      nombreTernero,\n      observacionesParto,\n      fechaPartoReal,\n      padreTerneroId,\n      padreTerneroNombre,\n      razaPadreTernero,\n      isPadreRegistered\n    } = gestacionData;\n    if (!vacaId || !fechaDiagnostico || !resultadoDiagnostico) {\n      alert('¡Atención! Para el diagnóstico de gestación, necesitamos que completes los campos obligatorios. ¡Vamos, tú puedes!');\n      return;\n    }\n    let estimatedBirthDateForRecord = '';\n    let newAnimalState = '';\n    if (resultadoDiagnostico === 'positiva') {\n      newAnimalState = 'preñada';\n      const diagnosisDateObj = new Date(fechaDiagnostico);\n      if (diagnosisDateObj instanceof Date && !isNaN(diagnosisDateObj.getTime())) {\n        const estimatedDate = new Date(diagnosisDateObj);\n        estimatedDate.setDate(estimatedDate.getDate() + GESTATION_DAYS);\n        estimatedBirthDateForRecord = estimatedDate.toISOString().split('T')[0];\n      }\n    } else {\n      newAnimalState = 'vacia';\n    }\n\n    // Actualizar el estado reproductivo de la vaca\n    onUpdateAnimalProduction(vacaId, {\n      estadoReproductivo: newAnimalState,\n      fechaUltimaGestacion: newAnimalState === 'preñada' ? fechaDiagnostico : ''\n    });\n\n    // Registrar el evento de diagnóstico\n    onRegisterReproductiveEvent({\n      id: `REC-${Date.now().toString().slice(-5)}`,\n      idAnimal: vacaId,\n      tipoEvento: 'diagnóstico',\n      fechaEvento: fechaDiagnostico,\n      observaciones: `Diagnóstico: ${resultadoDiagnostico}. ${observacionesParto}`,\n      estadoPosterior: newAnimalState,\n      fechaPartoEstimada: estimatedBirthDateForRecord\n    });\n\n    // Si se registró una fecha de parto real\n    if (fechaPartoReal) {\n      onUpdateAnimalProduction(vacaId, {\n        estadoReproductivo: 'produccion',\n        fechaUltimoParto: fechaPartoReal\n      });\n      onRegisterReproductiveEvent({\n        id: `REC-${Date.now().toString().slice(-5)}`,\n        idAnimal: vacaId,\n        tipoEvento: 'parto',\n        fechaEvento: fechaPartoReal,\n        observaciones: observacionesParto,\n        estadoPosterior: 'produccion'\n      });\n      if (nombreTernero && sexoTernero && pesoTernero) {\n        var _animals$find, _animals$find2;\n        const birthYear = new Date(fechaPartoReal).getFullYear().toString().slice(-2);\n        const newCalfId = `${vacaId}-${birthYear}`;\n        const newCalf = {\n          id: newCalfId,\n          name: nombreTernero,\n          raza: ((_animals$find = animals.find(a => a.id === vacaId)) === null || _animals$find === void 0 ? void 0 : _animals$find.raza) || 'Desconocida',\n          peso: pesoTernero,\n          sexo: sexoTernero,\n          fechaNacimiento: fechaPartoReal,\n          fechaCompra: '',\n          tipoProduccion: '',\n          idpadre: isPadreRegistered ? padreTerneroId : padreTerneroNombre,\n          razaPadre: isPadreRegistered ? ((_animals$find2 = animals.find(a => a.id === padreTerneroId)) === null || _animals$find2 === void 0 ? void 0 : _animals$find2.raza) || 'Desconocida' : razaPadreTernero,\n          idmadre: vacaId,\n          estadoReproductivo: 'desarrollo',\n          edadClasificada: classifyAnimalAge(fechaPartoReal, sexoTernero)\n        };\n        onRegisterAnimal(newCalf);\n        alert(`¡Felicidades! El ternero ${nombreTernero} ha sido registrado automáticamente con ID: ${newCalfId}. ¡Un nuevo miembro en la familia!`);\n      }\n    }\n    alert('¡Diagnóstico de gestación registrado! Mantente al tanto de las novedades.');\n    setGestacionData({\n      vacaId: '',\n      fechaDiagnostico: '',\n      resultadoDiagnostico: '',\n      fechaPartoEstimada: '',\n      pesoTernero: '',\n      sexoTernero: '',\n      nombreTernero: '',\n      observacionesParto: '',\n      fechaPartoReal: '',\n      padreTerneroId: '',\n      padreTerneroNombre: '',\n      razaPadreTernero: '',\n      isPadreRegistered: false\n    });\n  };\n  const handleDeleteHistoryRecord = recordId => {\n    if (window.confirm('¿Estás seguro de que quieres eliminar este registro? ¡Esta acción no se puede deshacer!')) {\n      const updatedRecords = reproductiveRecords.filter(record => record.id !== recordId);\n      setReproductiveRecords(updatedRecords); // Update state in App.js via prop\n      alert('¡Registro eliminado! Como si nunca hubiera existido.');\n    }\n  };\n  const startEditingHistoryRecord = record => {\n    setEditingRecord({\n      ...record\n    }); // Create a copy to edit\n    alert('¡A editar se ha dicho! Modifica los campos y guarda los cambios.');\n  };\n  const handleEditingHistoryChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setEditingRecord(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const saveEditedHistoryRecord = () => {\n    const updatedRecords = reproductiveRecords.map(record => record.id === editingRecord.id ? editingRecord : record);\n    setReproductiveRecords(updatedRecords); // Update state in App.js via prop\n    setEditingRecord(null); // Exit editing mode\n    alert('¡Cambios guardados! Tu historial está al día.');\n  };\n  const cancelEditingHistoryRecord = () => {\n    setEditingRecord(null); // Exit editing mode\n    alert('¡Edición cancelada! No te preocupes, tus datos están a salvo.');\n  };\n\n  // Function to add a manual reproductive event\n  const handleAddManualEvent = () => {\n    const animalId = prompt(\"Ingresa el ID del animal para el evento manual:\");\n    const tipoEvento = prompt(\"¿Qué tipo de evento quieres registrar? (ej. 'observacion', 'tratamiento'):\");\n    const fechaEvento = prompt(\"¿Cuándo ocurrió el evento? (YYYY-MM-DD):\");\n    const observaciones = prompt(\"¿Alguna observación adicional sobre este evento?:\");\n    const estadoPosterior = prompt(\"¿Cuál es el estado del animal después de este evento? (ej. 'vacia', 'produccion'):\");\n    if (animalId && tipoEvento && fechaEvento) {\n      onRegisterReproductiveEvent({\n        id: `REC-${Date.now().toString().slice(-5)}`,\n        // Generar ID único\n        idAnimal: animalId,\n        tipoEvento: tipoEvento,\n        fechaEvento: fechaEvento,\n        observaciones: observaciones,\n        estadoPosterior: estadoPosterior\n      });\n      alert('¡Evento manual registrado! Tu historial sigue creciendo.');\n    } else {\n      alert('¡Ojo! Para registrar un evento manual, necesitamos el ID del animal, el tipo de evento y la fecha. ¡Inténtalo de nuevo!');\n    }\n  };\n  const handleExportHistory = async format => {\n    if (reproductiveRecords.length === 0) {\n      alert('¡No hay registros para exportar! ¿Qué esperas para empezar a registrar?');\n      return;\n    }\n    const filename = `historial_reproductivo_${new Date().toISOString().split('T')[0]}`;\n    const farmName = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.farmName) || 'Mi Finca Ganadera';\n    const adminName = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.fullName) || 'Administrador';\n    if (format === 'csv') {\n      exportToCsv(reproductiveRecords, filename);\n      alert('¡Exportando a CSV! Tu historial estará listo en un santiamén.');\n    } else if (format === 'pdf') {\n      await exportTableToPdf(historyTableRef.current, filename, 'Historial Reproductivo', farmName, adminName, logoUrl);\n      alert('¡Generando PDF! Tu historial se verá de lujo en papel.');\n    }\n  };\n\n  // Filtrar vacas preñadas para la tabla\n  const pregnantCows = animals.filter(animal => animal.sexo === 'hembra' && animal.estadoReproductivo === 'preñada').map(animal => {\n    // Encontrar el último registro de gestación positiva para obtener la fecha de parto estimada\n    const lastPositiveDiagnosis = reproductiveRecords.filter(rec => rec.idAnimal === animal.id && rec.tipoEvento === 'diagnóstico' && rec.estadoPosterior === 'preñada').sort((a, b) => new Date(b.fechaEvento) - new Date(a.fechaEvento))[0];\n    const lastMontaInseminacion = reproductiveRecords.filter(rec => rec.idAnimal === animal.id && (rec.tipoEvento === 'monta' || rec.tipoEvento === 'inseminacion')).sort((a, b) => new Date(b.fechaEvento) - new Date(a.fechaEvento))[0];\n    let fechaOrigenGestacion = '';\n    let fechaPartoEstimada = '';\n    if (lastPositiveDiagnosis && lastPositiveDiagnosis.fechaPartoEstimada) {\n      fechaOrigenGestacion = lastPositiveDiagnosis.fechaEvento;\n      fechaPartoEstimada = lastPositiveDiagnosis.fechaPartoEstimada;\n    } else if (lastMontaInseminacion) {\n      fechaOrigenGestacion = lastMontaInseminacion.fechaEvento;\n      const origenDateObj = new Date(fechaOrigenGestacion);\n      if (origenDateObj instanceof Date && !isNaN(origenDateObj.getTime())) {\n        const estimatedDate = new Date(origenDateObj);\n        estimatedDate.setDate(estimatedDate.getDate() + GESTATION_DAYS);\n        fechaPartoEstimada = estimatedDate.toISOString().split('T')[0];\n      }\n    }\n    return {\n      ...animal,\n      fechaOrigenGestacion: fechaOrigenGestacion,\n      fechaPartoEstimada: fechaPartoEstimada\n    };\n  }).filter(animal => animal.fechaPartoEstimada); // Solo incluir vacas con fecha de parto estimada\n\n  const filteredReproductiveRecords = reproductiveRecords.filter(record => {\n    const recordDate = new Date(record.fechaEvento);\n    const start = filterStartDate ? new Date(filterStartDate) : null;\n    const end = filterEndDate ? new Date(filterEndDate) : null;\n    if (start && recordDate < start) return false;\n    if (end && recordDate > end) return false;\n    return true;\n  });\n  const maleAnimals = animals.filter(a => a.sexo === 'macho');\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white p-6 rounded-lg shadow-md\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-xl font-semibold mb-4\",\n      children: \"Control Reproductivo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 449,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center mb-6 space-x-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setCurrentSection('montaNatural'),\n        className: `px-6 py-2 rounded-lg ${currentSection === 'montaNatural' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'} hover:bg-blue-700 transition-colors`,\n        children: \"Monta Natural\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setCurrentSection('inseminacion'),\n        className: `px-6 py-2 rounded-lg ${currentSection === 'inseminacion' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'} hover:bg-blue-700 transition-colors`,\n        children: \"Inseminaci\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setCurrentSection('gestacion'),\n        className: `px-6 py-2 rounded-lg ${currentSection === 'gestacion' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'} hover:bg-blue-700 transition-colors`,\n        children: \"Control de Gestaci\\xF3n / Parto\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setCurrentSection('historial'),\n        className: `px-6 py-2 rounded-lg ${currentSection === 'historial' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'} hover:bg-blue-700 transition-colors`,\n        children: \"Historial Reproductivo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 7\n    }, this), currentSection === 'montaNatural' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 border rounded-lg bg-gray-50\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-lg font-semibold mb-3\",\n        children: \"Registro de Monta Natural\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 480,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-1\",\n          children: \"Vaca:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 482,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"vacaId\",\n          className: \"w-full px-4 py-2 border rounded-lg\",\n          value: montaNaturalData.vacaId,\n          onChange: handleMontaNaturalChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Selecciona Vaca\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 15\n          }, this), animals.filter(a => a.sexo === 'hembra').map(vaca => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: vaca.id,\n            children: [vaca.name, \" (\", vaca.id, \")\"]\n          }, vaca.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 491,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-1\",\n          children: \"Toro:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 494,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"toroId\",\n          className: \"w-full px-4 py-2 border rounded-lg\",\n          value: montaNaturalData.toroId,\n          onChange: handleMontaNaturalChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Selecciona Toro\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 15\n          }, this), animals.filter(a => a.sexo === 'macho').map(toro => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: toro.id,\n            children: [toro.name, \" (\", toro.id, \")\"]\n          }, toro.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 503,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 495,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-1\",\n          children: \"Fecha de Monta:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 506,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          name: \"fechaMonta\",\n          placeholder: \"Fecha de Monta\",\n          className: \"w-full px-4 py-2 border rounded-lg\",\n          value: montaNaturalData.fechaMonta,\n          onChange: handleMontaNaturalChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 507,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-1 col-span-full\",\n          children: \"Observaciones:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 515,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"observaciones\",\n          placeholder: \"Observaciones\",\n          rows: \"2\",\n          className: \"w-full px-4 py-2 border rounded-lg col-span-full\",\n          value: montaNaturalData.observaciones,\n          onChange: handleMontaNaturalChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 481,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleMontaNaturalSubmit,\n        className: \"mt-4 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors\",\n        children: \"Registrar Monta\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 525,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 479,\n      columnNumber: 9\n    }, this), currentSection === 'inseminacion' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 border rounded-lg bg-gray-50\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-lg font-semibold mb-3\",\n        children: \"Registro de Inseminaci\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 536,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-1\",\n          children: \"Vaca:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 538,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"vacaId\",\n          className: \"w-full px-4 py-2 border rounded-lg\",\n          value: inseminacionData.vacaId,\n          onChange: handleInseminacionChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Selecciona Vaca\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 545,\n            columnNumber: 15\n          }, this), animals.filter(a => a.sexo === 'hembra').map(vaca => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: vaca.id,\n            children: [vaca.name, \" (\", vaca.id, \")\"]\n          }, vaca.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 547,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-1\",\n          children: \"ID Semen Utilizado:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 550,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"semenId\",\n          placeholder: \"ID Semen Utilizado\",\n          className: \"w-full px-4 py-2 border rounded-lg\",\n          value: inseminacionData.semenId,\n          onChange: handleInseminacionChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 551,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-1\",\n          children: \"Fecha de Inseminaci\\xF3n:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 559,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          name: \"fechaInseminacion\",\n          placeholder: \"Fecha de Inseminaci\\xF3n\",\n          className: \"w-full px-4 py-2 border rounded-lg\",\n          value: inseminacionData.fechaInseminacion,\n          onChange: handleInseminacionChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 560,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-1\",\n          children: \"Inseminador:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 568,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"inseminador\",\n          placeholder: \"Inseminador (Opcional)\",\n          className: \"w-full px-4 py-2 border rounded-lg\",\n          value: inseminacionData.inseminador,\n          onChange: handleInseminacionChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-1 col-span-full\",\n          children: \"Observaciones:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 577,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"observaciones\",\n          placeholder: \"Observaciones\",\n          rows: \"2\",\n          className: \"w-full px-4 py-2 border rounded-lg col-span-full\",\n          value: inseminacionData.observaciones,\n          onChange: handleInseminacionChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 578,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 537,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleInseminacionSubmit,\n        className: \"mt-4 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors\",\n        children: \"Registrar Inseminaci\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 587,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 535,\n      columnNumber: 9\n    }, this), currentSection === 'gestacion' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 border rounded-lg bg-gray-50\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-lg font-semibold mb-3\",\n        children: \"Control de Gestaci\\xF3n / Parto\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 598,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-1\",\n          children: \"Vaca:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 600,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"vacaId\",\n          className: \"w-full px-4 py-2 border rounded-lg\",\n          value: gestacionData.vacaId,\n          onChange: handleGestacionChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Selecciona Vaca\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 607,\n            columnNumber: 15\n          }, this), animals.filter(a => a.sexo === 'hembra').map(vaca => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: vaca.id,\n            children: [vaca.name, \" (\", vaca.id, \")\"]\n          }, vaca.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 609,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 601,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-1\",\n          children: \"Fecha Diagn\\xF3stico Gestaci\\xF3n:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 612,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          name: \"fechaDiagnostico\",\n          placeholder: \"Fecha de Diagn\\xF3stico de Gestaci\\xF3n\",\n          className: \"w-full px-4 py-2 border rounded-lg\",\n          value: gestacionData.fechaDiagnostico,\n          onChange: handleGestacionChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 613,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-1\",\n          children: \"Resultado Diagn\\xF3stico:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 621,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"resultadoDiagnostico\",\n          className: \"w-full px-4 py-2 border rounded-lg\",\n          value: gestacionData.resultadoDiagnostico,\n          onChange: handleGestacionChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Resultado Diagn\\xF3stico\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 628,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"positiva\",\n            children: \"Positiva (Pre\\xF1ada)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 629,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"negativa\",\n            children: \"Negativa\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 630,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 622,\n          columnNumber: 13\n        }, this), gestacionData.resultadoDiagnostico === 'positiva' && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-gray-700 text-sm font-bold mb-1\",\n            children: \"Fecha de Parto Estimada:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 634,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            name: \"fechaPartoEstimada\",\n            placeholder: \"Fecha de Parto Estimada\",\n            className: \"w-full px-4 py-2 border rounded-lg\",\n            value: gestacionData.fechaPartoEstimada,\n            onChange: handleGestacionChange,\n            title: \"Calculada autom\\xE1ticamente al registrar monta/inseminaci\\xF3n o diagn\\xF3stico positivo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 635,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-1\",\n          children: \"Fecha de Parto Real (si ya ocurri\\xF3):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 646,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          name: \"fechaPartoReal\",\n          placeholder: \"Fecha de Parto Real (si ya ocurri\\xF3)\",\n          className: \"w-full px-4 py-2 border rounded-lg\",\n          value: gestacionData.fechaPartoReal,\n          onChange: handleGestacionChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 647,\n          columnNumber: 13\n        }, this), gestacionData.fechaPartoReal && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-gray-700 text-sm font-bold mb-1\",\n            children: \"Peso del Ternero (kg):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 657,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            name: \"pesoTernero\",\n            placeholder: \"Peso del Ternero (kg)\",\n            className: \"w-full px-4 py-2 border rounded-lg\",\n            value: gestacionData.pesoTernero,\n            onChange: handleGestacionChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 658,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-gray-700 text-sm font-bold mb-1\",\n            children: \"Sexo del Ternero:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 666,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"sexoTernero\",\n            className: \"w-full px-4 py-2 border rounded-lg\",\n            value: gestacionData.sexoTernero,\n            onChange: handleGestacionChange,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Sexo del Ternero\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 673,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"macho\",\n              children: \"Macho\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 674,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"hembra\",\n              children: \"Hembra\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 675,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 667,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-gray-700 text-sm font-bold mb-1\",\n            children: \"Nombre del Ternero:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 677,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"nombreTernero\",\n            placeholder: \"Nombre del Ternero\",\n            className: \"w-full px-4 py-2 border rounded-lg\",\n            value: gestacionData.nombreTernero,\n            onChange: handleGestacionChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 678,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-span-full flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              id: \"isPadreRegistered\",\n              name: \"isPadreRegistered\",\n              checked: gestacionData.isPadreRegistered,\n              onChange: handleGestacionChange,\n              className: \"form-checkbox h-4 w-4 text-blue-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 688,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"isPadreRegistered\",\n              className: \"text-gray-700 text-sm font-bold\",\n              children: \"Padre registrado en la finca\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 696,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 687,\n            columnNumber: 17\n          }, this), gestacionData.isPadreRegistered ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-gray-700 text-sm font-bold mb-1\",\n              children: \"Seleccionar Padre:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 701,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"padreTerneroId\",\n              className: \"w-full px-4 py-2 border rounded-lg\",\n              value: gestacionData.padreTerneroId,\n              onChange: handleGestacionChange,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Selecciona Padre\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 708,\n                columnNumber: 23\n              }, this), maleAnimals.map(toro => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: toro.id,\n                children: [toro.name, \" (\", toro.id, \")\"]\n              }, toro.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 710,\n                columnNumber: 25\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 702,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-gray-700 text-sm font-bold mb-1\",\n              children: \"Nombre del Padre del Ternero:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 716,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"padreTerneroNombre\",\n              placeholder: \"Nombre del Padre del Ternero\",\n              className: \"w-full px-4 py-2 border rounded-lg\",\n              value: gestacionData.padreTerneroNombre,\n              onChange: handleGestacionChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 717,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-gray-700 text-sm font-bold mb-1\",\n              children: \"Raza del Padre del Ternero:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 725,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"razaPadreTernero\",\n              placeholder: \"Raza del Padre del Ternero\",\n              className: \"w-full px-4 py-2 border rounded-lg\",\n              value: gestacionData.razaPadreTernero,\n              onChange: handleGestacionChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 726,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-1 col-span-full\",\n          children: \"Observaciones del Parto:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 738,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"observacionesParto\",\n          placeholder: \"Observaciones del Parto\",\n          rows: \"2\",\n          className: \"w-full px-4 py-2 border rounded-lg col-span-full\",\n          value: gestacionData.observacionesParto,\n          onChange: handleGestacionChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 739,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 599,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleGestacionSubmit,\n        className: \"mt-4 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors\",\n        children: \"Registrar Gestaci\\xF3n / Parto\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 748,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 597,\n      columnNumber: 9\n    }, this), currentSection === 'historial' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 border rounded-lg bg-gray-50\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-lg font-semibold mb-3\",\n        children: \"Historial Reproductivo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 759,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-wrap justify-between items-center mb-4 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleAddManualEvent,\n          className: \"bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors\",\n          children: \"Registrar Evento Manual\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 761,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"text-gray-700 text-sm font-bold\",\n            children: \"Desde:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 768,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            value: filterStartDate,\n            onChange: e => setFilterStartDate(e.target.value),\n            className: \"px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 769,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"text-gray-700 text-sm font-bold\",\n            children: \"Hasta:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 775,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            value: filterEndDate,\n            onChange: e => setFilterEndDate(e.target.value),\n            className: \"px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 776,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 767,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleExportHistory('csv'),\n            className: \"bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors mr-2\",\n            children: \"Exportar a CSV\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 784,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleExportHistory('pdf'),\n            className: \"bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition-colors\",\n            children: \"Exportar a PDF\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 790,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 783,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 760,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overflow-x-auto rounded-lg shadow-md\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          ref: historyTableRef,\n          className: \"min-w-full bg-white text-sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"bg-gray-800 text-white\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-3 px-4 text-left font-semibold rounded-tl-lg\",\n                children: \"ID Evento\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 802,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-3 px-4 text-left font-semibold\",\n                children: \"ID Animal\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 803,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-3 px-4 text-left font-semibold\",\n                children: \"Tipo Evento\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 804,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-3 px-4 text-left font-semibold\",\n                children: \"Fecha Evento\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 805,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-3 px-4 text-left font-semibold\",\n                children: \"Observaciones\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 806,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-3 px-4 text-left font-semibold\",\n                children: \"Estado Posterior\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 807,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-3 px-4 text-left font-semibold rounded-tr-lg\",\n                children: \"Acciones\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 808,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 801,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 800,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            className: \"divide-y divide-gray-200\",\n            children: filteredReproductiveRecords.map(record => /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"hover:bg-gray-100 transition-colors\",\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-3 px-4\",\n                children: record.id\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 814,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-3 px-4\",\n                children: record.idAnimal\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 815,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-3 px-4\",\n                children: record.tipoEvento\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 816,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-3 px-4\",\n                children: record.fechaEvento\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 817,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-3 px-4\",\n                children: record.observaciones\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 818,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-3 px-4\",\n                children: record.estadoPosterior\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 819,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-3 px-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => startEditingHistoryRecord(record),\n                  className: \"text-blue-600 hover:text-blue-800 font-medium mr-2 transition-colors\",\n                  children: \"Editar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 821,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleDeleteHistoryRecord(record.id),\n                  className: \"text-red-600 hover:text-red-800 font-medium transition-colors\",\n                  children: \"Eliminar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 827,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 820,\n                columnNumber: 21\n              }, this)]\n            }, record.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 813,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 811,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 799,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 798,\n        columnNumber: 11\n      }, this), editingRecord && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-8 p-6 border rounded-lg bg-yellow-50 shadow-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-lg font-semibold mb-4 text-gray-800\",\n          children: [\"Editar Registro Hist\\xF3rico: \", editingRecord.id]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 843,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-gray-700 text-sm font-bold mb-1\",\n              children: \"Tipo Evento:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 846,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"tipoEvento\",\n              className: \"w-full px-4 py-2 border rounded-lg bg-gray-200 cursor-not-allowed\",\n              value: editingRecord.tipoEvento,\n              readOnly: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 847,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 845,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-gray-700 text-sm font-bold mb-1\",\n              children: \"Fecha Evento:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 856,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              name: \"fechaEvento\",\n              className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n              value: editingRecord.fechaEvento,\n              onChange: handleEditingHistoryChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 857,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 855,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-gray-700 text-sm font-bold mb-1\",\n              children: \"Estado Posterior:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 866,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"estadoPosterior\",\n              className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n              value: editingRecord.estadoPosterior,\n              onChange: handleEditingHistoryChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 867,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 865,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-span-full\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-gray-700 text-sm font-bold mb-1\",\n              children: \"Observaciones:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 876,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              name: \"observaciones\",\n              rows: \"3\",\n              className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n              value: editingRecord.observaciones,\n              onChange: handleEditingHistoryChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 877,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 875,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 844,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-6 flex justify-end space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: saveEditedHistoryRecord,\n            className: \"bg-green-600 text-white py-2 px-5 rounded-lg hover:bg-green-700 transition-colors shadow-md\",\n            children: \"Guardar Cambios\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 887,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: cancelEditingHistoryRecord,\n            className: \"bg-gray-600 text-white py-2 px-5 rounded-lg hover:bg-gray-700 transition-colors shadow-md\",\n            children: \"Cancelar Edici\\xF3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 893,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 886,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 842,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 758,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-8 pt-4 border-t border-gray-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-lg font-semibold mb-3\",\n        children: \"Vacas Pre\\xF1adas y Calendario de Gestaci\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 907,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overflow-x-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"min-w-full bg-white border text-sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"bg-gray-100\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"ID Vaca\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 912,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"Nombre\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 913,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"Fecha Origen Gestaci\\xF3n\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 914,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"Fecha Parto Estimada\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 915,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"D\\xEDas Restantes\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 916,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"Acciones\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 917,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 911,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 910,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: pregnantCows.map(vaca => {\n              const diasRestantes = calcularDiasRestantes(vaca.fechaPartoEstimada);\n              const isOverdue = diasRestantes < 0;\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"py-2 px-4 border\",\n                  children: vaca.id\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 927,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"py-2 px-4 border\",\n                  children: vaca.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 928,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"py-2 px-4 border\",\n                  children: vaca.fechaOrigenGestacion || 'N/A'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 929,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: `py-2 px-4 border ${isOverdue ? 'text-red-600 font-bold' : ''}`,\n                  children: vaca.fechaPartoEstimada || 'N/A'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 930,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: `py-2 px-4 border ${isOverdue ? 'text-red-600 font-bold' : ''}`,\n                  children: isNaN(diasRestantes) ? 'N/A' : isOverdue ? `Venció hace ${Math.abs(diasRestantes)} días` : diasRestantes\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 933,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"py-2 px-4 border\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"text-red-600 hover:underline\",\n                    onClick: () => onDeletePregnantCow(vaca.id),\n                    children: \"Eliminar\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 937,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 936,\n                  columnNumber: 21\n                }, this)]\n              }, vaca.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 926,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 920,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 909,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 908,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 906,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 448,\n    columnNumber: 5\n  }, this);\n};\n_s(ReproductiveControlPage, \"tCs9G2eSpOe9zXhz1NRptGU7v+Q=\");\n_c = ReproductiveControlPage;\nexport default ReproductiveControlPage;\n\n// DONE\nvar _c;\n$RefreshReg$(_c, \"ReproductiveControlPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","classifyAnimalAge","exportToCsv","exportTableToPdf","jsxDEV","_jsxDEV","Fragment","_Fragment","GESTATION_DAYS","ReproductiveControlPage","animals","onUpdateAnimalProduction","onRegisterReproductiveEvent","onDeletePregnantCow","reproductiveRecords","setReproductiveRecords","onRegisterAnimal","currentUser","logoUrl","_s","currentSection","setCurrentSection","montaNaturalData","setMontaNaturalData","vacaId","toroId","fechaMonta","observaciones","inseminacionData","setInseminacionData","semenId","fechaInseminacion","inseminador","gestacionData","setGestacionData","fechaDiagnostico","resultadoDiagnostico","fechaPartoEstimada","fechaPartoReal","pesoTernero","sexoTernero","nombreTernero","observacionesParto","padreTerneroId","padreTerneroNombre","razaPadreTernero","isPadreRegistered","editingRecord","setEditingRecord","historyTableRef","filterStartDate","setFilterStartDate","filterEndDate","setFilterEndDate","calcularDiasRestantes","hoy","Date","fecha","isNaN","getTime","NaN","diferencia","Math","ceil","length","animalStatusUpdates","recordStatusUpdates","forEach","record","currentAnimal","find","a","id","idAnimal","tipoEvento","estadoPosterior","estado","estimatedBirthDateStr","diagnosisDate","fechaEvento","estimatedDate","setDate","getDate","toISOString","split","push","update","dias","estadoReproductivo","fechaUltimoParto","newReproductiveRecords","map","rec","u","handleMontaNaturalChange","e","name","value","target","handleInseminacionChange","handleGestacionChange","type","checked","handleMontaNaturalSubmit","alert","montaDateObj","estimatedBirthDateForRecord","now","toString","slice","handleInseminacionSubmit","inseminacionDateObj","handleGestacionSubmit","newAnimalState","diagnosisDateObj","fechaUltimaGestacion","_animals$find","_animals$find2","birthYear","getFullYear","newCalfId","newCalf","raza","peso","sexo","fechaNacimiento","fechaCompra","tipoProduccion","idpadre","razaPadre","idmadre","edadClasificada","handleDeleteHistoryRecord","recordId","window","confirm","updatedRecords","filter","startEditingHistoryRecord","handleEditingHistoryChange","prev","saveEditedHistoryRecord","cancelEditingHistoryRecord","handleAddManualEvent","animalId","prompt","handleExportHistory","format","filename","farmName","adminName","fullName","current","pregnantCows","animal","lastPositiveDiagnosis","sort","b","lastMontaInseminacion","fechaOrigenGestacion","origenDateObj","filteredReproductiveRecords","recordDate","start","end","maleAnimals","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onChange","vaca","toro","placeholder","rows","title","htmlFor","ref","readOnly","diasRestantes","isOverdue","abs","_c","$RefreshReg$"],"sources":["C:/Users/User/Downloads/project (10)/src/components/ReproductiveControlPage.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { classifyAnimalAge } from '../utils/helpers'; // Importar la función de utilidad\nimport { exportToCsv, exportTableToPdf } from '../utils/exportHelpers'; // Importar funciones de exportación\n\nconst GESTATION_DAYS = 283; // Días promedio de gestación para bovinos\n\nconst ReproductiveControlPage = ({ animals, onUpdateAnimalProduction, onRegisterReproductiveEvent, onDeletePregnantCow, reproductiveRecords, setReproductiveRecords, onRegisterAnimal, currentUser, logoUrl }) => {\n  const [currentSection, setCurrentSection] = useState('montaNatural'); // 'montaNatural', 'inseminacion', 'gestacion', 'historial'\n\n  const [montaNaturalData, setMontaNaturalData] = useState({\n    vacaId: '',\n    toroId: '',\n    fechaMonta: '',\n    observaciones: '',\n  });\n\n  const [inseminacionData, setInseminacionData] = useState({\n    vacaId: '',\n    semenId: '', // ID del semen utilizado\n    fechaInseminacion: '',\n    inseminador: '',\n    observaciones: '',\n  });\n\n  const [gestacionData, setGestacionData] = useState({\n    vacaId: '',\n    fechaDiagnostico: '',\n    resultadoDiagnostico: '', // 'positiva', 'negativa'\n    fechaPartoEstimada: '', // Calculada\n    fechaPartoReal: '',\n    pesoTernero: '',\n    sexoTernero: '',\n    nombreTernero: '',\n    observacionesParto: '',\n    padreTerneroId: '', // ID del padre si está registrado\n    padreTerneroNombre: '', // Nombre del padre si es nuevo\n    razaPadreTernero: '', // Raza del padre si es nuevo\n    isPadreRegistered: false, // Para controlar si el padre está registrado\n  });\n\n  const [editingRecord, setEditingRecord] = useState(null); // To hold the record being edited\n  const historyTableRef = useRef(null); // Ref for the history table\n\n  const [filterStartDate, setFilterStartDate] = useState('');\n  const [filterEndDate, setFilterEndDate] = useState('');\n\n  // Función auxiliar para calcular días restantes\n  const calcularDiasRestantes = (fechaPartoEstimada) => {\n    const hoy = new Date();\n    const fecha = new Date(fechaPartoEstimada);\n    // Verificar si la fecha es válida antes de calcular la diferencia\n    if (isNaN(fecha.getTime())) {\n      return NaN; // Retorna NaN si la fecha no es válida\n    }\n    const diferencia = fecha.getTime() - hoy.getTime(); // Usar getTime() para operar con milisegundos\n    return Math.ceil(diferencia / (1000 * 60 * 60 * 24));\n  };\n\n  // useEffect para evaluar registros reproductivos y actualizar estados\n  useEffect(() => {\n    if (!reproductiveRecords || reproductiveRecords.length === 0) {\n      return;\n    }\n\n    let animalStatusUpdates = [];\n    let recordStatusUpdates = [];\n\n    reproductiveRecords.forEach(record => {\n      const currentAnimal = animals.find(a => a.id === record.idAnimal);\n      if (!currentAnimal) return; // Animal not found, skip\n\n      // Logic for 'preñada' records that are not yet finalized\n      if (record.tipoEvento === 'diagnóstico' && record.estadoPosterior === 'preñada' && record.estado !== 'finalizado') {\n        let estimatedBirthDateStr = record.fechaPartoEstimada;\n\n        // If estimated birth date is missing, calculate it from the diagnosis date\n        if (!estimatedBirthDateStr) {\n          const diagnosisDate = new Date(record.fechaEvento);\n          if (diagnosisDate instanceof Date && !isNaN(diagnosisDate.getTime())) {\n            const estimatedDate = new Date(diagnosisDate);\n            estimatedDate.setDate(estimatedDate.getDate() + GESTATION_DAYS);\n            estimatedBirthDateStr = estimatedDate.toISOString().split('T')[0];\n            // Update the record itself with the estimated date for persistence\n            recordStatusUpdates.push({ id: record.id, update: { fechaPartoEstimada: estimatedBirthDateStr } });\n          }\n        }\n\n        if (estimatedBirthDateStr) {\n          const dias = calcularDiasRestantes(estimatedBirthDateStr);\n\n          // Solo aplicar reglas si los días restantes son un número válido\n          if (!isNaN(dias)) {\n            // Rule 1: Change to SECA if less than 100 days to birth AND animal is not already 'seca'\n            if (dias <= 100 && dias > 0 && currentAnimal.estadoReproductivo !== 'seca') {\n              animalStatusUpdates.push({ id: record.idAnimal, update: { estadoReproductivo: 'seca' } });\n            }\n\n            // Rule 2: Change to PRODUCCIÓN if estimated birth date passed AND animal is not already 'produccion'\n            if (dias <= 0 && currentAnimal.estadoReproductivo !== 'produccion') {\n              animalStatusUpdates.push({ id: record.idAnimal, update: { estadoReproductivo: 'produccion', fechaUltimoParto: estimatedBirthDateStr } });\n              // Mark the reproductive record as finalized after birth\n              recordStatusUpdates.push({ id: record.id, update: { estado: 'finalizado' } });\n            }\n          }\n        }\n      }\n    });\n\n    // Apply animal status updates\n    animalStatusUpdates.forEach(update => {\n      onUpdateAnimalProduction(update.id, update.update);\n    });\n\n    // Apply reproductive record status updates\n    if (recordStatusUpdates.length > 0) {\n      const newReproductiveRecords = reproductiveRecords.map(rec => {\n        const update = recordStatusUpdates.find(u => u.id === rec.id);\n        return update ? { ...rec, ...update.update } : rec;\n      });\n      setReproductiveRecords(newReproductiveRecords);\n    }\n\n  }, [reproductiveRecords, animals, onUpdateAnimalProduction, setReproductiveRecords]); // Dependencies\n\n  const handleMontaNaturalChange = (e) => {\n    const { name, value } = e.target;\n    setMontaNaturalData({ ...montaNaturalData, [name]: value });\n  };\n\n  const handleInseminacionChange = (e) => {\n    const { name, value } = e.target;\n    setInseminacionData({ ...inseminacionData, [name]: value });\n  };\n\n  const handleGestacionChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    if (type === 'checkbox') {\n      setGestacionData({ ...gestacionData, [name]: checked });\n    } else {\n      setGestacionData({ ...gestacionData, [name]: value });\n    }\n  };\n\n  const handleMontaNaturalSubmit = () => {\n    const { vacaId, toroId, fechaMonta, observaciones } = montaNaturalData;\n\n    if (!vacaId || !toroId || !fechaMonta) {\n      alert('¡Ups! Parece que te faltan algunos datos para registrar la monta natural. ¡Completa todos los campos y lo intentamos de nuevo!');\n      return;\n    }\n\n    // Calcular fecha de parto estimada para el registro\n    const montaDateObj = new Date(fechaMonta);\n    let estimatedBirthDateForRecord = '';\n    if (montaDateObj instanceof Date && !isNaN(montaDateObj.getTime())) {\n      const estimatedDate = new Date(montaDateObj);\n      estimatedDate.setDate(estimatedDate.getDate() + GESTATION_DAYS);\n      estimatedBirthDateForRecord = estimatedDate.toISOString().split('T')[0];\n    }\n\n    onRegisterReproductiveEvent({\n      id: `REC-${Date.now().toString().slice(-5)}`, // Generar ID único\n      idAnimal: vacaId,\n      tipoEvento: 'monta',\n      fechaEvento: fechaMonta,\n      observaciones,\n      estadoPosterior: 'posiblemente preñada', // Estado inicial después de monta/inseminación\n      toroId,\n      fechaPartoEstimada: estimatedBirthDateForRecord, // Guardar fecha de parto estimada\n    });\n\n    alert('¡Excelente! La monta natural ha sido registrada con éxito. ¡Esperemos que pronto tengamos buenas noticias!');\n    setMontaNaturalData({ vacaId: '', toroId: '', fechaMonta: '', observaciones: '' });\n  };\n\n  const handleInseminacionSubmit = () => {\n    const { vacaId, semenId, fechaInseminacion, observaciones } = inseminacionData;\n\n    if (!vacaId || !semenId || !fechaInseminacion) {\n      alert('¡Uy! Para registrar la inseminación, necesitamos que llenes todos los campos. ¡No te rindas, ya casi lo logras!');\n      return;\n    }\n\n    // Calcular fecha de parto estimada para el registro\n    const inseminacionDateObj = new Date(fechaInseminacion);\n    let estimatedBirthDateForRecord = '';\n    if (inseminacionDateObj instanceof Date && !isNaN(inseminacionDateObj.getTime())) {\n      const estimatedDate = new Date(inseminacionDateObj);\n      estimatedDate.setDate(estimatedDate.getDate() + GESTATION_DAYS);\n      estimatedBirthDateForRecord = estimatedDate.toISOString().split('T')[0];\n    }\n\n    onRegisterReproductiveEvent({\n      id: `REC-${Date.now().toString().slice(-5)}`, // Generar ID único\n      idAnimal: vacaId,\n      tipoEvento: 'inseminacion',\n      fechaEvento: fechaInseminacion,\n      observaciones,\n      estadoPosterior: 'posiblemente preñada', // Estado inicial después de monta/inseminación\n      toroId: semenId, // opcional\n      fechaPartoEstimada: estimatedBirthDateForRecord, // Guardar fecha de parto estimada\n    });\n\n    alert('¡Genial! La inseminación ha sido registrada. ¡Crucemos los dedos por un buen resultado!');\n\n    setInseminacionData({\n      vacaId: '',\n      semenId: '',\n      fechaInseminacion: '',\n      observaciones: '',\n    });\n  };\n\n  const handleGestacionSubmit = () => {\n    const {\n      vacaId,\n      fechaDiagnostico,\n      resultadoDiagnostico,\n      pesoTernero,\n      sexoTernero,\n      nombreTernero,\n      observacionesParto,\n      fechaPartoReal,\n      padreTerneroId,\n      padreTerneroNombre,\n      razaPadreTernero,\n      isPadreRegistered\n    } = gestacionData;\n\n    if (!vacaId || !fechaDiagnostico || !resultadoDiagnostico) {\n      alert('¡Atención! Para el diagnóstico de gestación, necesitamos que completes los campos obligatorios. ¡Vamos, tú puedes!');\n      return;\n    }\n\n    let estimatedBirthDateForRecord = '';\n    let newAnimalState = '';\n\n    if (resultadoDiagnostico === 'positiva') {\n      newAnimalState = 'preñada';\n      const diagnosisDateObj = new Date(fechaDiagnostico);\n      if (diagnosisDateObj instanceof Date && !isNaN(diagnosisDateObj.getTime())) {\n        const estimatedDate = new Date(diagnosisDateObj);\n        estimatedDate.setDate(estimatedDate.getDate() + GESTATION_DAYS);\n        estimatedBirthDateForRecord = estimatedDate.toISOString().split('T')[0];\n      }\n    } else {\n      newAnimalState = 'vacia';\n    }\n\n    // Actualizar el estado reproductivo de la vaca\n    onUpdateAnimalProduction(vacaId, {\n      estadoReproductivo: newAnimalState,\n      fechaUltimaGestacion: newAnimalState === 'preñada' ? fechaDiagnostico : '',\n    });\n\n    // Registrar el evento de diagnóstico\n    onRegisterReproductiveEvent({\n      id: `REC-${Date.now().toString().slice(-5)}`,\n      idAnimal: vacaId,\n      tipoEvento: 'diagnóstico',\n      fechaEvento: fechaDiagnostico,\n      observaciones: `Diagnóstico: ${resultadoDiagnostico}. ${observacionesParto}`,\n      estadoPosterior: newAnimalState,\n      fechaPartoEstimada: estimatedBirthDateForRecord,\n    });\n\n    // Si se registró una fecha de parto real\n    if (fechaPartoReal) {\n      onUpdateAnimalProduction(vacaId, {\n        estadoReproductivo: 'produccion',\n        fechaUltimoParto: fechaPartoReal,\n      });\n\n      onRegisterReproductiveEvent({\n        id: `REC-${Date.now().toString().slice(-5)}`,\n        idAnimal: vacaId,\n        tipoEvento: 'parto',\n        fechaEvento: fechaPartoReal,\n        observaciones: observacionesParto,\n        estadoPosterior: 'produccion',\n      });\n\n      if (nombreTernero && sexoTernero && pesoTernero) {\n        const birthYear = new Date(fechaPartoReal).getFullYear().toString().slice(-2);\n        const newCalfId = `${vacaId}-${birthYear}`; \n        \n        const newCalf = {\n          id: newCalfId,\n          name: nombreTernero,\n          raza: animals.find(a => a.id === vacaId)?.raza || 'Desconocida',\n          peso: pesoTernero,\n          sexo: sexoTernero,\n          fechaNacimiento: fechaPartoReal,\n          fechaCompra: '',\n          tipoProduccion: '',\n          idpadre: isPadreRegistered ? padreTerneroId : padreTerneroNombre,\n          razaPadre: isPadreRegistered ? animals.find(a => a.id === padreTerneroId)?.raza || 'Desconocida' : razaPadreTernero,\n          idmadre: vacaId,\n          estadoReproductivo: 'desarrollo',\n          edadClasificada: classifyAnimalAge(fechaPartoReal, sexoTernero),\n        };\n        onRegisterAnimal(newCalf);\n        alert(`¡Felicidades! El ternero ${nombreTernero} ha sido registrado automáticamente con ID: ${newCalfId}. ¡Un nuevo miembro en la familia!`);\n      }\n    }\n\n    alert('¡Diagnóstico de gestación registrado! Mantente al tanto de las novedades.');\n    setGestacionData({\n      vacaId: '',\n      fechaDiagnostico: '',\n      resultadoDiagnostico: '',\n      fechaPartoEstimada: '',\n      pesoTernero: '',\n      sexoTernero: '',\n      nombreTernero: '',\n      observacionesParto: '',\n      fechaPartoReal: '',\n      padreTerneroId: '',\n      padreTerneroNombre: '',\n      razaPadreTernero: '',\n      isPadreRegistered: false,\n    });\n  };\n\n  const handleDeleteHistoryRecord = (recordId) => {\n    if (window.confirm('¿Estás seguro de que quieres eliminar este registro? ¡Esta acción no se puede deshacer!')) {\n      const updatedRecords = reproductiveRecords.filter(record => record.id !== recordId);\n      setReproductiveRecords(updatedRecords); // Update state in App.js via prop\n      alert('¡Registro eliminado! Como si nunca hubiera existido.');\n    }\n  };\n\n  const startEditingHistoryRecord = (record) => {\n    setEditingRecord({ ...record }); // Create a copy to edit\n    alert('¡A editar se ha dicho! Modifica los campos y guarda los cambios.');\n  };\n\n  const handleEditingHistoryChange = (e) => {\n    const { name, value } = e.target;\n    setEditingRecord(prev => ({ ...prev, [name]: value }));\n  };\n\n  const saveEditedHistoryRecord = () => {\n    const updatedRecords = reproductiveRecords.map(record =>\n      record.id === editingRecord.id ? editingRecord : record\n    );\n    setReproductiveRecords(updatedRecords); // Update state in App.js via prop\n    setEditingRecord(null); // Exit editing mode\n    alert('¡Cambios guardados! Tu historial está al día.');\n  };\n\n  const cancelEditingHistoryRecord = () => {\n    setEditingRecord(null); // Exit editing mode\n    alert('¡Edición cancelada! No te preocupes, tus datos están a salvo.');\n  };\n\n  // Function to add a manual reproductive event\n  const handleAddManualEvent = () => {\n    const animalId = prompt(\"Ingresa el ID del animal para el evento manual:\");\n    const tipoEvento = prompt(\"¿Qué tipo de evento quieres registrar? (ej. 'observacion', 'tratamiento'):\");\n    const fechaEvento = prompt(\"¿Cuándo ocurrió el evento? (YYYY-MM-DD):\");\n    const observaciones = prompt(\"¿Alguna observación adicional sobre este evento?:\");\n    const estadoPosterior = prompt(\"¿Cuál es el estado del animal después de este evento? (ej. 'vacia', 'produccion'):\");\n\n    if (animalId && tipoEvento && fechaEvento) {\n      onRegisterReproductiveEvent({\n        id: `REC-${Date.now().toString().slice(-5)}`, // Generar ID único\n        idAnimal: animalId,\n        tipoEvento: tipoEvento,\n        fechaEvento: fechaEvento,\n        observaciones: observaciones,\n        estadoPosterior: estadoPosterior,\n      });\n      alert('¡Evento manual registrado! Tu historial sigue creciendo.');\n    } else {\n      alert('¡Ojo! Para registrar un evento manual, necesitamos el ID del animal, el tipo de evento y la fecha. ¡Inténtalo de nuevo!');\n    }\n  };\n\n  const handleExportHistory = async (format) => {\n    if (reproductiveRecords.length === 0) {\n      alert('¡No hay registros para exportar! ¿Qué esperas para empezar a registrar?');\n      return;\n    }\n\n    const filename = `historial_reproductivo_${new Date().toISOString().split('T')[0]}`;\n    const farmName = currentUser?.farmName || 'Mi Finca Ganadera';\n    const adminName = currentUser?.fullName || 'Administrador';\n\n    if (format === 'csv') {\n      exportToCsv(reproductiveRecords, filename);\n      alert('¡Exportando a CSV! Tu historial estará listo en un santiamén.');\n    } else if (format === 'pdf') {\n      await exportTableToPdf(historyTableRef.current, filename, 'Historial Reproductivo', farmName, adminName, logoUrl);\n      alert('¡Generando PDF! Tu historial se verá de lujo en papel.');\n    }\n  };\n\n  // Filtrar vacas preñadas para la tabla\n  const pregnantCows = animals.filter(animal => \n    animal.sexo === 'hembra' && animal.estadoReproductivo === 'preñada'\n  ).map(animal => {\n    // Encontrar el último registro de gestación positiva para obtener la fecha de parto estimada\n    const lastPositiveDiagnosis = reproductiveRecords\n      .filter(rec => rec.idAnimal === animal.id && rec.tipoEvento === 'diagnóstico' && rec.estadoPosterior === 'preñada')\n      .sort((a, b) => new Date(b.fechaEvento) - new Date(a.fechaEvento))[0];\n\n    const lastMontaInseminacion = reproductiveRecords\n      .filter(rec => rec.idAnimal === animal.id && (rec.tipoEvento === 'monta' || rec.tipoEvento === 'inseminacion'))\n      .sort((a, b) => new Date(b.fechaEvento) - new Date(a.fechaEvento))[0];\n\n    let fechaOrigenGestacion = '';\n    let fechaPartoEstimada = '';\n\n    if (lastPositiveDiagnosis && lastPositiveDiagnosis.fechaPartoEstimada) {\n      fechaOrigenGestacion = lastPositiveDiagnosis.fechaEvento;\n      fechaPartoEstimada = lastPositiveDiagnosis.fechaPartoEstimada;\n    } else if (lastMontaInseminacion) {\n      fechaOrigenGestacion = lastMontaInseminacion.fechaEvento;\n      const origenDateObj = new Date(fechaOrigenGestacion);\n      if (origenDateObj instanceof Date && !isNaN(origenDateObj.getTime())) {\n        const estimatedDate = new Date(origenDateObj);\n        estimatedDate.setDate(estimatedDate.getDate() + GESTATION_DAYS);\n        fechaPartoEstimada = estimatedDate.toISOString().split('T')[0];\n      }\n    }\n\n    return {\n      ...animal,\n      fechaOrigenGestacion: fechaOrigenGestacion,\n      fechaPartoEstimada: fechaPartoEstimada,\n    };\n  }).filter(animal => animal.fechaPartoEstimada); // Solo incluir vacas con fecha de parto estimada\n\n  const filteredReproductiveRecords = reproductiveRecords.filter(record => {\n    const recordDate = new Date(record.fechaEvento);\n    const start = filterStartDate ? new Date(filterStartDate) : null;\n    const end = filterEndDate ? new Date(filterEndDate) : null;\n\n    if (start && recordDate < start) return false;\n    if (end && recordDate > end) return false;\n    return true;\n  });\n\n  const maleAnimals = animals.filter(a => a.sexo === 'macho');\n\n  return (\n    <div className=\"bg-white p-6 rounded-lg shadow-md\">\n      <h3 className=\"text-xl font-semibold mb-4\">Control Reproductivo</h3>\n\n      <div className=\"flex justify-center mb-6 space-x-4\">\n        <button\n          onClick={() => setCurrentSection('montaNatural')}\n          className={`px-6 py-2 rounded-lg ${currentSection === 'montaNatural' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'} hover:bg-blue-700 transition-colors`}\n        >\n          Monta Natural\n        </button>\n        <button\n          onClick={() => setCurrentSection('inseminacion')}\n          className={`px-6 py-2 rounded-lg ${currentSection === 'inseminacion' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'} hover:bg-blue-700 transition-colors`}\n        >\n          Inseminación\n        </button>\n        <button\n          onClick={() => setCurrentSection('gestacion')}\n          className={`px-6 py-2 rounded-lg ${currentSection === 'gestacion' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'} hover:bg-blue-700 transition-colors`}\n        >\n          Control de Gestación / Parto\n        </button>\n        <button\n          onClick={() => setCurrentSection('historial')}\n          className={`px-6 py-2 rounded-lg ${currentSection === 'historial' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'} hover:bg-blue-700 transition-colors`}\n        >\n          Historial Reproductivo\n        </button>\n      </div>\n\n      {currentSection === 'montaNatural' && (\n        <div className=\"p-4 border rounded-lg bg-gray-50\">\n          <h4 className=\"text-lg font-semibold mb-3\">Registro de Monta Natural</h4>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <label className=\"block text-gray-700 text-sm font-bold mb-1\">Vaca:</label>\n            <select\n              name=\"vacaId\"\n              className=\"w-full px-4 py-2 border rounded-lg\"\n              value={montaNaturalData.vacaId}\n              onChange={handleMontaNaturalChange}\n            >\n              <option value=\"\">Selecciona Vaca</option>\n              {animals.filter(a => a.sexo === 'hembra').map(vaca => (\n                <option key={vaca.id} value={vaca.id}>{vaca.name} ({vaca.id})</option>\n              ))}\n            </select>\n            <label className=\"block text-gray-700 text-sm font-bold mb-1\">Toro:</label>\n            <select\n              name=\"toroId\"\n              className=\"w-full px-4 py-2 border rounded-lg\"\n              value={montaNaturalData.toroId}\n              onChange={handleMontaNaturalChange}\n            >\n              <option value=\"\">Selecciona Toro</option>\n              {animals.filter(a => a.sexo === 'macho').map(toro => (\n                <option key={toro.id} value={toro.id}>{toro.name} ({toro.id})</option>\n              ))}\n            </select>\n            <label className=\"block text-gray-700 text-sm font-bold mb-1\">Fecha de Monta:</label>\n            <input\n              type=\"date\"\n              name=\"fechaMonta\"\n              placeholder=\"Fecha de Monta\"\n              className=\"w-full px-4 py-2 border rounded-lg\"\n              value={montaNaturalData.fechaMonta}\n              onChange={handleMontaNaturalChange}\n            />\n            <label className=\"block text-gray-700 text-sm font-bold mb-1 col-span-full\">Observaciones:</label>\n            <textarea\n              name=\"observaciones\"\n              placeholder=\"Observaciones\"\n              rows=\"2\"\n              className=\"w-full px-4 py-2 border rounded-lg col-span-full\"\n              value={montaNaturalData.observaciones}\n              onChange={handleMontaNaturalChange}\n            ></textarea>\n          </div>\n          <button\n            onClick={handleMontaNaturalSubmit}\n            className=\"mt-4 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors\"\n          >\n            Registrar Monta\n          </button>\n        </div>\n      )}\n\n      {currentSection === 'inseminacion' && (\n        <div className=\"p-4 border rounded-lg bg-gray-50\">\n          <h4 className=\"text-lg font-semibold mb-3\">Registro de Inseminación</h4>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <label className=\"block text-gray-700 text-sm font-bold mb-1\">Vaca:</label>\n            <select\n              name=\"vacaId\"\n              className=\"w-full px-4 py-2 border rounded-lg\"\n              value={inseminacionData.vacaId}\n              onChange={handleInseminacionChange}\n            >\n              <option value=\"\">Selecciona Vaca</option>\n              {animals.filter(a => a.sexo === 'hembra').map(vaca => (\n                <option key={vaca.id} value={vaca.id}>{vaca.name} ({vaca.id})</option>\n              ))}\n            </select>\n            <label className=\"block text-gray-700 text-sm font-bold mb-1\">ID Semen Utilizado:</label>\n            <input\n              type=\"text\"\n              name=\"semenId\"\n              placeholder=\"ID Semen Utilizado\"\n              className=\"w-full px-4 py-2 border rounded-lg\"\n              value={inseminacionData.semenId}\n              onChange={handleInseminacionChange}\n            />\n            <label className=\"block text-gray-700 text-sm font-bold mb-1\">Fecha de Inseminación:</label>\n            <input\n              type=\"date\"\n              name=\"fechaInseminacion\"\n              placeholder=\"Fecha de Inseminación\"\n              className=\"w-full px-4 py-2 border rounded-lg\"\n              value={inseminacionData.fechaInseminacion}\n              onChange={handleInseminacionChange}\n            />\n            <label className=\"block text-gray-700 text-sm font-bold mb-1\">Inseminador:</label>\n            <input\n              type=\"text\"\n              name=\"inseminador\"\n              placeholder=\"Inseminador (Opcional)\"\n              className=\"w-full px-4 py-2 border rounded-lg\"\n              value={inseminacionData.inseminador}\n              onChange={handleInseminacionChange}\n            />\n            <label className=\"block text-gray-700 text-sm font-bold mb-1 col-span-full\">Observaciones:</label>\n            <textarea\n              name=\"observaciones\"\n              placeholder=\"Observaciones\"\n              rows=\"2\"\n              className=\"w-full px-4 py-2 border rounded-lg col-span-full\"\n              value={inseminacionData.observaciones}\n              onChange={handleInseminacionChange}\n            ></textarea>\n          </div>\n          <button\n            onClick={handleInseminacionSubmit}\n            className=\"mt-4 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors\"\n          >\n            Registrar Inseminación\n          </button>\n        </div>\n      )}\n\n      {currentSection === 'gestacion' && (\n        <div className=\"p-4 border rounded-lg bg-gray-50\">\n          <h4 className=\"text-lg font-semibold mb-3\">Control de Gestación / Parto</h4>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <label className=\"block text-gray-700 text-sm font-bold mb-1\">Vaca:</label>\n            <select\n              name=\"vacaId\"\n              className=\"w-full px-4 py-2 border rounded-lg\"\n              value={gestacionData.vacaId}\n              onChange={handleGestacionChange}\n            >\n              <option value=\"\">Selecciona Vaca</option>\n              {animals.filter(a => a.sexo === 'hembra').map(vaca => (\n                <option key={vaca.id} value={vaca.id}>{vaca.name} ({vaca.id})</option>\n              ))}\n            </select>\n            <label className=\"block text-gray-700 text-sm font-bold mb-1\">Fecha Diagnóstico Gestación:</label>\n            <input\n              type=\"date\"\n              name=\"fechaDiagnostico\"\n              placeholder=\"Fecha de Diagnóstico de Gestación\"\n              className=\"w-full px-4 py-2 border rounded-lg\"\n              value={gestacionData.fechaDiagnostico}\n              onChange={handleGestacionChange}\n            />\n            <label className=\"block text-gray-700 text-sm font-bold mb-1\">Resultado Diagnóstico:</label>\n            <select\n              name=\"resultadoDiagnostico\"\n              className=\"w-full px-4 py-2 border rounded-lg\"\n              value={gestacionData.resultadoDiagnostico}\n              onChange={handleGestacionChange}\n            >\n              <option value=\"\">Resultado Diagnóstico</option>\n              <option value=\"positiva\">Positiva (Preñada)</option>\n              <option value=\"negativa\">Negativa</option>\n            </select>\n            {gestacionData.resultadoDiagnostico === 'positiva' && (\n              <>\n                <label className=\"block text-gray-700 text-sm font-bold mb-1\">Fecha de Parto Estimada:</label>\n                <input\n                  type=\"date\"\n                  name=\"fechaPartoEstimada\"\n                  placeholder=\"Fecha de Parto Estimada\"\n                  className=\"w-full px-4 py-2 border rounded-lg\"\n                  value={gestacionData.fechaPartoEstimada}\n                  onChange={handleGestacionChange}\n                  title=\"Calculada automáticamente al registrar monta/inseminación o diagnóstico positivo\"\n                />\n              </>\n            )}\n            <label className=\"block text-gray-700 text-sm font-bold mb-1\">Fecha de Parto Real (si ya ocurrió):</label>\n            <input\n              type=\"date\"\n              name=\"fechaPartoReal\"\n              placeholder=\"Fecha de Parto Real (si ya ocurrió)\"\n              className=\"w-full px-4 py-2 border rounded-lg\"\n              value={gestacionData.fechaPartoReal}\n              onChange={handleGestacionChange}\n            />\n            {gestacionData.fechaPartoReal && (\n              <>\n                <label className=\"block text-gray-700 text-sm font-bold mb-1\">Peso del Ternero (kg):</label>\n                <input\n                  type=\"number\"\n                  name=\"pesoTernero\"\n                  placeholder=\"Peso del Ternero (kg)\"\n                  className=\"w-full px-4 py-2 border rounded-lg\"\n                  value={gestacionData.pesoTernero}\n                  onChange={handleGestacionChange}\n                />\n                <label className=\"block text-gray-700 text-sm font-bold mb-1\">Sexo del Ternero:</label>\n                <select\n                  name=\"sexoTernero\"\n                  className=\"w-full px-4 py-2 border rounded-lg\"\n                  value={gestacionData.sexoTernero}\n                  onChange={handleGestacionChange}\n                >\n                  <option value=\"\">Sexo del Ternero</option>\n                  <option value=\"macho\">Macho</option>\n                  <option value=\"hembra\">Hembra</option>\n                </select>\n                <label className=\"block text-gray-700 text-sm font-bold mb-1\">Nombre del Ternero:</label>\n                <input\n                  type=\"text\"\n                  name=\"nombreTernero\"\n                  placeholder=\"Nombre del Ternero\"\n                  className=\"w-full px-4 py-2 border rounded-lg\"\n                  value={gestacionData.nombreTernero}\n                  onChange={handleGestacionChange}\n                />\n\n                <div className=\"col-span-full flex items-center space-x-2\">\n                  <input\n                    type=\"checkbox\"\n                    id=\"isPadreRegistered\"\n                    name=\"isPadreRegistered\"\n                    checked={gestacionData.isPadreRegistered}\n                    onChange={handleGestacionChange}\n                    className=\"form-checkbox h-4 w-4 text-blue-600\"\n                  />\n                  <label htmlFor=\"isPadreRegistered\" className=\"text-gray-700 text-sm font-bold\">Padre registrado en la finca</label>\n                </div>\n\n                {gestacionData.isPadreRegistered ? (\n                  <>\n                    <label className=\"block text-gray-700 text-sm font-bold mb-1\">Seleccionar Padre:</label>\n                    <select\n                      name=\"padreTerneroId\"\n                      className=\"w-full px-4 py-2 border rounded-lg\"\n                      value={gestacionData.padreTerneroId}\n                      onChange={handleGestacionChange}\n                    >\n                      <option value=\"\">Selecciona Padre</option>\n                      {maleAnimals.map(toro => (\n                        <option key={toro.id} value={toro.id}>{toro.name} ({toro.id})</option>\n                      ))}\n                    </select>\n                  </>\n                ) : (\n                  <>\n                    <label className=\"block text-gray-700 text-sm font-bold mb-1\">Nombre del Padre del Ternero:</label>\n                    <input\n                      type=\"text\"\n                      name=\"padreTerneroNombre\"\n                      placeholder=\"Nombre del Padre del Ternero\"\n                      className=\"w-full px-4 py-2 border rounded-lg\"\n                      value={gestacionData.padreTerneroNombre}\n                      onChange={handleGestacionChange}\n                    />\n                    <label className=\"block text-gray-700 text-sm font-bold mb-1\">Raza del Padre del Ternero:</label>\n                    <input\n                      type=\"text\"\n                      name=\"razaPadreTernero\"\n                      placeholder=\"Raza del Padre del Ternero\"\n                      className=\"w-full px-4 py-2 border rounded-lg\"\n                      value={gestacionData.razaPadreTernero}\n                      onChange={handleGestacionChange}\n                    />\n                  </>\n                )}\n              </>\n            )}\n            <label className=\"block text-gray-700 text-sm font-bold mb-1 col-span-full\">Observaciones del Parto:</label>\n            <textarea\n              name=\"observacionesParto\"\n              placeholder=\"Observaciones del Parto\"\n              rows=\"2\"\n              className=\"w-full px-4 py-2 border rounded-lg col-span-full\"\n              value={gestacionData.observacionesParto}\n              onChange={handleGestacionChange}\n            ></textarea>\n          </div>\n          <button\n            onClick={handleGestacionSubmit}\n            className=\"mt-4 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors\"\n          >\n            Registrar Gestación / Parto\n          </button>\n        </div>\n      )}\n\n      {currentSection === 'historial' && (\n        <div className=\"p-4 border rounded-lg bg-gray-50\">\n          <h4 className=\"text-lg font-semibold mb-3\">Historial Reproductivo</h4>\n          <div className=\"flex flex-wrap justify-between items-center mb-4 gap-4\">\n            <button\n              onClick={handleAddManualEvent}\n              className=\"bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors\"\n            >\n              Registrar Evento Manual\n            </button>\n            <div className=\"flex items-center space-x-2\">\n              <label className=\"text-gray-700 text-sm font-bold\">Desde:</label>\n              <input\n                type=\"date\"\n                value={filterStartDate}\n                onChange={(e) => setFilterStartDate(e.target.value)}\n                className=\"px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n              />\n              <label className=\"text-gray-700 text-sm font-bold\">Hasta:</label>\n              <input\n                type=\"date\"\n                value={filterEndDate}\n                onChange={(e) => setFilterEndDate(e.target.value)}\n                className=\"px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n              />\n            </div>\n            <div>\n              <button\n                onClick={() => handleExportHistory('csv')}\n                className=\"bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors mr-2\"\n              >\n                Exportar a CSV\n              </button>\n              <button\n                onClick={() => handleExportHistory('pdf')}\n                className=\"bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition-colors\"\n              >\n                Exportar a PDF\n              </button>\n            </div>\n          </div>\n          <div className=\"overflow-x-auto rounded-lg shadow-md\">\n            <table ref={historyTableRef} className=\"min-w-full bg-white text-sm\">\n              <thead className=\"bg-gray-800 text-white\">\n                <tr>\n                  <th className=\"py-3 px-4 text-left font-semibold rounded-tl-lg\">ID Evento</th>\n                  <th className=\"py-3 px-4 text-left font-semibold\">ID Animal</th>\n                  <th className=\"py-3 px-4 text-left font-semibold\">Tipo Evento</th>\n                  <th className=\"py-3 px-4 text-left font-semibold\">Fecha Evento</th>\n                  <th className=\"py-3 px-4 text-left font-semibold\">Observaciones</th>\n                  <th className=\"py-3 px-4 text-left font-semibold\">Estado Posterior</th>\n                  <th className=\"py-3 px-4 text-left font-semibold rounded-tr-lg\">Acciones</th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-gray-200\">\n                {filteredReproductiveRecords.map((record) => (\n                  <tr key={record.id} className=\"hover:bg-gray-100 transition-colors\">\n                    <td className=\"py-3 px-4\">{record.id}</td>\n                    <td className=\"py-3 px-4\">{record.idAnimal}</td>\n                    <td className=\"py-3 px-4\">{record.tipoEvento}</td>\n                    <td className=\"py-3 px-4\">{record.fechaEvento}</td>\n                    <td className=\"py-3 px-4\">{record.observaciones}</td>\n                    <td className=\"py-3 px-4\">{record.estadoPosterior}</td>\n                    <td className=\"py-3 px-4\">\n                      <button\n                        onClick={() => startEditingHistoryRecord(record)}\n                        className=\"text-blue-600 hover:text-blue-800 font-medium mr-2 transition-colors\"\n                      >\n                        Editar\n                      </button>\n                      <button\n                        onClick={() => handleDeleteHistoryRecord(record.id)}\n                        className=\"text-red-600 hover:text-red-800 font-medium transition-colors\"\n                      >\n                        Eliminar\n                      </button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n\n          {/* Edit Form for History Record */}\n          {editingRecord && (\n            <div className=\"mt-8 p-6 border rounded-lg bg-yellow-50 shadow-lg\">\n              <h4 className=\"text-lg font-semibold mb-4 text-gray-800\">Editar Registro Histórico: {editingRecord.id}</h4>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-gray-700 text-sm font-bold mb-1\">Tipo Evento:</label>\n                  <input\n                    type=\"text\"\n                    name=\"tipoEvento\"\n                    className=\"w-full px-4 py-2 border rounded-lg bg-gray-200 cursor-not-allowed\"\n                    value={editingRecord.tipoEvento}\n                    readOnly\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-gray-700 text-sm font-bold mb-1\">Fecha Evento:</label>\n                  <input\n                    type=\"date\"\n                    name=\"fechaEvento\"\n                    className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                    value={editingRecord.fechaEvento}\n                    onChange={handleEditingHistoryChange}\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-gray-700 text-sm font-bold mb-1\">Estado Posterior:</label>\n                  <input\n                    type=\"text\"\n                    name=\"estadoPosterior\"\n                    className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                    value={editingRecord.estadoPosterior}\n                    onChange={handleEditingHistoryChange}\n                  />\n                </div>\n                <div className=\"col-span-full\">\n                  <label className=\"block text-gray-700 text-sm font-bold mb-1\">Observaciones:</label>\n                  <textarea\n                    name=\"observaciones\"\n                    rows=\"3\"\n                    className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                    value={editingRecord.observaciones}\n                    onChange={handleEditingHistoryChange}\n                  ></textarea>\n                </div>\n              </div>\n              <div className=\"mt-6 flex justify-end space-x-3\">\n                <button\n                  onClick={saveEditedHistoryRecord}\n                  className=\"bg-green-600 text-white py-2 px-5 rounded-lg hover:bg-green-700 transition-colors shadow-md\"\n                >\n                  Guardar Cambios\n                </button>\n                <button\n                  onClick={cancelEditingHistoryRecord}\n                  className=\"bg-gray-600 text-white py-2 px-5 rounded-lg hover:bg-gray-700 transition-colors shadow-md\"\n                >\n                  Cancelar Edición\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Calendario de Gestación y Vacas Preñadas */}\n      <div className=\"mt-8 pt-4 border-t border-gray-200\">\n        <h4 className=\"text-lg font-semibold mb-3\">Vacas Preñadas y Calendario de Gestación</h4>\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full bg-white border text-sm\">\n            <thead className=\"bg-gray-100\">\n              <tr>\n                <th className=\"py-2 px-4 border\">ID Vaca</th>\n                <th className=\"py-2 px-4 border\">Nombre</th>\n                <th className=\"py-2 px-4 border\">Fecha Origen Gestación</th>\n                <th className=\"py-2 px-4 border\">Fecha Parto Estimada</th>\n                <th className=\"py-2 px-4 border\">Días Restantes</th>\n                <th className=\"py-2 px-4 border\">Acciones</th>\n              </tr>\n            </thead>\n            <tbody>\n              {pregnantCows.map(vaca => {\n                const diasRestantes = calcularDiasRestantes(vaca.fechaPartoEstimada);\n                const isOverdue = diasRestantes < 0;\n\n                return (\n                  <tr key={vaca.id}>\n                    <td className=\"py-2 px-4 border\">{vaca.id}</td>\n                    <td className=\"py-2 px-4 border\">{vaca.name}</td>\n                    <td className=\"py-2 px-4 border\">{vaca.fechaOrigenGestacion || 'N/A'}</td>\n                    <td className={`py-2 px-4 border ${isOverdue ? 'text-red-600 font-bold' : ''}`}>\n                      {vaca.fechaPartoEstimada || 'N/A'}\n                    </td>\n                    <td className={`py-2 px-4 border ${isOverdue ? 'text-red-600 font-bold' : ''}`}>\n                      {isNaN(diasRestantes) ? 'N/A' : (isOverdue ? `Venció hace ${Math.abs(diasRestantes)} días` : diasRestantes)}\n                    </td>\n                    <td className=\"py-2 px-4 border\">\n                      <button\n                        className=\"text-red-600 hover:underline\"\n                        onClick={() => onDeletePregnantCow(vaca.id)}\n                      >\n                        Eliminar\n                      </button>\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ReproductiveControlPage;\n\n// DONE"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
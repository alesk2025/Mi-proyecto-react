{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Downloads\\\\project (10)\\\\src\\\\components\\\\AnimalRegistrationPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AnimalRegistrationPage = ({\n  onRegisterAnimal,\n  onUpdateAnimalProduction,\n  animals,\n  currentUser\n}) => {\n  _s();\n  const [animalData, setAnimalData] = useState({\n    id: '',\n    name: '',\n    raza: '',\n    peso: '',\n    sexo: '',\n    fechaNacimiento: '',\n    fechaCompra: '',\n    tipoProduccion: '',\n    dailyMilk: 0,\n    foto: null,\n    idpadre: '',\n    idmadre: '',\n    estadoReproductivo: 'Desarrollo'\n  });\n  const [selectedAnimalForGenealogy, setSelectedAnimalForGenealogy] = useState('');\n  const [genealogyTree, setGenealogyTree] = useState(null);\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setAnimalData({\n      ...animalData,\n      [name]: value\n    });\n  };\n  const handleFileChange = e => {\n    setAnimalData({\n      ...animalData,\n      foto: e.target.files[0]\n    });\n  };\n  const handleSubmit = () => {\n    const newAnimalId = `AN-${Date.now().toString().slice(-5)}`;\n    const animalToRegister = {\n      ...animalData,\n      id: newAnimalId\n    };\n    onRegisterAnimal(animalToRegister);\n    alert(`Animal ${animalToRegister.name} (${newAnimalId}) registrado.`);\n    setAnimalData({\n      id: '',\n      name: '',\n      raza: '',\n      peso: '',\n      sexo: '',\n      fechaNacimiento: '',\n      fechaCompra: '',\n      tipoProduccion: '',\n      dailyMilk: 0,\n      foto: null,\n      Idpadre: '',\n      Idmadre: '',\n      estadoReproductivo: 'desarrollo'\n    });\n  };\n  const handleDownloadPDF = (animal, currentUser) => {\n    if (!animal || !animal.id) {\n      alert('Por favor, selecciona un animal válido.');\n      return;\n    }\n    const farmName = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.farmName) || 'Mi Finca Ganadera';\n    const adminName = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.fullName) || 'Administrador';\n    const logoPlaceholder = 'https://via.placeholder.com/60x60?text=LOGO';\n    const qrURL = `https://api.qrserver.com/v1/create-qr-code/?data=${animal.id}&size=80x80`;\n    const tempDiv = document.createElement('div');\n    tempDiv.style.width = '210mm';\n    tempDiv.style.padding = '20mm';\n    tempDiv.style.fontFamily = 'Arial, sans-serif';\n    tempDiv.style.fontSize = '11pt';\n    tempDiv.style.backgroundColor = '#fff';\n    tempDiv.style.position = 'absolute';\n    tempDiv.style.left = '-9999px';\n    tempDiv.style.top = '-9999px';\n    const colorEstado = animal.status === 'en_produccion' ? '#27ae60' : animal.status === 'seca' ? '#e67e22' : animal.status === 'preñada' ? '#9b59b6' : '#7f8c8d';\n    tempDiv.innerHTML = `\n    <div style=\"border: 2px solid #ccc; border-radius: 10px; padding: 20px;\">\n      <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n        <img src=\"${logoPlaceholder}\" style=\"width: 60px;\" alt=\"Logo Finca\">\n        <div style=\"text-align: right;\">\n          <h1 style=\"margin: 0; color: #2c3e50;\">${farmName}</h1>\n          <p style=\"margin: 0; color: #7f8c8d;\">Ficha de Registro Animal</p>\n        </div>\n      </div>\n\n      <div style=\"display: flex; margin-top: 20px; gap: 20px;\">\n        <div style=\"flex-shrink: 0;\">\n          <img src=\"${URL.createObjectURL(animal.foto)}\" style=\"width: 120px; border-radius: 8px; border: 1px solid #ccc;\" alt=\"Foto del animal\">\n        </div>\n        <div style=\"flex-grow: 1;\">\n          <table style=\"width: 100%; border-collapse: collapse; border: 2px solid #000;\">\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 12px;\"><strong>Nombre:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.name || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10x 16px;\"><strong>ID:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.id || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>Raza:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.raza || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>Raza:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.peso || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>Sexo:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.sexo || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>Fecha Nacimiento:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.fechaNacimiento || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>Fecha Compra:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.fechaCompra || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>ID Padre:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.Idpadre || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>ID Madre:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.Idmadre || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>Estado:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px; color: ${colorEstado};\">${animal.status || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>Tipo Producción:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.tipoProduccion || 'N/A'}</td></tr>\n          </table>\n        </div>\n      </div>\n\n      <div style=\"text-align: center; margin-top: 30px;\">\n        <img src=\"${qrURL}\" style=\"width: 80px;\" alt=\"QR Code del animal\">\n      </div>\n\n      <p style=\"text-align: right; font-size: 10px; margin-top: 30px; color: #aaa;\">\n        Generado por Campo Inteligente | ${adminName}\n      </p>\n    </div>\n  `;\n    document.body.appendChild(tempDiv);\n    html2canvas(tempDiv, {\n      scale: 2\n    }).then(canvas => {\n      const imgData = canvas.toDataURL('image/png');\n      const pdf = new jsPDF('p', 'mm', 'a4');\n      const imgWidth = 210;\n      const pageHeight = 297;\n      const imgHeight = canvas.height * imgWidth / canvas.width;\n      let heightLeft = imgHeight;\n      let position = 0;\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pageHeight;\n      while (heightLeft > 0) {\n        position = heightLeft - imgHeight;\n        pdf.addPage();\n        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n        heightLeft -= pageHeight;\n      }\n      pdf.save(`ficha_animal_${animal.name || 'sin_nombre'}_${animal.id || 'sin_id'}.pdf`);\n      document.body.removeChild(tempDiv);\n    });\n  };\n  const handleUpdateProduction = () => {\n    if (animalData.id) {\n      onUpdateAnimalProduction(animalData.id, animalData.status, animalData.dailyMilk);\n      alert(`Producción/Estado de ${animalData.id} actualizado.`);\n    } else {\n      alert('Por favor, ingresa el ID del animal para actualizar su producción/estado.');\n    }\n  };\n\n  // --- Lógica del Árbol Genealógico ---\n  const buildGenealogyTree = (animalId, allAnimals) => {\n    const animal = allAnimals.find(a => a.id === animalId);\n    if (!animal) return null;\n    const tree = {\n      id: animal.id,\n      name: animal.name,\n      raza: animal.raza,\n      sexo: animal.sexo,\n      children: []\n    };\n\n    // Buscar hijos (simplificado: solo busca una generación hacia abajo)\n    const children = allAnimals.filter(a => a.padreId === animal.id || a.madreId === animal.id);\n    if (children.length > 0) {\n      tree.children = children.map(child => ({\n        id: child.id,\n        name: child.name,\n        raza: child.raza,\n        sexo: child.sexo\n        // Para un árbol completo, esto sería recursivo:\n        // children: buildGenealogyTree(child.id, allAnimals).children\n      }));\n    }\n\n    // Buscar padres (una generación hacia arriba)\n    if (animal.Idpadre) {\n      tree.father = allAnimals.find(a => a.id === animal.Idpadre);\n    }\n    if (animal.Idmadre) {\n      tree.mother = allAnimals.find(a => a.id === animal.Idmadre);\n    }\n    return tree;\n  };\n  const handleViewGenealogy = () => {\n    if (!selectedAnimalForGenealogy) {\n      alert('Por favor, selecciona un animal para ver su árbol genealógico.');\n      return;\n    }\n    const tree = buildGenealogyTree(selectedAnimalForGenealogy, animals);\n    setGenealogyTree(tree);\n    if (!tree) {\n      alert('Animal no encontrado o sin información genealógica.');\n    }\n  };\n  const handleDownloadGenealogyJPG = () => {\n    if (!genealogyTree) {\n      alert('Primero visualiza un árbol genealógico para descargarlo.');\n      return;\n    }\n    const farmName = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.farmName) || 'Mi Finca Ganadera';\n    const adminName = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.fullName) || 'Administrador';\n    const logoPlaceholder = 'https://via.placeholder.com/50x50?text=LOGO';\n\n    // Crear un div temporal para el árbol genealógico\n    const treeDiv = document.createElement('div');\n    treeDiv.style.width = '297mm'; // Ancho A4 horizontal\n    treeDiv.style.height = '210mm'; // Alto A4 horizontal\n    treeDiv.style.padding = '10mm';\n    treeDiv.style.fontFamily = 'Arial, sans-serif';\n    treeDiv.style.fontSize = '8pt';\n    treeDiv.style.color = '#333';\n    treeDiv.style.position = 'absolute';\n    treeDiv.style.left = '-9999px';\n    treeDiv.style.top = '-9999px';\n    treeDiv.style.backgroundColor = '#fff';\n    treeDiv.style.display = 'flex';\n    treeDiv.style.flexDirection = 'column';\n    treeDiv.style.justifyContent = 'space-between';\n\n    // Función para renderizar un nodo del árbol (simplificado)\n    const renderNode = (node, level = 0) => {\n      let html = `<div style=\"margin-left: ${level * 10}mm; margin-bottom: 5mm; border: 1px solid #ccc; padding: 5mm; border-radius: 5px; background-color: #f9f9f9;\">`;\n      html += `<p><strong>${node.name}</strong> (${node.id})</p>`;\n      html += `<p>Raza: ${node.raza}, Sexo: ${node.sexo}</p>`;\n      if (node.father || node.mother || node.children.length > 0) {\n        html += `<div style=\"margin-top: 5mm;\">`;\n        if (node.father) html += `<p>Padre: ${node.father.name} (${node.father.id})</p>`;\n        if (node.mother) html += `<p>Madre: ${node.mother.name} (${node.mother.id})</p>`;\n        if (node.children.length > 0) {\n          html += `<p>Hijos:</p><ul style=\"list-style: none; padding: 0; margin: 0;\">`;\n          node.children.forEach(child => {\n            html += `<li style=\"margin-left: 10mm;\">${child.name} (${child.id})</li>`;\n          });\n          html += `</ul>`;\n        }\n        html += `</div>`;\n      }\n      html += `</div>`;\n      return html;\n    };\n    treeDiv.innerHTML = `\n      <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 10mm; padding-bottom: 5mm; border-bottom: 1px solid #eee;\">\n        <img src=\"${logoPlaceholder}\" alt=\"Logo Finca\" style=\"width: 15mm; height: 15mm; object-fit: contain;\" />\n        <div style=\"text-align: right;\">\n          <h1 style=\"font-size: 16pt; margin: 0; color: #2c3e50;\">${farmName}</h1>\n          <p style=\"font-size: 9pt; margin: 0; color: #7f8c8d;\">Árbol Genealógico</p>\n        </div>\n      </div>\n      <div style=\"flex-grow: 1; overflow: auto; display: flex; flex-direction: column; align-items: flex-start;\">\n        ${renderNode(genealogyTree)}\n        ${genealogyTree.father ? renderNode(genealogyTree.father, 1) : ''}\n        ${genealogyTree.mother ? renderNode(genealogyTree.mother, 1) : ''}\n        ${genealogyTree.children.map(child => renderNode(child, 1)).join('')}\n      </div>\n      <div style=\"text-align: center; margin-top: 10mm; font-size: 8pt; color: #7f8c8d; border-top: 1px solid #eee; padding-top: 5mm;\">\n        <p>Generado por Campo Inteligente</p>\n        <p>Administrador: ${adminName}</p>\n      </div>\n    `;\n    document.body.appendChild(treeDiv);\n    html2canvas(treeDiv, {\n      scale: 2\n    }).then(canvas => {\n      const imgData = canvas.toDataURL('image/png');\n      const pdf = new jsPDF('l', 'mm', 'a4'); // 'l' para orientación horizontal\n      const imgWidth = 297; // A4 horizontal width in mm\n      const pageHeight = 210; // A4 horizontal height in mm\n      const imgHeight = canvas.height * imgWidth / canvas.width;\n      let heightLeft = imgHeight;\n      let position = 0;\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pageHeight;\n      while (heightLeft >= 0) {\n        position = heightLeft - imgHeight;\n        pdf.addPage();\n        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n        heightLeft -= pageHeight;\n      }\n      pdf.save(`arbol_genealogico_${genealogyTree.name || 'sin_nombre'}_${genealogyTree.id || 'sin_id'}.pdf`);\n      document.body.removeChild(treeDiv);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white p-6 rounded-lg shadow-md\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-xl font-semibold mb-4\",\n      children: \"Registro Animal Avanzado\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        placeholder: \"Nombre del Animal\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.name,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"raza\",\n        placeholder: \"Raza\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.raza,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"peso\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.peso,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"sexo\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.sexo,\n        onChange: handleInputChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Selecciona Sexo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"macho\",\n          children: \"Macho\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"hembra\",\n          children: \"Hembra\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"date\",\n        name: \"fechaNacimiento\",\n        placeholder: \"Fecha de Nacimiento\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.fechaNacimiento,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"date\",\n        name: \"fechaCompra\",\n        placeholder: \"Fecha de Compra (Opcional)\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.fechaCompra,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"tipoProduccion\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.tipoProduccion,\n        onChange: handleInputChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Tipo de Producci\\xF3n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"carne\",\n          children: \"Carne\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"leche\",\n          children: \"Leche\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 9\n      }, this), animalData.tipoProduccion === 'leche' && animalData.sexo === 'hembra' && /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"dailyMilk\",\n        placeholder: \"Litros Promedio Diarios\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.dailyMilk,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"Idpadre\",\n        placeholder: \"ID Padre (Opcional)\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.padreId,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"Idmadre\",\n        placeholder: \"ID Madre (Opcional)\",\n        className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n        value: animalData.madreId,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-span-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-2\",\n          children: \"Foto del Animal\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          name: \"foto\",\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          onChange: handleFileChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSubmit,\n      className: \"mt-6 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors mr-2\",\n      children: \"Registrar Animal\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => handleDownloadPDF(animalData) // Pasar el animalData actual para generar PDF\n      ,\n      className: \"mt-6 bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors\",\n      children: \"Descargar Ficha PDF\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-8 pt-4 border-t border-gray-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-lg font-semibold mb-3\",\n        children: \"Actualizar Producci\\xF3n/Estado\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"id\",\n          placeholder: \"ID del Animal a Actualizar\",\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          value: animalData.id,\n          onChange: handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"status\",\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          value: animalData.status,\n          onChange: handleInputChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"desarrollo\",\n            children: \"En Desarrollo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"en_produccion\",\n            children: \"En Producci\\xF3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"seca\",\n            children: \"Seca\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"pre\\xF1ada\",\n            children: \"Pre\\xF1ada\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 11\n        }, this), animalData.status === 'en_produccion' && animalData.tipoProduccion === 'leche' && /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"dailyMilk\",\n          placeholder: \"Litros de leche diarios\",\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          value: animalData.dailyMilk,\n          onChange: handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleUpdateProduction,\n        className: \"mt-4 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors\",\n        children: \"Actualizar Producci\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-8 pt-4 border-t border-gray-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-lg font-semibold mb-3\",\n        children: \"\\xC1rbol Geneal\\xF3gico\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          value: selectedAnimalForGenealogy,\n          onChange: e => setSelectedAnimalForGenealogy(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Selecciona Animal para Genealog\\xEDa\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 13\n          }, this), animals.map(animal => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: animal.id,\n            children: [animal.name, \" (\", animal.id, \")\"]\n          }, animal.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 453,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleViewGenealogy,\n          className: \"bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors\",\n          children: \"Ver \\xC1rbol Geneal\\xF3gico\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 9\n      }, this), genealogyTree && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 p-4 border rounded-lg bg-gray-50\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"font-semibold\",\n          children: [\"\\xC1rbol Geneal\\xF3gico de \", genealogyTree.name, \" (\", genealogyTree.id, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 466,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Raza: \", genealogyTree.raza, \", Sexo: \", genealogyTree.sexo]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 13\n        }, this), genealogyTree.father && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"ml-4\",\n          children: [\"Padre: \", genealogyTree.father.name, \" (\", genealogyTree.father.id, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 15\n        }, this), genealogyTree.mother && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"ml-4\",\n          children: [\"Madre: \", genealogyTree.mother.name, \" (\", genealogyTree.mother.id, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 15\n        }, this), genealogyTree.children.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"font-semibold\",\n            children: \"Hijos:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 476,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"list-disc list-inside ml-4\",\n            children: genealogyTree.children.map(child => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [child.name, \" (\", child.id, \") - \", child.raza]\n            }, child.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 479,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 477,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleDownloadGenealogyJPG,\n          className: \"mt-4 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors\",\n          children: \"Descargar \\xC1rbol (JPG)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 465,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 289,\n    columnNumber: 5\n  }, this);\n};\n_s(AnimalRegistrationPage, \"5Hr5JC6/qHzHL+6WAyWP2bgEX5U=\");\n_c = AnimalRegistrationPage;\nexport default AnimalRegistrationPage;\nvar _c;\n$RefreshReg$(_c, \"AnimalRegistrationPage\");","map":{"version":3,"names":["React","useState","useEffect","jsPDF","html2canvas","jsxDEV","_jsxDEV","AnimalRegistrationPage","onRegisterAnimal","onUpdateAnimalProduction","animals","currentUser","_s","animalData","setAnimalData","id","name","raza","peso","sexo","fechaNacimiento","fechaCompra","tipoProduccion","dailyMilk","foto","idpadre","idmadre","estadoReproductivo","selectedAnimalForGenealogy","setSelectedAnimalForGenealogy","genealogyTree","setGenealogyTree","handleInputChange","e","value","target","handleFileChange","files","handleSubmit","newAnimalId","Date","now","toString","slice","animalToRegister","alert","Idpadre","Idmadre","handleDownloadPDF","animal","farmName","adminName","fullName","logoPlaceholder","qrURL","tempDiv","document","createElement","style","width","padding","fontFamily","fontSize","backgroundColor","position","left","top","colorEstado","status","innerHTML","URL","createObjectURL","body","appendChild","scale","then","canvas","imgData","toDataURL","pdf","imgWidth","pageHeight","imgHeight","height","heightLeft","addImage","addPage","save","removeChild","handleUpdateProduction","buildGenealogyTree","animalId","allAnimals","find","a","tree","children","filter","padreId","madreId","length","map","child","father","mother","handleViewGenealogy","handleDownloadGenealogyJPG","treeDiv","color","display","flexDirection","justifyContent","renderNode","node","level","html","forEach","join","className","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","onClick","_c","$RefreshReg$"],"sources":["C:/Users/User/Downloads/project (10)/src/components/AnimalRegistrationPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\n\nconst AnimalRegistrationPage = ({ onRegisterAnimal, onUpdateAnimalProduction, animals, currentUser }) => {\n  const [animalData, setAnimalData] = useState({\n    id: '',\n    name: '',\n    raza: '',\n    peso: '',\n    sexo: '',\n    fechaNacimiento: '',\n    fechaCompra: '',\n    tipoProduccion: '',\n    dailyMilk: 0,\n    foto: null,\n    idpadre: '',\n    idmadre: '',\n    estadoReproductivo: 'Desarrollo',\n  });\n  const [selectedAnimalForGenealogy, setSelectedAnimalForGenealogy] = useState('');\n  const [genealogyTree, setGenealogyTree] = useState(null);\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setAnimalData({ ...animalData, [name]: value });\n  };\n\n  const handleFileChange = (e) => {\n    setAnimalData({ ...animalData, foto: e.target.files[0] });\n  };\n\n  const handleSubmit = () => {\n    const newAnimalId = `AN-${Date.now().toString().slice(-5)}`;\n    const animalToRegister = { ...animalData, id: newAnimalId };\n    onRegisterAnimal(animalToRegister);\n    alert(`Animal ${animalToRegister.name} (${newAnimalId}) registrado.`);\n    setAnimalData({\n      id: '', name: '', raza: '', peso: '', sexo: '', fechaNacimiento: '', fechaCompra: '',\n      tipoProduccion: '', dailyMilk: 0, foto: null, Idpadre: '', Idmadre: '',\n      estadoReproductivo: 'desarrollo',\n    });\n  };\n\n  const handleDownloadPDF = (animal, currentUser) => {\n  if (!animal || !animal.id) {\n    alert('Por favor, selecciona un animal válido.');\n    return;\n  }\n\n  const farmName = currentUser?.farmName || 'Mi Finca Ganadera';\n  const adminName = currentUser?.fullName || 'Administrador';\n  const logoPlaceholder = 'https://via.placeholder.com/60x60?text=LOGO';\n  const qrURL = `https://api.qrserver.com/v1/create-qr-code/?data=${animal.id}&size=80x80`;\n\n  const tempDiv = document.createElement('div');\n  tempDiv.style.width = '210mm';\n  tempDiv.style.padding = '20mm';\n  tempDiv.style.fontFamily = 'Arial, sans-serif';\n  tempDiv.style.fontSize = '11pt';\n  tempDiv.style.backgroundColor = '#fff';\n  tempDiv.style.position = 'absolute';\n  tempDiv.style.left = '-9999px';\n  tempDiv.style.top = '-9999px';\n\n  const colorEstado = animal.status === 'en_produccion' ? '#27ae60' :\n                      animal.status === 'seca' ? '#e67e22' :\n                      animal.status === 'preñada' ? '#9b59b6' : '#7f8c8d';\n\n  tempDiv.innerHTML = `\n    <div style=\"border: 2px solid #ccc; border-radius: 10px; padding: 20px;\">\n      <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n        <img src=\"${logoPlaceholder}\" style=\"width: 60px;\" alt=\"Logo Finca\">\n        <div style=\"text-align: right;\">\n          <h1 style=\"margin: 0; color: #2c3e50;\">${farmName}</h1>\n          <p style=\"margin: 0; color: #7f8c8d;\">Ficha de Registro Animal</p>\n        </div>\n      </div>\n\n      <div style=\"display: flex; margin-top: 20px; gap: 20px;\">\n        <div style=\"flex-shrink: 0;\">\n          <img src=\"${URL.createObjectURL(animal.foto)}\" style=\"width: 120px; border-radius: 8px; border: 1px solid #ccc;\" alt=\"Foto del animal\">\n        </div>\n        <div style=\"flex-grow: 1;\">\n          <table style=\"width: 100%; border-collapse: collapse; border: 2px solid #000;\">\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 12px;\"><strong>Nombre:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.name || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10x 16px;\"><strong>ID:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.id || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>Raza:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.raza || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>Raza:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.peso || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>Sexo:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.sexo || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>Fecha Nacimiento:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.fechaNacimiento || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>Fecha Compra:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.fechaCompra || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>ID Padre:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.Idpadre || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>ID Madre:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.Idmadre || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>Estado:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px; color: ${colorEstado};\">${animal.status || 'N/A'}</td></tr>\n            <tr style=\"border-bottom: 2px solid #000;\"><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\"><strong>Tipo Producción:</strong></td><td style=\"border: 2px solid #000;\" style=\"padding: 10px 16px;\">${animal.tipoProduccion || 'N/A'}</td></tr>\n          </table>\n        </div>\n      </div>\n\n      <div style=\"text-align: center; margin-top: 30px;\">\n        <img src=\"${qrURL}\" style=\"width: 80px;\" alt=\"QR Code del animal\">\n      </div>\n\n      <p style=\"text-align: right; font-size: 10px; margin-top: 30px; color: #aaa;\">\n        Generado por Campo Inteligente | ${adminName}\n      </p>\n    </div>\n  `;\n\n  document.body.appendChild(tempDiv);\n\n  html2canvas(tempDiv, { scale: 2 }).then(canvas => {\n    const imgData = canvas.toDataURL('image/png');\n    const pdf = new jsPDF('p', 'mm', 'a4');\n    const imgWidth = 210;\n    const pageHeight = 297;\n    const imgHeight = canvas.height * imgWidth / canvas.width;\n    let heightLeft = imgHeight;\n    let position = 0;\n\n    pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n    heightLeft -= pageHeight;\n\n    while (heightLeft > 0) {\n      position = heightLeft - imgHeight;\n      pdf.addPage();\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pageHeight;\n    }\n\n    pdf.save(`ficha_animal_${animal.name || 'sin_nombre'}_${animal.id || 'sin_id'}.pdf`);\n    document.body.removeChild(tempDiv);\n  });\n};\n\n  const handleUpdateProduction = () => {\n    if (animalData.id) {\n      onUpdateAnimalProduction(animalData.id, animalData.status, animalData.dailyMilk);\n      alert(`Producción/Estado de ${animalData.id} actualizado.`);\n    } else {\n      alert('Por favor, ingresa el ID del animal para actualizar su producción/estado.');\n    }\n  };\n\n  // --- Lógica del Árbol Genealógico ---\n  const buildGenealogyTree = (animalId, allAnimals) => {\n    const animal = allAnimals.find(a => a.id === animalId);\n    if (!animal) return null;\n\n    const tree = {\n      id: animal.id,\n      name: animal.name,\n      raza: animal.raza,\n      sexo: animal.sexo,\n      children: []\n    };\n\n    // Buscar hijos (simplificado: solo busca una generación hacia abajo)\n    const children = allAnimals.filter(a => a.padreId === animal.id || a.madreId === animal.id);\n    if (children.length > 0) {\n      tree.children = children.map(child => ({\n        id: child.id,\n        name: child.name,\n        raza: child.raza,\n        sexo: child.sexo,\n        // Para un árbol completo, esto sería recursivo:\n        // children: buildGenealogyTree(child.id, allAnimals).children\n      }));\n    }\n\n    // Buscar padres (una generación hacia arriba)\n    if (animal.Idpadre) {\n      tree.father = allAnimals.find(a => a.id === animal.Idpadre);\n    }\n    if (animal.Idmadre) {\n      tree.mother = allAnimals.find(a => a.id === animal.Idmadre);\n    }\n\n    return tree;\n  };\n\n  const handleViewGenealogy = () => {\n    if (!selectedAnimalForGenealogy) {\n      alert('Por favor, selecciona un animal para ver su árbol genealógico.');\n      return;\n    }\n    const tree = buildGenealogyTree(selectedAnimalForGenealogy, animals);\n    setGenealogyTree(tree);\n    if (!tree) {\n      alert('Animal no encontrado o sin información genealógica.');\n    }\n  };\n\n  const handleDownloadGenealogyJPG = () => {\n    if (!genealogyTree) {\n      alert('Primero visualiza un árbol genealógico para descargarlo.');\n      return;\n    }\n\n    const farmName = currentUser?.farmName || 'Mi Finca Ganadera';\n    const adminName = currentUser?.fullName || 'Administrador';\n    const logoPlaceholder = 'https://via.placeholder.com/50x50?text=LOGO';\n\n    // Crear un div temporal para el árbol genealógico\n    const treeDiv = document.createElement('div');\n    treeDiv.style.width = '297mm'; // Ancho A4 horizontal\n    treeDiv.style.height = '210mm'; // Alto A4 horizontal\n    treeDiv.style.padding = '10mm';\n    treeDiv.style.fontFamily = 'Arial, sans-serif';\n    treeDiv.style.fontSize = '8pt';\n    treeDiv.style.color = '#333';\n    treeDiv.style.position = 'absolute';\n    treeDiv.style.left = '-9999px';\n    treeDiv.style.top = '-9999px';\n    treeDiv.style.backgroundColor = '#fff';\n    treeDiv.style.display = 'flex';\n    treeDiv.style.flexDirection = 'column';\n    treeDiv.style.justifyContent = 'space-between';\n\n    // Función para renderizar un nodo del árbol (simplificado)\n    const renderNode = (node, level = 0) => {\n      let html = `<div style=\"margin-left: ${level * 10}mm; margin-bottom: 5mm; border: 1px solid #ccc; padding: 5mm; border-radius: 5px; background-color: #f9f9f9;\">`;\n      html += `<p><strong>${node.name}</strong> (${node.id})</p>`;\n      html += `<p>Raza: ${node.raza}, Sexo: ${node.sexo}</p>`;\n      if (node.father || node.mother || node.children.length > 0) {\n        html += `<div style=\"margin-top: 5mm;\">`;\n        if (node.father) html += `<p>Padre: ${node.father.name} (${node.father.id})</p>`;\n        if (node.mother) html += `<p>Madre: ${node.mother.name} (${node.mother.id})</p>`;\n        if (node.children.length > 0) {\n          html += `<p>Hijos:</p><ul style=\"list-style: none; padding: 0; margin: 0;\">`;\n          node.children.forEach(child => {\n            html += `<li style=\"margin-left: 10mm;\">${child.name} (${child.id})</li>`;\n          });\n          html += `</ul>`;\n        }\n        html += `</div>`;\n      }\n      html += `</div>`;\n      return html;\n    };\n\n    treeDiv.innerHTML = `\n      <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 10mm; padding-bottom: 5mm; border-bottom: 1px solid #eee;\">\n        <img src=\"${logoPlaceholder}\" alt=\"Logo Finca\" style=\"width: 15mm; height: 15mm; object-fit: contain;\" />\n        <div style=\"text-align: right;\">\n          <h1 style=\"font-size: 16pt; margin: 0; color: #2c3e50;\">${farmName}</h1>\n          <p style=\"font-size: 9pt; margin: 0; color: #7f8c8d;\">Árbol Genealógico</p>\n        </div>\n      </div>\n      <div style=\"flex-grow: 1; overflow: auto; display: flex; flex-direction: column; align-items: flex-start;\">\n        ${renderNode(genealogyTree)}\n        ${genealogyTree.father ? renderNode(genealogyTree.father, 1) : ''}\n        ${genealogyTree.mother ? renderNode(genealogyTree.mother, 1) : ''}\n        ${genealogyTree.children.map(child => renderNode(child, 1)).join('')}\n      </div>\n      <div style=\"text-align: center; margin-top: 10mm; font-size: 8pt; color: #7f8c8d; border-top: 1px solid #eee; padding-top: 5mm;\">\n        <p>Generado por Campo Inteligente</p>\n        <p>Administrador: ${adminName}</p>\n      </div>\n    `;\n\n    document.body.appendChild(treeDiv);\n\n    html2canvas(treeDiv, { scale: 2 }).then(canvas => {\n      const imgData = canvas.toDataURL('image/png');\n      const pdf = new jsPDF('l', 'mm', 'a4'); // 'l' para orientación horizontal\n      const imgWidth = 297; // A4 horizontal width in mm\n      const pageHeight = 210; // A4 horizontal height in mm\n      const imgHeight = canvas.height * imgWidth / canvas.width;\n      let heightLeft = imgHeight;\n      let position = 0;\n\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pageHeight;\n\n      while (heightLeft >= 0) {\n        position = heightLeft - imgHeight;\n        pdf.addPage();\n        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n        heightLeft -= pageHeight;\n      }\n      pdf.save(`arbol_genealogico_${genealogyTree.name || 'sin_nombre'}_${genealogyTree.id || 'sin_id'}.pdf`);\n      document.body.removeChild(treeDiv);\n    });\n  };\n\n  return (\n    <div className=\"bg-white p-6 rounded-lg shadow-md\">\n      <h3 className=\"text-xl font-semibold mb-4\">Registro Animal Avanzado</h3>\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        <input\n          type=\"text\"\n          name=\"name\"\n          placeholder=\"Nombre del Animal\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.name}\n          onChange={handleInputChange}\n        />\n        <input\n          type=\"text\"\n          name=\"raza\"\n          placeholder=\"Raza\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.raza}\n          onChange={handleInputChange}\n\n        />\n        <input\n          type=\"number\"\n          name=\"peso\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.peso}\n          onChange={handleInputChange}\n\n        />\n        <select\n          name=\"sexo\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.sexo}\n          onChange={handleInputChange}\n        >\n          <option value=\"\">Selecciona Sexo</option>\n          <option value=\"macho\">Macho</option>\n          <option value=\"hembra\">Hembra</option>\n        </select>\n        <input\n          type=\"date\"\n          name=\"fechaNacimiento\"\n          placeholder=\"Fecha de Nacimiento\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.fechaNacimiento}\n          onChange={handleInputChange}\n        />\n        <input\n          type=\"date\"\n          name=\"fechaCompra\"\n          placeholder=\"Fecha de Compra (Opcional)\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.fechaCompra}\n          onChange={handleInputChange}\n        />\n        <select\n          name=\"tipoProduccion\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.tipoProduccion}\n          onChange={handleInputChange}\n        >\n          <option value=\"\">Tipo de Producción</option>\n          <option value=\"carne\">Carne</option>\n          <option value=\"leche\">Leche</option>\n        </select>\n        {animalData.tipoProduccion === 'leche' && animalData.sexo === 'hembra' && (\n          <input\n            type=\"number\"\n            name=\"dailyMilk\"\n            placeholder=\"Litros Promedio Diarios\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={animalData.dailyMilk}\n            onChange={handleInputChange}\n          />\n        )}\n        <input\n          type=\"text\"\n          name=\"Idpadre\"\n          placeholder=\"ID Padre (Opcional)\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.padreId}\n          onChange={handleInputChange}\n        />\n        <input\n          type=\"text\"\n          name=\"Idmadre\"\n          placeholder=\"ID Madre (Opcional)\"\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n          value={animalData.madreId}\n          onChange={handleInputChange}\n        />\n        <div className=\"col-span-full\">\n          <label className=\"block text-gray-700 text-sm font-bold mb-2\">Foto del Animal</label>\n          <input\n            type=\"file\"\n            name=\"foto\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            onChange={handleFileChange}\n          />\n        </div>\n      </div>\n      <button\n        onClick={handleSubmit}\n        className=\"mt-6 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors mr-2\"\n      >\n        Registrar Animal\n      </button>\n      <button\n        onClick={() => handleDownloadPDF(animalData)} // Pasar el animalData actual para generar PDF\n        className=\"mt-6 bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors\"\n      >\n        Descargar Ficha PDF\n      </button>\n\n      <div className=\"mt-8 pt-4 border-t border-gray-200\">\n        <h4 className=\"text-lg font-semibold mb-3\">Actualizar Producción/Estado</h4>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <input\n            type=\"text\"\n            name=\"id\"\n            placeholder=\"ID del Animal a Actualizar\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={animalData.id}\n            onChange={handleInputChange}\n          />\n          <select\n            name=\"status\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={animalData.status}\n            onChange={handleInputChange}\n          >\n            <option value=\"desarrollo\">En Desarrollo</option>\n            <option value=\"en_produccion\">En Producción</option>\n            <option value=\"seca\">Seca</option>\n            <option value=\"preñada\">Preñada</option>\n          </select>\n          {animalData.status === 'en_produccion' && animalData.tipoProduccion === 'leche' && (\n            <input\n              type=\"number\"\n              name=\"dailyMilk\"\n              placeholder=\"Litros de leche diarios\"\n              className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n              value={animalData.dailyMilk}\n              onChange={handleInputChange}\n            />\n          )}\n        </div>\n        <button\n          onClick={handleUpdateProduction}\n          className=\"mt-4 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors\"\n        >\n          Actualizar Producción\n        </button>\n      </div>\n\n      <div className=\"mt-8 pt-4 border-t border-gray-200\">\n        <h4 className=\"text-lg font-semibold mb-3\">Árbol Genealógico</h4>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <select\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={selectedAnimalForGenealogy}\n            onChange={(e) => setSelectedAnimalForGenealogy(e.target.value)}\n          >\n            <option value=\"\">Selecciona Animal para Genealogía</option>\n            {animals.map(animal => (\n              <option key={animal.id} value={animal.id}>{animal.name} ({animal.id})</option>\n            ))}\n          </select>\n          <button\n            onClick={handleViewGenealogy}\n            className=\"bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors\"\n          >\n            Ver Árbol Genealógico\n          </button>\n        </div>\n\n        {genealogyTree && (\n          <div className=\"mt-4 p-4 border rounded-lg bg-gray-50\">\n            <h5 className=\"font-semibold\">Árbol Genealógico de {genealogyTree.name} ({genealogyTree.id})</h5>\n            <p>Raza: {genealogyTree.raza}, Sexo: {genealogyTree.sexo}</p>\n            {genealogyTree.father && (\n              <p className=\"ml-4\">Padre: {genealogyTree.father.name} ({genealogyTree.father.id})</p>\n            )}\n            {genealogyTree.mother && (\n              <p className=\"ml-4\">Madre: {genealogyTree.mother.name} ({genealogyTree.mother.id})</p>\n            )}\n            {genealogyTree.children.length > 0 && (\n              <div className=\"mt-2\">\n                <p className=\"font-semibold\">Hijos:</p>\n                <ul className=\"list-disc list-inside ml-4\">\n                  {genealogyTree.children.map(child => (\n                    <li key={child.id}>{child.name} ({child.id}) - {child.raza}</li>\n                  ))}\n                </ul>\n              </div>\n            )}\n            <button\n              onClick={handleDownloadGenealogyJPG}\n              className=\"mt-4 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors\"\n            >\n              Descargar Árbol (JPG)\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AnimalRegistrationPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
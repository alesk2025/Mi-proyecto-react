{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Downloads\\\\project (10)\\\\src\\\\components\\\\ReproductiveControlPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ReproductiveControlPage = ({\n  animals,\n  onUpdateAnimalProduction,\n  onRegisterAnimal,\n  onRegisterReproductiveEvent,\n  onDeletePregnantCow,\n  reproductiveRecords,\n  setReproductiveRecords,\n  currentUser,\n  logoUrl,\n  calvingSchedule,\n  setCalvingSchedule,\n  naturalMatingHistory,\n  setNaturalMatingHistory\n}) => {\n  _s();\n  const [reproductiveData, setReproductiveData] = useState({\n    animalId: '',\n    eventType: '',\n    // 'diagnostico_prenez', 'parto', 'inseminacion', 'celo', 'monta_natural'\n    eventDate: '',\n    details: '',\n    semenId: '',\n    // Para inseminacion\n    semenProvider: '',\n    // Para inseminacion\n    machoId: '',\n    // Para monta_natural\n    calfId: '',\n    // Para parto\n    calfSex: '',\n    // Para parto\n    calfWeight: '',\n    // Para parto\n    calfObservations: '',\n    // Para parto\n    diagnosisResult: '',\n    // 'preñada', 'vacia'\n    expectedCalvingDate: '' // Para diagnostico_prenez (fecha confirmada por veterinario)\n  });\n  const [filterAnimalId, setFilterAnimalId] = useState('');\n  const [filterEventType, setFilterEventType] = useState('');\n\n  // Estado para las notificaciones de partos próximos\n  const [upcomingCalvingNotifications, setUpcomingCalvingNotifications] = useState([]);\n\n  // Estado para el modal de registro de ternero\n  const [showCalfModal, setShowCalfModal] = useState(false);\n  const [currentCalvingAnimal, setCurrentCalvingAnimal] = useState(null);\n  const [calfData, setCalfData] = useState({\n    calfId: '',\n    calfSex: '',\n    calfWeight: '',\n    calfObservations: ''\n  });\n\n  // Efecto para generar notificaciones de partos próximos\n  useEffect(() => {\n    const today = new Date();\n    const notifications = [];\n    calvingSchedule.forEach(item => {\n      const calvingDate = new Date(item.expectedCalvingDate);\n      const daysRemaining = Math.ceil((calvingDate - today) / (1000 * 60 * 60 * 24));\n\n      // Notificar si faltan 30 días o menos, o si ya está vencido\n      if (daysRemaining <= 30 && daysRemaining >= 0) {\n        notifications.push({\n          id: item.id,\n          animalId: item.animalId,\n          message: `¡Atención! El parto de ${getAnimalName(item.animalId)} (${item.animalId}) está programado para el ${item.expectedCalvingDate}. Faltan ${daysRemaining} días.`,\n          type: 'warning'\n        });\n      } else if (daysRemaining < 0) {\n        notifications.push({\n          id: item.id,\n          animalId: item.animalId,\n          message: `¡Alerta! El parto de ${getAnimalName(item.animalId)} (${item.animalId}) estaba programado para el ${item.expectedCalvingDate} y está VENCIDO por ${Math.abs(daysRemaining)} días.`,\n          type: 'danger'\n        });\n      }\n    });\n    setUpcomingCalvingNotifications(notifications);\n  }, [calvingSchedule, animals]); // Dependencia de animals para getAnimalName\n\n  // Función para calcular la fecha probable de parto (283 días después de la inseminación/diagnóstico)\n  // Esta función ahora es más una guía, la fecha final la da el veterinario en el diagnóstico\n  const calculateEstimatedCalvingDate = eventDate => {\n    if (!eventDate) return '';\n    const date = new Date(eventDate);\n    date.setDate(date.getDate() + 283); // Gestación promedio de bovinos\n    return date.toISOString().split('T')[0];\n  };\n\n  // Manejador de cambios en el formulario\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setReproductiveData(prev => {\n      const newData = {\n        ...prev,\n        [name]: value\n      };\n      // Si el evento es diagnóstico de preñez y se ingresa la fecha probable de parto, usar esa\n      if (name === 'expectedCalvingDate' && newData.eventType === 'diagnostico_prenez' && newData.diagnosisResult === 'preñada') {\n        // No recalcular, usar el valor ingresado por el usuario\n      } else if (name === 'eventDate' && (newData.eventType === 'inseminacion' || newData.eventType === 'monta_natural')) {\n        // Estimar fecha de parto para inseminación o monta natural\n        newData.expectedCalvingDate = calculateEstimatedCalvingDate(value);\n      }\n      return newData;\n    });\n  };\n\n  // Manejador para el envío del formulario\n  const handleSubmit = async () => {\n    const {\n      animalId,\n      eventType,\n      eventDate,\n      diagnosisResult,\n      expectedCalvingDate,\n      calfId,\n      calfSex,\n      calfWeight,\n      calfObservations\n    } = reproductiveData;\n    if (!animalId || !eventType || !eventDate) {\n      alert('Por favor, completa los campos obligatorios.');\n      return;\n    }\n    const newRecord = {\n      id: `REP-${Date.now().toString().slice(-5)}`,\n      animalId,\n      eventType,\n      eventDate,\n      details: reproductiveData.details,\n      semenId: reproductiveData.semenId,\n      semenProvider: reproductiveData.semenProvider,\n      machoId: reproductiveData.machoId,\n      diagnosisResult: reproductiveData.diagnosisResult,\n      expectedCalvingDate: reproductiveData.expectedCalvingDate,\n      calfId: reproductiveData.calfId,\n      calfSex: reproductiveData.calfSex,\n      calfWeight: reproductiveData.calfWeight,\n      calfObservations: reproductiveData.calfObservations\n    };\n    onRegisterReproductiveEvent(newRecord);\n    alert(`Evento reproductivo de ${eventType} registrado para ${animalId}.`);\n\n    // Lógica específica para cada tipo de evento\n    if (eventType === 'diagnostico_prenez' && diagnosisResult === 'preñada') {\n      // Actualizar estado reproductivo del animal a 'preñada'\n      // Calcular días restantes para determinar si entra en seca\n      const today = new Date();\n      const calvingDate = new Date(expectedCalvingDate);\n      const daysRemaining = Math.ceil((calvingDate - today) / (1000 * 60 * 60 * 24));\n      let newReproductiveState = 'preñada';\n      if (daysRemaining <= 100) {\n        // Si quedan 100 días o menos, entra en seca\n        newReproductiveState = 'seca';\n      }\n      onUpdateAnimalProduction(animalId, {\n        estadoReproductivo: newReproductiveState,\n        fechaUltimaGestacion: eventDate\n      });\n\n      // Añadir al calendario de partos\n      // Asegurarse de que no se dupliquen entradas para el mismo animal si ya está preñada\n      setCalvingSchedule(prev => {\n        const existingIndex = prev.findIndex(item => item.animalId === animalId);\n        if (existingIndex > -1) {\n          // Si ya existe, actualizar la entrada\n          const updatedSchedule = [...prev];\n          updatedSchedule[existingIndex] = {\n            animalId,\n            diagnosisDate: eventDate,\n            expectedCalvingDate,\n            id: newRecord.id\n          };\n          return updatedSchedule;\n        } else {\n          // Si no existe, añadir nueva entrada\n          return [...prev, {\n            animalId,\n            diagnosisDate: eventDate,\n            expectedCalvingDate,\n            id: newRecord.id\n          }];\n        }\n      });\n      alert(`Animal ${animalId} marcado como ${newReproductiveState}. Fecha probable de parto: ${expectedCalvingDate}`);\n    } else if (eventType === 'parto') {\n      // Actualizar estado reproductivo del animal a 'en_produccion'\n      onUpdateAnimalProduction(animalId, {\n        estadoReproductivo: 'en_produccion',\n        fechaUltimaGestacion: eventDate\n      });\n      // Eliminar del calendario de partos\n      setCalvingSchedule(prev => prev.filter(item => item.animalId !== animalId));\n      alert(`Parto registrado para ${animalId}. Animal ahora en producción.`);\n\n      // Registrar ternero si se proporciona ID\n      if (calfId && calfSex && calfWeight) {\n        var _animals$find, _animals$find2;\n        const newCalf = {\n          id: calfId,\n          name: `Ternero de ${animalId}`,\n          raza: ((_animals$find = animals.find(a => a.id === animalId)) === null || _animals$find === void 0 ? void 0 : _animals$find.raza) || 'Desconocida',\n          peso: calfWeight,\n          sexo: calfSex,\n          fechaNacimiento: eventDate,\n          fechaCompra: eventDate,\n          // Se considera fecha de \"compra\" como nacimiento\n          tipoProduccion: 'carne',\n          // Por defecto para terneros\n          dailyMilk: 0,\n          idpadre: ((_animals$find2 = animals.find(a => a.id === animalId)) === null || _animals$find2 === void 0 ? void 0 : _animals$find2.idpadre) || '',\n          // Asumiendo que la madre es la que parió\n          idmadre: animalId,\n          estadoReproductivo: 'desarrollo'\n        };\n        onRegisterAnimal(newCalf);\n        alert(`Ternero ${calfId} registrado.`);\n      }\n    } else if (eventType === 'inseminacion') {\n      onUpdateAnimalProduction(animalId, {\n        estadoReproductivo: 'inseminada',\n        fechaUltimaInseminacion: eventDate\n      });\n    } else if (eventType === 'monta_natural') {\n      // Al registrar monta natural, la vaca pasa a estado 'celo' por 48 horas, luego a 'desarrollo'\n      onUpdateAnimalProduction(animalId, {\n        estadoReproductivo: 'en_celo',\n        fechaUltimaMonta: eventDate\n      });\n      setNaturalMatingHistory(prev => [...prev, {\n        id: newRecord.id,\n        animalId: newRecord.animalId,\n        machoId: newRecord.machoId,\n        eventDate: newRecord.eventDate,\n        details: newRecord.details\n      }]);\n\n      // Programar el cambio de estado a 'desarrollo' después de 48 horas\n      setTimeout(() => {\n        onUpdateAnimalProduction(animalId, {\n          estadoReproductivo: 'desarrollo'\n        });\n        alert(`Animal ${getAnimalName(animalId)} (${animalId}) ha cambiado de estado 'en_celo' a 'desarrollo' después de 48 horas.`);\n      }, 48 * 60 * 60 * 1000); // 48 horas en milisegundos\n    } else if (eventType === 'celo') {\n      onUpdateAnimalProduction(animalId, {\n        estadoReproductivo: 'en_celo',\n        fechaUltimoCelo: eventDate\n      });\n    }\n\n    // Limpiar formulario\n    setReproductiveData({\n      animalId: '',\n      eventType: '',\n      eventDate: '',\n      details: '',\n      semenId: '',\n      semenProvider: '',\n      machoId: '',\n      calfId: '',\n      calfSex: '',\n      calfWeight: '',\n      calfObservations: '',\n      diagnosisResult: '',\n      expectedCalvingDate: ''\n    });\n  };\n\n  // Manejador para abrir el modal de registro de ternero\n  const handleMarkCalving = animalId => {\n    setCurrentCalvingAnimal(animalId);\n    setShowCalfModal(true);\n    // Limpiar datos del ternero para el nuevo registro\n    setCalfData({\n      calfId: '',\n      calfSex: '',\n      calfWeight: '',\n      calfObservations: ''\n    });\n  };\n\n  // Manejador para el cambio de datos del ternero en el modal\n  const handleCalfDataChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setCalfData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  // Manejador para el envío del formulario del ternero\n  const handleCalfSubmit = () => {\n    var _animals$find3, _animals$find4;\n    const {\n      calfId,\n      calfSex,\n      calfWeight,\n      calfObservations\n    } = calfData;\n    const animalId = currentCalvingAnimal;\n    const eventDate = new Date().toISOString().split('T')[0]; // Fecha actual del parto\n\n    if (!animalId || !calfId || !calfSex || !calfWeight) {\n      alert('Por favor, completa todos los campos del ternero.');\n      return;\n    }\n\n    // Registrar el evento de parto en el historial reproductivo\n    const newPartoRecord = {\n      id: `REP-${Date.now().toString().slice(-5)}`,\n      animalId,\n      eventType: 'parto',\n      eventDate,\n      details: `Parto registrado. Ternero ID: ${calfId}, Sexo: ${calfSex}, Peso: ${calfWeight} kg.`,\n      calfId,\n      calfSex,\n      calfWeight,\n      calfObservations\n    };\n    onRegisterReproductiveEvent(newPartoRecord);\n\n    // Actualizar estado reproductivo del animal a 'en_produccion'\n    onUpdateAnimalProduction(animalId, {\n      estadoReproductivo: 'en_produccion',\n      fechaUltimaGestacion: eventDate\n    });\n    // Eliminar del calendario de partos\n    setCalvingSchedule(prev => prev.filter(item => item.animalId !== animalId));\n    alert(`Parto registrado para ${animalId}. Animal ahora en producción.`);\n\n    // Registrar ternero\n    const newCalf = {\n      id: calfId,\n      name: `Ternero de ${getAnimalName(animalId)}`,\n      raza: ((_animals$find3 = animals.find(a => a.id === animalId)) === null || _animals$find3 === void 0 ? void 0 : _animals$find3.raza) || 'Desconocida',\n      peso: calfWeight,\n      sexo: calfSex,\n      fechaNacimiento: eventDate,\n      fechaCompra: eventDate,\n      // Se considera fecha de \"compra\" como nacimiento\n      tipoProduccion: 'carne',\n      // Por defecto para terneros\n      dailyMilk: 0,\n      idpadre: ((_animals$find4 = animals.find(a => a.id === animalId)) === null || _animals$find4 === void 0 ? void 0 : _animals$find4.idpadre) || '',\n      // Asumiendo que la madre es la que parió\n      idmadre: animalId,\n      estadoReproductivo: 'desarrollo'\n    };\n    onRegisterAnimal(newCalf);\n    alert(`Ternero ${calfId} registrado.`);\n    setShowCalfModal(false);\n    setCurrentCalvingAnimal(null);\n  };\n\n  // Filtrar registros reproductivos\n  const filteredRecords = reproductiveRecords.filter(record => {\n    const matchesAnimal = filterAnimalId === '' || record.animalId === filterAnimalId;\n    const matchesEventType = filterEventType === '' || record.eventType === filterEventType;\n    return matchesAnimal && matchesEventType;\n  });\n\n  // Funciones auxiliares para obtener nombres\n  const getAnimalName = animalId => {\n    const animal = animals.find(a => a.id === animalId);\n    return animal ? animal.name : 'Desconocido';\n  };\n\n  // Función para generar PDF del calendario de partos\n  const handleGenerateCalvingSchedulePDF = useCallback(() => {\n    if (calvingSchedule.length === 0) {\n      alert('No hay partos programados para generar el PDF.');\n      return;\n    }\n    const farmName = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.farmName) || 'Mi Finca Ganadera';\n    const adminName = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.fullName) || 'Administrador';\n    const defaultLogo = 'https://via.placeholder.com/60x60?text=LOGO';\n    const tempDiv = document.createElement('div');\n    tempDiv.style.width = '210mm';\n    tempDiv.style.padding = '15mm';\n    tempDiv.style.fontFamily = 'Arial, sans-serif';\n    tempDiv.style.fontSize = '10pt';\n    tempDiv.style.backgroundColor = '#f8f8f8';\n    tempDiv.style.position = 'absolute';\n    tempDiv.style.left = '-9999px';\n    tempDiv.style.top = '-9999px';\n    let tableRows = calvingSchedule.map(item => {\n      const daysRemaining = Math.ceil((new Date(item.expectedCalvingDate) - new Date()) / (1000 * 60 * 60 * 24));\n      const isOverdue = daysRemaining < 0;\n      const daysText = isOverdue ? `VENCIDO (${Math.abs(daysRemaining)} días)` : `${daysRemaining} días`;\n      const daysColor = isOverdue ? 'red' : 'black'; // Color para los días restantes\n\n      return `\n        <tr style=\"border-bottom: 1px solid #eee;\">\n          <td style=\"padding: 8px 12px;\">${getAnimalName(item.animalId)} (${item.animalId})</td>\n          <td style=\"padding: 8px 12px;\">${item.diagnosisDate}</td>\n          <td style=\"padding: 8px 12px;\">${item.expectedCalvingDate}</td>\n          <td style=\"padding: 8px 12px;\"><span style=\"font-weight: bold; color: ${daysColor};\">${daysText}</span></td>\n        </tr>\n      `;\n    }).join('');\n    tempDiv.innerHTML = `\n      <div style=\"border: 1px solid #ddd; border-radius: 12px; overflow: hidden; background-color: #fff; box-shadow: 0 4px 8px rgba(0,0,0,0.1);\">\n        <div style=\"background-color: #2c3e50; color: #fff; padding: 20px; display: flex; justify-content: space-between; align-items: center; border-top-left-radius: 10px; border-top-right-radius: 10px;\">\n          <img src=\"${logoUrl || defaultLogo}\" style=\"width: 60px; height: 60px; border-radius: 50%; object-fit: cover;\" alt=\"Logo Finca\">\n          <div style=\"text-align: right;\">\n            <h1 style=\"margin: 0; font-size: 20pt; font-weight: bold;\">${farmName}</h1>\n            <p style=\"margin: 0; font-size: 10pt; opacity: 0.8;\">Calendario de Partos</p>\n          </div>\n        </div>\n\n        <div style=\"padding: 25px;\">\n          <h3 style=\"font-size: 16pt; margin-bottom: 20px; text-align: center; color: #333;\">Próximos Partos Programados</h3>\n          <table style=\"width: 100%; border-collapse: collapse; margin-bottom: 30px;\">\n            <thead style=\"background-color: #f0f0f0;\">\n              <tr>\n                <th style=\"padding: 10px 12px; text-align: left; border: 1px solid #eee;\">Animal</th>\n                <th style=\"padding: 10px 12px; text-align: left; border: 1px solid #eee;\">Fecha Diagnóstico Preñez</th>\n                <th style=\"padding: 10px 12px; text-align: left; border: 1px solid #eee;\">Fecha Probable de Parto</th>\n                <th style=\"padding: 10px 12px; text-align: left; border: 1px solid #eee;\">Días Restantes</th>\n              </tr>\n            </thead>\n            <tbody>\n              ${tableRows}\n            </tbody>\n          </table>\n        </div>\n\n        <div style=\"text-align: right; font-size: 8pt; padding: 10px 20px; color: #aaa; background-color: #f8f8f8; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;\">\n          <p style=\"margin: 0;\">Generado por Campo Inteligente | Administrador: ${adminName}</p>\n          <p style=\"margin: 0;\">Fecha de Generación: ${new Date().toLocaleDateString()}</p>\n        </div>\n      </div>\n    `;\n    document.body.appendChild(tempDiv);\n    html2canvas(tempDiv, {\n      scale: 2,\n      useCORS: true\n    }).then(canvas => {\n      const imgData = canvas.toDataURL('image/png');\n      const pdf = new jsPDF('p', 'mm', 'a4');\n      const imgWidth = 210;\n      const pageHeight = 297;\n      const imgHeight = canvas.height * imgWidth / canvas.width;\n      let heightLeft = imgHeight;\n      let position = 0;\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pageHeight;\n      while (heightLeft > 0) {\n        position = heightLeft - pageHeight;\n        pdf.addPage();\n        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n        heightLeft -= pageHeight;\n      }\n      pdf.save(`calendario_partos_${new Date().toISOString().split('T')[0]}.pdf`);\n      document.body.removeChild(tempDiv);\n    });\n  }, [calvingSchedule, currentUser, logoUrl, animals]); // Dependencias para useCallback\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white p-6 rounded-lg shadow-md\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-xl font-semibold mb-4\",\n      children: \"Control Reproductivo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 400,\n      columnNumber: 7\n    }, this), upcomingCalvingNotifications.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-8 p-4 border rounded-lg bg-yellow-100 border-yellow-400 text-yellow-800\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-lg font-semibold mb-3\",\n        children: \"Notificaciones de Partos Pr\\xF3ximos\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 11\n      }, this), upcomingCalvingNotifications.map(notification => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `p-3 mb-2 rounded-lg ${notification.type === 'warning' ? 'bg-yellow-200' : 'bg-red-200'} text-sm`,\n        children: notification.message\n      }, notification.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-8 p-4 border rounded-lg bg-gray-50\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-lg font-semibold mb-3\",\n        children: \"Registrar Evento Reproductivo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"animalId\",\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          value: reproductiveData.animalId,\n          onChange: handleInputChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Selecciona Animal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 424,\n            columnNumber: 13\n          }, this), animals.map(animal => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: animal.id,\n            children: [animal.name, \" (\", animal.id, \")\"]\n          }, animal.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"eventType\",\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          value: reproductiveData.eventType,\n          onChange: handleInputChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Selecciona Tipo de Evento\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 435,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"diagnostico_prenez\",\n            children: \"Diagn\\xF3stico de Pre\\xF1ez\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 436,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"parto\",\n            children: \"Parto\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"inseminacion\",\n            children: \"Inseminaci\\xF3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 438,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"celo\",\n            children: \"Celo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"monta_natural\",\n            children: \"Monta Natural\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 440,\n            columnNumber: 13\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          name: \"eventDate\",\n          placeholder: \"Fecha del Evento\",\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          value: reproductiveData.eventDate,\n          onChange: handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 11\n        }, this), reproductiveData.eventType === 'diagnostico_prenez' && /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"diagnosisResult\",\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          value: reproductiveData.diagnosisResult,\n          onChange: handleInputChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Resultado del Diagn\\xF3stico\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"pre\\xF1ada\",\n            children: \"Pre\\xF1ada\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"vacia\",\n            children: \"Vac\\xEDa\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 451,\n          columnNumber: 13\n        }, this), reproductiveData.eventType === 'diagnostico_prenez' && reproductiveData.diagnosisResult === 'preñada' && /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          name: \"expectedCalvingDate\",\n          placeholder: \"Fecha Probable de Parto (Confirmada)\",\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          value: reproductiveData.expectedCalvingDate,\n          onChange: handleInputChange,\n          required: true // Hacerlo requerido si se confirma preñez\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 13\n        }, this), reproductiveData.eventType === 'monta_natural' && /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"machoId\",\n          placeholder: \"ID del Macho (Monta Natural)\",\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n          value: reproductiveData.machoId,\n          onChange: handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 13\n        }, this), reproductiveData.eventType === 'inseminacion' && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"semenId\",\n            placeholder: \"ID de Semen\",\n            className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n            value: reproductiveData.semenId,\n            onChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 487,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"semenProvider\",\n            placeholder: \"Proveedor de Semen\",\n            className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n            value: reproductiveData.semenProvider,\n            onChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 495,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), reproductiveData.eventType === 'parto' && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"calfId\",\n            placeholder: \"ID del Ternero (si aplica)\",\n            className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n            value: reproductiveData.calfId,\n            onChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 507,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"calfSex\",\n            className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n            value: reproductiveData.calfSex,\n            onChange: handleInputChange,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Sexo del Ternero\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 521,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"macho\",\n              children: \"Macho\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 522,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"hembra\",\n              children: \"Hembra\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 523,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 515,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            name: \"calfWeight\",\n            placeholder: \"Peso del Ternero (kg)\",\n            className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n            value: reproductiveData.calfWeight,\n            onChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 525,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"calfObservations\",\n            placeholder: \"Observaciones del Ternero\",\n            rows: \"2\",\n            className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black resize-none\",\n            value: reproductiveData.calfObservations,\n            onChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 533,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"details\",\n          placeholder: \"Detalles adicionales del evento\",\n          rows: \"2\",\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black resize-none col-span-full\",\n          value: reproductiveData.details,\n          onChange: handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 543,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 417,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSubmit,\n        className: \"mt-4 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors\",\n        children: \"Registrar Evento\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 552,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-8 p-4 border rounded-lg bg-gray-50\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-lg font-semibold mb-3\",\n        children: \"Historial de Eventos Reproductivos\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 562,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Filtrar por ID Animal\",\n          className: \"w-full px-4 py-2 border rounded-lg\",\n          value: filterAnimalId,\n          onChange: e => setFilterAnimalId(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"w-full px-4 py-2 border rounded-lg\",\n          value: filterEventType,\n          onChange: e => setFilterEventType(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Todos los Eventos\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 576,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"diagnostico_prenez\",\n            children: \"Diagn\\xF3stico de Pre\\xF1ez\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 577,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"parto\",\n            children: \"Parto\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 578,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"inseminacion\",\n            children: \"Inseminaci\\xF3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 579,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"celo\",\n            children: \"Celo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 580,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"monta_natural\",\n            children: \"Monta Natural\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 581,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 571,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 563,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overflow-x-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"min-w-full bg-white border\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"bg-gray-100\",\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"ID Animal\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 588,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"Tipo de Evento\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 589,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"Fecha\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 590,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"Detalles\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 591,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"Acciones\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 592,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 587,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 586,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: filteredRecords.map(record => /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"hover:bg-gray-50\",\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-2 px-4 border\",\n                children: [getAnimalName(record.animalId), \" (\", record.animalId, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 598,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-2 px-4 border\",\n                children: record.eventType ? record.eventType.replace(/_/g, ' ') : 'N/A'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 599,\n                columnNumber: 19\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-2 px-4 border\",\n                children: record.eventDate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 600,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-2 px-4 border\",\n                children: record.details || record.diagnosisResult || record.calfId || record.semenId || record.machoId || 'N/A'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 601,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-2 px-4 border\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setReproductiveRecords(reproductiveRecords.filter(r => r.id !== record.id)),\n                  className: \"text-red-600 hover:underline\",\n                  children: \"Eliminar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 603,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 602,\n                columnNumber: 19\n              }, this)]\n            }, record.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 597,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 595,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 585,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 584,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 561,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-8 p-4 border rounded-lg bg-gray-50\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-lg font-semibold mb-3\",\n        children: \"Historial de Montas Naturales\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 619,\n        columnNumber: 9\n      }, this), naturalMatingHistory.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-500 text-center\",\n        children: \"No hay montas naturales registradas a\\xFAn.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 621,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overflow-x-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"min-w-full bg-white border\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"bg-gray-100\",\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"ID Hembra\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 627,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"ID Macho\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 628,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"Fecha de Monta\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 629,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"Detalles\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 630,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"Acciones\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 631,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 626,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 625,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: naturalMatingHistory.map(record => /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"hover:bg-gray-50\",\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-2 px-4 border\",\n                children: [getAnimalName(record.animalId), \" (\", record.animalId, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 637,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-2 px-4 border\",\n                children: [getAnimalName(record.machoId), \" (\", record.machoId, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 638,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-2 px-4 border\",\n                children: record.eventDate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 639,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-2 px-4 border\",\n                children: record.details || 'N/A'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 640,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-2 px-4 border\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setNaturalMatingHistory(naturalMatingHistory.filter(r => r.id !== record.id)),\n                  className: \"text-red-600 hover:underline\",\n                  children: \"Eliminar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 642,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 641,\n                columnNumber: 21\n              }, this)]\n            }, record.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 636,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 634,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 624,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 623,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 618,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-8 p-4 border rounded-lg bg-blue-50\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-lg font-semibold mb-3\",\n        children: \"Calendario de Partos\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 659,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleGenerateCalvingSchedulePDF,\n        className: \"mb-4 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors\",\n        children: \"Descargar Calendario PDF\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 660,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overflow-x-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"min-w-full bg-white border\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"bg-gray-100\",\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"Animal\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 670,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"Fecha Diagn\\xF3stico Pre\\xF1ez\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 671,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"Fecha Probable de Parto\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 672,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"D\\xEDas Restantes\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 673,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"Acciones\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 674,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 669,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 668,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: calvingSchedule.map(item => {\n              const daysRemaining = Math.ceil((new Date(item.expectedCalvingDate) - new Date()) / (1000 * 60 * 60 * 24));\n              const isOverdue = daysRemaining < 0;\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: `hover:bg-gray-50 ${isOverdue ? 'bg-red-100' : ''}`,\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"py-2 px-4 border\",\n                  children: [getAnimalName(item.animalId), \" (\", item.animalId, \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 683,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"py-2 px-4 border\",\n                  children: item.diagnosisDate\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 684,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"py-2 px-4 border\",\n                  children: item.expectedCalvingDate\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 685,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"py-2 px-4 border\",\n                  children: isOverdue ? /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-bold text-red-600\",\n                    children: [\"VENCIDO (\", Math.abs(daysRemaining), \" d\\xEDas)\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 687,\n                    columnNumber: 36\n                  }, this) : `${daysRemaining} días`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 686,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"py-2 px-4 border\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => handleMarkCalving(item.animalId),\n                    className: \"text-orange-600 hover:underline\",\n                    children: \"Marcar Parto\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 690,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 689,\n                  columnNumber: 21\n                }, this)]\n              }, item.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 682,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 677,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 667,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 666,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 658,\n      columnNumber: 7\n    }, this), showCalfModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-6 rounded-lg shadow-xl w-full max-w-md\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-lg font-semibold mb-4\",\n          children: [\"Registrar Ternero para \", getAnimalName(currentCalvingAnimal)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 709,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"calfId\",\n            placeholder: \"ID del Ternero\",\n            className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n            value: calfData.calfId,\n            onChange: handleCalfDataChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 711,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"calfSex\",\n            className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n            value: calfData.calfSex,\n            onChange: handleCalfDataChange,\n            required: true,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Sexo del Ternero\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 727,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"macho\",\n              children: \"Macho\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 728,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"hembra\",\n              children: \"Hembra\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 729,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 720,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            name: \"calfWeight\",\n            placeholder: \"Peso del Ternero (kg)\",\n            className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n            value: calfData.calfWeight,\n            onChange: handleCalfDataChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 731,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"calfObservations\",\n            placeholder: \"Observaciones del Ternero\",\n            rows: \"2\",\n            className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black resize-none\",\n            value: calfData.calfObservations,\n            onChange: handleCalfDataChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 740,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 710,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-6 flex justify-end space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowCalfModal(false),\n            className: \"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors\",\n            children: \"Cancelar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 750,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleCalfSubmit,\n            className: \"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors\",\n            children: \"Registrar Ternero\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 756,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 749,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 708,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 707,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 399,\n    columnNumber: 5\n  }, this);\n};\n_s(ReproductiveControlPage, \"/DhemV4UQsyz7flieKF2SJI33yY=\");\n_c = ReproductiveControlPage;\nexport default ReproductiveControlPage;\nvar _c;\n$RefreshReg$(_c, \"ReproductiveControlPage\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","jsPDF","html2canvas","jsxDEV","_jsxDEV","Fragment","_Fragment","ReproductiveControlPage","animals","onUpdateAnimalProduction","onRegisterAnimal","onRegisterReproductiveEvent","onDeletePregnantCow","reproductiveRecords","setReproductiveRecords","currentUser","logoUrl","calvingSchedule","setCalvingSchedule","naturalMatingHistory","setNaturalMatingHistory","_s","reproductiveData","setReproductiveData","animalId","eventType","eventDate","details","semenId","semenProvider","machoId","calfId","calfSex","calfWeight","calfObservations","diagnosisResult","expectedCalvingDate","filterAnimalId","setFilterAnimalId","filterEventType","setFilterEventType","upcomingCalvingNotifications","setUpcomingCalvingNotifications","showCalfModal","setShowCalfModal","currentCalvingAnimal","setCurrentCalvingAnimal","calfData","setCalfData","today","Date","notifications","forEach","item","calvingDate","daysRemaining","Math","ceil","push","id","message","getAnimalName","type","abs","calculateEstimatedCalvingDate","date","setDate","getDate","toISOString","split","handleInputChange","e","name","value","target","prev","newData","handleSubmit","alert","newRecord","now","toString","slice","newReproductiveState","estadoReproductivo","fechaUltimaGestacion","existingIndex","findIndex","updatedSchedule","diagnosisDate","filter","_animals$find","_animals$find2","newCalf","raza","find","a","peso","sexo","fechaNacimiento","fechaCompra","tipoProduccion","dailyMilk","idpadre","idmadre","fechaUltimaInseminacion","fechaUltimaMonta","setTimeout","fechaUltimoCelo","handleMarkCalving","handleCalfDataChange","handleCalfSubmit","_animals$find3","_animals$find4","newPartoRecord","filteredRecords","record","matchesAnimal","matchesEventType","animal","handleGenerateCalvingSchedulePDF","length","farmName","adminName","fullName","defaultLogo","tempDiv","document","createElement","style","width","padding","fontFamily","fontSize","backgroundColor","position","left","top","tableRows","map","isOverdue","daysText","daysColor","join","innerHTML","toLocaleDateString","body","appendChild","scale","useCORS","then","canvas","imgData","toDataURL","pdf","imgWidth","pageHeight","imgHeight","height","heightLeft","addImage","addPage","save","removeChild","className","children","fileName","_jsxFileName","lineNumber","columnNumber","notification","onChange","placeholder","required","rows","onClick","replace","r","_c","$RefreshReg$"],"sources":["C:/Users/User/Downloads/project (10)/src/components/ReproductiveControlPage.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\n\nconst ReproductiveControlPage = ({ animals, onUpdateAnimalProduction, onRegisterAnimal, onRegisterReproductiveEvent, onDeletePregnantCow, reproductiveRecords, setReproductiveRecords, currentUser, logoUrl, calvingSchedule, setCalvingSchedule, naturalMatingHistory, setNaturalMatingHistory }) => {\n  const [reproductiveData, setReproductiveData] = useState({\n    animalId: '',\n    eventType: '', // 'diagnostico_prenez', 'parto', 'inseminacion', 'celo', 'monta_natural'\n    eventDate: '',\n    details: '',\n    semenId: '', // Para inseminacion\n    semenProvider: '', // Para inseminacion\n    machoId: '', // Para monta_natural\n    calfId: '', // Para parto\n    calfSex: '', // Para parto\n    calfWeight: '', // Para parto\n    calfObservations: '', // Para parto\n    diagnosisResult: '', // 'preñada', 'vacia'\n    expectedCalvingDate: '', // Para diagnostico_prenez (fecha confirmada por veterinario)\n  });\n\n  const [filterAnimalId, setFilterAnimalId] = useState('');\n  const [filterEventType, setFilterEventType] = useState('');\n\n  // Estado para las notificaciones de partos próximos\n  const [upcomingCalvingNotifications, setUpcomingCalvingNotifications] = useState([]);\n\n  // Estado para el modal de registro de ternero\n  const [showCalfModal, setShowCalfModal] = useState(false);\n  const [currentCalvingAnimal, setCurrentCalvingAnimal] = useState(null);\n  const [calfData, setCalfData] = useState({\n    calfId: '',\n    calfSex: '',\n    calfWeight: '',\n    calfObservations: '',\n  });\n\n  // Efecto para generar notificaciones de partos próximos\n  useEffect(() => {\n    const today = new Date();\n    const notifications = [];\n    calvingSchedule.forEach(item => {\n      const calvingDate = new Date(item.expectedCalvingDate);\n      const daysRemaining = Math.ceil((calvingDate - today) / (1000 * 60 * 60 * 24));\n\n      // Notificar si faltan 30 días o menos, o si ya está vencido\n      if (daysRemaining <= 30 && daysRemaining >= 0) {\n        notifications.push({\n          id: item.id,\n          animalId: item.animalId,\n          message: `¡Atención! El parto de ${getAnimalName(item.animalId)} (${item.animalId}) está programado para el ${item.expectedCalvingDate}. Faltan ${daysRemaining} días.`,\n          type: 'warning',\n        });\n      } else if (daysRemaining < 0) {\n        notifications.push({\n          id: item.id,\n          animalId: item.animalId,\n          message: `¡Alerta! El parto de ${getAnimalName(item.animalId)} (${item.animalId}) estaba programado para el ${item.expectedCalvingDate} y está VENCIDO por ${Math.abs(daysRemaining)} días.`,\n          type: 'danger',\n        });\n      }\n    });\n    setUpcomingCalvingNotifications(notifications);\n  }, [calvingSchedule, animals]); // Dependencia de animals para getAnimalName\n\n  // Función para calcular la fecha probable de parto (283 días después de la inseminación/diagnóstico)\n  // Esta función ahora es más una guía, la fecha final la da el veterinario en el diagnóstico\n  const calculateEstimatedCalvingDate = (eventDate) => {\n    if (!eventDate) return '';\n    const date = new Date(eventDate);\n    date.setDate(date.getDate() + 283); // Gestación promedio de bovinos\n    return date.toISOString().split('T')[0];\n  };\n\n  // Manejador de cambios en el formulario\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setReproductiveData(prev => {\n      const newData = { ...prev, [name]: value };\n      // Si el evento es diagnóstico de preñez y se ingresa la fecha probable de parto, usar esa\n      if (name === 'expectedCalvingDate' && newData.eventType === 'diagnostico_prenez' && newData.diagnosisResult === 'preñada') {\n        // No recalcular, usar el valor ingresado por el usuario\n      } else if (name === 'eventDate' && (newData.eventType === 'inseminacion' || newData.eventType === 'monta_natural')) {\n        // Estimar fecha de parto para inseminación o monta natural\n        newData.expectedCalvingDate = calculateEstimatedCalvingDate(value);\n      }\n      return newData;\n    });\n  };\n\n  // Manejador para el envío del formulario\n  const handleSubmit = async () => {\n    const { animalId, eventType, eventDate, diagnosisResult, expectedCalvingDate, calfId, calfSex, calfWeight, calfObservations } = reproductiveData;\n\n    if (!animalId || !eventType || !eventDate) {\n      alert('Por favor, completa los campos obligatorios.');\n      return;\n    }\n\n    const newRecord = {\n      id: `REP-${Date.now().toString().slice(-5)}`,\n      animalId,\n      eventType,\n      eventDate,\n      details: reproductiveData.details,\n      semenId: reproductiveData.semenId,\n      semenProvider: reproductiveData.semenProvider,\n      machoId: reproductiveData.machoId,\n      diagnosisResult: reproductiveData.diagnosisResult,\n      expectedCalvingDate: reproductiveData.expectedCalvingDate,\n      calfId: reproductiveData.calfId,\n      calfSex: reproductiveData.calfSex,\n      calfWeight: reproductiveData.calfWeight,\n      calfObservations: reproductiveData.calfObservations,\n    };\n\n    onRegisterReproductiveEvent(newRecord);\n    alert(`Evento reproductivo de ${eventType} registrado para ${animalId}.`);\n\n    // Lógica específica para cada tipo de evento\n    if (eventType === 'diagnostico_prenez' && diagnosisResult === 'preñada') {\n      // Actualizar estado reproductivo del animal a 'preñada'\n      // Calcular días restantes para determinar si entra en seca\n      const today = new Date();\n      const calvingDate = new Date(expectedCalvingDate);\n      const daysRemaining = Math.ceil((calvingDate - today) / (1000 * 60 * 60 * 24));\n\n      let newReproductiveState = 'preñada';\n      if (daysRemaining <= 100) { // Si quedan 100 días o menos, entra en seca\n        newReproductiveState = 'seca';\n      }\n      \n      onUpdateAnimalProduction(animalId, { estadoReproductivo: newReproductiveState, fechaUltimaGestacion: eventDate });\n      \n      // Añadir al calendario de partos\n      // Asegurarse de que no se dupliquen entradas para el mismo animal si ya está preñada\n      setCalvingSchedule(prev => {\n        const existingIndex = prev.findIndex(item => item.animalId === animalId);\n        if (existingIndex > -1) {\n          // Si ya existe, actualizar la entrada\n          const updatedSchedule = [...prev];\n          updatedSchedule[existingIndex] = {\n            animalId,\n            diagnosisDate: eventDate,\n            expectedCalvingDate,\n            id: newRecord.id,\n          };\n          return updatedSchedule;\n        } else {\n          // Si no existe, añadir nueva entrada\n          return [...prev, {\n            animalId,\n            diagnosisDate: eventDate,\n            expectedCalvingDate,\n            id: newRecord.id,\n          }];\n        }\n      });\n      alert(`Animal ${animalId} marcado como ${newReproductiveState}. Fecha probable de parto: ${expectedCalvingDate}`);\n    } else if (eventType === 'parto') {\n      // Actualizar estado reproductivo del animal a 'en_produccion'\n      onUpdateAnimalProduction(animalId, { estadoReproductivo: 'en_produccion', fechaUltimaGestacion: eventDate });\n      // Eliminar del calendario de partos\n      setCalvingSchedule(prev => prev.filter(item => item.animalId !== animalId));\n      alert(`Parto registrado para ${animalId}. Animal ahora en producción.`);\n\n      // Registrar ternero si se proporciona ID\n      if (calfId && calfSex && calfWeight) {\n        const newCalf = {\n          id: calfId,\n          name: `Ternero de ${animalId}`,\n          raza: animals.find(a => a.id === animalId)?.raza || 'Desconocida',\n          peso: calfWeight,\n          sexo: calfSex,\n          fechaNacimiento: eventDate,\n          fechaCompra: eventDate, // Se considera fecha de \"compra\" como nacimiento\n          tipoProduccion: 'carne', // Por defecto para terneros\n          dailyMilk: 0,\n          idpadre: animals.find(a => a.id === animalId)?.idpadre || '', // Asumiendo que la madre es la que parió\n          idmadre: animalId,\n          estadoReproductivo: 'desarrollo',\n        };\n        onRegisterAnimal(newCalf);\n        alert(`Ternero ${calfId} registrado.`);\n      }\n    } else if (eventType === 'inseminacion') {\n      onUpdateAnimalProduction(animalId, { estadoReproductivo: 'inseminada', fechaUltimaInseminacion: eventDate });\n    } else if (eventType === 'monta_natural') {\n      // Al registrar monta natural, la vaca pasa a estado 'celo' por 48 horas, luego a 'desarrollo'\n      onUpdateAnimalProduction(animalId, { estadoReproductivo: 'en_celo', fechaUltimaMonta: eventDate });\n      setNaturalMatingHistory(prev => [...prev, {\n        id: newRecord.id,\n        animalId: newRecord.animalId,\n        machoId: newRecord.machoId,\n        eventDate: newRecord.eventDate,\n        details: newRecord.details,\n      }]);\n\n      // Programar el cambio de estado a 'desarrollo' después de 48 horas\n      setTimeout(() => {\n        onUpdateAnimalProduction(animalId, { estadoReproductivo: 'desarrollo' });\n        alert(`Animal ${getAnimalName(animalId)} (${animalId}) ha cambiado de estado 'en_celo' a 'desarrollo' después de 48 horas.`);\n      }, 48 * 60 * 60 * 1000); // 48 horas en milisegundos\n\n    } else if (eventType === 'celo') {\n      onUpdateAnimalProduction(animalId, { estadoReproductivo: 'en_celo', fechaUltimoCelo: eventDate });\n    }\n\n    // Limpiar formulario\n    setReproductiveData({\n      animalId: '', eventType: '', eventDate: '', details: '', semenId: '', semenProvider: '', machoId: '',\n      calfId: '', calfSex: '', calfWeight: '', calfObservations: '', diagnosisResult: '', expectedCalvingDate: '',\n    });\n  };\n\n  // Manejador para abrir el modal de registro de ternero\n  const handleMarkCalving = (animalId) => {\n    setCurrentCalvingAnimal(animalId);\n    setShowCalfModal(true);\n    // Limpiar datos del ternero para el nuevo registro\n    setCalfData({\n      calfId: '',\n      calfSex: '',\n      calfWeight: '',\n      calfObservations: '',\n    });\n  };\n\n  // Manejador para el cambio de datos del ternero en el modal\n  const handleCalfDataChange = (e) => {\n    const { name, value } = e.target;\n    setCalfData(prev => ({ ...prev, [name]: value }));\n  };\n\n  // Manejador para el envío del formulario del ternero\n  const handleCalfSubmit = () => {\n    const { calfId, calfSex, calfWeight, calfObservations } = calfData;\n    const animalId = currentCalvingAnimal;\n    const eventDate = new Date().toISOString().split('T')[0]; // Fecha actual del parto\n\n    if (!animalId || !calfId || !calfSex || !calfWeight) {\n      alert('Por favor, completa todos los campos del ternero.');\n      return;\n    }\n\n    // Registrar el evento de parto en el historial reproductivo\n    const newPartoRecord = {\n      id: `REP-${Date.now().toString().slice(-5)}`,\n      animalId,\n      eventType: 'parto',\n      eventDate,\n      details: `Parto registrado. Ternero ID: ${calfId}, Sexo: ${calfSex}, Peso: ${calfWeight} kg.`,\n      calfId,\n      calfSex,\n      calfWeight,\n      calfObservations,\n    };\n    onRegisterReproductiveEvent(newPartoRecord);\n\n    // Actualizar estado reproductivo del animal a 'en_produccion'\n    onUpdateAnimalProduction(animalId, { estadoReproductivo: 'en_produccion', fechaUltimaGestacion: eventDate });\n    // Eliminar del calendario de partos\n    setCalvingSchedule(prev => prev.filter(item => item.animalId !== animalId));\n    alert(`Parto registrado para ${animalId}. Animal ahora en producción.`);\n\n    // Registrar ternero\n    const newCalf = {\n      id: calfId,\n      name: `Ternero de ${getAnimalName(animalId)}`,\n      raza: animals.find(a => a.id === animalId)?.raza || 'Desconocida',\n      peso: calfWeight,\n      sexo: calfSex,\n      fechaNacimiento: eventDate,\n      fechaCompra: eventDate, // Se considera fecha de \"compra\" como nacimiento\n      tipoProduccion: 'carne', // Por defecto para terneros\n      dailyMilk: 0,\n      idpadre: animals.find(a => a.id === animalId)?.idpadre || '', // Asumiendo que la madre es la que parió\n      idmadre: animalId,\n      estadoReproductivo: 'desarrollo',\n    };\n    onRegisterAnimal(newCalf);\n    alert(`Ternero ${calfId} registrado.`);\n\n    setShowCalfModal(false);\n    setCurrentCalvingAnimal(null);\n  };\n\n  // Filtrar registros reproductivos\n  const filteredRecords = reproductiveRecords.filter(record => {\n    const matchesAnimal = filterAnimalId === '' || record.animalId === filterAnimalId;\n    const matchesEventType = filterEventType === '' || record.eventType === filterEventType;\n    return matchesAnimal && matchesEventType;\n  });\n\n  // Funciones auxiliares para obtener nombres\n  const getAnimalName = (animalId) => {\n    const animal = animals.find(a => a.id === animalId);\n    return animal ? animal.name : 'Desconocido';\n  };\n\n  // Función para generar PDF del calendario de partos\n  const handleGenerateCalvingSchedulePDF = useCallback(() => {\n    if (calvingSchedule.length === 0) {\n      alert('No hay partos programados para generar el PDF.');\n      return;\n    }\n\n    const farmName = currentUser?.farmName || 'Mi Finca Ganadera';\n    const adminName = currentUser?.fullName || 'Administrador';\n    const defaultLogo = 'https://via.placeholder.com/60x60?text=LOGO';\n\n    const tempDiv = document.createElement('div');\n    tempDiv.style.width = '210mm';\n    tempDiv.style.padding = '15mm';\n    tempDiv.style.fontFamily = 'Arial, sans-serif';\n    tempDiv.style.fontSize = '10pt';\n    tempDiv.style.backgroundColor = '#f8f8f8';\n    tempDiv.style.position = 'absolute';\n    tempDiv.style.left = '-9999px';\n    tempDiv.style.top = '-9999px';\n\n    let tableRows = calvingSchedule.map(item => {\n      const daysRemaining = Math.ceil((new Date(item.expectedCalvingDate) - new Date()) / (1000 * 60 * 60 * 24));\n      const isOverdue = daysRemaining < 0;\n      const daysText = isOverdue ? `VENCIDO (${Math.abs(daysRemaining)} días)` : `${daysRemaining} días`;\n      const daysColor = isOverdue ? 'red' : 'black'; // Color para los días restantes\n\n      return `\n        <tr style=\"border-bottom: 1px solid #eee;\">\n          <td style=\"padding: 8px 12px;\">${getAnimalName(item.animalId)} (${item.animalId})</td>\n          <td style=\"padding: 8px 12px;\">${item.diagnosisDate}</td>\n          <td style=\"padding: 8px 12px;\">${item.expectedCalvingDate}</td>\n          <td style=\"padding: 8px 12px;\"><span style=\"font-weight: bold; color: ${daysColor};\">${daysText}</span></td>\n        </tr>\n      `;\n    }).join('');\n\n    tempDiv.innerHTML = `\n      <div style=\"border: 1px solid #ddd; border-radius: 12px; overflow: hidden; background-color: #fff; box-shadow: 0 4px 8px rgba(0,0,0,0.1);\">\n        <div style=\"background-color: #2c3e50; color: #fff; padding: 20px; display: flex; justify-content: space-between; align-items: center; border-top-left-radius: 10px; border-top-right-radius: 10px;\">\n          <img src=\"${logoUrl || defaultLogo}\" style=\"width: 60px; height: 60px; border-radius: 50%; object-fit: cover;\" alt=\"Logo Finca\">\n          <div style=\"text-align: right;\">\n            <h1 style=\"margin: 0; font-size: 20pt; font-weight: bold;\">${farmName}</h1>\n            <p style=\"margin: 0; font-size: 10pt; opacity: 0.8;\">Calendario de Partos</p>\n          </div>\n        </div>\n\n        <div style=\"padding: 25px;\">\n          <h3 style=\"font-size: 16pt; margin-bottom: 20px; text-align: center; color: #333;\">Próximos Partos Programados</h3>\n          <table style=\"width: 100%; border-collapse: collapse; margin-bottom: 30px;\">\n            <thead style=\"background-color: #f0f0f0;\">\n              <tr>\n                <th style=\"padding: 10px 12px; text-align: left; border: 1px solid #eee;\">Animal</th>\n                <th style=\"padding: 10px 12px; text-align: left; border: 1px solid #eee;\">Fecha Diagnóstico Preñez</th>\n                <th style=\"padding: 10px 12px; text-align: left; border: 1px solid #eee;\">Fecha Probable de Parto</th>\n                <th style=\"padding: 10px 12px; text-align: left; border: 1px solid #eee;\">Días Restantes</th>\n              </tr>\n            </thead>\n            <tbody>\n              ${tableRows}\n            </tbody>\n          </table>\n        </div>\n\n        <div style=\"text-align: right; font-size: 8pt; padding: 10px 20px; color: #aaa; background-color: #f8f8f8; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;\">\n          <p style=\"margin: 0;\">Generado por Campo Inteligente | Administrador: ${adminName}</p>\n          <p style=\"margin: 0;\">Fecha de Generación: ${new Date().toLocaleDateString()}</p>\n        </div>\n      </div>\n    `;\n\n    document.body.appendChild(tempDiv);\n\n    html2canvas(tempDiv, { scale: 2, useCORS: true }).then(canvas => {\n      const imgData = canvas.toDataURL('image/png');\n      const pdf = new jsPDF('p', 'mm', 'a4');\n      const imgWidth = 210;\n      const pageHeight = 297;\n      const imgHeight = canvas.height * imgWidth / canvas.width;\n      let heightLeft = imgHeight;\n      let position = 0;\n\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pageHeight;\n\n      while (heightLeft > 0) {\n        position = heightLeft - pageHeight;\n        pdf.addPage();\n        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n        heightLeft -= pageHeight;\n      }\n\n      pdf.save(`calendario_partos_${new Date().toISOString().split('T')[0]}.pdf`);\n      document.body.removeChild(tempDiv);\n    });\n  }, [calvingSchedule, currentUser, logoUrl, animals]); // Dependencias para useCallback\n\n  return (\n    <div className=\"bg-white p-6 rounded-lg shadow-md\">\n      <h3 className=\"text-xl font-semibold mb-4\">Control Reproductivo</h3>\n\n      {/* Sección de Notificaciones de Partos Próximos */}\n      {upcomingCalvingNotifications.length > 0 && (\n        <div className=\"mb-8 p-4 border rounded-lg bg-yellow-100 border-yellow-400 text-yellow-800\">\n          <h4 className=\"text-lg font-semibold mb-3\">Notificaciones de Partos Próximos</h4>\n          {upcomingCalvingNotifications.map(notification => (\n            <div key={notification.id} className={`p-3 mb-2 rounded-lg ${notification.type === 'warning' ? 'bg-yellow-200' : 'bg-red-200'} text-sm`}>\n              {notification.message}\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Sección de Registro de Eventos Reproductivos */}\n      <div className=\"mb-8 p-4 border rounded-lg bg-gray-50\">\n        <h4 className=\"text-lg font-semibold mb-3\">Registrar Evento Reproductivo</h4>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <select\n            name=\"animalId\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={reproductiveData.animalId}\n            onChange={handleInputChange}\n          >\n            <option value=\"\">Selecciona Animal</option>\n            {animals.map(animal => (\n              <option key={animal.id} value={animal.id}>{animal.name} ({animal.id})</option>\n            ))}\n          </select>\n          <select\n            name=\"eventType\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={reproductiveData.eventType}\n            onChange={handleInputChange}\n          >\n            <option value=\"\">Selecciona Tipo de Evento</option>\n            <option value=\"diagnostico_prenez\">Diagnóstico de Preñez</option>\n            <option value=\"parto\">Parto</option>\n            <option value=\"inseminacion\">Inseminación</option>\n            <option value=\"celo\">Celo</option>\n            <option value=\"monta_natural\">Monta Natural</option> {/* Nueva opción */}\n          </select>\n          <input\n            type=\"date\"\n            name=\"eventDate\"\n            placeholder=\"Fecha del Evento\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={reproductiveData.eventDate}\n            onChange={handleInputChange}\n          />\n          {reproductiveData.eventType === 'diagnostico_prenez' && (\n            <select\n              name=\"diagnosisResult\"\n              className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n              value={reproductiveData.diagnosisResult}\n              onChange={handleInputChange}\n            >\n              <option value=\"\">Resultado del Diagnóstico</option>\n              <option value=\"preñada\">Preñada</option>\n              <option value=\"vacia\">Vacía</option>\n            </select>\n          )}\n          {/* Campo para la fecha probable de parto (editable si es diagnóstico de preñez) */}\n          {(reproductiveData.eventType === 'diagnostico_prenez' && reproductiveData.diagnosisResult === 'preñada') && (\n            <input\n              type=\"date\"\n              name=\"expectedCalvingDate\"\n              placeholder=\"Fecha Probable de Parto (Confirmada)\"\n              className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n              value={reproductiveData.expectedCalvingDate}\n              onChange={handleInputChange}\n              required // Hacerlo requerido si se confirma preñez\n            />\n          )}\n          {/* Campo para ID de Macho en Monta Natural */}\n          {reproductiveData.eventType === 'monta_natural' && (\n            <input\n              type=\"text\"\n              name=\"machoId\"\n              placeholder=\"ID del Macho (Monta Natural)\"\n              className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n              value={reproductiveData.machoId}\n              onChange={handleInputChange}\n            />\n          )}\n          {reproductiveData.eventType === 'inseminacion' && (\n            <>\n              <input\n                type=\"text\"\n                name=\"semenId\"\n                placeholder=\"ID de Semen\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                value={reproductiveData.semenId}\n                onChange={handleInputChange}\n              />\n              <input\n                type=\"text\"\n                name=\"semenProvider\"\n                placeholder=\"Proveedor de Semen\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                value={reproductiveData.semenProvider}\n                onChange={handleInputChange}\n              />\n            </>\n          )}\n          {reproductiveData.eventType === 'parto' && (\n            <>\n              <input\n                type=\"text\"\n                name=\"calfId\"\n                placeholder=\"ID del Ternero (si aplica)\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                value={reproductiveData.calfId}\n                onChange={handleInputChange}\n              />\n              <select\n                name=\"calfSex\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                value={reproductiveData.calfSex}\n                onChange={handleInputChange}\n              >\n                <option value=\"\">Sexo del Ternero</option>\n                <option value=\"macho\">Macho</option>\n                <option value=\"hembra\">Hembra</option>\n              </select>\n              <input\n                type=\"number\"\n                name=\"calfWeight\"\n                placeholder=\"Peso del Ternero (kg)\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                value={reproductiveData.calfWeight}\n                onChange={handleInputChange}\n              />\n              <textarea\n                name=\"calfObservations\"\n                placeholder=\"Observaciones del Ternero\"\n                rows=\"2\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black resize-none\"\n                value={reproductiveData.calfObservations}\n                onChange={handleInputChange}\n              ></textarea>\n            </>\n          )}\n          <textarea\n            name=\"details\"\n            placeholder=\"Detalles adicionales del evento\"\n            rows=\"2\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black resize-none col-span-full\"\n            value={reproductiveData.details}\n            onChange={handleInputChange}\n          ></textarea>\n        </div>\n        <button\n          onClick={handleSubmit}\n          className=\"mt-4 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors\"\n        >\n          Registrar Evento\n        </button>\n      </div>\n\n      {/* Sección de Historial de Eventos Reproductivos */}\n      <div className=\"mb-8 p-4 border rounded-lg bg-gray-50\">\n        <h4 className=\"text-lg font-semibold mb-3\">Historial de Eventos Reproductivos</h4>\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n          <input\n            type=\"text\"\n            placeholder=\"Filtrar por ID Animal\"\n            className=\"w-full px-4 py-2 border rounded-lg\"\n            value={filterAnimalId}\n            onChange={(e) => setFilterAnimalId(e.target.value)}\n          />\n          <select\n            className=\"w-full px-4 py-2 border rounded-lg\"\n            value={filterEventType}\n            onChange={(e) => setFilterEventType(e.target.value)}\n          >\n            <option value=\"\">Todos los Eventos</option>\n            <option value=\"diagnostico_prenez\">Diagnóstico de Preñez</option>\n            <option value=\"parto\">Parto</option>\n            <option value=\"inseminacion\">Inseminación</option>\n            <option value=\"celo\">Celo</option>\n            <option value=\"monta_natural\">Monta Natural</option>\n          </select>\n        </div>\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full bg-white border\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"py-2 px-4 border\">ID Animal</th>\n                <th className=\"py-2 px-4 border\">Tipo de Evento</th>\n                <th className=\"py-2 px-4 border\">Fecha</th>\n                <th className=\"py-2 px-4 border\">Detalles</th>\n                <th className=\"py-2 px-4 border\">Acciones</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredRecords.map(record => (\n                <tr key={record.id} className=\"hover:bg-gray-50\">\n                  <td className=\"py-2 px-4 border\">{getAnimalName(record.animalId)} ({record.animalId})</td>\n                  <td className=\"py-2 px-4 border\">{record.eventType ? record.eventType.replace(/_/g, ' ') : 'N/A'}</td> {/* Manejo de undefined */}\n                  <td className=\"py-2 px-4 border\">{record.eventDate}</td>\n                  <td className=\"py-2 px-4 border\">{record.details || record.diagnosisResult || record.calfId || record.semenId || record.machoId || 'N/A'}</td>\n                  <td className=\"py-2 px-4 border\">\n                    <button\n                      onClick={() => setReproductiveRecords(reproductiveRecords.filter(r => r.id !== record.id))}\n                      className=\"text-red-600 hover:underline\"\n                    >\n                      Eliminar\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Sección de Historial de Montas Naturales */}\n      <div className=\"mb-8 p-4 border rounded-lg bg-gray-50\">\n        <h4 className=\"text-lg font-semibold mb-3\">Historial de Montas Naturales</h4>\n        {naturalMatingHistory.length === 0 ? (\n          <p className=\"text-gray-500 text-center\">No hay montas naturales registradas aún.</p>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full bg-white border\">\n              <thead>\n                <tr className=\"bg-gray-100\">\n                  <th className=\"py-2 px-4 border\">ID Hembra</th>\n                  <th className=\"py-2 px-4 border\">ID Macho</th>\n                  <th className=\"py-2 px-4 border\">Fecha de Monta</th>\n                  <th className=\"py-2 px-4 border\">Detalles</th>\n                  <th className=\"py-2 px-4 border\">Acciones</th>\n                </tr>\n              </thead>\n              <tbody>\n                {naturalMatingHistory.map(record => (\n                  <tr key={record.id} className=\"hover:bg-gray-50\">\n                    <td className=\"py-2 px-4 border\">{getAnimalName(record.animalId)} ({record.animalId})</td>\n                    <td className=\"py-2 px-4 border\">{getAnimalName(record.machoId)} ({record.machoId})</td>\n                    <td className=\"py-2 px-4 border\">{record.eventDate}</td>\n                    <td className=\"py-2 px-4 border\">{record.details || 'N/A'}</td>\n                    <td className=\"py-2 px-4 border\">\n                      <button\n                        onClick={() => setNaturalMatingHistory(naturalMatingHistory.filter(r => r.id !== record.id))}\n                        className=\"text-red-600 hover:underline\"\n                      >\n                        Eliminar\n                      </button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n\n      {/* Sección de Calendario de Partos */}\n      <div className=\"mb-8 p-4 border rounded-lg bg-blue-50\">\n        <h4 className=\"text-lg font-semibold mb-3\">Calendario de Partos</h4>\n        <button\n          onClick={handleGenerateCalvingSchedulePDF}\n          className=\"mb-4 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors\"\n        >\n          Descargar Calendario PDF\n        </button>\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full bg-white border\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"py-2 px-4 border\">Animal</th>\n                <th className=\"py-2 px-4 border\">Fecha Diagnóstico Preñez</th>\n                <th className=\"py-2 px-4 border\">Fecha Probable de Parto</th>\n                <th className=\"py-2 px-4 border\">Días Restantes</th>\n                <th className=\"py-2 px-4 border\">Acciones</th>\n              </tr>\n            </thead>\n            <tbody>\n              {calvingSchedule.map(item => {\n                const daysRemaining = Math.ceil((new Date(item.expectedCalvingDate) - new Date()) / (1000 * 60 * 60 * 24));\n                const isOverdue = daysRemaining < 0;\n                return (\n                  <tr key={item.id} className={`hover:bg-gray-50 ${isOverdue ? 'bg-red-100' : ''}`}>\n                    <td className=\"py-2 px-4 border\">{getAnimalName(item.animalId)} ({item.animalId})</td>\n                    <td className=\"py-2 px-4 border\">{item.diagnosisDate}</td>\n                    <td className=\"py-2 px-4 border\">{item.expectedCalvingDate}</td>\n                    <td className=\"py-2 px-4 border\">\n                      {isOverdue ? <span className=\"font-bold text-red-600\">VENCIDO ({Math.abs(daysRemaining)} días)</span> : `${daysRemaining} días`}\n                    </td>\n                    <td className=\"py-2 px-4 border\">\n                      <button\n                        onClick={() => handleMarkCalving(item.animalId)}\n                        className=\"text-orange-600 hover:underline\"\n                      >\n                        Marcar Parto\n                      </button>\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Modal para registrar ternero */}\n      {showCalfModal && (\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50\">\n          <div className=\"bg-white p-6 rounded-lg shadow-xl w-full max-w-md\">\n            <h4 className=\"text-lg font-semibold mb-4\">Registrar Ternero para {getAnimalName(currentCalvingAnimal)}</h4>\n            <div className=\"grid grid-cols-1 gap-4\">\n              <input\n                type=\"text\"\n                name=\"calfId\"\n                placeholder=\"ID del Ternero\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                value={calfData.calfId}\n                onChange={handleCalfDataChange}\n                required\n              />\n              <select\n                name=\"calfSex\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                value={calfData.calfSex}\n                onChange={handleCalfDataChange}\n                required\n              >\n                <option value=\"\">Sexo del Ternero</option>\n                <option value=\"macho\">Macho</option>\n                <option value=\"hembra\">Hembra</option>\n              </select>\n              <input\n                type=\"number\"\n                name=\"calfWeight\"\n                placeholder=\"Peso del Ternero (kg)\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                value={calfData.calfWeight}\n                onChange={handleCalfDataChange}\n                required\n              />\n              <textarea\n                name=\"calfObservations\"\n                placeholder=\"Observaciones del Ternero\"\n                rows=\"2\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black resize-none\"\n                value={calfData.calfObservations}\n                onChange={handleCalfDataChange}\n              ></textarea>\n            </div>\n            <div className=\"mt-6 flex justify-end space-x-3\">\n              <button\n                onClick={() => setShowCalfModal(false)}\n                className=\"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors\"\n              >\n                Cancelar\n              </button>\n              <button\n                onClick={handleCalfSubmit}\n                className=\"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors\"\n              >\n                Registrar Ternero\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ReproductiveControlPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
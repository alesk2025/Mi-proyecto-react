{"ast":null,"code":"import _objectSpread from\"C:/Users/User/Downloads/project (10)/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import jsPDF from'jspdf';import html2canvas from'html2canvas';import EconomicReportSummary from'./EconomicManagement/EconomicReportSummary';import AnimalProfitabilitySection from'./EconomicManagement/AnimalProfitabilitySection';import TransactionForm from'./EconomicManagement/TransactionForm';import TransactionHistory from'./EconomicManagement/TransactionHistory';import ProfitabilityCharts from'./EconomicManagement/ProfitabilityCharts';import SupplierClientManagement from'./EconomicManagement/SupplierClientManagement';// Nuevo componente\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EconomicManagementPage=_ref=>{let{transactions,onAddTransaction,onDeleteTransaction,animals,employees,payslips,thirdPartyPayments,currentUser,logoUrl}=_ref;const[transaction,setTransaction]=useState({type:'ingreso',category:'',amount:'',description:'',animalId:'',product:'',quantity:'',unit:'',pricePerUnit:'',client:'',date:new Date().toISOString().split('T')[0],startDate:'',endDate:''});const[reportPeriod,setReportPeriod]=useState('monthly');const[selectedDate,setSelectedDate]=useState(new Date().toISOString().split('T')[0]);const[selectedMonth,setSelectedMonth]=useState(new Date().toISOString().slice(0,7));const[selectedWeek,setSelectedWeek]=useState(getWeekNumber(new Date()));const[sharedExpensesBreakdown,setSharedExpensesBreakdown]=useState({});// Estados para proveedores y clientes\nconst[suppliers,setSuppliers]=useState([]);const[clients,setClients]=useState([]);const[debts,setDebts]=useState([]);// Deudas a proveedores\nconst[credits,setCredits]=useState([]);// Créditos de clientes\nconst sharedExpenseCategories=['alimento','desparasitante','vitaminas','vacunas'];// --- Funciones para Proveedores y Clientes ---\nconst addSupplier=supplier=>{setSuppliers([...suppliers,_objectSpread(_objectSpread({},supplier),{},{id:\"SUP-\".concat(Date.now())})]);};const addClient=client=>{setClients([...clients,_objectSpread(_objectSpread({},client),{},{id:\"CLI-\".concat(Date.now())})]);};const addDebt=debt=>{setDebts([...debts,_objectSpread(_objectSpread({},debt),{},{id:\"DEBT-\".concat(Date.now())})]);};const payDebt=id=>{setDebts(debts.map(debt=>debt.id===id?_objectSpread(_objectSpread({},debt),{},{paid:true,paymentDate:new Date().toISOString().split('T')[0]}):debt));};const addCredit=credit=>{setCredits([...credits,_objectSpread(_objectSpread({},credit),{},{id:\"CRED-\".concat(Date.now())})]);};const collectCredit=id=>{setCredits(credits.map(credit=>credit.id===id?_objectSpread(_objectSpread({},credit),{},{collected:true,collectionDate:new Date().toISOString().split('T')[0]}):credit));};// --- Lógica de Filtrado de Reportes ---\nconst filterItemsBySelectedPeriod=(items,dateProp)=>{return items.filter(item=>{const itemDate=normalizeDate(item[dateProp]);if(reportPeriod==='daily'){const selectedDay=normalizeDate(selectedDate);return itemDate.getTime()===selectedDay.getTime();}else if(reportPeriod==='weekly'){const{start,end}=getStartAndEndOfWeek(selectedWeek.year,selectedWeek.week);return itemDate>=start&&itemDate<=end;}else if(reportPeriod==='monthly'){const[year,month]=selectedMonth.split('-').map(Number);return itemDate.getFullYear()===year&&itemDate.getMonth()===month-1;}return false;});};const currentPeriodTransactions=filterItemsBySelectedPeriod(transactions,'date');const currentPeriodPayslips=filterItemsBySelectedPeriod(payslips,'paymentDate');const currentPeriodThirdPartyPayments=filterItemsBySelectedPeriod(thirdPartyPayments,'date');const totalIncomePeriod=currentPeriodTransactions.filter(t=>t.type==='ingreso'||t.type==='venta').reduce((sum,t)=>sum+t.total,0);const transactionExpensesPeriod=currentPeriodTransactions.filter(t=>t.type==='gasto'||t.type==='compra').reduce((sum,t)=>sum+t.total,0);const payslipExpensesPeriod=currentPeriodPayslips.reduce((sum,ps)=>sum+(parseFloat(ps.netSalary)||0),0);const thirdPartyExpensesPeriod=currentPeriodThirdPartyPayments.reduce((sum,tpp)=>sum+(parseFloat(tpp.amount)||0),0);const totalExpensesPeriod=transactionExpensesPeriod+payslipExpensesPeriod+thirdPartyExpensesPeriod;const netProfitPeriod=totalIncomePeriod-totalExpensesPeriod;// --- Lógica de Rentabilidad por Animal ---\nconst safeEmployees=employees||[];const safeAnimals=animals||[];const safeThirdPartyPayments=thirdPartyPayments||[];// Costo de mano de obra (salarios)\nconst totalSalaries=currentPeriodPayslips.reduce((sum,ps)=>sum+(parseFloat(ps.netSalary)||0),0);const proratedLaborCostPerAnimal=safeAnimals.length>0?totalSalaries/safeAnimals.length:0;// Costos compartidos (alimento, desparasitante, vitaminas, vacunas)\nconst totalSharedExpenses=currentPeriodTransactions.filter(t=>(t.type==='gasto'||t.type==='compra')&&sharedExpenseCategories.includes(t.category.toLowerCase())).reduce((sum,t)=>sum+t.total,0);const proratedSharedExpensePerAnimal=safeAnimals.length>0?totalSharedExpenses/safeAnimals.length:0;// Gastos de terceros (general y específico)\nconst generalThirdPartyExpenses=currentPeriodThirdPartyPayments.filter(tpp=>tpp.appliesTo==='general').reduce((sum,tpp)=>sum+(parseFloat(tpp.amount)||0),0);const proratedGeneralThirdPartyExpensePerAnimal=safeAnimals.length>0?generalThirdPartyExpenses/safeAnimals.length:0;const animalProfitability=safeAnimals.map(animal=>{const animalIncome=currentPeriodTransactions.filter(t=>t.animalId===animal.id&&t.type==='venta').reduce((sum,t)=>sum+t.total,0);const animalExpenses=currentPeriodTransactions.filter(t=>t.animalId===animal.id&&(t.type==='gasto'||t.type==='compra')&&!sharedExpenseCategories.includes(t.category.toLowerCase())).reduce((sum,t)=>sum+t.total,0);const specificThirdPartyExpensesForAnimal=currentPeriodThirdPartyPayments.filter(tpp=>tpp.appliesTo==='specific'&&tpp.targetAnimalId===animal.id).reduce((sum,tpp)=>sum+(parseFloat(tpp.amount)||0),0);const totalCost=animalExpenses+proratedLaborCostPerAnimal+proratedSharedExpensePerAnimal+specificThirdPartyExpensesForAnimal+proratedGeneralThirdPartyExpensePerAnimal;const netProfitAnimal=animalIncome-totalCost;return{id:animal.id,name:animal.name,tipoProduccion:animal.tipoProduccion,status:animal.estadoReproductivo,income:animalIncome,expenses:animalExpenses,proratedLabor:proratedLaborCostPerAnimal,proratedSharedExpenses:proratedSharedExpensePerAnimal,specificThirdPartyExpenses:specificThirdPartyExpensesForAnimal,proratedGeneralThirdPartyExpenses:proratedGeneralThirdPartyExpensePerAnimal,totalCost:totalCost,netProfit:netProfitAnimal};});// Efecto para calcular el desglose de gastos compartidos\nuseEffect(()=>{const breakdown={};sharedExpenseCategories.forEach(cat=>{breakdown[cat]=0;});currentPeriodTransactions.forEach(t=>{if((t.type==='gasto'||t.type==='compra')&&sharedExpenseCategories.includes(t.category.toLowerCase())){breakdown[t.category.toLowerCase()]+=t.total;}});setSharedExpensesBreakdown(breakdown);},[currentPeriodTransactions,sharedExpenseCategories]);// Información de la finca/criador para PDFs\nconst farmName=(currentUser===null||currentUser===void 0?void 0:currentUser.farmName)||'Mi Finca Ganadera';const adminName=(currentUser===null||currentUser===void 0?void 0:currentUser.fullName)||'Administrador';const defaultLogo='https://via.placeholder.com/50x50?text=LOGO';const calculateTotalSale=()=>{const qty=parseFloat(transaction.quantity);const price=parseFloat(transaction.pricePerUnit);return(qty*price).toFixed(2);};const handleSubmit=()=>{if(!transaction.date){alert('Por favor, selecciona la fecha de la transacción.');return;}if(transaction.type==='ingreso'&&(!transaction.startDate||!transaction.endDate)){alert('Para ingresos, por favor, selecciona la fecha de inicio y fin del período.');return;}let finalTransaction=_objectSpread({},transaction);if(transaction.type==='venta'){finalTransaction.total=parseFloat(calculateTotalSale());}else{finalTransaction.total=parseFloat(transaction.amount);}const newId=\"TRX-\".concat(Date.now().toString().slice(-5));onAddTransaction(_objectSpread(_objectSpread({},finalTransaction),{},{id:newId}));alert(\"Transacci\\xF3n de \".concat(finalTransaction.type,\" registrada por $\").concat(finalTransaction.total,\".\"));setTransaction({type:'ingreso',category:'',amount:'',description:'',animalId:'',product:'',quantity:'',unit:'',pricePerUnit:'',client:'',date:new Date().toISOString().split('T')[0],startDate:'',endDate:''});};const handleGenerateInvoice=saleData=>{if(!saleData||!saleData.client||!saleData.product||!saleData.quantity||!saleData.pricePerUnit){alert('Por favor, completa todos los campos de la venta para generar la factura.');return;}const precioUnitario=parseFloat(saleData.pricePerUnit||0);const cantidad=parseFloat(saleData.quantity||0);const total=cantidad*precioUnitario;const tempDiv=document.createElement('div');tempDiv.style.width='210mm';tempDiv.style.padding='15mm';tempDiv.style.fontFamily='Arial, sans-serif';tempDiv.style.fontSize='10pt';tempDiv.style.backgroundColor='#f8f8f8';tempDiv.style.position='absolute';tempDiv.style.left='-9999px';tempDiv.style.top='-9999px';tempDiv.innerHTML=\"\\n      <div style=\\\"border: 1px solid #ddd; border-radius: 12px; overflow: hidden; background-color: #fff; box-shadow: 0 4px 8px rgba(0,0,0,0.1);\\\">\\n        <div style=\\\"background-color: #2c3e50; color: #fff; padding: 20px; display: flex; justify-content: space-between; align-items: center; border-top-left-radius: 10px; border-top-right-radius: 10px;\\\">\\n          <img src=\\\"\".concat(logoUrl||defaultLogo,\"\\\" style=\\\"width: 80px; height: 80px; border-radius: 50%; object-fit: cover;\\\" alt=\\\"Logo Finca\\\">\\n          <div style=\\\"text-align: right;\\\">\\n            <h1 style=\\\"margin: 0; font-size: 24pt; font-weight: bold;\\\">\").concat(farmName,\"</h1>\\n            <p style=\\\"margin: 0; font-size: 12pt; opacity: 0.8;\\\">Factura de Venta</p>\\n          </div>\\n        </div>\\n  \\n        <div style=\\\"padding: 25px;\\\">\\n          <div style=\\\"display: flex; justify-content: space-between; margin-bottom: 20px;\\\">\\n            <div>\\n              <p style=\\\"margin: 0;\\\"><strong>Factura ID:</strong> \").concat(saleData.id||'N/A',\"</p>\\n              <p style=\\\"margin: 0;\\\"><strong>Fecha:</strong> \").concat(saleData.date||'N/A',\"</p>\\n            </div>\\n            <div style=\\\"text-align: right;\\\">\\n              <p style=\\\"margin: 0;\\\"><strong>Cliente:</strong> \").concat(saleData.client||'N/A',\"</p>\\n              <p style=\\\"margin: 0;\\\"><strong>Descripci\\xF3n:</strong> \").concat(saleData.description||'Venta de productos',\"</p>\\n            </div>\\n          </div>\\n  \\n          <table style=\\\"width: 100%; border-collapse: collapse; margin-top: 10px; margin-bottom: 30px;\\\">\\n            <thead style=\\\"background-color: #f0f0f0;\\\">\\n              <tr>\\n                <th style=\\\"padding: 12px; border: 1px solid #eee; text-align: left;\\\">Producto</th>\\n                <th style=\\\"padding: 12px; border: 1px solid #eee; text-align: left;\\\">Cantidad</th>\\n                <th style=\\\"padding: 12px; border: 1px solid #eee; text-align: left;\\\">Unidad</th>\\n                <th style=\\\"padding: 12px; border: 1px solid #eee; text-align: left;\\\">Precio Unitario</th>\\n                <th style=\\\"padding: 12px; border: 1px solid #eee; text-align: left;\\\">Total</th>\\n              </tr>\\n            </thead>\\n            <tbody>\\n              <tr>\\n                <td style=\\\"padding: 12px; border: 1px solid #eee;\\\">\").concat(saleData.product,\"</td>\\n                <td style=\\\"padding: 12px; border: 1px solid #eee;\\\">\").concat(saleData.quantity,\"</td>\\n                <td style=\\\"padding: 12px; border: 1px solid #eee;\\\">\").concat(saleData.unit,\"</td>\\n                <td style=\\\"padding: 12px; border: 1px solid #eee;\\\">$\").concat(precioUnitario.toFixed(2),\"</td>\\n                <td style=\\\"padding: 12px; border: 1px solid #eee;\\\">$\").concat(total.toFixed(2),\"</td>\\n              </tr>\\n            </tbody>\\n          </table>\\n  \\n          <div style=\\\"text-align: right; margin-top: 20px;\\\">\\n            <p style=\\\"font-size: 14pt; font-weight: bold; color: #2c3e50; margin: 0;\\\">Total a Pagar: <span style=\\\"color: #27ae60;\\\">$\").concat(total.toFixed(2),\"</span></p>\\n          </div>\\n        </div>\\n  \\n        <div style=\\\"text-align: center; padding: 20px; background-color: #f0f0f0; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;\\\">\\n          <p style=\\\"font-size: 9pt; color: #555; margin: 0;\\\">\\xA1Gracias por tu compra!</p>\\n        </div>\\n  \\n        <div style=\\\"text-align: right; font-size: 8pt; padding: 10px 20px; color: #aaa; background-color: #f8f8f8; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;\\\">\\n          <p style=\\\"margin: 0;\\\">Generado por Campo Inteligente | Administrador: \").concat(adminName,\"</p>\\n          <p style=\\\"margin: 0;\\\">Fecha de Generaci\\xF3n: \").concat(new Date().toLocaleDateString(),\"</p>\\n        </div>\\n      </div>\\n    \");document.body.appendChild(tempDiv);html2canvas(tempDiv,{scale:2,useCORS:true}).then(canvas=>{const imgData=canvas.toDataURL('image/png');const pdf=new jsPDF('p','mm','a4');const imgWidth=210;const pageHeight=297;const imgHeight=canvas.height*imgWidth/canvas.width;let heightLeft=imgHeight;let position=0;pdf.addImage(imgData,'PNG',0,position,imgWidth,imgHeight);heightLeft-=pageHeight;while(heightLeft>=0){position=heightLeft-imgHeight;pdf.addPage();pdf.addImage(imgData,'PNG',0,position,imgWidth,imgHeight);heightLeft-=pageHeight;}pdf.save(\"factura_\".concat(saleData.client||'sin_cliente',\"_\").concat(saleData.id||'sin_id',\".pdf\"));document.body.removeChild(tempDiv);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-4\",children:\"Gesti\\xF3n Econ\\xF3mica\"}),/*#__PURE__*/_jsx(EconomicReportSummary,{reportPeriod:reportPeriod,selectedDate:selectedDate,selectedMonth:selectedMonth,selectedWeek:selectedWeek,setSelectedDate:setSelectedDate,setSelectedMonth:setSelectedMonth,setReportPeriod:setReportPeriod,totalIncomePeriod:totalIncomePeriod,totalExpensesPeriod:totalExpensesPeriod,netProfitPeriod:netProfitPeriod}),/*#__PURE__*/_jsx(AnimalProfitabilitySection,{animalProfitability:animalProfitability,totalSharedExpenses:totalSharedExpenses,sharedExpensesBreakdown:sharedExpensesBreakdown}),/*#__PURE__*/_jsx(ProfitabilityCharts,{animalProfitability:animalProfitability}),/*#__PURE__*/_jsx(SupplierClientManagement,{suppliers:suppliers,clients:clients,debts:debts,credits:credits,addSupplier:addSupplier,addClient:addClient,addDebt:addDebt,payDebt:payDebt,addCredit:addCredit,collectCredit:collectCredit}),/*#__PURE__*/_jsx(TransactionForm,{transaction:transaction,handleInputChange:e=>setTransaction(_objectSpread(_objectSpread({},transaction),{},{[e.target.name]:e.target.value})),handleSubmit:handleSubmit,handleGenerateInvoice:handleGenerateInvoice,animals:safeAnimals,calculateTotalSale:calculateTotalSale}),/*#__PURE__*/_jsx(TransactionHistory,{transactions:transactions,onDeleteTransaction:onDeleteTransaction,handleGenerateInvoice:handleGenerateInvoice})]});};export default EconomicManagementPage;","map":{"version":3,"names":["React","useState","useEffect","jsPDF","html2canvas","EconomicReportSummary","AnimalProfitabilitySection","TransactionForm","TransactionHistory","ProfitabilityCharts","SupplierClientManagement","jsx","_jsx","jsxs","_jsxs","EconomicManagementPage","_ref","transactions","onAddTransaction","onDeleteTransaction","animals","employees","payslips","thirdPartyPayments","currentUser","logoUrl","transaction","setTransaction","type","category","amount","description","animalId","product","quantity","unit","pricePerUnit","client","date","Date","toISOString","split","startDate","endDate","reportPeriod","setReportPeriod","selectedDate","setSelectedDate","selectedMonth","setSelectedMonth","slice","selectedWeek","setSelectedWeek","getWeekNumber","sharedExpensesBreakdown","setSharedExpensesBreakdown","suppliers","setSuppliers","clients","setClients","debts","setDebts","credits","setCredits","sharedExpenseCategories","addSupplier","supplier","_objectSpread","id","concat","now","addClient","addDebt","debt","payDebt","map","paid","paymentDate","addCredit","credit","collectCredit","collected","collectionDate","filterItemsBySelectedPeriod","items","dateProp","filter","item","itemDate","normalizeDate","selectedDay","getTime","start","end","getStartAndEndOfWeek","year","week","month","Number","getFullYear","getMonth","currentPeriodTransactions","currentPeriodPayslips","currentPeriodThirdPartyPayments","totalIncomePeriod","t","reduce","sum","total","transactionExpensesPeriod","payslipExpensesPeriod","ps","parseFloat","netSalary","thirdPartyExpensesPeriod","tpp","totalExpensesPeriod","netProfitPeriod","safeEmployees","safeAnimals","safeThirdPartyPayments","totalSalaries","proratedLaborCostPerAnimal","length","totalSharedExpenses","includes","toLowerCase","proratedSharedExpensePerAnimal","generalThirdPartyExpenses","appliesTo","proratedGeneralThirdPartyExpensePerAnimal","animalProfitability","animal","animalIncome","animalExpenses","specificThirdPartyExpensesForAnimal","targetAnimalId","totalCost","netProfitAnimal","name","tipoProduccion","status","estadoReproductivo","income","expenses","proratedLabor","proratedSharedExpenses","specificThirdPartyExpenses","proratedGeneralThirdPartyExpenses","netProfit","breakdown","forEach","cat","farmName","adminName","fullName","defaultLogo","calculateTotalSale","qty","price","toFixed","handleSubmit","alert","finalTransaction","newId","toString","handleGenerateInvoice","saleData","precioUnitario","cantidad","tempDiv","document","createElement","style","width","padding","fontFamily","fontSize","backgroundColor","position","left","top","innerHTML","toLocaleDateString","body","appendChild","scale","useCORS","then","canvas","imgData","toDataURL","pdf","imgWidth","pageHeight","imgHeight","height","heightLeft","addImage","addPage","save","removeChild","className","children","handleInputChange","e","target","value"],"sources":["C:/Users/User/Downloads/project (10)/src/components/EconomicManagementPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\nimport EconomicReportSummary from './EconomicManagement/EconomicReportSummary';\nimport AnimalProfitabilitySection from './EconomicManagement/AnimalProfitabilitySection';\nimport TransactionForm from './EconomicManagement/TransactionForm';\nimport TransactionHistory from './EconomicManagement/TransactionHistory';\nimport ProfitabilityCharts from './EconomicManagement/ProfitabilityCharts';\nimport SupplierClientManagement from './EconomicManagement/SupplierClientManagement'; // Nuevo componente\n\nconst EconomicManagementPage = ({ transactions, onAddTransaction, onDeleteTransaction, animals, employees, payslips, thirdPartyPayments, currentUser, logoUrl }) => {\n  const [transaction, setTransaction] = useState({\n    type: 'ingreso',\n    category: '',\n    amount: '',\n    description: '',\n    animalId: '',\n    product: '',\n    quantity: '',\n    unit: '',\n    pricePerUnit: '',\n    client: '',\n    date: new Date().toISOString().split('T')[0],\n    startDate: '',\n    endDate: '',\n  });\n  const [reportPeriod, setReportPeriod] = useState('monthly');\n  const [selectedDate, setSelectedDate] = useState(new Date().toISOString().split('T')[0]);\n  const [selectedMonth, setSelectedMonth] = useState(new Date().toISOString().slice(0, 7));\n  const [selectedWeek, setSelectedWeek] = useState(getWeekNumber(new Date()));\n  const [sharedExpensesBreakdown, setSharedExpensesBreakdown] = useState({});\n\n  // Estados para proveedores y clientes\n  const [suppliers, setSuppliers] = useState([]);\n  const [clients, setClients] = useState([]);\n  const [debts, setDebts] = useState([]); // Deudas a proveedores\n  const [credits, setCredits] = useState([]); // Créditos de clientes\n\n  const sharedExpenseCategories = ['alimento', 'desparasitante', 'vitaminas', 'vacunas'];\n\n  // --- Funciones para Proveedores y Clientes ---\n  const addSupplier = (supplier) => {\n    setSuppliers([...suppliers, { ...supplier, id: `SUP-${Date.now()}` }]);\n  };\n\n  const addClient = (client) => {\n    setClients([...clients, { ...client, id: `CLI-${Date.now()}` }]);\n  };\n\n  const addDebt = (debt) => {\n    setDebts([...debts, { ...debt, id: `DEBT-${Date.now()}` }]);\n  };\n\n  const payDebt = (id) => {\n    setDebts(debts.map(debt => debt.id === id ? { ...debt, paid: true, paymentDate: new Date().toISOString().split('T')[0] } : debt));\n  };\n\n  const addCredit = (credit) => {\n    setCredits([...credits, { ...credit, id: `CRED-${Date.now()}` }]);\n  };\n\n  const collectCredit = (id) => {\n    setCredits(credits.map(credit => credit.id === id ? { ...credit, collected: true, collectionDate: new Date().toISOString().split('T')[0] } : credit));\n  };\n\n  // --- Lógica de Filtrado de Reportes ---\n  const filterItemsBySelectedPeriod = (items, dateProp) => {\n    return items.filter(item => {\n      const itemDate = normalizeDate(item[dateProp]);\n\n      if (reportPeriod === 'daily') {\n        const selectedDay = normalizeDate(selectedDate);\n        return itemDate.getTime() === selectedDay.getTime();\n      } else if (reportPeriod === 'weekly') {\n        const { start, end } = getStartAndEndOfWeek(selectedWeek.year, selectedWeek.week);\n        return itemDate >= start && itemDate <= end;\n      } else if (reportPeriod === 'monthly') {\n        const [year, month] = selectedMonth.split('-').map(Number);\n        return itemDate.getFullYear() === year && itemDate.getMonth() === (month - 1);\n      }\n      return false;\n    });\n  };\n\n  const currentPeriodTransactions = filterItemsBySelectedPeriod(transactions, 'date');\n  const currentPeriodPayslips = filterItemsBySelectedPeriod(payslips, 'paymentDate');\n  const currentPeriodThirdPartyPayments = filterItemsBySelectedPeriod(thirdPartyPayments, 'date');\n  \n  const totalIncomePeriod = currentPeriodTransactions\n    .filter(t => t.type === 'ingreso' || t.type === 'venta')\n    .reduce((sum, t) => sum + t.total, 0);\n  \n  const transactionExpensesPeriod = currentPeriodTransactions\n    .filter(t => t.type === 'gasto' || t.type === 'compra')\n    .reduce((sum, t) => sum + t.total, 0);\n  \n  const payslipExpensesPeriod = currentPeriodPayslips\n    .reduce((sum, ps) => sum + (parseFloat(ps.netSalary) || 0), 0);\n\n  const thirdPartyExpensesPeriod = currentPeriodThirdPartyPayments\n    .reduce((sum, tpp) => sum + (parseFloat(tpp.amount) || 0), 0);\n  \n  const totalExpensesPeriod = transactionExpensesPeriod + payslipExpensesPeriod + thirdPartyExpensesPeriod;\n\n  const netProfitPeriod = totalIncomePeriod - totalExpensesPeriod;\n\n  // --- Lógica de Rentabilidad por Animal ---\n  const safeEmployees = employees || [];\n  const safeAnimals = animals || [];\n  const safeThirdPartyPayments = thirdPartyPayments || [];\n\n  // Costo de mano de obra (salarios)\n  const totalSalaries = currentPeriodPayslips.reduce((sum, ps) => sum + (parseFloat(ps.netSalary) || 0), 0);\n  const proratedLaborCostPerAnimal = safeAnimals.length > 0 ? totalSalaries / safeAnimals.length : 0;\n\n  // Costos compartidos (alimento, desparasitante, vitaminas, vacunas)\n  const totalSharedExpenses = currentPeriodTransactions\n    .filter(t => \n      (t.type === 'gasto' || t.type === 'compra') && \n      sharedExpenseCategories.includes(t.category.toLowerCase())\n    )\n    .reduce((sum, t) => sum + t.total, 0);\n\n  const proratedSharedExpensePerAnimal = safeAnimals.length > 0 ? totalSharedExpenses / safeAnimals.length : 0;\n\n  // Gastos de terceros (general y específico)\n  const generalThirdPartyExpenses = currentPeriodThirdPartyPayments\n    .filter(tpp => tpp.appliesTo === 'general')\n    .reduce((sum, tpp) => sum + (parseFloat(tpp.amount) || 0), 0);\n  \n  const proratedGeneralThirdPartyExpensePerAnimal = safeAnimals.length > 0 ? generalThirdPartyExpenses / safeAnimals.length : 0;\n\n\n  const animalProfitability = safeAnimals.map(animal => {\n    const animalIncome = currentPeriodTransactions\n      .filter(t => t.animalId === animal.id && t.type === 'venta')\n      .reduce((sum, t) => sum + t.total, 0);\n\n    const animalExpenses = currentPeriodTransactions\n      .filter(t => t.animalId === animal.id && (t.type === 'gasto' || t.type === 'compra') && !sharedExpenseCategories.includes(t.category.toLowerCase()))\n      .reduce((sum, t) => sum + t.total, 0);\n\n    const specificThirdPartyExpensesForAnimal = currentPeriodThirdPartyPayments\n      .filter(tpp => tpp.appliesTo === 'specific' && tpp.targetAnimalId === animal.id)\n      .reduce((sum, tpp) => sum + (parseFloat(tpp.amount) || 0), 0);\n\n    const totalCost = animalExpenses + proratedLaborCostPerAnimal + proratedSharedExpensePerAnimal + specificThirdPartyExpensesForAnimal + proratedGeneralThirdPartyExpensePerAnimal;\n    const netProfitAnimal = animalIncome - totalCost;\n\n    return {\n      id: animal.id,\n      name: animal.name,\n      tipoProduccion: animal.tipoProduccion,\n      status: animal.estadoReproductivo,\n      income: animalIncome,\n      expenses: animalExpenses,\n      proratedLabor: proratedLaborCostPerAnimal,\n      proratedSharedExpenses: proratedSharedExpensePerAnimal,\n      specificThirdPartyExpenses: specificThirdPartyExpensesForAnimal,\n      proratedGeneralThirdPartyExpenses: proratedGeneralThirdPartyExpensePerAnimal,\n      totalCost: totalCost,\n      netProfit: netProfitAnimal,\n    };\n  });\n\n  // Efecto para calcular el desglose de gastos compartidos\n  useEffect(() => {\n    const breakdown = {};\n    sharedExpenseCategories.forEach(cat => {\n      breakdown[cat] = 0;\n    });\n\n    currentPeriodTransactions.forEach(t => {\n      if ((t.type === 'gasto' || t.type === 'compra') && sharedExpenseCategories.includes(t.category.toLowerCase())) {\n        breakdown[t.category.toLowerCase()] += t.total;\n      }\n    });\n    setSharedExpensesBreakdown(breakdown);\n  }, [currentPeriodTransactions, sharedExpenseCategories]);\n\n  // Información de la finca/criador para PDFs\n  const farmName = currentUser?.farmName || 'Mi Finca Ganadera';\n  const adminName = currentUser?.fullName || 'Administrador';\n  const defaultLogo = 'https://via.placeholder.com/50x50?text=LOGO';\n\n  const calculateTotalSale = () => {\n    const qty = parseFloat(transaction.quantity);\n    const price = parseFloat(transaction.pricePerUnit);\n    return (qty * price).toFixed(2);\n  };\n\n  const handleSubmit = () => {\n    if (!transaction.date) {\n      alert('Por favor, selecciona la fecha de la transacción.');\n      return;\n    }\n    if (transaction.type === 'ingreso' && (!transaction.startDate || !transaction.endDate)) {\n      alert('Para ingresos, por favor, selecciona la fecha de inicio y fin del período.');\n      return;\n    }\n\n    let finalTransaction = { ...transaction };\n    if (transaction.type === 'venta') {\n      finalTransaction.total = parseFloat(calculateTotalSale()); \n    } else {\n      finalTransaction.total = parseFloat(transaction.amount);\n    }\n    \n    const newId = `TRX-${Date.now().toString().slice(-5)}`;\n    onAddTransaction({ ...finalTransaction, id: newId });\n    alert(`Transacción de ${finalTransaction.type} registrada por $${finalTransaction.total}.`);\n    setTransaction({\n      type: 'ingreso', category: '', amount: '', description: '',\n      animalId: '', product: '', quantity: '', unit: '', pricePerUnit: '', client: '',\n      date: new Date().toISOString().split('T')[0],\n      startDate: '', endDate: '',\n    });\n  };\n\n  const handleGenerateInvoice = (saleData) => {\n    if (!saleData || !saleData.client || !saleData.product || !saleData.quantity || !saleData.pricePerUnit) {\n      alert('Por favor, completa todos los campos de la venta para generar la factura.');\n      return;\n    }\n  \n    const precioUnitario = parseFloat(saleData.pricePerUnit || 0);\n    const cantidad = parseFloat(saleData.quantity || 0);\n    const total = cantidad * precioUnitario;\n  \n    const tempDiv = document.createElement('div');\n    tempDiv.style.width = '210mm';\n    tempDiv.style.padding = '15mm';\n    tempDiv.style.fontFamily = 'Arial, sans-serif';\n    tempDiv.style.fontSize = '10pt';\n    tempDiv.style.backgroundColor = '#f8f8f8';\n    tempDiv.style.position = 'absolute';\n    tempDiv.style.left = '-9999px';\n    tempDiv.style.top = '-9999px';\n  \n    tempDiv.innerHTML = `\n      <div style=\"border: 1px solid #ddd; border-radius: 12px; overflow: hidden; background-color: #fff; box-shadow: 0 4px 8px rgba(0,0,0,0.1);\">\n        <div style=\"background-color: #2c3e50; color: #fff; padding: 20px; display: flex; justify-content: space-between; align-items: center; border-top-left-radius: 10px; border-top-right-radius: 10px;\">\n          <img src=\"${logoUrl || defaultLogo}\" style=\"width: 80px; height: 80px; border-radius: 50%; object-fit: cover;\" alt=\"Logo Finca\">\n          <div style=\"text-align: right;\">\n            <h1 style=\"margin: 0; font-size: 24pt; font-weight: bold;\">${farmName}</h1>\n            <p style=\"margin: 0; font-size: 12pt; opacity: 0.8;\">Factura de Venta</p>\n          </div>\n        </div>\n  \n        <div style=\"padding: 25px;\">\n          <div style=\"display: flex; justify-content: space-between; margin-bottom: 20px;\">\n            <div>\n              <p style=\"margin: 0;\"><strong>Factura ID:</strong> ${saleData.id || 'N/A'}</p>\n              <p style=\"margin: 0;\"><strong>Fecha:</strong> ${saleData.date || 'N/A'}</p>\n            </div>\n            <div style=\"text-align: right;\">\n              <p style=\"margin: 0;\"><strong>Cliente:</strong> ${saleData.client || 'N/A'}</p>\n              <p style=\"margin: 0;\"><strong>Descripción:</strong> ${saleData.description || 'Venta de productos'}</p>\n            </div>\n          </div>\n  \n          <table style=\"width: 100%; border-collapse: collapse; margin-top: 10px; margin-bottom: 30px;\">\n            <thead style=\"background-color: #f0f0f0;\">\n              <tr>\n                <th style=\"padding: 12px; border: 1px solid #eee; text-align: left;\">Producto</th>\n                <th style=\"padding: 12px; border: 1px solid #eee; text-align: left;\">Cantidad</th>\n                <th style=\"padding: 12px; border: 1px solid #eee; text-align: left;\">Unidad</th>\n                <th style=\"padding: 12px; border: 1px solid #eee; text-align: left;\">Precio Unitario</th>\n                <th style=\"padding: 12px; border: 1px solid #eee; text-align: left;\">Total</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td style=\"padding: 12px; border: 1px solid #eee;\">${saleData.product}</td>\n                <td style=\"padding: 12px; border: 1px solid #eee;\">${saleData.quantity}</td>\n                <td style=\"padding: 12px; border: 1px solid #eee;\">${saleData.unit}</td>\n                <td style=\"padding: 12px; border: 1px solid #eee;\">$${precioUnitario.toFixed(2)}</td>\n                <td style=\"padding: 12px; border: 1px solid #eee;\">$${total.toFixed(2)}</td>\n              </tr>\n            </tbody>\n          </table>\n  \n          <div style=\"text-align: right; margin-top: 20px;\">\n            <p style=\"font-size: 14pt; font-weight: bold; color: #2c3e50; margin: 0;\">Total a Pagar: <span style=\"color: #27ae60;\">$${total.toFixed(2)}</span></p>\n          </div>\n        </div>\n  \n        <div style=\"text-align: center; padding: 20px; background-color: #f0f0f0; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;\">\n          <p style=\"font-size: 9pt; color: #555; margin: 0;\">¡Gracias por tu compra!</p>\n        </div>\n  \n        <div style=\"text-align: right; font-size: 8pt; padding: 10px 20px; color: #aaa; background-color: #f8f8f8; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;\">\n          <p style=\"margin: 0;\">Generado por Campo Inteligente | Administrador: ${adminName}</p>\n          <p style=\"margin: 0;\">Fecha de Generación: ${new Date().toLocaleDateString()}</p>\n        </div>\n      </div>\n    `;\n  \n    document.body.appendChild(tempDiv);\n  \n    html2canvas(tempDiv, { scale: 2, useCORS: true }).then(canvas => {\n      const imgData = canvas.toDataURL('image/png');\n      const pdf = new jsPDF('p', 'mm', 'a4');\n      const imgWidth = 210;\n      const pageHeight = 297;\n      const imgHeight = canvas.height * imgWidth / canvas.width;\n      let heightLeft = imgHeight;\n      let position = 0;\n  \n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pageHeight;\n  \n      while (heightLeft >= 0) {\n        position = heightLeft - imgHeight;\n        pdf.addPage();\n        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n        heightLeft -= pageHeight;\n      }\n  \n      pdf.save(`factura_${saleData.client || 'sin_cliente'}_${saleData.id || 'sin_id'}.pdf`);\n      document.body.removeChild(tempDiv);\n    });\n  };\n\n  return (\n    <div className=\"bg-white p-6 rounded-lg shadow-md\">\n      <h3 className=\"text-xl font-semibold mb-4\">Gestión Económica</h3>\n\n      <EconomicReportSummary\n        reportPeriod={reportPeriod}\n        selectedDate={selectedDate}\n        selectedMonth={selectedMonth}\n        selectedWeek={selectedWeek}\n        setSelectedDate={setSelectedDate}\n        setSelectedMonth={setSelectedMonth}\n        setReportPeriod={setReportPeriod}\n        totalIncomePeriod={totalIncomePeriod}\n        totalExpensesPeriod={totalExpensesPeriod}\n        netProfitPeriod={netProfitPeriod}\n      />\n\n      <AnimalProfitabilitySection\n        animalProfitability={animalProfitability}\n        totalSharedExpenses={totalSharedExpenses}\n        sharedExpensesBreakdown={sharedExpensesBreakdown}\n      />\n\n      <ProfitabilityCharts animalProfitability={animalProfitability} />\n\n      <SupplierClientManagement\n        suppliers={suppliers}\n        clients={clients}\n        debts={debts}\n        credits={credits}\n        addSupplier={addSupplier}\n        addClient={addClient}\n        addDebt={addDebt}\n        payDebt={payDebt}\n        addCredit={addCredit}\n        collectCredit={collectCredit}\n      />\n\n      <TransactionForm\n        transaction={transaction}\n        handleInputChange={(e) => setTransaction({ ...transaction, [e.target.name]: e.target.value })}\n        handleSubmit={handleSubmit}\n        handleGenerateInvoice={handleGenerateInvoice}\n        animals={safeAnimals}\n        calculateTotalSale={calculateTotalSale}\n      />\n\n      <TransactionHistory\n        transactions={transactions}\n        onDeleteTransaction={onDeleteTransaction}\n        handleGenerateInvoice={handleGenerateInvoice}\n      />\n    </div>\n  );\n};\n\nexport default EconomicManagementPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
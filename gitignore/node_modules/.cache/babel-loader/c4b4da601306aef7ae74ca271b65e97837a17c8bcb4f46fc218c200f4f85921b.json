{"ast":null,"code":"import _objectSpread from\"C:/Users/User/Downloads/project (10)/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useRef,useEffect}from'react';import{exportToCsv,exportTableToPdf}from'../utils/exportHelpers';// Importar funciones de exportación\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ProductionControlPage=_ref=>{let{animals,onUpdateAnimalProduction,onRegisterProductionRecord,productionRecords,setProductionRecords,currentUser,logoUrl}=_ref;const[currentProductionSection,setCurrentProductionSection]=useState('general');// 'general', 'leche', 'carne', 'potreros'\nconst[productionData,setProductionData]=useState({animalId:'',fechaRegistro:'',tipoProduccion:'',// 'leche', 'carne'\ncantidad:'',// Cantidad de producción (ej. litros de leche, kg de carne)\nunidadMedida:'',// 'litros', 'kg'\nobservaciones:''});const[editingRecord,setEditingRecord]=useState(null);// To hold the record being edited\nconst productionTableRef=useRef(null);// Ref for the production history table\n// Estados para el análisis de tendencias y consejos de IA\nconst[milkTrend,setMilkTrend]=useState('estable');// 'aumentando', 'decayendo', 'estable'\nconst[meatTrend,setMeatTrend]=useState('estable');// 'aumentando', 'decayendo', 'estable'\nconst[milkAdvice,setMilkAdvice]=useState('');const[meatAdvice,setMeatAdvice]=useState('');const[aiAdviceHistory,setAiAdviceHistory]=useState([]);// Nuevo estado para el historial de consejos\n// Estados para el control de potreros\nconst[pastureMap,setPastureMap]=useState(null);const[pastureData,setPastureData]=useState({name:'',size:'',// en hectáreas o m2\ngrassType:'',status:'disponible',// 'disponible', 'en_uso', 'no_disponible'\nlastUsedDate:''// Fecha de finalización de uso\n});const[pastures,setPastures]=useState([]);// Lista de potreros registrados\n// Función para calcular la tendencia y generar consejos\nconst analyzeProductionAndAdvise=(records,type)=>{const relevantRecords=records.filter(record=>record.tipoProduccion===type).sort((a,b)=>new Date(a.fechaRegistro)-new Date(b.fechaRegistro));if(relevantRecords.length<2){return{trend:'estable',advice:'Necesitamos más datos para analizar la tendencia de producción.'};}const latestRecords=relevantRecords.slice(-3);// Tomar los últimos 3 registros para un análisis simple\nif(latestRecords.length<2){return{trend:'estable',advice:'Necesitamos al menos dos registros para analizar la tendencia.'};}let increasingCount=0;let decreasingCount=0;for(let i=1;i<latestRecords.length;i++){if(latestRecords[i].cantidad>latestRecords[i-1].cantidad){increasingCount++;}else if(latestRecords[i].cantidad<latestRecords[i-1].cantidad){decreasingCount++;}}let trend='estable';let advice='';if(increasingCount>decreasingCount){trend='aumentando';advice=\"\\xA1Excelente! La producci\\xF3n de \".concat(type,\" est\\xE1 aumentando. Sigue con las buenas pr\\xE1cticas de alimentaci\\xF3n y manejo.\");}else if(decreasingCount>increasingCount){trend='decayendo';advice=\"\\xA1Atenci\\xF3n! La producci\\xF3n de \".concat(type,\" est\\xE1 decayendo. Considera revisar la dieta, el estado de salud del animal o el manejo del estr\\xE9s.\");}else{trend='estable';advice=\"La producci\\xF3n de \".concat(type,\" se mantiene estable. Si buscas mejorarla, eval\\xFAa optimizar la alimentaci\\xF3n o el confort del animal.\");}return{trend,advice};};useEffect(()=>{const{trend:milkT,advice:milkA}=analyzeProductionAndAdvise(productionRecords,'leche');setMilkTrend(milkT);setMilkAdvice(milkA);if(milkA&&milkA!=='Necesitamos más datos para analizar la tendencia de producción.'&&milkA!=='Necesitamos al menos dos registros para analizar la tendencia.'){setAiAdviceHistory(prev=>[...prev,{date:new Date().toISOString().split('T')[0],type:'leche',advice:milkA}]);}const{trend:meatT,advice:meatA}=analyzeProductionAndAdvise(productionRecords,'carne');setMeatTrend(meatT);setMeatAdvice(meatA);if(meatA&&meatA!=='Necesitamos más datos para analizar la tendencia de producción.'&&meatA!=='Necesitamos al menos dos registros para analizar la tendencia.'){setAiAdviceHistory(prev=>[...prev,{date:new Date().toISOString().split('T')[0],type:'carne',advice:meatA}]);}},[productionRecords]);const handleProductionChange=e=>{const{name,value}=e.target;setProductionData(_objectSpread(_objectSpread({},productionData),{},{[name]:value}));};const handleProductionSubmit=()=>{const{animalId,fechaRegistro,tipoProduccion,cantidad,unidadMedida,observaciones}=productionData;if(!animalId||!fechaRegistro||!tipoProduccion||!cantidad||!unidadMedida){alert('¡Ups! Para registrar la producción, necesitamos que completes todos los campos obligatorios. ¡No te rindas, ya casi lo logras!');return;}onRegisterProductionRecord({id:\"PROD-\".concat(Date.now().toString().slice(-5)),// Generar ID único\nanimalId,fechaRegistro,tipoProduccion,cantidad:parseFloat(cantidad),unidadMedida,observaciones});alert('¡Producción registrada con éxito! ¡Tus animales son unos campeones!');setProductionData({animalId:'',fechaRegistro:'',tipoProduccion:'',cantidad:'',unidadMedida:'',observaciones:''});};const handleDeleteProductionRecord=recordId=>{if(window.confirm('¿Estás seguro de que quieres eliminar este registro de producción? ¡Esta acción no se puede deshacer!')){const updatedRecords=productionRecords.filter(record=>record.id!==recordId);setProductionRecords(updatedRecords);// Update state in App.js via prop\nalert('¡Registro de producción eliminado! Como si nunca hubiera existido.');}};const startEditingProductionRecord=record=>{setEditingRecord(_objectSpread({},record));// Create a copy to edit\nalert('¡A editar se ha dicho! Modifica los campos y guarda los cambios.');};const handleEditingProductionChange=e=>{const{name,value}=e.target;setEditingRecord(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const saveEditedProductionRecord=()=>{const updatedRecords=productionRecords.map(record=>record.id===editingRecord.id?editingRecord:record);setProductionRecords(updatedRecords);// Update state in App.js via prop\nsetEditingRecord(null);// Exit editing mode\nalert('¡Cambios guardados! Tu historial de producción está al día.');};const cancelEditingProductionRecord=()=>{setEditingRecord(null);// Exit editing mode\nalert('¡Edición cancelada! No te preocupes, tus datos están a salvo.');};const handleExportProductionHistory=async format=>{if(productionRecords.length===0){alert('¡No hay registros de producción para exportar! ¿Qué esperas para empezar a registrar?');return;}const filename=\"historial_produccion_\".concat(new Date().toISOString().split('T')[0]);const farmName=(currentUser===null||currentUser===void 0?void 0:currentUser.farmName)||'Mi Finca Ganadera';const adminName=(currentUser===null||currentUser===void 0?void 0:currentUser.fullName)||'Administrador';if(format==='csv'){exportToCsv(productionRecords,filename);alert('¡Exportando a CSV! Tu historial estará listo en un santiamén.');}else if(format==='pdf'){await exportTableToPdf(productionTableRef.current,filename,'Historial de Producción',farmName,adminName,logoUrl);alert('¡Generando PDF! Tu historial se verá de lujo en papel.');}};const filteredProductionRecords=productionRecords.filter(record=>{if(currentProductionSection==='carne'&&record.tipoProduccion!=='carne'){return false;}if(currentProductionSection==='leche'&&record.tipoProduccion!=='leche'){return false;}return true;});// --- Lógica de Potreros ---\nconst handlePastureMapUpload=e=>{const file=e.target.files[0];if(file){const reader=new FileReader();reader.onloadend=()=>{setPastureMap(reader.result);alert('¡Mapa de potreros subido con éxito!');};reader.readAsDataURL(file);}};const handlePastureDataChange=e=>{const{name,value}=e.target;setPastureData(_objectSpread(_objectSpread({},pastureData),{},{[name]:value}));};const handleAddPasture=()=>{if(!pastureData.name||!pastureData.size||!pastureData.grassType){alert('¡Faltan datos! Por favor, completa el nombre, tamaño y tipo de pasto del potrero.');return;}const newPasture=_objectSpread(_objectSpread({},pastureData),{},{id:\"POT-\".concat(Date.now().toString().slice(-5))});setPastures(prev=>[...prev,newPasture]);alert(\"\\xA1Potrero \".concat(newPasture.name,\" registrado con \\xE9xito!\"));setPastureData({name:'',size:'',grassType:'',status:'disponible',lastUsedDate:''});};const handleUsePasture=id=>{setPastures(prev=>prev.map(p=>p.id===id?_objectSpread(_objectSpread({},p),{},{status:'en_uso',lastUsedDate:''}):p));alert('¡Potrero marcado como en uso!');};const handleFinalizePastureUse=id=>{setPastures(prev=>prev.map(p=>p.id===id?_objectSpread(_objectSpread({},p),{},{status:'no_disponible',lastUsedDate:new Date().toISOString().split('T')[0]}):p));alert('¡Uso de potrero finalizado! Iniciando periodo de descanso.');};// Automatización de estado de potreros\nuseEffect(()=>{const today=new Date();const updatedPastures=pastures.map(p=>{if(p.status==='no_disponible'&&p.lastUsedDate){const lastUsed=new Date(p.lastUsedDate);const diffTime=Math.abs(today-lastUsed);const diffDays=Math.ceil(diffTime/(1000*60*60*24));if(diffDays>=30){// 30 días de descanso\nreturn _objectSpread(_objectSpread({},p),{},{status:'disponible'});}}return p;});setPastures(updatedPastures);// Aviso de potreros con más de 90 días sin usar\npastures.forEach(p=>{if(p.status==='disponible'&&p.lastUsedDate){const lastUsed=new Date(p.lastUsedDate);const diffTime=Math.abs(today-lastUsed);const diffDays=Math.ceil(diffTime/(1000*60*60*24));if(diffDays>90){console.warn(\"\\xA1Atenci\\xF3n! El potrero \".concat(p.name,\" lleva \").concat(diffDays,\" d\\xEDas sin usarse. Considera rotarlo.\"));}}});},[pastures]);return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-4\",children:\"Control de Producci\\xF3n y Potreros\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center mb-6 space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentProductionSection('general'),className:\"px-6 py-2 rounded-lg \".concat(currentProductionSection==='general'?'bg-blue-600 text-white':'bg-gray-200 text-gray-800',\" hover:bg-blue-700 transition-colors\"),children:\"General\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentProductionSection('leche'),className:\"px-6 py-2 rounded-lg \".concat(currentProductionSection==='leche'?'bg-blue-600 text-white':'bg-gray-200 text-gray-800',\" hover:bg-blue-700 transition-colors\"),children:\"Producci\\xF3n de Leche\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentProductionSection('carne'),className:\"px-6 py-2 rounded-lg \".concat(currentProductionSection==='carne'?'bg-blue-600 text-white':'bg-gray-200 text-gray-800',\" hover:bg-blue-700 transition-colors\"),children:\"Producci\\xF3n de Carne\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentProductionSection('potreros'),className:\"px-6 py-2 rounded-lg \".concat(currentProductionSection==='potreros'?'bg-blue-600 text-white':'bg-gray-200 text-gray-800',\" hover:bg-blue-700 transition-colors\"),children:\"Control de Potreros\"})]}),currentProductionSection!=='potreros'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border rounded-lg bg-gray-100 mb-8\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold mb-3\",children:\"An\\xE1lisis de Tendencias de Producci\\xF3n\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 font-bold\",children:\"Tendencia de Leche:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-semibold \".concat(milkTrend==='aumentando'?'text-green-600':milkTrend==='decayendo'?'text-red-600':'text-gray-600'),children:milkTrend==='aumentando'?'¡Aumentando! 📈':milkTrend==='decayendo'?'¡Decayendo! 📉':'Estable ↔️'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:milkAdvice})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 font-bold\",children:\"Tendencia de Carne:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-semibold \".concat(meatTrend==='aumentando'?'text-green-600':meatTrend==='decayendo'?'text-red-600':'text-gray-600'),children:meatTrend==='aumentando'?'¡Aumentando! 📈':meatTrend==='decayendo'?'¡Decayendo! 📉':'Estable ↔️'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:meatAdvice})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border rounded-lg bg-blue-50 mb-8\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold mb-3\",children:\"Historial de Consejos de la IA\"}),aiAdviceHistory.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"A\\xFAn no hay consejos de la IA. \\xA1Registra m\\xE1s producci\\xF3n para obtenerlos!\"}):/*#__PURE__*/_jsx(\"div\",{className:\"max-h-48 overflow-y-auto\",children:aiAdviceHistory.map((advice,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"mb-2 p-2 bg-blue-100 rounded-lg\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-800\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold\",children:[advice.date,\" - \",advice.type.charAt(0).toUpperCase()+advice.type.slice(1),\":\"]}),\" \",advice.advice]})},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border rounded-lg bg-gray-50 mb-8\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold mb-3\",children:\"Registrar Nueva Producci\\xF3n\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-1\",children:\"Animal:\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"animalId\",className:\"w-full px-4 py-2 border rounded-lg\",value:productionData.animalId,onChange:handleProductionChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecciona Animal\"}),animals.map(animal=>/*#__PURE__*/_jsxs(\"option\",{value:animal.id,children:[animal.name,\" (\",animal.id,\")\"]},animal.id))]}),/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-1\",children:\"Fecha de Registro:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"fechaRegistro\",placeholder:\"Fecha de Registro\",className:\"w-full px-4 py-2 border rounded-lg\",value:productionData.fechaRegistro,onChange:handleProductionChange}),/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-1\",children:\"Tipo de Producci\\xF3n:\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"tipoProduccion\",className:\"w-full px-4 py-2 border rounded-lg\",value:productionData.tipoProduccion,onChange:handleProductionChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecciona Tipo\"}),/*#__PURE__*/_jsx(\"option\",{value:\"leche\",children:\"Leche\"}),/*#__PURE__*/_jsx(\"option\",{value:\"carne\",children:\"Carne\"})]}),/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-1\",children:\"Cantidad:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"cantidad\",placeholder:\"Cantidad\",className:\"w-full px-4 py-2 border rounded-lg\",value:productionData.cantidad,onChange:handleProductionChange}),/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-1\",children:\"Unidad de Medida:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"unidadMedida\",placeholder:\"Unidad de Medida (ej. litros, kg)\",className:\"w-full px-4 py-2 border rounded-lg\",value:productionData.unidadMedida,onChange:handleProductionChange}),/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-1 col-span-full\",children:\"Observaciones:\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"observaciones\",placeholder:\"Observaciones\",rows:\"2\",className:\"w-full px-4 py-2 border rounded-lg col-span-full\",value:productionData.observaciones,onChange:handleProductionChange})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleProductionSubmit,className:\"mt-4 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors\",children:\"Registrar Producci\\xF3n\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border rounded-lg bg-gray-50\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold mb-3\",children:\"Historial de Producci\\xF3n\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleExportProductionHistory('csv'),className:\"bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors mr-2\",children:\"Exportar a CSV\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleExportProductionHistory('pdf'),className:\"bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition-colors\",children:\"Exportar a PDF\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto rounded-lg shadow-md\",children:/*#__PURE__*/_jsxs(\"table\",{ref:productionTableRef,className:\"min-w-full bg-white text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-800 text-white\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold rounded-tl-lg\",children:\"ID Registro\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold\",children:\"ID Animal\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold\",children:\"Fecha\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold\",children:\"Tipo\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold\",children:\"Cantidad\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold\",children:\"Unidad\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold\",children:\"Observaciones\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold rounded-tr-lg\",children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"divide-y divide-gray-200\",children:filteredProductionRecords.map(record=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-100 transition-colors\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:record.id}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:record.animalId}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:record.fechaRegistro}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:record.tipoProduccion}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:record.cantidad}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:record.unidadMedida}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:record.observaciones}),/*#__PURE__*/_jsxs(\"td\",{className:\"py-3 px-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>startEditingProductionRecord(record),className:\"text-blue-600 hover:text-blue-800 font-medium mr-2 transition-colors\",children:\"Editar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteProductionRecord(record.id),className:\"text-red-600 hover:text-red-800 font-medium transition-colors\",children:\"Eliminar\"})]})]},record.id))})]})}),editingRecord&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8 p-6 border rounded-lg bg-yellow-50 shadow-lg\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-lg font-semibold mb-4 text-gray-800\",children:[\"Editar Registro de Producci\\xF3n: \",editingRecord.id]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-1\",children:\"ID Animal:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"animalId\",className:\"w-full px-4 py-2 border rounded-lg bg-gray-200 cursor-not-allowed\",value:editingRecord.animalId,readOnly:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-1\",children:\"Fecha Registro:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"fechaRegistro\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:editingRecord.fechaRegistro,onChange:handleEditingProductionChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-1\",children:\"Tipo Producci\\xF3n:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"tipoProduccion\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:editingRecord.tipoProduccion,onChange:handleEditingProductionChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-1\",children:\"Cantidad:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"cantidad\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:editingRecord.cantidad,onChange:handleEditingProductionChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-1\",children:\"Unidad Medida:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"unidadMedida\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:editingRecord.unidadMedida,onChange:handleEditingProductionChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-full\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-1\",children:\"Observaciones:\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"observaciones\",rows:\"3\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:editingRecord.observaciones,onChange:handleEditingProductionChange})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 flex justify-end space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:saveEditedProductionRecord,className:\"bg-green-600 text-white py-2 px-5 rounded-lg hover:bg-green-700 transition-colors shadow-md\",children:\"Guardar Cambios\"}),/*#__PURE__*/_jsx(\"button\",{onClick:cancelEditingProductionRecord,className:\"bg-gray-600 text-white py-2 px-5 rounded-lg hover:bg-gray-700 transition-colors shadow-md\",children:\"Cancelar Edici\\xF3n\"})]})]})]})]}),currentProductionSection==='potreros'&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border rounded-lg bg-gray-50\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold mb-3\",children:\"Control de Potreros\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",children:\"Subir Mapa de Potreros (JPG)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/jpeg\",onChange:handlePastureMapUpload,className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"}),pastureMap&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 text-center\",children:/*#__PURE__*/_jsx(\"img\",{src:pastureMap,alt:\"Mapa de Potreros\",className:\"max-h-64 mx-auto rounded-lg shadow-md\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border rounded-lg bg-gray-100 mb-6\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-md font-semibold mb-3\",children:\"Registrar Nuevo Potrero\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",placeholder:\"Nombre/N\\xFAmero del Potrero\",className:\"w-full px-4 py-2 border rounded-lg\",value:pastureData.name,onChange:handlePastureDataChange}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"size\",placeholder:\"Tama\\xF1o (ej. 10 ha, 5000 m\\xB2)\",className:\"w-full px-4 py-2 border rounded-lg\",value:pastureData.size,onChange:handlePastureDataChange}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"grassType\",placeholder:\"Tipo de Pasto (ej. Brachiaria, Estrella)\",className:\"w-full px-4 py-2 border rounded-lg\",value:pastureData.grassType,onChange:handlePastureDataChange})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddPasture,className:\"mt-4 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors\",children:\"Registrar Potrero\"})]}),/*#__PURE__*/_jsx(\"h5\",{className:\"text-md font-semibold mb-3\",children:\"Estado de Potreros\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto rounded-lg shadow-md\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full bg-white text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-800 text-white\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold\",children:\"Nombre\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold\",children:\"Tama\\xF1o\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold\",children:\"Tipo de Pasto\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold\",children:\"Estado\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold\",children:\"\\xDAltimo Uso\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-4 text-left font-semibold\",children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"divide-y divide-gray-200\",children:pastures.map(pasture=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-100 transition-colors\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:pasture.name}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:pasture.size}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:pasture.grassType}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"font-bold \".concat(pasture.status==='disponible'?'text-green-600':pasture.status==='en_uso'?'text-blue-600':'text-red-600'),children:pasture.status.replace('_',' ').toUpperCase()})}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:pasture.lastUsedDate||'N/A'}),/*#__PURE__*/_jsxs(\"td\",{className:\"py-3 px-4\",children:[pasture.status==='disponible'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleUsePasture(pasture.id),className:\"text-blue-600 hover:underline mr-2\",children:\"Usar\"}),pasture.status==='en_uso'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleFinalizePastureUse(pasture.id),className:\"text-orange-600 hover:underline mr-2\",children:\"Finalizar Uso\"})]})]},pasture.id))})]})})]})]});};export default ProductionControlPage;","map":{"version":3,"names":["React","useState","useRef","useEffect","exportToCsv","exportTableToPdf","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProductionControlPage","_ref","animals","onUpdateAnimalProduction","onRegisterProductionRecord","productionRecords","setProductionRecords","currentUser","logoUrl","currentProductionSection","setCurrentProductionSection","productionData","setProductionData","animalId","fechaRegistro","tipoProduccion","cantidad","unidadMedida","observaciones","editingRecord","setEditingRecord","productionTableRef","milkTrend","setMilkTrend","meatTrend","setMeatTrend","milkAdvice","setMilkAdvice","meatAdvice","setMeatAdvice","aiAdviceHistory","setAiAdviceHistory","pastureMap","setPastureMap","pastureData","setPastureData","name","size","grassType","status","lastUsedDate","pastures","setPastures","analyzeProductionAndAdvise","records","type","relevantRecords","filter","record","sort","a","b","Date","length","trend","advice","latestRecords","slice","increasingCount","decreasingCount","i","concat","milkT","milkA","prev","date","toISOString","split","meatT","meatA","handleProductionChange","e","value","target","_objectSpread","handleProductionSubmit","alert","id","now","toString","parseFloat","handleDeleteProductionRecord","recordId","window","confirm","updatedRecords","startEditingProductionRecord","handleEditingProductionChange","saveEditedProductionRecord","map","cancelEditingProductionRecord","handleExportProductionHistory","format","filename","farmName","adminName","fullName","current","filteredProductionRecords","handlePastureMapUpload","file","files","reader","FileReader","onloadend","result","readAsDataURL","handlePastureDataChange","handleAddPasture","newPasture","handleUsePasture","p","handleFinalizePastureUse","today","updatedPastures","lastUsed","diffTime","Math","abs","diffDays","ceil","forEach","console","warn","className","children","onClick","index","charAt","toUpperCase","onChange","animal","placeholder","rows","ref","readOnly","accept","src","alt","pasture","replace"],"sources":["C:/Users/User/Downloads/project (10)/src/components/ProductionControlPage.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { exportToCsv, exportTableToPdf } from '../utils/exportHelpers'; // Importar funciones de exportación\n\nconst ProductionControlPage = ({ animals, onUpdateAnimalProduction, onRegisterProductionRecord, productionRecords, setProductionRecords, currentUser, logoUrl }) => {\n  const [currentProductionSection, setCurrentProductionSection] = useState('general'); // 'general', 'leche', 'carne', 'potreros'\n\n  const [productionData, setProductionData] = useState({\n    animalId: '',\n    fechaRegistro: '',\n    tipoProduccion: '', // 'leche', 'carne'\n    cantidad: '', // Cantidad de producción (ej. litros de leche, kg de carne)\n    unidadMedida: '', // 'litros', 'kg'\n    observaciones: '',\n  });\n\n  const [editingRecord, setEditingRecord] = useState(null); // To hold the record being edited\n  const productionTableRef = useRef(null); // Ref for the production history table\n\n  // Estados para el análisis de tendencias y consejos de IA\n  const [milkTrend, setMilkTrend] = useState('estable'); // 'aumentando', 'decayendo', 'estable'\n  const [meatTrend, setMeatTrend] = useState('estable'); // 'aumentando', 'decayendo', 'estable'\n  const [milkAdvice, setMilkAdvice] = useState('');\n  const [meatAdvice, setMeatAdvice] = useState('');\n  const [aiAdviceHistory, setAiAdviceHistory] = useState([]); // Nuevo estado para el historial de consejos\n\n  // Estados para el control de potreros\n  const [pastureMap, setPastureMap] = useState(null);\n  const [pastureData, setPastureData] = useState({\n    name: '',\n    size: '', // en hectáreas o m2\n    grassType: '',\n    status: 'disponible', // 'disponible', 'en_uso', 'no_disponible'\n    lastUsedDate: '', // Fecha de finalización de uso\n  });\n  const [pastures, setPastures] = useState([]); // Lista de potreros registrados\n\n  // Función para calcular la tendencia y generar consejos\n  const analyzeProductionAndAdvise = (records, type) => {\n    const relevantRecords = records\n      .filter(record => record.tipoProduccion === type)\n      .sort((a, b) => new Date(a.fechaRegistro) - new Date(b.fechaRegistro));\n\n    if (relevantRecords.length < 2) {\n      return { trend: 'estable', advice: 'Necesitamos más datos para analizar la tendencia de producción.' };\n    }\n\n    const latestRecords = relevantRecords.slice(-3); // Tomar los últimos 3 registros para un análisis simple\n\n    if (latestRecords.length < 2) {\n      return { trend: 'estable', advice: 'Necesitamos al menos dos registros para analizar la tendencia.' };\n    }\n\n    let increasingCount = 0;\n    let decreasingCount = 0;\n\n    for (let i = 1; i < latestRecords.length; i++) {\n      if (latestRecords[i].cantidad > latestRecords[i - 1].cantidad) {\n        increasingCount++;\n      } else if (latestRecords[i].cantidad < latestRecords[i - 1].cantidad) {\n        decreasingCount++;\n      }\n    }\n\n    let trend = 'estable';\n    let advice = '';\n\n    if (increasingCount > decreasingCount) {\n      trend = 'aumentando';\n      advice = `¡Excelente! La producción de ${type} está aumentando. Sigue con las buenas prácticas de alimentación y manejo.`;\n    } else if (decreasingCount > increasingCount) {\n      trend = 'decayendo';\n      advice = `¡Atención! La producción de ${type} está decayendo. Considera revisar la dieta, el estado de salud del animal o el manejo del estrés.`;\n    } else {\n      trend = 'estable';\n      advice = `La producción de ${type} se mantiene estable. Si buscas mejorarla, evalúa optimizar la alimentación o el confort del animal.`;\n    }\n\n    return { trend, advice };\n  };\n\n  useEffect(() => {\n    const { trend: milkT, advice: milkA } = analyzeProductionAndAdvise(productionRecords, 'leche');\n    setMilkTrend(milkT);\n    setMilkAdvice(milkA);\n    if (milkA && milkA !== 'Necesitamos más datos para analizar la tendencia de producción.' && milkA !== 'Necesitamos al menos dos registros para analizar la tendencia.') {\n      setAiAdviceHistory(prev => [...prev, { date: new Date().toISOString().split('T')[0], type: 'leche', advice: milkA }]);\n    }\n\n    const { trend: meatT, advice: meatA } = analyzeProductionAndAdvise(productionRecords, 'carne');\n    setMeatTrend(meatT);\n    setMeatAdvice(meatA);\n    if (meatA && meatA !== 'Necesitamos más datos para analizar la tendencia de producción.' && meatA !== 'Necesitamos al menos dos registros para analizar la tendencia.') {\n      setAiAdviceHistory(prev => [...prev, { date: new Date().toISOString().split('T')[0], type: 'carne', advice: meatA }]);\n    }\n  }, [productionRecords]);\n\n  const handleProductionChange = (e) => {\n    const { name, value } = e.target;\n    setProductionData({ ...productionData, [name]: value });\n  };\n\n  const handleProductionSubmit = () => {\n    const { animalId, fechaRegistro, tipoProduccion, cantidad, unidadMedida, observaciones } = productionData;\n\n    if (!animalId || !fechaRegistro || !tipoProduccion || !cantidad || !unidadMedida) {\n      alert('¡Ups! Para registrar la producción, necesitamos que completes todos los campos obligatorios. ¡No te rindas, ya casi lo logras!');\n      return;\n    }\n\n    onRegisterProductionRecord({\n      id: `PROD-${Date.now().toString().slice(-5)}`, // Generar ID único\n      animalId,\n      fechaRegistro,\n      tipoProduccion,\n      cantidad: parseFloat(cantidad),\n      unidadMedida,\n      observaciones,\n    });\n\n    alert('¡Producción registrada con éxito! ¡Tus animales son unos campeones!');\n    setProductionData({\n      animalId: '',\n      fechaRegistro: '',\n      tipoProduccion: '',\n      cantidad: '',\n      unidadMedida: '',\n      observaciones: '',\n    });\n  };\n\n  const handleDeleteProductionRecord = (recordId) => {\n    if (window.confirm('¿Estás seguro de que quieres eliminar este registro de producción? ¡Esta acción no se puede deshacer!')) {\n      const updatedRecords = productionRecords.filter(record => record.id !== recordId);\n      setProductionRecords(updatedRecords); // Update state in App.js via prop\n      alert('¡Registro de producción eliminado! Como si nunca hubiera existido.');\n    }\n  };\n\n  const startEditingProductionRecord = (record) => {\n    setEditingRecord({ ...record }); // Create a copy to edit\n    alert('¡A editar se ha dicho! Modifica los campos y guarda los cambios.');\n  };\n\n  const handleEditingProductionChange = (e) => {\n    const { name, value } = e.target;\n    setEditingRecord(prev => ({ ...prev, [name]: value }));\n  };\n\n  const saveEditedProductionRecord = () => {\n    const updatedRecords = productionRecords.map(record =>\n      record.id === editingRecord.id ? editingRecord : record\n    );\n    setProductionRecords(updatedRecords); // Update state in App.js via prop\n    setEditingRecord(null); // Exit editing mode\n    alert('¡Cambios guardados! Tu historial de producción está al día.');\n  };\n\n  const cancelEditingProductionRecord = () => {\n    setEditingRecord(null); // Exit editing mode\n    alert('¡Edición cancelada! No te preocupes, tus datos están a salvo.');\n  };\n\n  const handleExportProductionHistory = async (format) => {\n    if (productionRecords.length === 0) {\n      alert('¡No hay registros de producción para exportar! ¿Qué esperas para empezar a registrar?');\n      return;\n    }\n\n    const filename = `historial_produccion_${new Date().toISOString().split('T')[0]}`;\n    const farmName = currentUser?.farmName || 'Mi Finca Ganadera';\n    const adminName = currentUser?.fullName || 'Administrador';\n\n    if (format === 'csv') {\n      exportToCsv(productionRecords, filename);\n      alert('¡Exportando a CSV! Tu historial estará listo en un santiamén.');\n    } else if (format === 'pdf') {\n      await exportTableToPdf(productionTableRef.current, filename, 'Historial de Producción', farmName, adminName, logoUrl);\n      alert('¡Generando PDF! Tu historial se verá de lujo en papel.');\n    }\n  };\n\n  const filteredProductionRecords = productionRecords.filter(record => {\n    if (currentProductionSection === 'carne' && record.tipoProduccion !== 'carne') {\n      return false;\n    }\n    if (currentProductionSection === 'leche' && record.tipoProduccion !== 'leche') {\n      return false;\n    }\n    return true;\n  });\n\n  // --- Lógica de Potreros ---\n  const handlePastureMapUpload = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setPastureMap(reader.result);\n        alert('¡Mapa de potreros subido con éxito!');\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handlePastureDataChange = (e) => {\n    const { name, value } = e.target;\n    setPastureData({ ...pastureData, [name]: value });\n  };\n\n  const handleAddPasture = () => {\n    if (!pastureData.name || !pastureData.size || !pastureData.grassType) {\n      alert('¡Faltan datos! Por favor, completa el nombre, tamaño y tipo de pasto del potrero.');\n      return;\n    }\n    const newPasture = { ...pastureData, id: `POT-${Date.now().toString().slice(-5)}` };\n    setPastures(prev => [...prev, newPasture]);\n    alert(`¡Potrero ${newPasture.name} registrado con éxito!`);\n    setPastureData({ name: '', size: '', grassType: '', status: 'disponible', lastUsedDate: '' });\n  };\n\n  const handleUsePasture = (id) => {\n    setPastures(prev => prev.map(p => p.id === id ? { ...p, status: 'en_uso', lastUsedDate: '' } : p));\n    alert('¡Potrero marcado como en uso!');\n  };\n\n  const handleFinalizePastureUse = (id) => {\n    setPastures(prev => prev.map(p => p.id === id ? { ...p, status: 'no_disponible', lastUsedDate: new Date().toISOString().split('T')[0] } : p));\n    alert('¡Uso de potrero finalizado! Iniciando periodo de descanso.');\n  };\n\n  // Automatización de estado de potreros\n  useEffect(() => {\n    const today = new Date();\n    const updatedPastures = pastures.map(p => {\n      if (p.status === 'no_disponible' && p.lastUsedDate) {\n        const lastUsed = new Date(p.lastUsedDate);\n        const diffTime = Math.abs(today - lastUsed);\n        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n        if (diffDays >= 30) { // 30 días de descanso\n          return { ...p, status: 'disponible' };\n        }\n      }\n      return p;\n    });\n    setPastures(updatedPastures);\n\n    // Aviso de potreros con más de 90 días sin usar\n    pastures.forEach(p => {\n      if (p.status === 'disponible' && p.lastUsedDate) {\n        const lastUsed = new Date(p.lastUsedDate);\n        const diffTime = Math.abs(today - lastUsed);\n        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n        if (diffDays > 90) {\n          console.warn(`¡Atención! El potrero ${p.name} lleva ${diffDays} días sin usarse. Considera rotarlo.`);\n        }\n      }\n    });\n  }, [pastures]);\n\n\n  return (\n    <div className=\"bg-white p-6 rounded-lg shadow-md\">\n      <h3 className=\"text-xl font-semibold mb-4\">Control de Producción y Potreros</h3>\n\n      <div className=\"flex justify-center mb-6 space-x-4\">\n        <button\n          onClick={() => setCurrentProductionSection('general')}\n          className={`px-6 py-2 rounded-lg ${currentProductionSection === 'general' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'} hover:bg-blue-700 transition-colors`}\n        >\n          General\n        </button>\n        <button\n          onClick={() => setCurrentProductionSection('leche')}\n          className={`px-6 py-2 rounded-lg ${currentProductionSection === 'leche' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'} hover:bg-blue-700 transition-colors`}\n        >\n          Producción de Leche\n        </button>\n        <button\n          onClick={() => setCurrentProductionSection('carne')}\n          className={`px-6 py-2 rounded-lg ${currentProductionSection === 'carne' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'} hover:bg-blue-700 transition-colors`}\n        >\n          Producción de Carne\n        </button>\n        <button\n          onClick={() => setCurrentProductionSection('potreros')}\n          className={`px-6 py-2 rounded-lg ${currentProductionSection === 'potreros' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'} hover:bg-blue-700 transition-colors`}\n        >\n          Control de Potreros\n        </button>\n      </div>\n\n      {currentProductionSection !== 'potreros' && (\n        <>\n          {/* Sección de Tendencias y Consejos */}\n          <div className=\"p-4 border rounded-lg bg-gray-100 mb-8\">\n            <h4 className=\"text-lg font-semibold mb-3\">Análisis de Tendencias de Producción</h4>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <p className=\"text-gray-700 font-bold\">Tendencia de Leche:</p>\n                <span className={`text-lg font-semibold ${milkTrend === 'aumentando' ? 'text-green-600' : milkTrend === 'decayendo' ? 'text-red-600' : 'text-gray-600'}`}>\n                  {milkTrend === 'aumentando' ? '¡Aumentando! 📈' : milkTrend === 'decayendo' ? '¡Decayendo! 📉' : 'Estable ↔️'}\n                </span>\n                <p className=\"text-sm text-gray-600 mt-1\">{milkAdvice}</p>\n              </div>\n              <div>\n                <p className=\"text-gray-700 font-bold\">Tendencia de Carne:</p>\n                <span className={`text-lg font-semibold ${meatTrend === 'aumentando' ? 'text-green-600' : meatTrend === 'decayendo' ? 'text-red-600' : 'text-gray-600'}`}>\n                  {meatTrend === 'aumentando' ? '¡Aumentando! 📈' : meatTrend === 'decayendo' ? '¡Decayendo! 📉' : 'Estable ↔️'}\n                </span>\n                <p className=\"text-sm text-gray-600 mt-1\">{meatAdvice}</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Historial de Consejos de la IA */}\n          <div className=\"p-4 border rounded-lg bg-blue-50 mb-8\">\n            <h4 className=\"text-lg font-semibold mb-3\">Historial de Consejos de la IA</h4>\n            {aiAdviceHistory.length === 0 ? (\n              <p className=\"text-gray-600\">Aún no hay consejos de la IA. ¡Registra más producción para obtenerlos!</p>\n            ) : (\n              <div className=\"max-h-48 overflow-y-auto\">\n                {aiAdviceHistory.map((advice, index) => (\n                  <div key={index} className=\"mb-2 p-2 bg-blue-100 rounded-lg\">\n                    <p className=\"text-sm text-gray-800\">\n                      <span className=\"font-semibold\">{advice.date} - {advice.type.charAt(0).toUpperCase() + advice.type.slice(1)}:</span> {advice.advice}\n                    </p>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n\n          {/* Formulario de Registro de Producción */}\n          <div className=\"p-4 border rounded-lg bg-gray-50 mb-8\">\n            <h4 className=\"text-lg font-semibold mb-3\">Registrar Nueva Producción</h4>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <label className=\"block text-gray-700 text-sm font-bold mb-1\">Animal:</label>\n              <select\n                name=\"animalId\"\n                className=\"w-full px-4 py-2 border rounded-lg\"\n                value={productionData.animalId}\n                onChange={handleProductionChange}\n              >\n                <option value=\"\">Selecciona Animal</option>\n                {animals.map(animal => (\n                  <option key={animal.id} value={animal.id}>{animal.name} ({animal.id})</option>\n                ))}\n              </select>\n              <label className=\"block text-gray-700 text-sm font-bold mb-1\">Fecha de Registro:</label>\n              <input\n                type=\"date\"\n                name=\"fechaRegistro\"\n                placeholder=\"Fecha de Registro\"\n                className=\"w-full px-4 py-2 border rounded-lg\"\n                value={productionData.fechaRegistro}\n                onChange={handleProductionChange}\n              />\n              <label className=\"block text-gray-700 text-sm font-bold mb-1\">Tipo de Producción:</label>\n              <select\n                name=\"tipoProduccion\"\n                className=\"w-full px-4 py-2 border rounded-lg\"\n                value={productionData.tipoProduccion}\n                onChange={handleProductionChange}\n              >\n                <option value=\"\">Selecciona Tipo</option>\n                <option value=\"leche\">Leche</option>\n                <option value=\"carne\">Carne</option>\n              </select>\n              <label className=\"block text-gray-700 text-sm font-bold mb-1\">Cantidad:</label>\n              <input\n                type=\"number\"\n                name=\"cantidad\"\n                placeholder=\"Cantidad\"\n                className=\"w-full px-4 py-2 border rounded-lg\"\n                value={productionData.cantidad}\n                onChange={handleProductionChange}\n              />\n              <label className=\"block text-gray-700 text-sm font-bold mb-1\">Unidad de Medida:</label>\n              <input\n                type=\"text\"\n                name=\"unidadMedida\"\n                placeholder=\"Unidad de Medida (ej. litros, kg)\"\n                className=\"w-full px-4 py-2 border rounded-lg\"\n                value={productionData.unidadMedida}\n                onChange={handleProductionChange}\n              />\n              <label className=\"block text-gray-700 text-sm font-bold mb-1 col-span-full\">Observaciones:</label>\n              <textarea\n                name=\"observaciones\"\n                placeholder=\"Observaciones\"\n                rows=\"2\"\n                className=\"w-full px-4 py-2 border rounded-lg col-span-full\"\n                value={productionData.observaciones}\n                onChange={handleProductionChange}\n              ></textarea>\n            </div>\n            <button\n              onClick={handleProductionSubmit}\n              className=\"mt-4 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors\"\n            >\n              Registrar Producción\n            </button>\n          </div>\n\n          {/* Historial de Producción */}\n          <div className=\"p-4 border rounded-lg bg-gray-50\">\n            <h4 className=\"text-lg font-semibold mb-3\">Historial de Producción</h4>\n            <div className=\"flex justify-end mb-4\">\n              <button\n                onClick={() => handleExportProductionHistory('csv')}\n                className=\"bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors mr-2\"\n              >\n                Exportar a CSV\n              </button>\n              <button\n                onClick={() => handleExportProductionHistory('pdf')}\n                className=\"bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition-colors\"\n              >\n                Exportar a PDF\n              </button>\n            </div>\n            <div className=\"overflow-x-auto rounded-lg shadow-md\">\n              <table ref={productionTableRef} className=\"min-w-full bg-white text-sm\">\n                <thead className=\"bg-gray-800 text-white\">\n                  <tr>\n                    <th className=\"py-3 px-4 text-left font-semibold rounded-tl-lg\">ID Registro</th>\n                    <th className=\"py-3 px-4 text-left font-semibold\">ID Animal</th>\n                    <th className=\"py-3 px-4 text-left font-semibold\">Fecha</th>\n                    <th className=\"py-3 px-4 text-left font-semibold\">Tipo</th>\n                    <th className=\"py-3 px-4 text-left font-semibold\">Cantidad</th>\n                    <th className=\"py-3 px-4 text-left font-semibold\">Unidad</th>\n                    <th className=\"py-3 px-4 text-left font-semibold\">Observaciones</th>\n                    <th className=\"py-3 px-4 text-left font-semibold rounded-tr-lg\">Acciones</th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-gray-200\">\n                  {filteredProductionRecords.map((record) => (\n                    <tr key={record.id} className=\"hover:bg-gray-100 transition-colors\">\n                      <td className=\"py-3 px-4\">{record.id}</td>\n                      <td className=\"py-3 px-4\">{record.animalId}</td>\n                      <td className=\"py-3 px-4\">{record.fechaRegistro}</td>\n                      <td className=\"py-3 px-4\">{record.tipoProduccion}</td>\n                      <td className=\"py-3 px-4\">{record.cantidad}</td>\n                      <td className=\"py-3 px-4\">{record.unidadMedida}</td>\n                      <td className=\"py-3 px-4\">{record.observaciones}</td>\n                      <td className=\"py-3 px-4\">\n                        <button\n                          onClick={() => startEditingProductionRecord(record)}\n                          className=\"text-blue-600 hover:text-blue-800 font-medium mr-2 transition-colors\"\n                        >\n                          Editar\n                        </button>\n                        <button\n                          onClick={() => handleDeleteProductionRecord(record.id)}\n                          className=\"text-red-600 hover:text-red-800 font-medium transition-colors\"\n                        >\n                          Eliminar\n                        </button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n\n            {/* Edit Form for Production Record */}\n            {editingRecord && (\n              <div className=\"mt-8 p-6 border rounded-lg bg-yellow-50 shadow-lg\">\n                <h4 className=\"text-lg font-semibold mb-4 text-gray-800\">Editar Registro de Producción: {editingRecord.id}</h4>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-gray-700 text-sm font-bold mb-1\">ID Animal:</label>\n                    <input\n                      type=\"text\"\n                      name=\"animalId\"\n                      className=\"w-full px-4 py-2 border rounded-lg bg-gray-200 cursor-not-allowed\"\n                      value={editingRecord.animalId}\n                      readOnly\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-gray-700 text-sm font-bold mb-1\">Fecha Registro:</label>\n                    <input\n                      type=\"date\"\n                      name=\"fechaRegistro\"\n                      className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                      value={editingRecord.fechaRegistro}\n                      onChange={handleEditingProductionChange}\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-gray-700 text-sm font-bold mb-1\">Tipo Producción:</label>\n                    <input\n                      type=\"text\"\n                      name=\"tipoProduccion\"\n                      className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                      value={editingRecord.tipoProduccion}\n                      onChange={handleEditingProductionChange}\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-gray-700 text-sm font-bold mb-1\">Cantidad:</label>\n                    <input\n                      type=\"number\"\n                      name=\"cantidad\"\n                      className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                      value={editingRecord.cantidad}\n                      onChange={handleEditingProductionChange}\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-gray-700 text-sm font-bold mb-1\">Unidad Medida:</label>\n                    <input\n                      type=\"text\"\n                      name=\"unidadMedida\"\n                      className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                      value={editingRecord.unidadMedida}\n                      onChange={handleEditingProductionChange}\n                    />\n                  </div>\n                  <div className=\"col-span-full\">\n                    <label className=\"block text-gray-700 text-sm font-bold mb-1\">Observaciones:</label>\n                    <textarea\n                      name=\"observaciones\"\n                      rows=\"3\"\n                      className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                      value={editingRecord.observaciones}\n                      onChange={handleEditingProductionChange}\n                    ></textarea>\n                  </div>\n                </div>\n                <div className=\"mt-6 flex justify-end space-x-3\">\n                  <button\n                    onClick={saveEditedProductionRecord}\n                    className=\"bg-green-600 text-white py-2 px-5 rounded-lg hover:bg-green-700 transition-colors shadow-md\"\n                  >\n                    Guardar Cambios\n                  </button>\n                  <button\n                    onClick={cancelEditingProductionRecord}\n                    className=\"bg-gray-600 text-white py-2 px-5 rounded-lg hover:bg-gray-700 transition-colors shadow-md\"\n                  >\n                    Cancelar Edición\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n        </>\n      )}\n\n      {currentProductionSection === 'potreros' && (\n        <div className=\"p-4 border rounded-lg bg-gray-50\">\n          <h4 className=\"text-lg font-semibold mb-3\">Control de Potreros</h4>\n\n          {/* Subir Mapa de Potreros */}\n          <div className=\"mb-6\">\n            <label className=\"block text-gray-700 text-sm font-bold mb-2\">Subir Mapa de Potreros (JPG)</label>\n            <input\n              type=\"file\"\n              accept=\"image/jpeg\"\n              onChange={handlePastureMapUpload}\n              className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            />\n            {pastureMap && (\n              <div className=\"mt-4 text-center\">\n                <img src={pastureMap} alt=\"Mapa de Potreros\" className=\"max-h-64 mx-auto rounded-lg shadow-md\" />\n              </div>\n            )}\n          </div>\n\n          {/* Registrar Potrero */}\n          <div className=\"p-4 border rounded-lg bg-gray-100 mb-6\">\n            <h5 className=\"text-md font-semibold mb-3\">Registrar Nuevo Potrero</h5>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <input\n                type=\"text\"\n                name=\"name\"\n                placeholder=\"Nombre/Número del Potrero\"\n                className=\"w-full px-4 py-2 border rounded-lg\"\n                value={pastureData.name}\n                onChange={handlePastureDataChange}\n              />\n              <input\n                type=\"text\"\n                name=\"size\"\n                placeholder=\"Tamaño (ej. 10 ha, 5000 m²)\"\n                className=\"w-full px-4 py-2 border rounded-lg\"\n                value={pastureData.size}\n                onChange={handlePastureDataChange}\n              />\n              <input\n                type=\"text\"\n                name=\"grassType\"\n                placeholder=\"Tipo de Pasto (ej. Brachiaria, Estrella)\"\n                className=\"w-full px-4 py-2 border rounded-lg\"\n                value={pastureData.grassType}\n                onChange={handlePastureDataChange}\n              />\n            </div>\n            <button\n              onClick={handleAddPasture}\n              className=\"mt-4 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors\"\n            >\n              Registrar Potrero\n            </button>\n          </div>\n\n          {/* Lista de Potreros */}\n          <h5 className=\"text-md font-semibold mb-3\">Estado de Potreros</h5>\n          <div className=\"overflow-x-auto rounded-lg shadow-md\">\n            <table className=\"min-w-full bg-white text-sm\">\n              <thead className=\"bg-gray-800 text-white\">\n                <tr>\n                  <th className=\"py-3 px-4 text-left font-semibold\">Nombre</th>\n                  <th className=\"py-3 px-4 text-left font-semibold\">Tamaño</th>\n                  <th className=\"py-3 px-4 text-left font-semibold\">Tipo de Pasto</th>\n                  <th className=\"py-3 px-4 text-left font-semibold\">Estado</th>\n                  <th className=\"py-3 px-4 text-left font-semibold\">Último Uso</th>\n                  <th className=\"py-3 px-4 text-left font-semibold\">Acciones</th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-gray-200\">\n                {pastures.map(pasture => (\n                  <tr key={pasture.id} className=\"hover:bg-gray-100 transition-colors\">\n                    <td className=\"py-3 px-4\">{pasture.name}</td>\n                    <td className=\"py-3 px-4\">{pasture.size}</td>\n                    <td className=\"py-3 px-4\">{pasture.grassType}</td>\n                    <td className=\"py-3 px-4\">\n                      <span className={`font-bold ${\n                        pasture.status === 'disponible' ? 'text-green-600' :\n                        pasture.status === 'en_uso' ? 'text-blue-600' :\n                        'text-red-600'\n                      }`}>\n                        {pasture.status.replace('_', ' ').toUpperCase()}\n                      </span>\n                    </td>\n                    <td className=\"py-3 px-4\">{pasture.lastUsedDate || 'N/A'}</td>\n                    <td className=\"py-3 px-4\">\n                      {pasture.status === 'disponible' && (\n                        <button\n                          onClick={() => handleUsePasture(pasture.id)}\n                          className=\"text-blue-600 hover:underline mr-2\"\n                        >\n                          Usar\n                        </button>\n                      )}\n                      {pasture.status === 'en_uso' && (\n                        <button\n                          onClick={() => handleFinalizePastureUse(pasture.id)}\n                          className=\"text-orange-600 hover:underline mr-2\"\n                        >\n                          Finalizar Uso\n                        </button>\n                      )}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ProductionControlPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
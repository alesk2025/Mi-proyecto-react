{"ast":null,"code":"import _objectSpread from\"C:/Users/User/Downloads/project (10)/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import jsPDF from'jspdf';import html2canvas from'html2canvas';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ReproductiveControlPage=_ref=>{let{animals,onUpdateAnimalProduction,onRegisterAnimal,onRegisterReproductiveEvent,onDeletePregnantCow,reproductiveRecords,setReproductiveRecords,currentUser,logoUrl}=_ref;const[reproductiveData,setReproductiveData]=useState({animalId:'',eventType:'',// 'diagnostico_prenez', 'parto', 'inseminacion', 'celo', 'monta_natural'\neventDate:'',details:'',semenId:'',// Para inseminacion\nsemenProvider:'',// Para inseminacion\nmachoId:'',// Para monta_natural\ncalfId:'',// Para parto\ncalfSex:'',// Para parto\ncalfWeight:'',// Para parto\ncalfObservations:'',// Para parto\ndiagnosisResult:'',// 'preñada', 'vacia'\nexpectedCalvingDate:''// Para diagnostico_prenez (fecha confirmada por veterinario)\n});const[filterAnimalId,setFilterAnimalId]=useState('');const[filterEventType,setFilterEventType]=useState('');// Estado para el calendario de partos\nconst[calvingSchedule,setCalvingSchedule]=useState([]);// Nuevo estado para el historial de montas naturales\nconst[naturalMatingHistory,setNaturalMatingHistory]=useState([]);// Estado para las notificaciones de partos próximos\nconst[upcomingCalvingNotifications,setUpcomingCalvingNotifications]=useState([]);// Estado para el modal de registro de ternero\nconst[showCalfModal,setShowCalfModal]=useState(false);const[currentCalvingAnimal,setCurrentCalvingAnimal]=useState(null);const[calfData,setCalfData]=useState({calfId:'',calfSex:'',calfWeight:'',calfObservations:''});// Cargar y guardar datos del calendario de partos y montas naturales en localStorage\nuseEffect(()=>{const storedCalvingSchedule=JSON.parse(localStorage.getItem('calvingSchedule'))||[];setCalvingSchedule(storedCalvingSchedule);const storedNaturalMatingHistory=JSON.parse(localStorage.getItem('naturalMatingHistory'))||[];setNaturalMatingHistory(storedNaturalMatingHistory);},[]);useEffect(()=>{localStorage.setItem('calvingSchedule',JSON.stringify(calvingSchedule));},[calvingSchedule]);useEffect(()=>{localStorage.setItem('naturalMatingHistory',JSON.stringify(naturalMatingHistory));},[naturalMatingHistory]);// Efecto para generar notificaciones de partos próximos\nuseEffect(()=>{const today=new Date();const notifications=[];calvingSchedule.forEach(item=>{const calvingDate=new Date(item.expectedCalvingDate);const daysRemaining=Math.ceil((calvingDate-today)/(1000*60*60*24));// Notificar si faltan 30 días o menos, o si ya está vencido\nif(daysRemaining<=30&&daysRemaining>=0){notifications.push({id:item.id,animalId:item.animalId,message:\"\\xA1Atenci\\xF3n! El parto de \".concat(getAnimalName(item.animalId),\" (\").concat(item.animalId,\") est\\xE1 programado para el \").concat(item.expectedCalvingDate,\". Faltan \").concat(daysRemaining,\" d\\xEDas.\"),type:'warning'});}else if(daysRemaining<0){notifications.push({id:item.id,animalId:item.animalId,message:\"\\xA1Alerta! El parto de \".concat(getAnimalName(item.animalId),\" (\").concat(item.animalId,\") estaba programado para el \").concat(item.expectedCalvingDate,\" y est\\xE1 VENCIDO por \").concat(Math.abs(daysRemaining),\" d\\xEDas.\"),type:'danger'});}});setUpcomingCalvingNotifications(notifications);},[calvingSchedule,animals]);// Dependencia de animals para getAnimalName\n// Función para calcular la fecha probable de parto (283 días después de la inseminación/diagnóstico)\n// Esta función ahora es más una guía, la fecha final la da el veterinario en el diagnóstico\nconst calculateEstimatedCalvingDate=eventDate=>{if(!eventDate)return'';const date=new Date(eventDate);date.setDate(date.getDate()+283);// Gestación promedio de bovinos\nreturn date.toISOString().split('T')[0];};// Manejador de cambios en el formulario\nconst handleInputChange=e=>{const{name,value}=e.target;setReproductiveData(prev=>{const newData=_objectSpread(_objectSpread({},prev),{},{[name]:value});// Si el evento es diagnóstico de preñez y se ingresa la fecha probable de parto, usar esa\nif(name==='expectedCalvingDate'&&newData.eventType==='diagnostico_prenez'&&newData.diagnosisResult==='preñada'){// No recalcular, usar el valor ingresado por el usuario\n}else if(name==='eventDate'&&(newData.eventType==='inseminacion'||newData.eventType==='monta_natural')){// Estimar fecha de parto para inseminación o monta natural\nnewData.expectedCalvingDate=calculateEstimatedCalvingDate(value);}return newData;});};// Manejador para el envío del formulario\nconst handleSubmit=async()=>{const{animalId,eventType,eventDate,diagnosisResult,expectedCalvingDate,calfId,calfSex,calfWeight,calfObservations}=reproductiveData;if(!animalId||!eventType||!eventDate){alert('Por favor, completa los campos obligatorios.');return;}const newRecord={id:\"REP-\".concat(Date.now().toString().slice(-5)),animalId,eventType,eventDate,details:reproductiveData.details,semenId:reproductiveData.semenId,semenProvider:reproductiveData.semenProvider,machoId:reproductiveData.machoId,diagnosisResult:reproductiveData.diagnosisResult,expectedCalvingDate:reproductiveData.expectedCalvingDate,calfId:reproductiveData.calfId,calfSex:reproductiveData.calfSex,calfWeight:reproductiveData.calfWeight,calfObservations:reproductiveData.calfObservations};onRegisterReproductiveEvent(newRecord);alert(\"Evento reproductivo de \".concat(eventType,\" registrado para \").concat(animalId,\".\"));// Lógica específica para cada tipo de evento\nif(eventType==='diagnostico_prenez'&&diagnosisResult==='preñada'){// Actualizar estado reproductivo del animal a 'preñada'\n// Calcular días restantes para determinar si entra en seca\nconst today=new Date();const calvingDate=new Date(expectedCalvingDate);const daysRemaining=Math.ceil((calvingDate-today)/(1000*60*60*24));let newReproductiveState='preñada';if(daysRemaining<=100){// Si quedan 100 días o menos, entra en seca\nnewReproductiveState='seca';}onUpdateAnimalProduction(animalId,{estadoReproductivo:newReproductiveState,fechaUltimaGestacion:eventDate});// Añadir al calendario de partos\n// Asegurarse de que no se dupliquen entradas para el mismo animal si ya está preñada\nsetCalvingSchedule(prev=>{const existingIndex=prev.findIndex(item=>item.animalId===animalId);if(existingIndex>-1){// Si ya existe, actualizar la entrada\nconst updatedSchedule=[...prev];updatedSchedule[existingIndex]={animalId,diagnosisDate:eventDate,expectedCalvingDate,id:newRecord.id};return updatedSchedule;}else{// Si no existe, añadir nueva entrada\nreturn[...prev,{animalId,diagnosisDate:eventDate,expectedCalvingDate,id:newRecord.id}];}});alert(\"Animal \".concat(animalId,\" marcado como \").concat(newReproductiveState,\". Fecha probable de parto: \").concat(expectedCalvingDate));}else if(eventType==='parto'){// Actualizar estado reproductivo del animal a 'en_produccion'\nonUpdateAnimalProduction(animalId,{estadoReproductivo:'en_produccion',fechaUltimaGestacion:eventDate});// Eliminar del calendario de partos\nsetCalvingSchedule(prev=>prev.filter(item=>item.animalId!==animalId));alert(\"Parto registrado para \".concat(animalId,\". Animal ahora en producci\\xF3n.\"));// Registrar ternero si se proporciona ID\nif(calfId&&calfSex&&calfWeight){var _animals$find,_animals$find2;const newCalf={id:calfId,name:\"Ternero de \".concat(animalId),raza:((_animals$find=animals.find(a=>a.id===animalId))===null||_animals$find===void 0?void 0:_animals$find.raza)||'Desconocida',peso:calfWeight,sexo:calfSex,fechaNacimiento:eventDate,fechaCompra:eventDate,// Se considera fecha de \"compra\" como nacimiento\ntipoProduccion:'carne',// Por defecto para terneros\ndailyMilk:0,idpadre:((_animals$find2=animals.find(a=>a.id===animalId))===null||_animals$find2===void 0?void 0:_animals$find2.idpadre)||'',// Asumiendo que la madre es la que parió\nidmadre:animalId,estadoReproductivo:'desarrollo'};onRegisterAnimal(newCalf);alert(\"Ternero \".concat(calfId,\" registrado.\"));}}else if(eventType==='inseminacion'){onUpdateAnimalProduction(animalId,{estadoReproductivo:'inseminada',fechaUltimaInseminacion:eventDate});}else if(eventType==='monta_natural'){onUpdateAnimalProduction(animalId,{estadoReproductivo:'monta_natural',fechaUltimaMonta:eventDate});setNaturalMatingHistory(prev=>[...prev,{id:newRecord.id,animalId:newRecord.animalId,machoId:newRecord.machoId,eventDate:newRecord.eventDate,details:newRecord.details}]);}else if(eventType==='celo'){onUpdateAnimalProduction(animalId,{estadoReproductivo:'en_celo',fechaUltimoCelo:eventDate});}// Limpiar formulario\nsetReproductiveData({animalId:'',eventType:'',eventDate:'',details:'',semenId:'',semenProvider:'',machoId:'',calfId:'',calfSex:'',calfWeight:'',calfObservations:'',diagnosisResult:'',expectedCalvingDate:''});};// Manejador para abrir el modal de registro de ternero\nconst handleMarkCalving=animalId=>{setCurrentCalvingAnimal(animalId);setShowCalfModal(true);// Limpiar datos del ternero para el nuevo registro\nsetCalfData({calfId:'',calfSex:'',calfWeight:'',calfObservations:''});};// Manejador para el cambio de datos del ternero en el modal\nconst handleCalfDataChange=e=>{const{name,value}=e.target;setCalfData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};// Manejador para el envío del formulario del ternero\nconst handleCalfSubmit=()=>{var _animals$find3,_animals$find4;const{calfId,calfSex,calfWeight,calfObservations}=calfData;const animalId=currentCalvingAnimal;const eventDate=new Date().toISOString().split('T')[0];// Fecha actual del parto\nif(!animalId||!calfId||!calfSex||!calfWeight){alert('Por favor, completa todos los campos del ternero.');return;}// Registrar el evento de parto en el historial reproductivo\nconst newPartoRecord={id:\"REP-\".concat(Date.now().toString().slice(-5)),animalId,eventType:'parto',eventDate,details:\"Parto registrado. Ternero ID: \".concat(calfId,\", Sexo: \").concat(calfSex,\", Peso: \").concat(calfWeight,\" kg.\"),calfId,calfSex,calfWeight,calfObservations};onRegisterReproductiveEvent(newPartoRecord);// Actualizar estado reproductivo del animal a 'en_produccion'\nonUpdateAnimalProduction(animalId,{estadoReproductivo:'en_produccion',fechaUltimaGestacion:eventDate});// Eliminar del calendario de partos\nsetCalvingSchedule(prev=>prev.filter(item=>item.animalId!==animalId));alert(\"Parto registrado para \".concat(animalId,\". Animal ahora en producci\\xF3n.\"));// Registrar ternero\nconst newCalf={id:calfId,name:\"Ternero de \".concat(getAnimalName(animalId)),raza:((_animals$find3=animals.find(a=>a.id===animalId))===null||_animals$find3===void 0?void 0:_animals$find3.raza)||'Desconocida',peso:calfWeight,sexo:calfSex,fechaNacimiento:eventDate,fechaCompra:eventDate,// Se considera fecha de \"compra\" como nacimiento\ntipoProduccion:'carne',// Por defecto para terneros\ndailyMilk:0,idpadre:((_animals$find4=animals.find(a=>a.id===animalId))===null||_animals$find4===void 0?void 0:_animals$find4.idpadre)||'',// Asumiendo que la madre es la que parió\nidmadre:animalId,estadoReproductivo:'desarrollo'};onRegisterAnimal(newCalf);alert(\"Ternero \".concat(calfId,\" registrado.\"));setShowCalfModal(false);setCurrentCalvingAnimal(null);};// Filtrar registros reproductivos\nconst filteredRecords=reproductiveRecords.filter(record=>{const matchesAnimal=filterAnimalId===''||record.animalId===filterAnimalId;const matchesEventType=filterEventType===''||record.eventType===filterEventType;return matchesAnimal&&matchesEventType;});// Funciones auxiliares para obtener nombres\nconst getAnimalName=animalId=>{const animal=animals.find(a=>a.id===animalId);return animal?animal.name:'Desconocido';};// Función para generar PDF del calendario de partos\nconst handleGenerateCalvingSchedulePDF=useCallback(()=>{if(calvingSchedule.length===0){alert('No hay partos programados para generar el PDF.');return;}const farmName=(currentUser===null||currentUser===void 0?void 0:currentUser.farmName)||'Mi Finca Ganadera';const adminName=(currentUser===null||currentUser===void 0?void 0:currentUser.fullName)||'Administrador';const defaultLogo='https://via.placeholder.com/60x60?text=LOGO';const tempDiv=document.createElement('div');tempDiv.style.width='210mm';tempDiv.style.padding='15mm';tempDiv.style.fontFamily='Arial, sans-serif';tempDiv.style.fontSize='10pt';tempDiv.style.backgroundColor='#f8f8f8';tempDiv.style.position='absolute';tempDiv.style.left='-9999px';tempDiv.style.top='-9999px';let tableRows=calvingSchedule.map(item=>{const daysRemaining=Math.ceil((new Date(item.expectedCalvingDate)-new Date())/(1000*60*60*24));const isOverdue=daysRemaining<0;const daysText=isOverdue?\"VENCIDO (\".concat(Math.abs(daysRemaining),\" d\\xEDas)\"):\"\".concat(daysRemaining,\" d\\xEDas\");const daysColor=isOverdue?'red':'black';// Color para los días restantes\nreturn\"\\n        <tr style=\\\"border-bottom: 1px solid #eee;\\\">\\n          <td style=\\\"padding: 8px 12px;\\\">\".concat(getAnimalName(item.animalId),\" (\").concat(item.animalId,\")</td>\\n          <td style=\\\"padding: 8px 12px;\\\">\").concat(item.diagnosisDate,\"</td>\\n          <td style=\\\"padding: 8px 12px;\\\">\").concat(item.expectedCalvingDate,\"</td>\\n          <td style=\\\"padding: 8px 12px;\\\"><span style=\\\"font-weight: bold; color: \").concat(daysColor,\";\\\">\").concat(daysText,\"</span></td>\\n        </tr>\\n      \");}).join('');tempDiv.innerHTML=\"\\n      <div style=\\\"border: 1px solid #ddd; border-radius: 12px; overflow: hidden; background-color: #fff; box-shadow: 0 4px 8px rgba(0,0,0,0.1);\\\">\\n        <div style=\\\"background-color: #2c3e50; color: #fff; padding: 20px; display: flex; justify-content: space-between; align-items: center; border-top-left-radius: 10px; border-top-right-radius: 10px;\\\">\\n          <img src=\\\"\".concat(logoUrl||defaultLogo,\"\\\" style=\\\"width: 60px; height: 60px; border-radius: 50%; object-fit: cover;\\\" alt=\\\"Logo Finca\\\">\\n          <div style=\\\"text-align: right;\\\">\\n            <h1 style=\\\"margin: 0; font-size: 20pt; font-weight: bold;\\\">\").concat(farmName,\"</h1>\\n            <p style=\\\"margin: 0; font-size: 10pt; opacity: 0.8;\\\">Calendario de Partos</p>\\n          </div>\\n        </div>\\n\\n        <div style=\\\"padding: 25px;\\\">\\n          <h3 style=\\\"font-size: 16pt; margin-bottom: 20px; text-align: center; color: #333;\\\">Pr\\xF3ximos Partos Programados</h3>\\n          <table style=\\\"width: 100%; border-collapse: collapse; margin-bottom: 30px;\\\">\\n            <thead style=\\\"background-color: #f0f0f0;\\\">\\n              <tr>\\n                <th style=\\\"padding: 10px 12px; text-align: left; border: 1px solid #eee;\\\">Animal</th>\\n                <th style=\\\"padding: 10px 12px; text-align: left; border: 1px solid #eee;\\\">Fecha Diagn\\xF3stico Pre\\xF1ez</th>\\n                <th style=\\\"padding: 10px 12px; text-align: left; border: 1px solid #eee;\\\">Fecha Probable de Parto</th>\\n                <th style=\\\"padding: 10px 12px; text-align: left; border: 1px solid #eee;\\\">D\\xEDas Restantes</th>\\n              </tr>\\n            </thead>\\n            <tbody>\\n              \").concat(tableRows,\"\\n            </tbody>\\n          </table>\\n        </div>\\n\\n        <div style=\\\"text-align: right; font-size: 8pt; padding: 10px 20px; color: #aaa; background-color: #f8f8f8; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;\\\">\\n          <p style=\\\"margin: 0;\\\">Generado por Campo Inteligente | Administrador: \").concat(adminName,\"</p>\\n          <p style=\\\"margin: 0;\\\">Fecha de Generaci\\xF3n: \").concat(new Date().toLocaleDateString(),\"</p>\\n        </div>\\n      </div>\\n    \");document.body.appendChild(tempDiv);html2canvas(tempDiv,{scale:2,useCORS:true}).then(canvas=>{const imgData=canvas.toDataURL('image/png');const pdf=new jsPDF('p','mm','a4');const imgWidth=210;const pageHeight=297;const imgHeight=canvas.height*imgWidth/canvas.width;let heightLeft=imgHeight;let position=0;pdf.addImage(imgData,'PNG',0,position,imgWidth,imgHeight);heightLeft-=pageHeight;while(heightLeft>0){position=heightLeft-pageHeight;pdf.addPage();pdf.addImage(imgData,'PNG',0,position,imgWidth,imgHeight);heightLeft-=pageHeight;}pdf.save(\"calendario_partos_\".concat(new Date().toISOString().split('T')[0],\".pdf\"));document.body.removeChild(tempDiv);});},[calvingSchedule,currentUser,logoUrl,animals]);// Dependencias para useCallback\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-4\",children:\"Control Reproductivo\"}),upcomingCalvingNotifications.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8 p-4 border rounded-lg bg-yellow-100 border-yellow-400 text-yellow-800\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold mb-3\",children:\"Notificaciones de Partos Pr\\xF3ximos\"}),upcomingCalvingNotifications.map(notification=>/*#__PURE__*/_jsx(\"div\",{className:\"p-3 mb-2 rounded-lg \".concat(notification.type==='warning'?'bg-yellow-200':'bg-red-200',\" text-sm\"),children:notification.message},notification.id))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8 p-4 border rounded-lg bg-gray-50\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold mb-3\",children:\"Registrar Evento Reproductivo\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"select\",{name:\"animalId\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:reproductiveData.animalId,onChange:handleInputChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecciona Animal\"}),animals.map(animal=>/*#__PURE__*/_jsxs(\"option\",{value:animal.id,children:[animal.name,\" (\",animal.id,\")\"]},animal.id))]}),/*#__PURE__*/_jsxs(\"select\",{name:\"eventType\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:reproductiveData.eventType,onChange:handleInputChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecciona Tipo de Evento\"}),/*#__PURE__*/_jsx(\"option\",{value:\"diagnostico_prenez\",children:\"Diagn\\xF3stico de Pre\\xF1ez\"}),/*#__PURE__*/_jsx(\"option\",{value:\"parto\",children:\"Parto\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inseminacion\",children:\"Inseminaci\\xF3n\"}),/*#__PURE__*/_jsx(\"option\",{value:\"celo\",children:\"Celo\"}),/*#__PURE__*/_jsx(\"option\",{value:\"monta_natural\",children:\"Monta Natural\"}),\" \"]}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"eventDate\",placeholder:\"Fecha del Evento\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:reproductiveData.eventDate,onChange:handleInputChange}),reproductiveData.eventType==='diagnostico_prenez'&&/*#__PURE__*/_jsxs(\"select\",{name:\"diagnosisResult\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:reproductiveData.diagnosisResult,onChange:handleInputChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Resultado del Diagn\\xF3stico\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pre\\xF1ada\",children:\"Pre\\xF1ada\"}),/*#__PURE__*/_jsx(\"option\",{value:\"vacia\",children:\"Vac\\xEDa\"})]}),reproductiveData.eventType==='diagnostico_prenez'&&reproductiveData.diagnosisResult==='preñada'&&/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"expectedCalvingDate\",placeholder:\"Fecha Probable de Parto (Confirmada)\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:reproductiveData.expectedCalvingDate,onChange:handleInputChange,required:true// Hacerlo requerido si se confirma preñez\n}),reproductiveData.eventType==='monta_natural'&&/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"machoId\",placeholder:\"ID del Macho (Monta Natural)\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:reproductiveData.machoId,onChange:handleInputChange}),reproductiveData.eventType==='inseminacion'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"semenId\",placeholder:\"ID de Semen\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:reproductiveData.semenId,onChange:handleInputChange}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"semenProvider\",placeholder:\"Proveedor de Semen\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:reproductiveData.semenProvider,onChange:handleInputChange})]}),reproductiveData.eventType==='parto'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"calfId\",placeholder:\"ID del Ternero (si aplica)\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:reproductiveData.calfId,onChange:handleInputChange}),/*#__PURE__*/_jsxs(\"select\",{name:\"calfSex\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:reproductiveData.calfSex,onChange:handleInputChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Sexo del Ternero\"}),/*#__PURE__*/_jsx(\"option\",{value:\"macho\",children:\"Macho\"}),/*#__PURE__*/_jsx(\"option\",{value:\"hembra\",children:\"Hembra\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"calfWeight\",placeholder:\"Peso del Ternero (kg)\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:reproductiveData.calfWeight,onChange:handleInputChange}),/*#__PURE__*/_jsx(\"textarea\",{name:\"calfObservations\",placeholder:\"Observaciones del Ternero\",rows:\"2\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black resize-none\",value:reproductiveData.calfObservations,onChange:handleInputChange})]}),/*#__PURE__*/_jsx(\"textarea\",{name:\"details\",placeholder:\"Detalles adicionales del evento\",rows:\"2\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black resize-none col-span-full\",value:reproductiveData.details,onChange:handleInputChange})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,className:\"mt-4 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors\",children:\"Registrar Evento\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8 p-4 border rounded-lg bg-gray-50\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold mb-3\",children:\"Historial de Eventos Reproductivos\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Filtrar por ID Animal\",className:\"w-full px-4 py-2 border rounded-lg\",value:filterAnimalId,onChange:e=>setFilterAnimalId(e.target.value)}),/*#__PURE__*/_jsxs(\"select\",{className:\"w-full px-4 py-2 border rounded-lg\",value:filterEventType,onChange:e=>setFilterEventType(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Todos los Eventos\"}),/*#__PURE__*/_jsx(\"option\",{value:\"diagnostico_prenez\",children:\"Diagn\\xF3stico de Pre\\xF1ez\"}),/*#__PURE__*/_jsx(\"option\",{value:\"parto\",children:\"Parto\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inseminacion\",children:\"Inseminaci\\xF3n\"}),/*#__PURE__*/_jsx(\"option\",{value:\"celo\",children:\"Celo\"}),/*#__PURE__*/_jsx(\"option\",{value:\"monta_natural\",children:\"Monta Natural\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full bg-white border\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"ID Animal\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Tipo de Evento\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Fecha\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Detalles\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredRecords.map(record=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"td\",{className:\"py-2 px-4 border\",children:[getAnimalName(record.animalId),\" (\",record.animalId,\")\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border\",children:record.eventType?record.eventType.replace(/_/g,' '):'N/A'}),\" \",/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border\",children:record.eventDate}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border\",children:record.details||record.diagnosisResult||record.calfId||record.semenId||record.machoId||'N/A'}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setReproductiveRecords(reproductiveRecords.filter(r=>r.id!==record.id)),className:\"text-red-600 hover:underline\",children:\"Eliminar\"})})]},record.id))})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8 p-4 border rounded-lg bg-gray-50\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold mb-3\",children:\"Historial de Montas Naturales\"}),naturalMatingHistory.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-center\",children:\"No hay montas naturales registradas a\\xFAn.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full bg-white border\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"ID Hembra\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"ID Macho\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Fecha de Monta\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Detalles\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:naturalMatingHistory.map(record=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"td\",{className:\"py-2 px-4 border\",children:[getAnimalName(record.animalId),\" (\",record.animalId,\")\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"py-2 px-4 border\",children:[getAnimalName(record.machoId),\" (\",record.machoId,\")\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border\",children:record.eventDate}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border\",children:record.details||'N/A'}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setNaturalMatingHistory(naturalMatingHistory.filter(r=>r.id!==record.id)),className:\"text-red-600 hover:underline\",children:\"Eliminar\"})})]},record.id))})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8 p-4 border rounded-lg bg-blue-50\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold mb-3\",children:\"Calendario de Partos\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleGenerateCalvingSchedulePDF,className:\"mb-4 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors\",children:\"Descargar Calendario PDF\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full bg-white border\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Animal\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Fecha Diagn\\xF3stico Pre\\xF1ez\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Fecha Probable de Parto\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"D\\xEDas Restantes\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:calvingSchedule.map(item=>{const daysRemaining=Math.ceil((new Date(item.expectedCalvingDate)-new Date())/(1000*60*60*24));const isOverdue=daysRemaining<0;return/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50 \".concat(isOverdue?'bg-red-100':''),children:[/*#__PURE__*/_jsxs(\"td\",{className:\"py-2 px-4 border\",children:[getAnimalName(item.animalId),\" (\",item.animalId,\")\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border\",children:item.diagnosisDate}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border\",children:item.expectedCalvingDate}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border\",children:isOverdue?/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold text-red-600\",children:[\"VENCIDO (\",Math.abs(daysRemaining),\" d\\xEDas)\"]}):\"\".concat(daysRemaining,\" d\\xEDas\")}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleMarkCalving(item.animalId),className:\"text-orange-600 hover:underline\",children:\"Marcar Parto\"})})]},item.id);})})]})})]}),showCalfModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-xl w-full max-w-md\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-lg font-semibold mb-4\",children:[\"Registrar Ternero para \",getAnimalName(currentCalvingAnimal)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"calfId\",placeholder:\"ID del Ternero\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:calfData.calfId,onChange:handleCalfDataChange,required:true}),/*#__PURE__*/_jsxs(\"select\",{name:\"calfSex\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:calfData.calfSex,onChange:handleCalfDataChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Sexo del Ternero\"}),/*#__PURE__*/_jsx(\"option\",{value:\"macho\",children:\"Macho\"}),/*#__PURE__*/_jsx(\"option\",{value:\"hembra\",children:\"Hembra\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"calfWeight\",placeholder:\"Peso del Ternero (kg)\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:calfData.calfWeight,onChange:handleCalfDataChange,required:true}),/*#__PURE__*/_jsx(\"textarea\",{name:\"calfObservations\",placeholder:\"Observaciones del Ternero\",rows:\"2\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black resize-none\",value:calfData.calfObservations,onChange:handleCalfDataChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 flex justify-end space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCalfModal(false),className:\"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors\",children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCalfSubmit,className:\"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors\",children:\"Registrar Ternero\"})]})]})})]});};export default ReproductiveControlPage;","map":{"version":3,"names":["React","useState","useEffect","useCallback","jsPDF","html2canvas","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ReproductiveControlPage","_ref","animals","onUpdateAnimalProduction","onRegisterAnimal","onRegisterReproductiveEvent","onDeletePregnantCow","reproductiveRecords","setReproductiveRecords","currentUser","logoUrl","reproductiveData","setReproductiveData","animalId","eventType","eventDate","details","semenId","semenProvider","machoId","calfId","calfSex","calfWeight","calfObservations","diagnosisResult","expectedCalvingDate","filterAnimalId","setFilterAnimalId","filterEventType","setFilterEventType","calvingSchedule","setCalvingSchedule","naturalMatingHistory","setNaturalMatingHistory","upcomingCalvingNotifications","setUpcomingCalvingNotifications","showCalfModal","setShowCalfModal","currentCalvingAnimal","setCurrentCalvingAnimal","calfData","setCalfData","storedCalvingSchedule","JSON","parse","localStorage","getItem","storedNaturalMatingHistory","setItem","stringify","today","Date","notifications","forEach","item","calvingDate","daysRemaining","Math","ceil","push","id","message","concat","getAnimalName","type","abs","calculateEstimatedCalvingDate","date","setDate","getDate","toISOString","split","handleInputChange","e","name","value","target","prev","newData","_objectSpread","handleSubmit","alert","newRecord","now","toString","slice","newReproductiveState","estadoReproductivo","fechaUltimaGestacion","existingIndex","findIndex","updatedSchedule","diagnosisDate","filter","_animals$find","_animals$find2","newCalf","raza","find","a","peso","sexo","fechaNacimiento","fechaCompra","tipoProduccion","dailyMilk","idpadre","idmadre","fechaUltimaInseminacion","fechaUltimaMonta","fechaUltimoCelo","handleMarkCalving","handleCalfDataChange","handleCalfSubmit","_animals$find3","_animals$find4","newPartoRecord","filteredRecords","record","matchesAnimal","matchesEventType","animal","handleGenerateCalvingSchedulePDF","length","farmName","adminName","fullName","defaultLogo","tempDiv","document","createElement","style","width","padding","fontFamily","fontSize","backgroundColor","position","left","top","tableRows","map","isOverdue","daysText","daysColor","join","innerHTML","toLocaleDateString","body","appendChild","scale","useCORS","then","canvas","imgData","toDataURL","pdf","imgWidth","pageHeight","imgHeight","height","heightLeft","addImage","addPage","save","removeChild","className","children","notification","onChange","placeholder","required","rows","onClick","replace","r"],"sources":["C:/Users/User/Downloads/project (10)/src/components/ReproductiveControlPage.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\n\nconst ReproductiveControlPage = ({ animals, onUpdateAnimalProduction, onRegisterAnimal, onRegisterReproductiveEvent, onDeletePregnantCow, reproductiveRecords, setReproductiveRecords, currentUser, logoUrl }) => {\n  const [reproductiveData, setReproductiveData] = useState({\n    animalId: '',\n    eventType: '', // 'diagnostico_prenez', 'parto', 'inseminacion', 'celo', 'monta_natural'\n    eventDate: '',\n    details: '',\n    semenId: '', // Para inseminacion\n    semenProvider: '', // Para inseminacion\n    machoId: '', // Para monta_natural\n    calfId: '', // Para parto\n    calfSex: '', // Para parto\n    calfWeight: '', // Para parto\n    calfObservations: '', // Para parto\n    diagnosisResult: '', // 'preñada', 'vacia'\n    expectedCalvingDate: '', // Para diagnostico_prenez (fecha confirmada por veterinario)\n  });\n\n  const [filterAnimalId, setFilterAnimalId] = useState('');\n  const [filterEventType, setFilterEventType] = useState('');\n\n  // Estado para el calendario de partos\n  const [calvingSchedule, setCalvingSchedule] = useState([]);\n  // Nuevo estado para el historial de montas naturales\n  const [naturalMatingHistory, setNaturalMatingHistory] = useState([]);\n  // Estado para las notificaciones de partos próximos\n  const [upcomingCalvingNotifications, setUpcomingCalvingNotifications] = useState([]);\n\n  // Estado para el modal de registro de ternero\n  const [showCalfModal, setShowCalfModal] = useState(false);\n  const [currentCalvingAnimal, setCurrentCalvingAnimal] = useState(null);\n  const [calfData, setCalfData] = useState({\n    calfId: '',\n    calfSex: '',\n    calfWeight: '',\n    calfObservations: '',\n  });\n\n  // Cargar y guardar datos del calendario de partos y montas naturales en localStorage\n  useEffect(() => {\n    const storedCalvingSchedule = JSON.parse(localStorage.getItem('calvingSchedule')) || [];\n    setCalvingSchedule(storedCalvingSchedule);\n    const storedNaturalMatingHistory = JSON.parse(localStorage.getItem('naturalMatingHistory')) || [];\n    setNaturalMatingHistory(storedNaturalMatingHistory);\n  }, []);\n\n  useEffect(() => {\n    localStorage.setItem('calvingSchedule', JSON.stringify(calvingSchedule));\n  }, [calvingSchedule]);\n\n  useEffect(() => {\n    localStorage.setItem('naturalMatingHistory', JSON.stringify(naturalMatingHistory));\n  }, [naturalMatingHistory]);\n\n  // Efecto para generar notificaciones de partos próximos\n  useEffect(() => {\n    const today = new Date();\n    const notifications = [];\n    calvingSchedule.forEach(item => {\n      const calvingDate = new Date(item.expectedCalvingDate);\n      const daysRemaining = Math.ceil((calvingDate - today) / (1000 * 60 * 60 * 24));\n\n      // Notificar si faltan 30 días o menos, o si ya está vencido\n      if (daysRemaining <= 30 && daysRemaining >= 0) {\n        notifications.push({\n          id: item.id,\n          animalId: item.animalId,\n          message: `¡Atención! El parto de ${getAnimalName(item.animalId)} (${item.animalId}) está programado para el ${item.expectedCalvingDate}. Faltan ${daysRemaining} días.`,\n          type: 'warning',\n        });\n      } else if (daysRemaining < 0) {\n        notifications.push({\n          id: item.id,\n          animalId: item.animalId,\n          message: `¡Alerta! El parto de ${getAnimalName(item.animalId)} (${item.animalId}) estaba programado para el ${item.expectedCalvingDate} y está VENCIDO por ${Math.abs(daysRemaining)} días.`,\n          type: 'danger',\n        });\n      }\n    });\n    setUpcomingCalvingNotifications(notifications);\n  }, [calvingSchedule, animals]); // Dependencia de animals para getAnimalName\n\n  // Función para calcular la fecha probable de parto (283 días después de la inseminación/diagnóstico)\n  // Esta función ahora es más una guía, la fecha final la da el veterinario en el diagnóstico\n  const calculateEstimatedCalvingDate = (eventDate) => {\n    if (!eventDate) return '';\n    const date = new Date(eventDate);\n    date.setDate(date.getDate() + 283); // Gestación promedio de bovinos\n    return date.toISOString().split('T')[0];\n  };\n\n  // Manejador de cambios en el formulario\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setReproductiveData(prev => {\n      const newData = { ...prev, [name]: value };\n      // Si el evento es diagnóstico de preñez y se ingresa la fecha probable de parto, usar esa\n      if (name === 'expectedCalvingDate' && newData.eventType === 'diagnostico_prenez' && newData.diagnosisResult === 'preñada') {\n        // No recalcular, usar el valor ingresado por el usuario\n      } else if (name === 'eventDate' && (newData.eventType === 'inseminacion' || newData.eventType === 'monta_natural')) {\n        // Estimar fecha de parto para inseminación o monta natural\n        newData.expectedCalvingDate = calculateEstimatedCalvingDate(value);\n      }\n      return newData;\n    });\n  };\n\n  // Manejador para el envío del formulario\n  const handleSubmit = async () => {\n    const { animalId, eventType, eventDate, diagnosisResult, expectedCalvingDate, calfId, calfSex, calfWeight, calfObservations } = reproductiveData;\n\n    if (!animalId || !eventType || !eventDate) {\n      alert('Por favor, completa los campos obligatorios.');\n      return;\n    }\n\n    const newRecord = {\n      id: `REP-${Date.now().toString().slice(-5)}`,\n      animalId,\n      eventType,\n      eventDate,\n      details: reproductiveData.details,\n      semenId: reproductiveData.semenId,\n      semenProvider: reproductiveData.semenProvider,\n      machoId: reproductiveData.machoId,\n      diagnosisResult: reproductiveData.diagnosisResult,\n      expectedCalvingDate: reproductiveData.expectedCalvingDate,\n      calfId: reproductiveData.calfId,\n      calfSex: reproductiveData.calfSex,\n      calfWeight: reproductiveData.calfWeight,\n      calfObservations: reproductiveData.calfObservations,\n    };\n\n    onRegisterReproductiveEvent(newRecord);\n    alert(`Evento reproductivo de ${eventType} registrado para ${animalId}.`);\n\n    // Lógica específica para cada tipo de evento\n    if (eventType === 'diagnostico_prenez' && diagnosisResult === 'preñada') {\n      // Actualizar estado reproductivo del animal a 'preñada'\n      // Calcular días restantes para determinar si entra en seca\n      const today = new Date();\n      const calvingDate = new Date(expectedCalvingDate);\n      const daysRemaining = Math.ceil((calvingDate - today) / (1000 * 60 * 60 * 24));\n\n      let newReproductiveState = 'preñada';\n      if (daysRemaining <= 100) { // Si quedan 100 días o menos, entra en seca\n        newReproductiveState = 'seca';\n      }\n      \n      onUpdateAnimalProduction(animalId, { estadoReproductivo: newReproductiveState, fechaUltimaGestacion: eventDate });\n      \n      // Añadir al calendario de partos\n      // Asegurarse de que no se dupliquen entradas para el mismo animal si ya está preñada\n      setCalvingSchedule(prev => {\n        const existingIndex = prev.findIndex(item => item.animalId === animalId);\n        if (existingIndex > -1) {\n          // Si ya existe, actualizar la entrada\n          const updatedSchedule = [...prev];\n          updatedSchedule[existingIndex] = {\n            animalId,\n            diagnosisDate: eventDate,\n            expectedCalvingDate,\n            id: newRecord.id,\n          };\n          return updatedSchedule;\n        } else {\n          // Si no existe, añadir nueva entrada\n          return [...prev, {\n            animalId,\n            diagnosisDate: eventDate,\n            expectedCalvingDate,\n            id: newRecord.id,\n          }];\n        }\n      });\n      alert(`Animal ${animalId} marcado como ${newReproductiveState}. Fecha probable de parto: ${expectedCalvingDate}`);\n    } else if (eventType === 'parto') {\n      // Actualizar estado reproductivo del animal a 'en_produccion'\n      onUpdateAnimalProduction(animalId, { estadoReproductivo: 'en_produccion', fechaUltimaGestacion: eventDate });\n      // Eliminar del calendario de partos\n      setCalvingSchedule(prev => prev.filter(item => item.animalId !== animalId));\n      alert(`Parto registrado para ${animalId}. Animal ahora en producción.`);\n\n      // Registrar ternero si se proporciona ID\n      if (calfId && calfSex && calfWeight) {\n        const newCalf = {\n          id: calfId,\n          name: `Ternero de ${animalId}`,\n          raza: animals.find(a => a.id === animalId)?.raza || 'Desconocida',\n          peso: calfWeight,\n          sexo: calfSex,\n          fechaNacimiento: eventDate,\n          fechaCompra: eventDate, // Se considera fecha de \"compra\" como nacimiento\n          tipoProduccion: 'carne', // Por defecto para terneros\n          dailyMilk: 0,\n          idpadre: animals.find(a => a.id === animalId)?.idpadre || '', // Asumiendo que la madre es la que parió\n          idmadre: animalId,\n          estadoReproductivo: 'desarrollo',\n        };\n        onRegisterAnimal(newCalf);\n        alert(`Ternero ${calfId} registrado.`);\n      }\n    } else if (eventType === 'inseminacion') {\n      onUpdateAnimalProduction(animalId, { estadoReproductivo: 'inseminada', fechaUltimaInseminacion: eventDate });\n    } else if (eventType === 'monta_natural') {\n      onUpdateAnimalProduction(animalId, { estadoReproductivo: 'monta_natural', fechaUltimaMonta: eventDate });\n      setNaturalMatingHistory(prev => [...prev, {\n        id: newRecord.id,\n        animalId: newRecord.animalId,\n        machoId: newRecord.machoId,\n        eventDate: newRecord.eventDate,\n        details: newRecord.details,\n      }]);\n    } else if (eventType === 'celo') {\n      onUpdateAnimalProduction(animalId, { estadoReproductivo: 'en_celo', fechaUltimoCelo: eventDate });\n    }\n\n    // Limpiar formulario\n    setReproductiveData({\n      animalId: '', eventType: '', eventDate: '', details: '', semenId: '', semenProvider: '', machoId: '',\n      calfId: '', calfSex: '', calfWeight: '', calfObservations: '', diagnosisResult: '', expectedCalvingDate: '',\n    });\n  };\n\n  // Manejador para abrir el modal de registro de ternero\n  const handleMarkCalving = (animalId) => {\n    setCurrentCalvingAnimal(animalId);\n    setShowCalfModal(true);\n    // Limpiar datos del ternero para el nuevo registro\n    setCalfData({\n      calfId: '',\n      calfSex: '',\n      calfWeight: '',\n      calfObservations: '',\n    });\n  };\n\n  // Manejador para el cambio de datos del ternero en el modal\n  const handleCalfDataChange = (e) => {\n    const { name, value } = e.target;\n    setCalfData(prev => ({ ...prev, [name]: value }));\n  };\n\n  // Manejador para el envío del formulario del ternero\n  const handleCalfSubmit = () => {\n    const { calfId, calfSex, calfWeight, calfObservations } = calfData;\n    const animalId = currentCalvingAnimal;\n    const eventDate = new Date().toISOString().split('T')[0]; // Fecha actual del parto\n\n    if (!animalId || !calfId || !calfSex || !calfWeight) {\n      alert('Por favor, completa todos los campos del ternero.');\n      return;\n    }\n\n    // Registrar el evento de parto en el historial reproductivo\n    const newPartoRecord = {\n      id: `REP-${Date.now().toString().slice(-5)}`,\n      animalId,\n      eventType: 'parto',\n      eventDate,\n      details: `Parto registrado. Ternero ID: ${calfId}, Sexo: ${calfSex}, Peso: ${calfWeight} kg.`,\n      calfId,\n      calfSex,\n      calfWeight,\n      calfObservations,\n    };\n    onRegisterReproductiveEvent(newPartoRecord);\n\n    // Actualizar estado reproductivo del animal a 'en_produccion'\n    onUpdateAnimalProduction(animalId, { estadoReproductivo: 'en_produccion', fechaUltimaGestacion: eventDate });\n    // Eliminar del calendario de partos\n    setCalvingSchedule(prev => prev.filter(item => item.animalId !== animalId));\n    alert(`Parto registrado para ${animalId}. Animal ahora en producción.`);\n\n    // Registrar ternero\n    const newCalf = {\n      id: calfId,\n      name: `Ternero de ${getAnimalName(animalId)}`,\n      raza: animals.find(a => a.id === animalId)?.raza || 'Desconocida',\n      peso: calfWeight,\n      sexo: calfSex,\n      fechaNacimiento: eventDate,\n      fechaCompra: eventDate, // Se considera fecha de \"compra\" como nacimiento\n      tipoProduccion: 'carne', // Por defecto para terneros\n      dailyMilk: 0,\n      idpadre: animals.find(a => a.id === animalId)?.idpadre || '', // Asumiendo que la madre es la que parió\n      idmadre: animalId,\n      estadoReproductivo: 'desarrollo',\n    };\n    onRegisterAnimal(newCalf);\n    alert(`Ternero ${calfId} registrado.`);\n\n    setShowCalfModal(false);\n    setCurrentCalvingAnimal(null);\n  };\n\n  // Filtrar registros reproductivos\n  const filteredRecords = reproductiveRecords.filter(record => {\n    const matchesAnimal = filterAnimalId === '' || record.animalId === filterAnimalId;\n    const matchesEventType = filterEventType === '' || record.eventType === filterEventType;\n    return matchesAnimal && matchesEventType;\n  });\n\n  // Funciones auxiliares para obtener nombres\n  const getAnimalName = (animalId) => {\n    const animal = animals.find(a => a.id === animalId);\n    return animal ? animal.name : 'Desconocido';\n  };\n\n  // Función para generar PDF del calendario de partos\n  const handleGenerateCalvingSchedulePDF = useCallback(() => {\n    if (calvingSchedule.length === 0) {\n      alert('No hay partos programados para generar el PDF.');\n      return;\n    }\n\n    const farmName = currentUser?.farmName || 'Mi Finca Ganadera';\n    const adminName = currentUser?.fullName || 'Administrador';\n    const defaultLogo = 'https://via.placeholder.com/60x60?text=LOGO';\n\n    const tempDiv = document.createElement('div');\n    tempDiv.style.width = '210mm';\n    tempDiv.style.padding = '15mm';\n    tempDiv.style.fontFamily = 'Arial, sans-serif';\n    tempDiv.style.fontSize = '10pt';\n    tempDiv.style.backgroundColor = '#f8f8f8';\n    tempDiv.style.position = 'absolute';\n    tempDiv.style.left = '-9999px';\n    tempDiv.style.top = '-9999px';\n\n    let tableRows = calvingSchedule.map(item => {\n      const daysRemaining = Math.ceil((new Date(item.expectedCalvingDate) - new Date()) / (1000 * 60 * 60 * 24));\n      const isOverdue = daysRemaining < 0;\n      const daysText = isOverdue ? `VENCIDO (${Math.abs(daysRemaining)} días)` : `${daysRemaining} días`;\n      const daysColor = isOverdue ? 'red' : 'black'; // Color para los días restantes\n\n      return `\n        <tr style=\"border-bottom: 1px solid #eee;\">\n          <td style=\"padding: 8px 12px;\">${getAnimalName(item.animalId)} (${item.animalId})</td>\n          <td style=\"padding: 8px 12px;\">${item.diagnosisDate}</td>\n          <td style=\"padding: 8px 12px;\">${item.expectedCalvingDate}</td>\n          <td style=\"padding: 8px 12px;\"><span style=\"font-weight: bold; color: ${daysColor};\">${daysText}</span></td>\n        </tr>\n      `;\n    }).join('');\n\n    tempDiv.innerHTML = `\n      <div style=\"border: 1px solid #ddd; border-radius: 12px; overflow: hidden; background-color: #fff; box-shadow: 0 4px 8px rgba(0,0,0,0.1);\">\n        <div style=\"background-color: #2c3e50; color: #fff; padding: 20px; display: flex; justify-content: space-between; align-items: center; border-top-left-radius: 10px; border-top-right-radius: 10px;\">\n          <img src=\"${logoUrl || defaultLogo}\" style=\"width: 60px; height: 60px; border-radius: 50%; object-fit: cover;\" alt=\"Logo Finca\">\n          <div style=\"text-align: right;\">\n            <h1 style=\"margin: 0; font-size: 20pt; font-weight: bold;\">${farmName}</h1>\n            <p style=\"margin: 0; font-size: 10pt; opacity: 0.8;\">Calendario de Partos</p>\n          </div>\n        </div>\n\n        <div style=\"padding: 25px;\">\n          <h3 style=\"font-size: 16pt; margin-bottom: 20px; text-align: center; color: #333;\">Próximos Partos Programados</h3>\n          <table style=\"width: 100%; border-collapse: collapse; margin-bottom: 30px;\">\n            <thead style=\"background-color: #f0f0f0;\">\n              <tr>\n                <th style=\"padding: 10px 12px; text-align: left; border: 1px solid #eee;\">Animal</th>\n                <th style=\"padding: 10px 12px; text-align: left; border: 1px solid #eee;\">Fecha Diagnóstico Preñez</th>\n                <th style=\"padding: 10px 12px; text-align: left; border: 1px solid #eee;\">Fecha Probable de Parto</th>\n                <th style=\"padding: 10px 12px; text-align: left; border: 1px solid #eee;\">Días Restantes</th>\n              </tr>\n            </thead>\n            <tbody>\n              ${tableRows}\n            </tbody>\n          </table>\n        </div>\n\n        <div style=\"text-align: right; font-size: 8pt; padding: 10px 20px; color: #aaa; background-color: #f8f8f8; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;\">\n          <p style=\"margin: 0;\">Generado por Campo Inteligente | Administrador: ${adminName}</p>\n          <p style=\"margin: 0;\">Fecha de Generación: ${new Date().toLocaleDateString()}</p>\n        </div>\n      </div>\n    `;\n\n    document.body.appendChild(tempDiv);\n\n    html2canvas(tempDiv, { scale: 2, useCORS: true }).then(canvas => {\n      const imgData = canvas.toDataURL('image/png');\n      const pdf = new jsPDF('p', 'mm', 'a4');\n      const imgWidth = 210;\n      const pageHeight = 297;\n      const imgHeight = canvas.height * imgWidth / canvas.width;\n      let heightLeft = imgHeight;\n      let position = 0;\n\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pageHeight;\n\n      while (heightLeft > 0) {\n        position = heightLeft - pageHeight;\n        pdf.addPage();\n        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n        heightLeft -= pageHeight;\n      }\n\n      pdf.save(`calendario_partos_${new Date().toISOString().split('T')[0]}.pdf`);\n      document.body.removeChild(tempDiv);\n    });\n  }, [calvingSchedule, currentUser, logoUrl, animals]); // Dependencias para useCallback\n\n  return (\n    <div className=\"bg-white p-6 rounded-lg shadow-md\">\n      <h3 className=\"text-xl font-semibold mb-4\">Control Reproductivo</h3>\n\n      {/* Sección de Notificaciones de Partos Próximos */}\n      {upcomingCalvingNotifications.length > 0 && (\n        <div className=\"mb-8 p-4 border rounded-lg bg-yellow-100 border-yellow-400 text-yellow-800\">\n          <h4 className=\"text-lg font-semibold mb-3\">Notificaciones de Partos Próximos</h4>\n          {upcomingCalvingNotifications.map(notification => (\n            <div key={notification.id} className={`p-3 mb-2 rounded-lg ${notification.type === 'warning' ? 'bg-yellow-200' : 'bg-red-200'} text-sm`}>\n              {notification.message}\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Sección de Registro de Eventos Reproductivos */}\n      <div className=\"mb-8 p-4 border rounded-lg bg-gray-50\">\n        <h4 className=\"text-lg font-semibold mb-3\">Registrar Evento Reproductivo</h4>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <select\n            name=\"animalId\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={reproductiveData.animalId}\n            onChange={handleInputChange}\n          >\n            <option value=\"\">Selecciona Animal</option>\n            {animals.map(animal => (\n              <option key={animal.id} value={animal.id}>{animal.name} ({animal.id})</option>\n            ))}\n          </select>\n          <select\n            name=\"eventType\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={reproductiveData.eventType}\n            onChange={handleInputChange}\n          >\n            <option value=\"\">Selecciona Tipo de Evento</option>\n            <option value=\"diagnostico_prenez\">Diagnóstico de Preñez</option>\n            <option value=\"parto\">Parto</option>\n            <option value=\"inseminacion\">Inseminación</option>\n            <option value=\"celo\">Celo</option>\n            <option value=\"monta_natural\">Monta Natural</option> {/* Nueva opción */}\n          </select>\n          <input\n            type=\"date\"\n            name=\"eventDate\"\n            placeholder=\"Fecha del Evento\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={reproductiveData.eventDate}\n            onChange={handleInputChange}\n          />\n          {reproductiveData.eventType === 'diagnostico_prenez' && (\n            <select\n              name=\"diagnosisResult\"\n              className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n              value={reproductiveData.diagnosisResult}\n              onChange={handleInputChange}\n            >\n              <option value=\"\">Resultado del Diagnóstico</option>\n              <option value=\"preñada\">Preñada</option>\n              <option value=\"vacia\">Vacía</option>\n            </select>\n          )}\n          {/* Campo para la fecha probable de parto (editable si es diagnóstico de preñez) */}\n          {(reproductiveData.eventType === 'diagnostico_prenez' && reproductiveData.diagnosisResult === 'preñada') && (\n            <input\n              type=\"date\"\n              name=\"expectedCalvingDate\"\n              placeholder=\"Fecha Probable de Parto (Confirmada)\"\n              className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n              value={reproductiveData.expectedCalvingDate}\n              onChange={handleInputChange}\n              required // Hacerlo requerido si se confirma preñez\n            />\n          )}\n          {/* Campo para ID de Macho en Monta Natural */}\n          {reproductiveData.eventType === 'monta_natural' && (\n            <input\n              type=\"text\"\n              name=\"machoId\"\n              placeholder=\"ID del Macho (Monta Natural)\"\n              className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n              value={reproductiveData.machoId}\n              onChange={handleInputChange}\n            />\n          )}\n          {reproductiveData.eventType === 'inseminacion' && (\n            <>\n              <input\n                type=\"text\"\n                name=\"semenId\"\n                placeholder=\"ID de Semen\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                value={reproductiveData.semenId}\n                onChange={handleInputChange}\n              />\n              <input\n                type=\"text\"\n                name=\"semenProvider\"\n                placeholder=\"Proveedor de Semen\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                value={reproductiveData.semenProvider}\n                onChange={handleInputChange}\n              />\n            </>\n          )}\n          {reproductiveData.eventType === 'parto' && (\n            <>\n              <input\n                type=\"text\"\n                name=\"calfId\"\n                placeholder=\"ID del Ternero (si aplica)\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                value={reproductiveData.calfId}\n                onChange={handleInputChange}\n              />\n              <select\n                name=\"calfSex\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                value={reproductiveData.calfSex}\n                onChange={handleInputChange}\n              >\n                <option value=\"\">Sexo del Ternero</option>\n                <option value=\"macho\">Macho</option>\n                <option value=\"hembra\">Hembra</option>\n              </select>\n              <input\n                type=\"number\"\n                name=\"calfWeight\"\n                placeholder=\"Peso del Ternero (kg)\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                value={reproductiveData.calfWeight}\n                onChange={handleInputChange}\n              />\n              <textarea\n                name=\"calfObservations\"\n                placeholder=\"Observaciones del Ternero\"\n                rows=\"2\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black resize-none\"\n                value={reproductiveData.calfObservations}\n                onChange={handleInputChange}\n              ></textarea>\n            </>\n          )}\n          <textarea\n            name=\"details\"\n            placeholder=\"Detalles adicionales del evento\"\n            rows=\"2\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black resize-none col-span-full\"\n            value={reproductiveData.details}\n            onChange={handleInputChange}\n          ></textarea>\n        </div>\n        <button\n          onClick={handleSubmit}\n          className=\"mt-4 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors\"\n        >\n          Registrar Evento\n        </button>\n      </div>\n\n      {/* Sección de Historial de Eventos Reproductivos */}\n      <div className=\"mb-8 p-4 border rounded-lg bg-gray-50\">\n        <h4 className=\"text-lg font-semibold mb-3\">Historial de Eventos Reproductivos</h4>\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n          <input\n            type=\"text\"\n            placeholder=\"Filtrar por ID Animal\"\n            className=\"w-full px-4 py-2 border rounded-lg\"\n            value={filterAnimalId}\n            onChange={(e) => setFilterAnimalId(e.target.value)}\n          />\n          <select\n            className=\"w-full px-4 py-2 border rounded-lg\"\n            value={filterEventType}\n            onChange={(e) => setFilterEventType(e.target.value)}\n          >\n            <option value=\"\">Todos los Eventos</option>\n            <option value=\"diagnostico_prenez\">Diagnóstico de Preñez</option>\n            <option value=\"parto\">Parto</option>\n            <option value=\"inseminacion\">Inseminación</option>\n            <option value=\"celo\">Celo</option>\n            <option value=\"monta_natural\">Monta Natural</option>\n          </select>\n        </div>\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full bg-white border\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"py-2 px-4 border\">ID Animal</th>\n                <th className=\"py-2 px-4 border\">Tipo de Evento</th>\n                <th className=\"py-2 px-4 border\">Fecha</th>\n                <th className=\"py-2 px-4 border\">Detalles</th>\n                <th className=\"py-2 px-4 border\">Acciones</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredRecords.map(record => (\n                <tr key={record.id} className=\"hover:bg-gray-50\">\n                  <td className=\"py-2 px-4 border\">{getAnimalName(record.animalId)} ({record.animalId})</td>\n                  <td className=\"py-2 px-4 border\">{record.eventType ? record.eventType.replace(/_/g, ' ') : 'N/A'}</td> {/* Manejo de undefined */}\n                  <td className=\"py-2 px-4 border\">{record.eventDate}</td>\n                  <td className=\"py-2 px-4 border\">{record.details || record.diagnosisResult || record.calfId || record.semenId || record.machoId || 'N/A'}</td>\n                  <td className=\"py-2 px-4 border\">\n                    <button\n                      onClick={() => setReproductiveRecords(reproductiveRecords.filter(r => r.id !== record.id))}\n                      className=\"text-red-600 hover:underline\"\n                    >\n                      Eliminar\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Sección de Historial de Montas Naturales */}\n      <div className=\"mb-8 p-4 border rounded-lg bg-gray-50\">\n        <h4 className=\"text-lg font-semibold mb-3\">Historial de Montas Naturales</h4>\n        {naturalMatingHistory.length === 0 ? (\n          <p className=\"text-gray-500 text-center\">No hay montas naturales registradas aún.</p>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full bg-white border\">\n              <thead>\n                <tr className=\"bg-gray-100\">\n                  <th className=\"py-2 px-4 border\">ID Hembra</th>\n                  <th className=\"py-2 px-4 border\">ID Macho</th>\n                  <th className=\"py-2 px-4 border\">Fecha de Monta</th>\n                  <th className=\"py-2 px-4 border\">Detalles</th>\n                  <th className=\"py-2 px-4 border\">Acciones</th>\n                </tr>\n              </thead>\n              <tbody>\n                {naturalMatingHistory.map(record => (\n                  <tr key={record.id} className=\"hover:bg-gray-50\">\n                    <td className=\"py-2 px-4 border\">{getAnimalName(record.animalId)} ({record.animalId})</td>\n                    <td className=\"py-2 px-4 border\">{getAnimalName(record.machoId)} ({record.machoId})</td>\n                    <td className=\"py-2 px-4 border\">{record.eventDate}</td>\n                    <td className=\"py-2 px-4 border\">{record.details || 'N/A'}</td>\n                    <td className=\"py-2 px-4 border\">\n                      <button\n                        onClick={() => setNaturalMatingHistory(naturalMatingHistory.filter(r => r.id !== record.id))}\n                        className=\"text-red-600 hover:underline\"\n                      >\n                        Eliminar\n                      </button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n\n      {/* Sección de Calendario de Partos */}\n      <div className=\"mb-8 p-4 border rounded-lg bg-blue-50\">\n        <h4 className=\"text-lg font-semibold mb-3\">Calendario de Partos</h4>\n        <button\n          onClick={handleGenerateCalvingSchedulePDF}\n          className=\"mb-4 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors\"\n        >\n          Descargar Calendario PDF\n        </button>\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full bg-white border\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"py-2 px-4 border\">Animal</th>\n                <th className=\"py-2 px-4 border\">Fecha Diagnóstico Preñez</th>\n                <th className=\"py-2 px-4 border\">Fecha Probable de Parto</th>\n                <th className=\"py-2 px-4 border\">Días Restantes</th>\n                <th className=\"py-2 px-4 border\">Acciones</th>\n              </tr>\n            </thead>\n            <tbody>\n              {calvingSchedule.map(item => {\n                const daysRemaining = Math.ceil((new Date(item.expectedCalvingDate) - new Date()) / (1000 * 60 * 60 * 24));\n                const isOverdue = daysRemaining < 0;\n                return (\n                  <tr key={item.id} className={`hover:bg-gray-50 ${isOverdue ? 'bg-red-100' : ''}`}>\n                    <td className=\"py-2 px-4 border\">{getAnimalName(item.animalId)} ({item.animalId})</td>\n                    <td className=\"py-2 px-4 border\">{item.diagnosisDate}</td>\n                    <td className=\"py-2 px-4 border\">{item.expectedCalvingDate}</td>\n                    <td className=\"py-2 px-4 border\">\n                      {isOverdue ? <span className=\"font-bold text-red-600\">VENCIDO ({Math.abs(daysRemaining)} días)</span> : `${daysRemaining} días`}\n                    </td>\n                    <td className=\"py-2 px-4 border\">\n                      <button\n                        onClick={() => handleMarkCalving(item.animalId)}\n                        className=\"text-orange-600 hover:underline\"\n                      >\n                        Marcar Parto\n                      </button>\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Modal para registrar ternero */}\n      {showCalfModal && (\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50\">\n          <div className=\"bg-white p-6 rounded-lg shadow-xl w-full max-w-md\">\n            <h4 className=\"text-lg font-semibold mb-4\">Registrar Ternero para {getAnimalName(currentCalvingAnimal)}</h4>\n            <div className=\"grid grid-cols-1 gap-4\">\n              <input\n                type=\"text\"\n                name=\"calfId\"\n                placeholder=\"ID del Ternero\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                value={calfData.calfId}\n                onChange={handleCalfDataChange}\n                required\n              />\n              <select\n                name=\"calfSex\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                value={calfData.calfSex}\n                onChange={handleCalfDataChange}\n                required\n              >\n                <option value=\"\">Sexo del Ternero</option>\n                <option value=\"macho\">Macho</option>\n                <option value=\"hembra\">Hembra</option>\n              </select>\n              <input\n                type=\"number\"\n                name=\"calfWeight\"\n                placeholder=\"Peso del Ternero (kg)\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                value={calfData.calfWeight}\n                onChange={handleCalfDataChange}\n                required\n              />\n              <textarea\n                name=\"calfObservations\"\n                placeholder=\"Observaciones del Ternero\"\n                rows=\"2\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black resize-none\"\n                value={calfData.calfObservations}\n                onChange={handleCalfDataChange}\n              ></textarea>\n            </div>\n            <div className=\"mt-6 flex justify-end space-x-3\">\n              <button\n                onClick={() => setShowCalfModal(false)}\n                className=\"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors\"\n              >\n                Cancelar\n              </button>\n              <button\n                onClick={handleCalfSubmit}\n                className=\"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors\"\n              >\n                Registrar Ternero\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ReproductiveControlPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
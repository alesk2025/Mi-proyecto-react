{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Downloads\\\\project (10)\\\\src\\\\components\\\\ReproductiveControlPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { classifyAnimalAge } from '../utils/helpers'; // Importar la función de utilidad\nimport { exportToCsv, exportTableToPdf } from '../utils/exportHelpers'; // Importar funciones de exportación\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst GESTATION_DAYS = 283; // Días promedio de gestación para bovinos\n\nconst ReproductiveControlPage = ({\n  animals,\n  onUpdateAnimalProduction,\n  onRegisterReproductiveEvent,\n  onDeletePregnantCow,\n  reproductiveRecords,\n  setReproductiveRecords,\n  onRegisterAnimal,\n  currentUser,\n  logoUrl\n}) => {\n  _s();\n  const [currentSection, setCurrentSection] = useState('montaNatural'); // 'montaNatural', 'inseminacion', 'gestacion', 'historial'\n\n  const [montaNaturalData, setMontaNaturalData] = useState({\n    vacaId: '',\n    toroId: '',\n    fechaMonta: '',\n    observaciones: ''\n  });\n  const [inseminacionData, setInseminacionData] = useState({\n    vacaId: '',\n    semenId: '',\n    // ID del semen utilizado\n    fechaInseminacion: '',\n    inseminador: '',\n    observaciones: ''\n  });\n  const [gestacionData, setGestacionData] = useState({\n    vacaId: '',\n    fechaDiagnostico: '',\n    resultadoDiagnostico: '',\n    // 'positiva', 'negativa'\n    fechaPartoEstimada: '',\n    // Calculada\n    fechaPartoReal: '',\n    pesoTernero: '',\n    sexoTernero: '',\n    nombreTernero: '',\n    observacionesParto: ''\n  });\n  const [editingRecord, setEditingRecord] = useState(null); // To hold the record being edited\n  const historyTableRef = useRef(null); // Ref for the history table\n\n  // Función auxiliar para calcular días restantes\n  const calcularDiasRestantes = fechaPartoEstimada => {\n    const hoy = new Date();\n    const fecha = new Date(fechaPartoEstimada);\n    // Verificar si la fecha es válida antes de calcular la diferencia\n    if (isNaN(fecha.getTime())) {\n      return NaN; // Retorna NaN si la fecha no es válida\n    }\n    const diferencia = fecha.getTime() - hoy.getTime(); // Usar getTime() para operar con milisegundos\n    return Math.ceil(diferencia / (1000 * 60 * 60 * 24));\n  };\n\n  // useEffect para evaluar registros reproductivos y actualizar estados\n  useEffect(() => {\n    if (!reproductiveRecords || reproductiveRecords.length === 0) {\n      return;\n    }\n    let animalStatusUpdates = [];\n    let recordStatusUpdates = [];\n    reproductiveRecords.forEach(record => {\n      const currentAnimal = animals.find(a => a.id === record.idAnimal);\n      if (!currentAnimal) return; // Animal not found, skip\n\n      // Logic for 'preñada' records that are not yet finalized\n      if (record.tipoEvento === 'diagnóstico' && record.estadoPosterior === 'preñada' && record.estado !== 'finalizado') {\n        let estimatedBirthDateStr = record.fechaPartoEstimada;\n\n        // If estimated birth date is missing, calculate it from the diagnosis date\n        if (!estimatedBirthDateStr) {\n          const diagnosisDate = new Date(record.fechaEvento);\n          if (diagnosisDate instanceof Date && !isNaN(diagnosisDate.getTime())) {\n            const estimatedDate = new Date(diagnosisDate);\n            estimatedDate.setDate(estimatedDate.getDate() + GESTATION_DAYS);\n            estimatedBirthDateStr = estimatedDate.toISOString().split('T')[0];\n            // Update the record itself with the estimated date for persistence\n            recordStatusUpdates.push({\n              id: record.id,\n              update: {\n                fechaPartoEstimada: estimatedBirthDateStr\n              }\n            });\n          }\n        }\n        if (estimatedBirthDateStr) {\n          const dias = calcularDiasRestantes(estimatedBirthDateStr);\n\n          // Solo aplicar reglas si los días restantes son un número válido\n          if (!isNaN(dias)) {\n            // Rule 1: Change to SECA if less than 100 days to birth AND animal is not already 'seca'\n            if (dias <= 100 && dias > 0 && currentAnimal.estadoReproductivo !== 'seca') {\n              animalStatusUpdates.push({\n                id: record.idAnimal,\n                update: {\n                  estadoReproductivo: 'seca'\n                }\n              });\n            }\n\n            // Rule 2: Change to PRODUCCIÓN if estimated birth date passed AND animal is not already 'produccion'\n            if (dias <= 0 && currentAnimal.estadoReproductivo !== 'produccion') {\n              animalStatusUpdates.push({\n                id: record.idAnimal,\n                update: {\n                  estadoReproductivo: 'produccion',\n                  fechaUltimoParto: estimatedBirthDateStr\n                }\n              });\n              // Mark the reproductive record as finalized after birth\n              recordStatusUpdates.push({\n                id: record.id,\n                update: {\n                  estado: 'finalizado'\n                }\n              });\n            }\n          }\n        }\n      }\n    });\n\n    // Apply animal status updates\n    animalStatusUpdates.forEach(update => {\n      onUpdateAnimalProduction(update.id, update.update);\n    });\n\n    // Apply reproductive record status updates\n    if (recordStatusUpdates.length > 0) {\n      const newReproductiveRecords = reproductiveRecords.map(rec => {\n        const update = recordStatusUpdates.find(u => u.id === rec.id);\n        return update ? {\n          ...rec,\n          ...update.update\n        } : rec;\n      });\n      setReproductiveRecords(newReproductiveRecords);\n    }\n  }, [reproductiveRecords, animals, onUpdateAnimalProduction, setReproductiveRecords]); // Dependencies\n\n  const handleMontaNaturalChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setMontaNaturalData({\n      ...montaNaturalData,\n      [name]: value\n    });\n  };\n  const handleInseminacionChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setInseminacionData({\n      ...inseminacionData,\n      [name]: value\n    });\n  };\n  const handleGestacionChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setGestacionData({\n      ...gestacionData,\n      [name]: value\n    });\n  };\n  const handleMontaNaturalSubmit = () => {\n    const {\n      vacaId,\n      toroId,\n      fechaMonta,\n      observaciones\n    } = montaNaturalData;\n    if (!vacaId || !toroId || !fechaMonta) {\n      alert('Completa los campos obligatorios de Monta Natural.');\n      return;\n    }\n    onUpdateAnimalProduction(vacaId, {\n      estadoReproductivo: 'preñada',\n      fechaUltimaGestacion: fechaMonta\n    });\n    onRegisterReproductiveEvent({\n      id: `REC-${Date.now().toString().slice(-5)}`,\n      // Generar ID único\n      idAnimal: vacaId,\n      tipoEvento: 'monta',\n      fechaEvento: fechaMonta,\n      observaciones,\n      estadoPosterior: 'preñada',\n      toroId\n    });\n    alert('Monta natural registrada.');\n    setMontaNaturalData({\n      vacaId: '',\n      toroId: '',\n      fechaMonta: '',\n      observaciones: ''\n    });\n  };\n  const handleInseminacionSubmit = () => {\n    const {\n      vacaId,\n      semenId,\n      fechaInseminacion,\n      observaciones\n    } = inseminacionData;\n    if (!vacaId || !semenId || !fechaInseminacion) {\n      alert('Completa todos los campos de inseminación.');\n      return;\n    }\n    onUpdateAnimalProduction(vacaId, {\n      estadoReproductivo: 'preñada',\n      fechaUltimaGestacion: fechaInseminacion\n    });\n    onRegisterReproductiveEvent({\n      id: `REC-${Date.now().toString().slice(-5)}`,\n      // Generar ID único\n      idAnimal: vacaId,\n      tipoEvento: 'inseminacion',\n      fechaEvento: fechaInseminacion,\n      observaciones,\n      estadoPosterior: 'preñada',\n      toroId: semenId // opcional\n    });\n    alert('Inseminación registrada correctamente.');\n    setInseminacionData({\n      vacaId: '',\n      semenId: '',\n      fechaInseminacion: '',\n      observaciones: ''\n    });\n  };\n  const handleGestacionSubmit = () => {\n    const {\n      vacaId,\n      fechaDiagnostico,\n      resultadoDiagnostico,\n      pesoTernero,\n      sexoTernero,\n      nombreTernero,\n      observacionesParto,\n      fechaPartoReal\n    } = gestacionData;\n    if (!vacaId || !fechaDiagnostico || !resultadoDiagnostico) {\n      alert('Completa los campos obligatorios del diagnóstico de gestación.');\n      return;\n    }\n    let estimatedBirthDateForRecord = '';\n    if (resultadoDiagnostico === 'positiva') {\n      // Calculate estimated birth date based on diagnosis date + GESTATION_DAYS\n      const diagnosisDateObj = new Date(fechaDiagnostico);\n      if (diagnosisDateObj instanceof Date && !isNaN(diagnosisDateObj.getTime())) {\n        const estimatedDate = new Date(diagnosisDateObj);\n        estimatedDate.setDate(estimatedDate.getDate() + GESTATION_DAYS);\n        estimatedBirthDateForRecord = estimatedDate.toISOString().split('T')[0];\n      }\n      onUpdateAnimalProduction(vacaId, {\n        estadoReproductivo: 'preñada',\n        fechaUltimaGestacion: fechaDiagnostico // This is the date of diagnosis, not estimated birth\n      });\n    } else {\n      // resultadoDiagnostico === 'negativa'\n      onUpdateAnimalProduction(vacaId, {\n        estadoReproductivo: 'vacia',\n        fechaUltimaGestacion: '' // Limpiar fecha de gestación\n      });\n    }\n    onRegisterReproductiveEvent({\n      id: `REC-${Date.now().toString().slice(-5)}`,\n      // Generar ID único\n      idAnimal: vacaId,\n      tipoEvento: 'diagnóstico',\n      fechaEvento: fechaDiagnostico,\n      observaciones: `Diagnóstico: ${resultadoDiagnostico}. ${observacionesParto}`,\n      estadoPosterior: resultadoDiagnostico === 'positiva' ? 'preñada' : 'vacia',\n      fechaPartoEstimada: estimatedBirthDateForRecord // Pass the calculated estimated date\n    });\n    if (fechaPartoReal) {\n      // If se registró una fecha de parto real\n      onUpdateAnimalProduction(vacaId, {\n        estadoReproductivo: 'produccion',\n        fechaUltimoParto: fechaPartoReal\n      });\n      onRegisterReproductiveEvent({\n        id: `REC-${Date.now().toString().slice(-5)}`,\n        // Generar ID único\n        idAnimal: vacaId,\n        tipoEvento: 'parto',\n        fechaEvento: fechaPartoReal,\n        observaciones: observacionesParto,\n        estadoPosterior: 'produccion'\n      });\n\n      // Registrar el ternero automáticamente\n      if (nombreTernero && sexoTernero && pesoTernero) {\n        var _animals$find, _animals$find2;\n        const newCalf = {\n          id: `AN-${Date.now().toString().slice(-5)}`,\n          name: nombreTernero,\n          raza: ((_animals$find = animals.find(a => a.id === vacaId)) === null || _animals$find === void 0 ? void 0 : _animals$find.raza) || 'Desconocida',\n          // Heredar raza de la madre\n          peso: pesoTernero,\n          sexo: sexoTernero,\n          fechaNacimiento: fechaPartoReal,\n          fechaCompra: '',\n          // No aplica para terneros nacidos en la finca\n          tipoProduccion: '',\n          // Se puede definir después\n          dailyMilk: 0,\n          idpadre: ((_animals$find2 = animals.find(a => a.id === vacaId)) === null || _animals$find2 === void 0 ? void 0 : _animals$find2.idpadre) || '',\n          // Heredar padre de la madre\n          idmadre: vacaId,\n          // La vaca actual es la madre\n          estadoReproductivo: 'desarrollo',\n          // Estado inicial del ternero\n          edadClasificada: classifyAnimalAge(fechaPartoReal, sexoTernero)\n        };\n        onRegisterAnimal(newCalf); // Registrar el nuevo ternero\n        alert(`Ternero ${nombreTernero} registrado automáticamente.`);\n      }\n    }\n    alert('Diagnóstico de gestación registrado.');\n    setGestacionData({\n      vacaId: '',\n      fechaDiagnostico: '',\n      resultadoDiagnostico: '',\n      fechaPartoEstimada: '',\n      pesoTernero: '',\n      sexoTernero: '',\n      nombreTernero: '',\n      observacionesParto: '',\n      fechaPartoReal: ''\n    });\n  };\n  const handleDeleteHistoryRecord = recordId => {\n    if (window.confirm('¿Estás seguro de que quieres eliminar este registro?')) {\n      const updatedRecords = reproductiveRecords.filter(record => record.id !== recordId);\n      setReproductiveRecords(updatedRecords); // Update state in App.js via prop\n    }\n  };\n  const startEditingHistoryRecord = record => {\n    setEditingRecord({\n      ...record\n    }); // Create a copy to edit\n  };\n  const handleEditingHistoryChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setEditingRecord(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const saveEditedHistoryRecord = () => {\n    const updatedRecords = reproductiveRecords.map(record => record.id === editingRecord.id ? editingRecord : record);\n    setReproductiveRecords(updatedRecords); // Update state in App.js via prop\n    setEditingRecord(null); // Exit editing mode\n    alert('Registro actualizado.');\n  };\n  const cancelEditingHistoryRecord = () => {\n    setEditingRecord(null); // Exit editing mode\n  };\n\n  // Function to add a manual reproductive event\n  const handleAddManualEvent = () => {\n    const animalId = prompt(\"ID del Animal:\");\n    const tipoEvento = prompt(\"Tipo de Evento (ej. 'observacion', 'tratamiento'):\");\n    const fechaEvento = prompt(\"Fecha del Evento (YYYY-MM-DD):\");\n    const observaciones = prompt(\"Observaciones:\");\n    const estadoPosterior = prompt(\"Estado Posterior (ej. 'vacia', 'produccion'):\");\n    if (animalId && tipoEvento && fechaEvento) {\n      onRegisterReproductiveEvent({\n        id: `REC-${Date.now().toString().slice(-5)}`,\n        // Generar ID único\n        idAnimal: animalId,\n        tipoEvento: tipoEvento,\n        fechaEvento: fechaEvento,\n        observaciones: observaciones,\n        estadoPosterior: estadoPosterior\n      });\n      alert('Evento manual registrado.');\n    } else {\n      alert('Campos obligatorios para evento manual no completados.');\n    }\n  };\n  const handleExportHistory = async format => {\n    if (reproductiveRecords.length === 0) {\n      alert('No hay registros para exportar.');\n      return;\n    }\n    const filename = `historial_reproductivo_${new Date().toISOString().split('T')[0]}`;\n    const farmName = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.farmName) || 'Mi Finca Ganadera';\n    const adminName = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.fullName) || 'Administrador';\n    if (format === 'csv') {\n      exportToCsv(reproductiveRecords, filename);\n    } else if (format === 'pdf') {\n      await exportTableToPdf(historyTableRef.current, filename, 'Historial Reproductivo', farmName, adminName, logoUrl);\n    }\n  };\n\n  // Filtrar vacas preñadas para la tabla\n  const pregnantCows = animals.filter(animal => animal.sexo === 'hembra' && animal.estadoReproductivo === 'preñada');\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white p-6 rounded-lg shadow-md\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-xl font-semibold mb-4\",\n      children: \"Control Reproductivo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center mb-6 space-x-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setCurrentSection('montaNatural'),\n        className: `px-6 py-2 rounded-lg ${currentSection === 'montaNatural' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'} hover:bg-blue-700 transition-colors`,\n        children: \"Monta Natural\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setCurrentSection('inseminacion'),\n        className: `px-6 py-2 rounded-lg ${currentSection === 'inseminacion' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'} hover:bg-blue-700 transition-colors`,\n        children: \"Inseminaci\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setCurrentSection('gestacion'),\n        className: `px-6 py-2 rounded-lg ${currentSection === 'gestacion' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'} hover:bg-blue-700 transition-colors`,\n        children: \"Control de Gestaci\\xF3n / Parto\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setCurrentSection('historial'),\n        className: `px-6 py-2 rounded-lg ${currentSection === 'historial' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'} hover:bg-blue-700 transition-colors`,\n        children: \"Historial Reproductivo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 7\n    }, this), currentSection === 'montaNatural' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 border rounded-lg bg-gray-50\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-lg font-semibold mb-3\",\n        children: \"Registro de Monta Natural\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-1\",\n          children: \"Vaca:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"vacaId\",\n          className: \"w-full px-4 py-2 border rounded-lg\",\n          value: montaNaturalData.vacaId,\n          onChange: handleMontaNaturalChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Selecciona Vaca\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 15\n          }, this), animals.filter(a => a.sexo === 'hembra').map(vaca => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: vaca.id,\n            children: [vaca.name, \" (\", vaca.id, \")\"]\n          }, vaca.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-1\",\n          children: \"Toro:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"toroId\",\n          className: \"w-full px-4 py-2 border rounded-lg\",\n          value: montaNaturalData.toroId,\n          onChange: handleMontaNaturalChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Selecciona Toro\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 15\n          }, this), animals.filter(a => a.sexo === 'macho').map(toro => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: toro.id,\n            children: [toro.name, \" (\", toro.id, \")\"]\n          }, toro.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-1\",\n          children: \"Fecha de Monta:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          name: \"fechaMonta\",\n          placeholder: \"Fecha de Monta\",\n          className: \"w-full px-4 py-2 border rounded-lg\",\n          value: montaNaturalData.fechaMonta,\n          onChange: handleMontaNaturalChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-1 col-span-full\",\n          children: \"Observaciones:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"observaciones\",\n          placeholder: \"Observaciones\",\n          rows: \"2\",\n          className: \"w-full px-4 py-2 border rounded-lg col-span-full\",\n          value: montaNaturalData.observaciones,\n          onChange: handleMontaNaturalChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleMontaNaturalSubmit,\n        className: \"mt-4 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors\",\n        children: \"Registrar Monta\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 9\n    }, this), currentSection === 'inseminacion' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 border rounded-lg bg-gray-50\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-lg font-semibold mb-3\",\n        children: \"Registro de Inseminaci\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-1\",\n          children: \"Vaca:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"vacaId\",\n          className: \"w-full px-4 py-2 border rounded-lg\",\n          value: inseminacionData.vacaId,\n          onChange: handleInseminacionChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Selecciona Vaca\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 464,\n            columnNumber: 15\n          }, this), animals.filter(a => a.sexo === 'hembra').map(vaca => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: vaca.id,\n            children: [vaca.name, \" (\", vaca.id, \")\"]\n          }, vaca.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 466,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-1\",\n          children: \"ID Semen Utilizado:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"semenId\",\n          placeholder: \"ID Semen Utilizado\",\n          className: \"w-full px-4 py-2 border rounded-lg\",\n          value: inseminacionData.semenId,\n          onChange: handleInseminacionChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 470,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-1\",\n          children: \"Fecha de Inseminaci\\xF3n:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          name: \"fechaInseminacion\",\n          placeholder: \"Fecha de Inseminaci\\xF3n\",\n          className: \"w-full px-4 py-2 border rounded-lg\",\n          value: inseminacionData.fechaInseminacion,\n          onChange: handleInseminacionChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-1\",\n          children: \"Inseminador:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"inseminador\",\n          placeholder: \"Inseminador (Opcional)\",\n          className: \"w-full px-4 py-2 border rounded-lg\",\n          value: inseminacionData.inseminador,\n          onChange: handleInseminacionChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-1 col-span-full\",\n          children: \"Observaciones:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"observaciones\",\n          placeholder: \"Observaciones\",\n          rows: \"2\",\n          className: \"w-full px-4 py-2 border rounded-lg col-span-full\",\n          value: inseminacionData.observaciones,\n          onChange: handleInseminacionChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 497,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleInseminacionSubmit,\n        className: \"mt-4 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors\",\n        children: \"Registrar Inseminaci\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 506,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 9\n    }, this), currentSection === 'gestacion' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 border rounded-lg bg-gray-50\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-lg font-semibold mb-3\",\n        children: \"Control de Gestaci\\xF3n / Parto\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 517,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-1\",\n          children: \"Vaca:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 519,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"vacaId\",\n          className: \"w-full px-4 py-2 border rounded-lg\",\n          value: gestacionData.vacaId,\n          onChange: handleGestacionChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Selecciona Vaca\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 526,\n            columnNumber: 15\n          }, this), animals.filter(a => a.sexo === 'hembra').map(vaca => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: vaca.id,\n            children: [vaca.name, \" (\", vaca.id, \")\"]\n          }, vaca.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 528,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 520,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-1\",\n          children: \"Fecha Diagn\\xF3stico Gestaci\\xF3n:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 531,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          name: \"fechaDiagnostico\",\n          placeholder: \"Fecha de Diagn\\xF3stico de Gestaci\\xF3n\",\n          className: \"w-full px-4 py-2 border rounded-lg\",\n          value: gestacionData.fechaDiagnostico,\n          onChange: handleGestacionChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 532,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-1\",\n          children: \"Resultado Diagn\\xF3stico:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"resultadoDiagnostico\",\n          className: \"w-full px-4 py-2 border rounded-lg\",\n          value: gestacionData.resultadoDiagnostico,\n          onChange: handleGestacionChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Resultado Diagn\\xF3stico\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 547,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"positiva\",\n            children: \"Positiva (Pre\\xF1ada)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 548,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"negativa\",\n            children: \"Negativa\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 549,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 541,\n          columnNumber: 13\n        }, this), gestacionData.resultadoDiagnostico === 'positiva' && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-gray-700 text-sm font-bold mb-1\",\n            children: \"Fecha de Parto Estimada:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 553,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            name: \"fechaPartoEstimada\",\n            placeholder: \"Fecha de Parto Estimada\",\n            className: \"w-full px-4 py-2 border rounded-lg\",\n            value: gestacionData.fechaPartoEstimada,\n            onChange: handleGestacionChange,\n            title: \"Calculada autom\\xE1ticamente al registrar monta/inseminaci\\xF3n o diagn\\xF3stico positivo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 554,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-1\",\n          children: \"Fecha de Parto Real (si ya ocurri\\xF3):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 565,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          name: \"fechaPartoReal\",\n          placeholder: \"Fecha de Parto Real (si ya ocurri\\xF3)\",\n          className: \"w-full px-4 py-2 border rounded-lg\",\n          value: gestacionData.fechaPartoReal,\n          onChange: handleGestacionChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 566,\n          columnNumber: 13\n        }, this), gestacionData.fechaPartoReal && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-gray-700 text-sm font-bold mb-1\",\n            children: \"Peso del Ternero (kg):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 576,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            name: \"pesoTernero\",\n            placeholder: \"Peso del Ternero (kg)\",\n            className: \"w-full px-4 py-2 border rounded-lg\",\n            value: gestacionData.pesoTernero,\n            onChange: handleGestacionChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 577,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-gray-700 text-sm font-bold mb-1\",\n            children: \"Sexo del Ternero:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 585,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"sexoTernero\",\n            className: \"w-full px-4 py-2 border rounded-lg\",\n            value: gestacionData.sexoTernero,\n            onChange: handleGestacionChange,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Sexo del Ternero\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 592,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"macho\",\n              children: \"Macho\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 593,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"hembra\",\n              children: \"Hembra\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 594,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 586,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-gray-700 text-sm font-bold mb-1\",\n            children: \"Nombre del Ternero:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 596,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"nombreTernero\",\n            placeholder: \"Nombre del Ternero\",\n            className: \"w-full px-4 py-2 border rounded-lg\",\n            value: gestacionData.nombreTernero,\n            onChange: handleGestacionChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 597,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 text-sm font-bold mb-1 col-span-full\",\n          children: \"Observaciones del Parto:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 607,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"observacionesParto\",\n          placeholder: \"Observaciones del Parto\",\n          rows: \"2\",\n          className: \"w-full px-4 py-2 border rounded-lg col-span-full\",\n          value: gestacionData.observacionesParto,\n          onChange: handleGestacionChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 608,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleGestacionSubmit,\n        className: \"mt-4 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors\",\n        children: \"Registrar Gestaci\\xF3n / Parto\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 617,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 516,\n      columnNumber: 9\n    }, this), currentSection === 'historial' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 border rounded-lg bg-gray-50\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-lg font-semibold mb-3\",\n        children: \"Historial Reproductivo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 628,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleAddManualEvent,\n          className: \"bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors\",\n          children: \"Registrar Evento Manual\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 630,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleExportHistory('csv'),\n            className: \"bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors mr-2\",\n            children: \"Exportar a CSV\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 637,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleExportHistory('pdf'),\n            className: \"bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition-colors\",\n            children: \"Exportar a PDF\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 643,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 636,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 629,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overflow-x-auto rounded-lg shadow-md\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          ref: historyTableRef,\n          className: \"min-w-full bg-white text-sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"bg-gray-800 text-white\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-3 px-4 text-left font-semibold rounded-tl-lg\",\n                children: \"ID Evento\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 655,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-3 px-4 text-left font-semibold\",\n                children: \"ID Animal\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 656,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-3 px-4 text-left font-semibold\",\n                children: \"Tipo Evento\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 657,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-3 px-4 text-left font-semibold\",\n                children: \"Fecha Evento\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 658,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-3 px-4 text-left font-semibold\",\n                children: \"Observaciones\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 659,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-3 px-4 text-left font-semibold\",\n                children: \"Estado Posterior\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 660,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-3 px-4 text-left font-semibold rounded-tr-lg\",\n                children: \"Acciones\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 661,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 654,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 653,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            className: \"divide-y divide-gray-200\",\n            children: reproductiveRecords.map(record => /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"hover:bg-gray-100 transition-colors\",\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-3 px-4\",\n                children: record.id\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 667,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-3 px-4\",\n                children: record.idAnimal\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 668,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-3 px-4\",\n                children: record.tipoEvento\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 669,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-3 px-4\",\n                children: record.fechaEvento\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 670,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-3 px-4\",\n                children: record.observaciones\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 671,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-3 px-4\",\n                children: record.estadoPosterior\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 672,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-3 px-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => startEditingHistoryRecord(record),\n                  className: \"text-blue-600 hover:text-blue-800 font-medium mr-2 transition-colors\",\n                  children: \"Editar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 674,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleDeleteHistoryRecord(record.id),\n                  className: \"text-red-600 hover:text-red-800 font-medium transition-colors\",\n                  children: \"Eliminar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 680,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 673,\n                columnNumber: 21\n              }, this)]\n            }, record.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 666,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 664,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 652,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 651,\n        columnNumber: 11\n      }, this), editingRecord && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-8 p-6 border rounded-lg bg-yellow-50 shadow-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-lg font-semibold mb-4 text-gray-800\",\n          children: [\"Editar Registro Hist\\xF3rico: \", editingRecord.id]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 696,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-gray-700 text-sm font-bold mb-1\",\n              children: \"Tipo Evento:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 699,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"tipoEvento\",\n              className: \"w-full px-4 py-2 border rounded-lg bg-gray-200 cursor-not-allowed\",\n              value: editingRecord.tipoEvento,\n              readOnly: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 700,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 698,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-gray-700 text-sm font-bold mb-1\",\n              children: \"Fecha Evento:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 709,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              name: \"fechaEvento\",\n              className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n              value: editingRecord.fechaEvento,\n              onChange: handleEditingHistoryChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 710,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 708,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-gray-700 text-sm font-bold mb-1\",\n              children: \"Estado Posterior:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 719,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"estadoPosterior\",\n              className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n              value: editingRecord.estadoPosterior,\n              onChange: handleEditingHistoryChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 720,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 718,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-span-full\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-gray-700 text-sm font-bold mb-1\",\n              children: \"Observaciones:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 729,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              name: \"observaciones\",\n              rows: \"3\",\n              className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",\n              value: editingRecord.observaciones,\n              onChange: handleEditingHistoryChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 730,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 728,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 697,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-6 flex justify-end space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: saveEditedHistoryRecord,\n            className: \"bg-green-600 text-white py-2 px-5 rounded-lg hover:bg-green-700 transition-colors shadow-md\",\n            children: \"Guardar Cambios\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 740,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: cancelEditingHistoryRecord,\n            className: \"bg-gray-600 text-white py-2 px-5 rounded-lg hover:bg-gray-700 transition-colors shadow-md\",\n            children: \"Cancelar Edici\\xF3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 746,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 739,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 695,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 627,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-8 pt-4 border-t border-gray-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-lg font-semibold mb-3\",\n        children: \"Vacas Pre\\xF1adas y Calendario de Gestaci\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 760,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overflow-x-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"min-w-full bg-white border text-sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"bg-gray-100\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"ID Vaca\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 765,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"Nombre\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 766,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"Fecha Monta/Insem.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 767,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"Fecha Parto Estimada\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 768,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"D\\xEDas Restantes\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 769,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 border\",\n                children: \"Acciones\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 770,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 764,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 763,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: pregnantCows.map(vaca => {\n              // Asegurarse de que fechaUltimaGestacion sea una fecha válida\n              const fechaMonta = new Date(vaca.fechaUltimaGestacion);\n\n              // Verificar si fechaMonta es una fecha válida antes de proceder\n              if (isNaN(fechaMonta.getTime())) {\n                return /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"py-2 px-4 border\",\n                    children: vaca.id\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 782,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"py-2 px-4 border\",\n                    children: vaca.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 783,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"py-2 px-4 border\",\n                    children: \"Fecha inv\\xE1lida\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 784,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"py-2 px-4 border\",\n                    children: \"N/A\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 785,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"py-2 px-4 border\",\n                    children: \"N/A\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 786,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"py-2 px-4 border\",\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"text-red-600 hover:underline\",\n                      onClick: () => onDeletePregnantCow(vaca.id),\n                      children: \"Eliminar\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 788,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 787,\n                    columnNumber: 23\n                  }, this)]\n                }, vaca.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 781,\n                  columnNumber: 21\n                }, this);\n              }\n              const fechaParto = new Date(fechaMonta);\n              fechaParto.setDate(fechaParto.getDate() + GESTATION_DAYS); // Usar la constante\n              const diasRestantes = calcularDiasRestantes(fechaParto.toISOString().split('T')[0]);\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"py-2 px-4 border\",\n                  children: vaca.id\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 805,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"py-2 px-4 border\",\n                  children: vaca.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 806,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"py-2 px-4 border\",\n                  children: vaca.fechaUltimaGestacion || 'N/A'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 807,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"py-2 px-4 border\",\n                  children: fechaParto.toISOString().split('T')[0]\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 808,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"py-2 px-4 border\",\n                  children: isNaN(diasRestantes) ? 'N/A' : diasRestantes >= 0 ? diasRestantes : 'Venció'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 809,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"py-2 px-4 border\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"text-red-600 hover:underline\",\n                    onClick: () => onDeletePregnantCow(vaca.id),\n                    children: \"Eliminar\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 811,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 810,\n                  columnNumber: 21\n                }, this)]\n              }, vaca.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 804,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 773,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 762,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 761,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 759,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 367,\n    columnNumber: 5\n  }, this);\n};\n_s(ReproductiveControlPage, \"IZLECZ2HJM0wsjCFq+JuakP9CEc=\");\n_c = ReproductiveControlPage;\nexport default ReproductiveControlPage;\n\n// DONE\nvar _c;\n$RefreshReg$(_c, \"ReproductiveControlPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","classifyAnimalAge","exportToCsv","exportTableToPdf","jsxDEV","_jsxDEV","Fragment","_Fragment","GESTATION_DAYS","ReproductiveControlPage","animals","onUpdateAnimalProduction","onRegisterReproductiveEvent","onDeletePregnantCow","reproductiveRecords","setReproductiveRecords","onRegisterAnimal","currentUser","logoUrl","_s","currentSection","setCurrentSection","montaNaturalData","setMontaNaturalData","vacaId","toroId","fechaMonta","observaciones","inseminacionData","setInseminacionData","semenId","fechaInseminacion","inseminador","gestacionData","setGestacionData","fechaDiagnostico","resultadoDiagnostico","fechaPartoEstimada","fechaPartoReal","pesoTernero","sexoTernero","nombreTernero","observacionesParto","editingRecord","setEditingRecord","historyTableRef","calcularDiasRestantes","hoy","Date","fecha","isNaN","getTime","NaN","diferencia","Math","ceil","length","animalStatusUpdates","recordStatusUpdates","forEach","record","currentAnimal","find","a","id","idAnimal","tipoEvento","estadoPosterior","estado","estimatedBirthDateStr","diagnosisDate","fechaEvento","estimatedDate","setDate","getDate","toISOString","split","push","update","dias","estadoReproductivo","fechaUltimoParto","newReproductiveRecords","map","rec","u","handleMontaNaturalChange","e","name","value","target","handleInseminacionChange","handleGestacionChange","handleMontaNaturalSubmit","alert","fechaUltimaGestacion","now","toString","slice","handleInseminacionSubmit","handleGestacionSubmit","estimatedBirthDateForRecord","diagnosisDateObj","_animals$find","_animals$find2","newCalf","raza","peso","sexo","fechaNacimiento","fechaCompra","tipoProduccion","dailyMilk","idpadre","idmadre","edadClasificada","handleDeleteHistoryRecord","recordId","window","confirm","updatedRecords","filter","startEditingHistoryRecord","handleEditingHistoryChange","prev","saveEditedHistoryRecord","cancelEditingHistoryRecord","handleAddManualEvent","animalId","prompt","handleExportHistory","format","filename","farmName","adminName","fullName","current","pregnantCows","animal","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onChange","vaca","toro","type","placeholder","rows","title","ref","readOnly","fechaParto","diasRestantes","_c","$RefreshReg$"],"sources":["C:/Users/User/Downloads/project (10)/src/components/ReproductiveControlPage.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { classifyAnimalAge } from '../utils/helpers'; // Importar la función de utilidad\nimport { exportToCsv, exportTableToPdf } from '../utils/exportHelpers'; // Importar funciones de exportación\n\nconst GESTATION_DAYS = 283; // Días promedio de gestación para bovinos\n\nconst ReproductiveControlPage = ({ animals, onUpdateAnimalProduction, onRegisterReproductiveEvent, onDeletePregnantCow, reproductiveRecords, setReproductiveRecords, onRegisterAnimal, currentUser, logoUrl }) => {\n  const [currentSection, setCurrentSection] = useState('montaNatural'); // 'montaNatural', 'inseminacion', 'gestacion', 'historial'\n\n  const [montaNaturalData, setMontaNaturalData] = useState({\n    vacaId: '',\n    toroId: '',\n    fechaMonta: '',\n    observaciones: '',\n  });\n\n  const [inseminacionData, setInseminacionData] = useState({\n    vacaId: '',\n    semenId: '', // ID del semen utilizado\n    fechaInseminacion: '',\n    inseminador: '',\n    observaciones: '',\n  });\n\n  const [gestacionData, setGestacionData] = useState({\n    vacaId: '',\n    fechaDiagnostico: '',\n    resultadoDiagnostico: '', // 'positiva', 'negativa'\n    fechaPartoEstimada: '', // Calculada\n    fechaPartoReal: '',\n    pesoTernero: '',\n    sexoTernero: '',\n    nombreTernero: '',\n    observacionesParto: '',\n  });\n\n  const [editingRecord, setEditingRecord] = useState(null); // To hold the record being edited\n  const historyTableRef = useRef(null); // Ref for the history table\n\n  // Función auxiliar para calcular días restantes\n  const calcularDiasRestantes = (fechaPartoEstimada) => {\n    const hoy = new Date();\n    const fecha = new Date(fechaPartoEstimada);\n    // Verificar si la fecha es válida antes de calcular la diferencia\n    if (isNaN(fecha.getTime())) {\n      return NaN; // Retorna NaN si la fecha no es válida\n    }\n    const diferencia = fecha.getTime() - hoy.getTime(); // Usar getTime() para operar con milisegundos\n    return Math.ceil(diferencia / (1000 * 60 * 60 * 24));\n  };\n\n  // useEffect para evaluar registros reproductivos y actualizar estados\n  useEffect(() => {\n    if (!reproductiveRecords || reproductiveRecords.length === 0) {\n      return;\n    }\n\n    let animalStatusUpdates = [];\n    let recordStatusUpdates = [];\n\n    reproductiveRecords.forEach(record => {\n      const currentAnimal = animals.find(a => a.id === record.idAnimal);\n      if (!currentAnimal) return; // Animal not found, skip\n\n      // Logic for 'preñada' records that are not yet finalized\n      if (record.tipoEvento === 'diagnóstico' && record.estadoPosterior === 'preñada' && record.estado !== 'finalizado') {\n        let estimatedBirthDateStr = record.fechaPartoEstimada;\n\n        // If estimated birth date is missing, calculate it from the diagnosis date\n        if (!estimatedBirthDateStr) {\n          const diagnosisDate = new Date(record.fechaEvento);\n          if (diagnosisDate instanceof Date && !isNaN(diagnosisDate.getTime())) {\n            const estimatedDate = new Date(diagnosisDate);\n            estimatedDate.setDate(estimatedDate.getDate() + GESTATION_DAYS);\n            estimatedBirthDateStr = estimatedDate.toISOString().split('T')[0];\n            // Update the record itself with the estimated date for persistence\n            recordStatusUpdates.push({ id: record.id, update: { fechaPartoEstimada: estimatedBirthDateStr } });\n          }\n        }\n\n        if (estimatedBirthDateStr) {\n          const dias = calcularDiasRestantes(estimatedBirthDateStr);\n\n          // Solo aplicar reglas si los días restantes son un número válido\n          if (!isNaN(dias)) {\n            // Rule 1: Change to SECA if less than 100 days to birth AND animal is not already 'seca'\n            if (dias <= 100 && dias > 0 && currentAnimal.estadoReproductivo !== 'seca') {\n              animalStatusUpdates.push({ id: record.idAnimal, update: { estadoReproductivo: 'seca' } });\n            }\n\n            // Rule 2: Change to PRODUCCIÓN if estimated birth date passed AND animal is not already 'produccion'\n            if (dias <= 0 && currentAnimal.estadoReproductivo !== 'produccion') {\n              animalStatusUpdates.push({ id: record.idAnimal, update: { estadoReproductivo: 'produccion', fechaUltimoParto: estimatedBirthDateStr } });\n              // Mark the reproductive record as finalized after birth\n              recordStatusUpdates.push({ id: record.id, update: { estado: 'finalizado' } });\n            }\n          }\n        }\n      }\n    });\n\n    // Apply animal status updates\n    animalStatusUpdates.forEach(update => {\n      onUpdateAnimalProduction(update.id, update.update);\n    });\n\n    // Apply reproductive record status updates\n    if (recordStatusUpdates.length > 0) {\n      const newReproductiveRecords = reproductiveRecords.map(rec => {\n        const update = recordStatusUpdates.find(u => u.id === rec.id);\n        return update ? { ...rec, ...update.update } : rec;\n      });\n      setReproductiveRecords(newReproductiveRecords);\n    }\n\n  }, [reproductiveRecords, animals, onUpdateAnimalProduction, setReproductiveRecords]); // Dependencies\n\n  const handleMontaNaturalChange = (e) => {\n    const { name, value } = e.target;\n    setMontaNaturalData({ ...montaNaturalData, [name]: value });\n  };\n\n  const handleInseminacionChange = (e) => {\n    const { name, value } = e.target;\n    setInseminacionData({ ...inseminacionData, [name]: value });\n  };\n\n  const handleGestacionChange = (e) => {\n    const { name, value } = e.target;\n    setGestacionData({ ...gestacionData, [name]: value });\n  };\n\n  const handleMontaNaturalSubmit = () => {\n    const { vacaId, toroId, fechaMonta, observaciones } = montaNaturalData;\n\n    if (!vacaId || !toroId || !fechaMonta) {\n      alert('Completa los campos obligatorios de Monta Natural.');\n      return;\n    }\n\n    onUpdateAnimalProduction(vacaId, {\n      estadoReproductivo: 'preñada',\n      fechaUltimaGestacion: fechaMonta,\n    });\n\n    onRegisterReproductiveEvent({\n      id: `REC-${Date.now().toString().slice(-5)}`, // Generar ID único\n      idAnimal: vacaId,\n      tipoEvento: 'monta',\n      fechaEvento: fechaMonta,\n      observaciones,\n      estadoPosterior: 'preñada',\n      toroId\n    });\n\n    alert('Monta natural registrada.');\n    setMontaNaturalData({ vacaId: '', toroId: '', fechaMonta: '', observaciones: '' });\n  };\n\n  const handleInseminacionSubmit = () => {\n    const { vacaId, semenId, fechaInseminacion, observaciones } = inseminacionData;\n\n    if (!vacaId || !semenId || !fechaInseminacion) {\n      alert('Completa todos los campos de inseminación.');\n      return;\n    }\n\n    onUpdateAnimalProduction(vacaId, {\n      estadoReproductivo: 'preñada',\n      fechaUltimaGestacion: fechaInseminacion,\n    });\n\n    onRegisterReproductiveEvent({\n      id: `REC-${Date.now().toString().slice(-5)}`, // Generar ID único\n      idAnimal: vacaId,\n      tipoEvento: 'inseminacion',\n      fechaEvento: fechaInseminacion,\n      observaciones,\n      estadoPosterior: 'preñada',\n      toroId: semenId, // opcional\n    });\n\n    alert('Inseminación registrada correctamente.');\n\n    setInseminacionData({\n      vacaId: '',\n      semenId: '',\n      fechaInseminacion: '',\n      observaciones: '',\n    });\n  };\n\n  const handleGestacionSubmit = () => {\n    const {\n      vacaId,\n      fechaDiagnostico,\n      resultadoDiagnostico,\n      pesoTernero,\n      sexoTernero,\n      nombreTernero,\n      observacionesParto,\n      fechaPartoReal\n    } = gestacionData;\n\n    if (!vacaId || !fechaDiagnostico || !resultadoDiagnostico) {\n      alert('Completa los campos obligatorios del diagnóstico de gestación.');\n      return;\n    }\n\n    let estimatedBirthDateForRecord = '';\n    if (resultadoDiagnostico === 'positiva') {\n      // Calculate estimated birth date based on diagnosis date + GESTATION_DAYS\n      const diagnosisDateObj = new Date(fechaDiagnostico);\n      if (diagnosisDateObj instanceof Date && !isNaN(diagnosisDateObj.getTime())) {\n        const estimatedDate = new Date(diagnosisDateObj);\n        estimatedDate.setDate(estimatedDate.getDate() + GESTATION_DAYS);\n        estimatedBirthDateForRecord = estimatedDate.toISOString().split('T')[0];\n      }\n\n      onUpdateAnimalProduction(vacaId, {\n        estadoReproductivo: 'preñada',\n        fechaUltimaGestacion: fechaDiagnostico, // This is the date of diagnosis, not estimated birth\n      });\n    } else { // resultadoDiagnostico === 'negativa'\n      onUpdateAnimalProduction(vacaId, {\n        estadoReproductivo: 'vacia',\n        fechaUltimaGestacion: '', // Limpiar fecha de gestación\n      });\n    }\n\n    onRegisterReproductiveEvent({\n      id: `REC-${Date.now().toString().slice(-5)}`, // Generar ID único\n      idAnimal: vacaId,\n      tipoEvento: 'diagnóstico',\n      fechaEvento: fechaDiagnostico,\n      observaciones: `Diagnóstico: ${resultadoDiagnostico}. ${observacionesParto}`,\n      estadoPosterior: resultadoDiagnostico === 'positiva' ? 'preñada' : 'vacia',\n      fechaPartoEstimada: estimatedBirthDateForRecord, // Pass the calculated estimated date\n    });\n\n    if (fechaPartoReal) { // If se registró una fecha de parto real\n      onUpdateAnimalProduction(vacaId, {\n        estadoReproductivo: 'produccion',\n        fechaUltimoParto: fechaPartoReal,\n      });\n\n      onRegisterReproductiveEvent({\n        id: `REC-${Date.now().toString().slice(-5)}`, // Generar ID único\n        idAnimal: vacaId,\n        tipoEvento: 'parto',\n        fechaEvento: fechaPartoReal,\n        observaciones: observacionesParto,\n        estadoPosterior: 'produccion',\n      });\n\n      // Registrar el ternero automáticamente\n      if (nombreTernero && sexoTernero && pesoTernero) {\n        const newCalf = {\n          id: `AN-${Date.now().toString().slice(-5)}`,\n          name: nombreTernero,\n          raza: animals.find(a => a.id === vacaId)?.raza || 'Desconocida', // Heredar raza de la madre\n          peso: pesoTernero,\n          sexo: sexoTernero,\n          fechaNacimiento: fechaPartoReal,\n          fechaCompra: '', // No aplica para terneros nacidos en la finca\n          tipoProduccion: '', // Se puede definir después\n          dailyMilk: 0,\n          idpadre: animals.find(a => a.id === vacaId)?.idpadre || '', // Heredar padre de la madre\n          idmadre: vacaId, // La vaca actual es la madre\n          estadoReproductivo: 'desarrollo', // Estado inicial del ternero\n          edadClasificada: classifyAnimalAge(fechaPartoReal, sexoTernero),\n        };\n        onRegisterAnimal(newCalf); // Registrar el nuevo ternero\n        alert(`Ternero ${nombreTernero} registrado automáticamente.`);\n      }\n    }\n\n    alert('Diagnóstico de gestación registrado.');\n    setGestacionData({\n      vacaId: '',\n      fechaDiagnostico: '',\n      resultadoDiagnostico: '',\n      fechaPartoEstimada: '',\n      pesoTernero: '',\n      sexoTernero: '',\n      nombreTernero: '',\n      observacionesParto: '',\n      fechaPartoReal: '',\n    });\n  };\n\n  const handleDeleteHistoryRecord = (recordId) => {\n    if (window.confirm('¿Estás seguro de que quieres eliminar este registro?')) {\n      const updatedRecords = reproductiveRecords.filter(record => record.id !== recordId);\n      setReproductiveRecords(updatedRecords); // Update state in App.js via prop\n    }\n  };\n\n  const startEditingHistoryRecord = (record) => {\n    setEditingRecord({ ...record }); // Create a copy to edit\n  };\n\n  const handleEditingHistoryChange = (e) => {\n    const { name, value } = e.target;\n    setEditingRecord(prev => ({ ...prev, [name]: value }));\n  };\n\n  const saveEditedHistoryRecord = () => {\n    const updatedRecords = reproductiveRecords.map(record =>\n      record.id === editingRecord.id ? editingRecord : record\n    );\n    setReproductiveRecords(updatedRecords); // Update state in App.js via prop\n    setEditingRecord(null); // Exit editing mode\n    alert('Registro actualizado.');\n  };\n\n  const cancelEditingHistoryRecord = () => {\n    setEditingRecord(null); // Exit editing mode\n  };\n\n  // Function to add a manual reproductive event\n  const handleAddManualEvent = () => {\n    const animalId = prompt(\"ID del Animal:\");\n    const tipoEvento = prompt(\"Tipo de Evento (ej. 'observacion', 'tratamiento'):\");\n    const fechaEvento = prompt(\"Fecha del Evento (YYYY-MM-DD):\");\n    const observaciones = prompt(\"Observaciones:\");\n    const estadoPosterior = prompt(\"Estado Posterior (ej. 'vacia', 'produccion'):\");\n\n    if (animalId && tipoEvento && fechaEvento) {\n      onRegisterReproductiveEvent({\n        id: `REC-${Date.now().toString().slice(-5)}`, // Generar ID único\n        idAnimal: animalId,\n        tipoEvento: tipoEvento,\n        fechaEvento: fechaEvento,\n        observaciones: observaciones,\n        estadoPosterior: estadoPosterior,\n      });\n      alert('Evento manual registrado.');\n    } else {\n      alert('Campos obligatorios para evento manual no completados.');\n    }\n  };\n\n  const handleExportHistory = async (format) => {\n    if (reproductiveRecords.length === 0) {\n      alert('No hay registros para exportar.');\n      return;\n    }\n\n    const filename = `historial_reproductivo_${new Date().toISOString().split('T')[0]}`;\n    const farmName = currentUser?.farmName || 'Mi Finca Ganadera';\n    const adminName = currentUser?.fullName || 'Administrador';\n\n    if (format === 'csv') {\n      exportToCsv(reproductiveRecords, filename);\n    } else if (format === 'pdf') {\n      await exportTableToPdf(historyTableRef.current, filename, 'Historial Reproductivo', farmName, adminName, logoUrl);\n    }\n  };\n\n  // Filtrar vacas preñadas para la tabla\n  const pregnantCows = animals.filter(animal => \n    animal.sexo === 'hembra' && animal.estadoReproductivo === 'preñada'\n  );\n\n  return (\n    <div className=\"bg-white p-6 rounded-lg shadow-md\">\n      <h3 className=\"text-xl font-semibold mb-4\">Control Reproductivo</h3>\n\n      <div className=\"flex justify-center mb-6 space-x-4\">\n        <button\n          onClick={() => setCurrentSection('montaNatural')}\n          className={`px-6 py-2 rounded-lg ${currentSection === 'montaNatural' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'} hover:bg-blue-700 transition-colors`}\n        >\n          Monta Natural\n        </button>\n        <button\n          onClick={() => setCurrentSection('inseminacion')}\n          className={`px-6 py-2 rounded-lg ${currentSection === 'inseminacion' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'} hover:bg-blue-700 transition-colors`}\n        >\n          Inseminación\n        </button>\n        <button\n          onClick={() => setCurrentSection('gestacion')}\n          className={`px-6 py-2 rounded-lg ${currentSection === 'gestacion' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'} hover:bg-blue-700 transition-colors`}\n        >\n          Control de Gestación / Parto\n        </button>\n        <button\n          onClick={() => setCurrentSection('historial')}\n          className={`px-6 py-2 rounded-lg ${currentSection === 'historial' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'} hover:bg-blue-700 transition-colors`}\n        >\n          Historial Reproductivo\n        </button>\n      </div>\n\n      {currentSection === 'montaNatural' && (\n        <div className=\"p-4 border rounded-lg bg-gray-50\">\n          <h4 className=\"text-lg font-semibold mb-3\">Registro de Monta Natural</h4>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <label className=\"block text-gray-700 text-sm font-bold mb-1\">Vaca:</label>\n            <select\n              name=\"vacaId\"\n              className=\"w-full px-4 py-2 border rounded-lg\"\n              value={montaNaturalData.vacaId}\n              onChange={handleMontaNaturalChange}\n            >\n              <option value=\"\">Selecciona Vaca</option>\n              {animals.filter(a => a.sexo === 'hembra').map(vaca => (\n                <option key={vaca.id} value={vaca.id}>{vaca.name} ({vaca.id})</option>\n              ))}\n            </select>\n            <label className=\"block text-gray-700 text-sm font-bold mb-1\">Toro:</label>\n            <select\n              name=\"toroId\"\n              className=\"w-full px-4 py-2 border rounded-lg\"\n              value={montaNaturalData.toroId}\n              onChange={handleMontaNaturalChange}\n            >\n              <option value=\"\">Selecciona Toro</option>\n              {animals.filter(a => a.sexo === 'macho').map(toro => (\n                <option key={toro.id} value={toro.id}>{toro.name} ({toro.id})</option>\n              ))}\n            </select>\n            <label className=\"block text-gray-700 text-sm font-bold mb-1\">Fecha de Monta:</label>\n            <input\n              type=\"date\"\n              name=\"fechaMonta\"\n              placeholder=\"Fecha de Monta\"\n              className=\"w-full px-4 py-2 border rounded-lg\"\n              value={montaNaturalData.fechaMonta}\n              onChange={handleMontaNaturalChange}\n            />\n            <label className=\"block text-gray-700 text-sm font-bold mb-1 col-span-full\">Observaciones:</label>\n            <textarea\n              name=\"observaciones\"\n              placeholder=\"Observaciones\"\n              rows=\"2\"\n              className=\"w-full px-4 py-2 border rounded-lg col-span-full\"\n              value={montaNaturalData.observaciones}\n              onChange={handleMontaNaturalChange}\n            ></textarea>\n          </div>\n          <button\n            onClick={handleMontaNaturalSubmit}\n            className=\"mt-4 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors\"\n          >\n            Registrar Monta\n          </button>\n        </div>\n      )}\n\n      {currentSection === 'inseminacion' && (\n        <div className=\"p-4 border rounded-lg bg-gray-50\">\n          <h4 className=\"text-lg font-semibold mb-3\">Registro de Inseminación</h4>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <label className=\"block text-gray-700 text-sm font-bold mb-1\">Vaca:</label>\n            <select\n              name=\"vacaId\"\n              className=\"w-full px-4 py-2 border rounded-lg\"\n              value={inseminacionData.vacaId}\n              onChange={handleInseminacionChange}\n            >\n              <option value=\"\">Selecciona Vaca</option>\n              {animals.filter(a => a.sexo === 'hembra').map(vaca => (\n                <option key={vaca.id} value={vaca.id}>{vaca.name} ({vaca.id})</option>\n              ))}\n            </select>\n            <label className=\"block text-gray-700 text-sm font-bold mb-1\">ID Semen Utilizado:</label>\n            <input\n              type=\"text\"\n              name=\"semenId\"\n              placeholder=\"ID Semen Utilizado\"\n              className=\"w-full px-4 py-2 border rounded-lg\"\n              value={inseminacionData.semenId}\n              onChange={handleInseminacionChange}\n            />\n            <label className=\"block text-gray-700 text-sm font-bold mb-1\">Fecha de Inseminación:</label>\n            <input\n              type=\"date\"\n              name=\"fechaInseminacion\"\n              placeholder=\"Fecha de Inseminación\"\n              className=\"w-full px-4 py-2 border rounded-lg\"\n              value={inseminacionData.fechaInseminacion}\n              onChange={handleInseminacionChange}\n            />\n            <label className=\"block text-gray-700 text-sm font-bold mb-1\">Inseminador:</label>\n            <input\n              type=\"text\"\n              name=\"inseminador\"\n              placeholder=\"Inseminador (Opcional)\"\n              className=\"w-full px-4 py-2 border rounded-lg\"\n              value={inseminacionData.inseminador}\n              onChange={handleInseminacionChange}\n            />\n            <label className=\"block text-gray-700 text-sm font-bold mb-1 col-span-full\">Observaciones:</label>\n            <textarea\n              name=\"observaciones\"\n              placeholder=\"Observaciones\"\n              rows=\"2\"\n              className=\"w-full px-4 py-2 border rounded-lg col-span-full\"\n              value={inseminacionData.observaciones}\n              onChange={handleInseminacionChange}\n            ></textarea>\n          </div>\n          <button\n            onClick={handleInseminacionSubmit}\n            className=\"mt-4 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors\"\n          >\n            Registrar Inseminación\n          </button>\n        </div>\n      )}\n\n      {currentSection === 'gestacion' && (\n        <div className=\"p-4 border rounded-lg bg-gray-50\">\n          <h4 className=\"text-lg font-semibold mb-3\">Control de Gestación / Parto</h4>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <label className=\"block text-gray-700 text-sm font-bold mb-1\">Vaca:</label>\n            <select\n              name=\"vacaId\"\n              className=\"w-full px-4 py-2 border rounded-lg\"\n              value={gestacionData.vacaId}\n              onChange={handleGestacionChange}\n            >\n              <option value=\"\">Selecciona Vaca</option>\n              {animals.filter(a => a.sexo === 'hembra').map(vaca => (\n                <option key={vaca.id} value={vaca.id}>{vaca.name} ({vaca.id})</option>\n              ))}\n            </select>\n            <label className=\"block text-gray-700 text-sm font-bold mb-1\">Fecha Diagnóstico Gestación:</label>\n            <input\n              type=\"date\"\n              name=\"fechaDiagnostico\"\n              placeholder=\"Fecha de Diagnóstico de Gestación\"\n              className=\"w-full px-4 py-2 border rounded-lg\"\n              value={gestacionData.fechaDiagnostico}\n              onChange={handleGestacionChange}\n            />\n            <label className=\"block text-gray-700 text-sm font-bold mb-1\">Resultado Diagnóstico:</label>\n            <select\n              name=\"resultadoDiagnostico\"\n              className=\"w-full px-4 py-2 border rounded-lg\"\n              value={gestacionData.resultadoDiagnostico}\n              onChange={handleGestacionChange}\n            >\n              <option value=\"\">Resultado Diagnóstico</option>\n              <option value=\"positiva\">Positiva (Preñada)</option>\n              <option value=\"negativa\">Negativa</option>\n            </select>\n            {gestacionData.resultadoDiagnostico === 'positiva' && (\n              <>\n                <label className=\"block text-gray-700 text-sm font-bold mb-1\">Fecha de Parto Estimada:</label>\n                <input\n                  type=\"date\"\n                  name=\"fechaPartoEstimada\"\n                  placeholder=\"Fecha de Parto Estimada\"\n                  className=\"w-full px-4 py-2 border rounded-lg\"\n                  value={gestacionData.fechaPartoEstimada}\n                  onChange={handleGestacionChange}\n                  title=\"Calculada automáticamente al registrar monta/inseminación o diagnóstico positivo\"\n                />\n              </>\n            )}\n            <label className=\"block text-gray-700 text-sm font-bold mb-1\">Fecha de Parto Real (si ya ocurrió):</label>\n            <input\n              type=\"date\"\n              name=\"fechaPartoReal\"\n              placeholder=\"Fecha de Parto Real (si ya ocurrió)\"\n              className=\"w-full px-4 py-2 border rounded-lg\"\n              value={gestacionData.fechaPartoReal}\n              onChange={handleGestacionChange}\n            />\n            {gestacionData.fechaPartoReal && (\n              <>\n                <label className=\"block text-gray-700 text-sm font-bold mb-1\">Peso del Ternero (kg):</label>\n                <input\n                  type=\"number\"\n                  name=\"pesoTernero\"\n                  placeholder=\"Peso del Ternero (kg)\"\n                  className=\"w-full px-4 py-2 border rounded-lg\"\n                  value={gestacionData.pesoTernero}\n                  onChange={handleGestacionChange}\n                />\n                <label className=\"block text-gray-700 text-sm font-bold mb-1\">Sexo del Ternero:</label>\n                <select\n                  name=\"sexoTernero\"\n                  className=\"w-full px-4 py-2 border rounded-lg\"\n                  value={gestacionData.sexoTernero}\n                  onChange={handleGestacionChange}\n                >\n                  <option value=\"\">Sexo del Ternero</option>\n                  <option value=\"macho\">Macho</option>\n                  <option value=\"hembra\">Hembra</option>\n                </select>\n                <label className=\"block text-gray-700 text-sm font-bold mb-1\">Nombre del Ternero:</label>\n                <input\n                  type=\"text\"\n                  name=\"nombreTernero\"\n                  placeholder=\"Nombre del Ternero\"\n                  className=\"w-full px-4 py-2 border rounded-lg\"\n                  value={gestacionData.nombreTernero}\n                  onChange={handleGestacionChange}\n                />\n              </>\n            )}\n            <label className=\"block text-gray-700 text-sm font-bold mb-1 col-span-full\">Observaciones del Parto:</label>\n            <textarea\n              name=\"observacionesParto\"\n              placeholder=\"Observaciones del Parto\"\n              rows=\"2\"\n              className=\"w-full px-4 py-2 border rounded-lg col-span-full\"\n              value={gestacionData.observacionesParto}\n              onChange={handleGestacionChange}\n            ></textarea>\n          </div>\n          <button\n            onClick={handleGestacionSubmit}\n            className=\"mt-4 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors\"\n          >\n            Registrar Gestación / Parto\n          </button>\n        </div>\n      )}\n\n      {currentSection === 'historial' && (\n        <div className=\"p-4 border rounded-lg bg-gray-50\">\n          <h4 className=\"text-lg font-semibold mb-3\">Historial Reproductivo</h4>\n          <div className=\"flex justify-between items-center mb-4\">\n            <button\n              onClick={handleAddManualEvent}\n              className=\"bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors\"\n            >\n              Registrar Evento Manual\n            </button>\n            <div>\n              <button\n                onClick={() => handleExportHistory('csv')}\n                className=\"bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors mr-2\"\n              >\n                Exportar a CSV\n              </button>\n              <button\n                onClick={() => handleExportHistory('pdf')}\n                className=\"bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition-colors\"\n              >\n                Exportar a PDF\n              </button>\n            </div>\n          </div>\n          <div className=\"overflow-x-auto rounded-lg shadow-md\">\n            <table ref={historyTableRef} className=\"min-w-full bg-white text-sm\">\n              <thead className=\"bg-gray-800 text-white\">\n                <tr>\n                  <th className=\"py-3 px-4 text-left font-semibold rounded-tl-lg\">ID Evento</th>\n                  <th className=\"py-3 px-4 text-left font-semibold\">ID Animal</th>\n                  <th className=\"py-3 px-4 text-left font-semibold\">Tipo Evento</th>\n                  <th className=\"py-3 px-4 text-left font-semibold\">Fecha Evento</th>\n                  <th className=\"py-3 px-4 text-left font-semibold\">Observaciones</th>\n                  <th className=\"py-3 px-4 text-left font-semibold\">Estado Posterior</th>\n                  <th className=\"py-3 px-4 text-left font-semibold rounded-tr-lg\">Acciones</th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-gray-200\">\n                {reproductiveRecords.map((record) => (\n                  <tr key={record.id} className=\"hover:bg-gray-100 transition-colors\">\n                    <td className=\"py-3 px-4\">{record.id}</td>\n                    <td className=\"py-3 px-4\">{record.idAnimal}</td>\n                    <td className=\"py-3 px-4\">{record.tipoEvento}</td>\n                    <td className=\"py-3 px-4\">{record.fechaEvento}</td>\n                    <td className=\"py-3 px-4\">{record.observaciones}</td>\n                    <td className=\"py-3 px-4\">{record.estadoPosterior}</td>\n                    <td className=\"py-3 px-4\">\n                      <button\n                        onClick={() => startEditingHistoryRecord(record)}\n                        className=\"text-blue-600 hover:text-blue-800 font-medium mr-2 transition-colors\"\n                      >\n                        Editar\n                      </button>\n                      <button\n                        onClick={() => handleDeleteHistoryRecord(record.id)}\n                        className=\"text-red-600 hover:text-red-800 font-medium transition-colors\"\n                      >\n                        Eliminar\n                      </button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n\n          {/* Edit Form for History Record */}\n          {editingRecord && (\n            <div className=\"mt-8 p-6 border rounded-lg bg-yellow-50 shadow-lg\">\n              <h4 className=\"text-lg font-semibold mb-4 text-gray-800\">Editar Registro Histórico: {editingRecord.id}</h4>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-gray-700 text-sm font-bold mb-1\">Tipo Evento:</label>\n                  <input\n                    type=\"text\"\n                    name=\"tipoEvento\"\n                    className=\"w-full px-4 py-2 border rounded-lg bg-gray-200 cursor-not-allowed\"\n                    value={editingRecord.tipoEvento}\n                    readOnly\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-gray-700 text-sm font-bold mb-1\">Fecha Evento:</label>\n                  <input\n                    type=\"date\"\n                    name=\"fechaEvento\"\n                    className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                    value={editingRecord.fechaEvento}\n                    onChange={handleEditingHistoryChange}\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-gray-700 text-sm font-bold mb-1\">Estado Posterior:</label>\n                  <input\n                    type=\"text\"\n                    name=\"estadoPosterior\"\n                    className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                    value={editingRecord.estadoPosterior}\n                    onChange={handleEditingHistoryChange}\n                  />\n                </div>\n                <div className=\"col-span-full\">\n                  <label className=\"block text-gray-700 text-sm font-bold mb-1\">Observaciones:</label>\n                  <textarea\n                    name=\"observaciones\"\n                    rows=\"3\"\n                    className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                    value={editingRecord.observaciones}\n                    onChange={handleEditingHistoryChange}\n                  ></textarea>\n                </div>\n              </div>\n              <div className=\"mt-6 flex justify-end space-x-3\">\n                <button\n                  onClick={saveEditedHistoryRecord}\n                  className=\"bg-green-600 text-white py-2 px-5 rounded-lg hover:bg-green-700 transition-colors shadow-md\"\n                >\n                  Guardar Cambios\n                </button>\n                <button\n                  onClick={cancelEditingHistoryRecord}\n                  className=\"bg-gray-600 text-white py-2 px-5 rounded-lg hover:bg-gray-700 transition-colors shadow-md\"\n                >\n                  Cancelar Edición\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Calendario de Gestación y Vacas Preñadas */}\n      <div className=\"mt-8 pt-4 border-t border-gray-200\">\n        <h4 className=\"text-lg font-semibold mb-3\">Vacas Preñadas y Calendario de Gestación</h4>\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full bg-white border text-sm\">\n            <thead className=\"bg-gray-100\">\n              <tr>\n                <th className=\"py-2 px-4 border\">ID Vaca</th>\n                <th className=\"py-2 px-4 border\">Nombre</th>\n                <th className=\"py-2 px-4 border\">Fecha Monta/Insem.</th>\n                <th className=\"py-2 px-4 border\">Fecha Parto Estimada</th>\n                <th className=\"py-2 px-4 border\">Días Restantes</th>\n                <th className=\"py-2 px-4 border\">Acciones</th>\n              </tr>\n            </thead>\n            <tbody>\n              {pregnantCows.map(vaca => {\n                // Asegurarse de que fechaUltimaGestacion sea una fecha válida\n                const fechaMonta = new Date(vaca.fechaUltimaGestacion);\n                \n                // Verificar si fechaMonta es una fecha válida antes de proceder\n                if (isNaN(fechaMonta.getTime())) {\n                  return (\n                    <tr key={vaca.id}>\n                      <td className=\"py-2 px-4 border\">{vaca.id}</td>\n                      <td className=\"py-2 px-4 border\">{vaca.name}</td>\n                      <td className=\"py-2 px-4 border\">Fecha inválida</td>\n                      <td className=\"py-2 px-4 border\">N/A</td>\n                      <td className=\"py-2 px-4 border\">N/A</td>\n                      <td className=\"py-2 px-4 border\">\n                        <button\n                          className=\"text-red-600 hover:underline\"\n                          onClick={() => onDeletePregnantCow(vaca.id)}\n                        >\n                          Eliminar\n                        </button>\n                      </td>\n                    </tr>\n                  );\n                }\n\n                const fechaParto = new Date(fechaMonta);\n                fechaParto.setDate(fechaParto.getDate() + GESTATION_DAYS); // Usar la constante\n                const diasRestantes = calcularDiasRestantes(fechaParto.toISOString().split('T')[0]);\n\n                return (\n                  <tr key={vaca.id}>\n                    <td className=\"py-2 px-4 border\">{vaca.id}</td>\n                    <td className=\"py-2 px-4 border\">{vaca.name}</td>\n                    <td className=\"py-2 px-4 border\">{vaca.fechaUltimaGestacion || 'N/A'}</td>\n                    <td className=\"py-2 px-4 border\">{fechaParto.toISOString().split('T')[0]}</td>\n                    <td className=\"py-2 px-4 border\">{isNaN(diasRestantes) ? 'N/A' : (diasRestantes >= 0 ? diasRestantes : 'Venció')}</td>\n                    <td className=\"py-2 px-4 border\">\n                      <button\n                        className=\"text-red-600 hover:underline\"\n                        onClick={() => onDeletePregnantCow(vaca.id)}\n                      >\n                        Eliminar\n                      </button>\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ReproductiveControlPage;\n\n// DONE"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
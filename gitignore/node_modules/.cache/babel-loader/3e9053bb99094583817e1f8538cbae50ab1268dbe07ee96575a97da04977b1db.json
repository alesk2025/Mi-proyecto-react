{"ast":null,"code":"import _objectSpread from\"C:/Users/User/Downloads/project (10)/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import jsPDF from'jspdf';import html2canvas from'html2canvas';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const EconomicManagementPage=_ref=>{let{transactions,onAddTransaction,onDeleteTransaction,animals,employees,payslips,thirdPartyPayments,currentUser}=_ref;const[transaction,setTransaction]=useState({type:'ingreso',category:'',amount:'',// Para ingresos, gastos, compras\ndescription:'',animalId:'',// Opcional\n// Campos específicos para Venta\nproduct:'',quantity:'',unit:'',pricePerUnit:'',client:'',date:new Date().toISOString().split('T')[0],// Fecha de registro/emisión de la transacción\n// Nuevos campos para ingresos con rango de fechas\nstartDate:'',endDate:''});const[reportPeriod,setReportPeriod]=useState('monthly');// 'daily', 'weekly', 'monthly'\nconst[selectedDate,setSelectedDate]=useState(new Date().toISOString().split('T')[0]);// Para reporte diario\nconst[selectedMonth,setSelectedMonth]=useState(new Date().toISOString().slice(0,7));// Para reporte mensual (YYYY-MM)\nconst[selectedWeek,setSelectedWeek]=useState(getWeekNumber(new Date()));// Para reporte semanal {year, week}\nconst handleInputChange=e=>{const{name,value}=e.target;setTransaction(_objectSpread(_objectSpread({},transaction),{},{[name]:value}));};const calculateTotalSale=()=>{const qty=parseFloat(transaction.quantity);const price=parseFloat(transaction.pricePerUnit);return(qty*price).toFixed(2);};const handleSubmit=()=>{if(!transaction.date){alert('Por favor, selecciona la fecha de la transacción.');return;}if(transaction.type==='ingreso'&&(!transaction.startDate||!transaction.endDate)){alert('Para ingresos, por favor, selecciona la fecha de inicio y fin del período.');return;}let finalTransaction=_objectSpread({},transaction);if(transaction.type==='venta'){finalTransaction.total=parseFloat(calculateTotalSale());}else{finalTransaction.total=parseFloat(transaction.amount);}const newId=\"TRX-\".concat(Date.now().toString().slice(-5));onAddTransaction(_objectSpread(_objectSpread({},finalTransaction),{},{id:newId}));alert(\"Transacci\\xF3n de \".concat(finalTransaction.type,\" registrada por $\").concat(finalTransaction.total,\".\"));// Limpiar formulario\nsetTransaction({type:'ingreso',category:'',amount:'',description:'',animalId:'',product:'',quantity:'',unit:'',pricePerUnit:'',client:'',date:new Date().toISOString().split('T')[0],// Resetear fecha a hoy\nstartDate:'',endDate:''// Resetear campos de fecha de período\n});};const handleGenerateInvoice=saleData=>{if(!saleData||!saleData.client||!saleData.product||!saleData.quantity||!saleData.pricePerUnit){alert('Por favor, completa todos los campos de la venta para generar la factura.');return;}const farmName=(currentUser===null||currentUser===void 0?void 0:currentUser.farmName)||'Mi Finca Ganadera';const adminName=(currentUser===null||currentUser===void 0?void 0:currentUser.fullName)||'Administrador';const logoPlaceholder='https://via.placeholder.com/60x60?text=LOGO';const tempDiv=document.createElement('div');tempDiv.style.width='210mm';tempDiv.style.padding='20mm';tempDiv.style.fontFamily='Arial, sans-serif';tempDiv.style.fontSize='11pt';tempDiv.style.color='#333';tempDiv.style.position='absolute';tempDiv.style.left='-9999px';tempDiv.style.top='-9999px';tempDiv.style.backgroundColor='#fff';const total=parseFloat(saleData.total||0).toFixed(2);const precioUnitario=parseFloat(saleData.pricePerUnit||0).toFixed(2);tempDiv.innerHTML=\"\\n  <div style=\\\"border: 2px solid #ccc; border-radius: 10px; padding: 20px;\\\">\\n    <div style=\\\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;\\\">\\n      <img src=\\\"\".concat(logoPlaceholder,\"\\\" style=\\\"width: 60px;\\\" alt=\\\"Logo Finca\\\" />\\n      <div style=\\\"text-align: right;\\\">\\n        <h1 style=\\\"margin: 0; color: #2c3e50;\\\">\").concat(farmName,\"</h1>\\n        <p style=\\\"margin: 0; color: #7f8c8d;\\\">Factura de Venta</p>\\n      </div>\\n    </div>\\n\\n    <div style=\\\"margin-bottom: 15px;\\\">\\n      <p><strong>ID Factura:</strong> \").concat(saleData.id||'N/A',\"</p>\\n      <p><strong>Fecha:</strong> \").concat(saleData.date||'N/A',\"</p>\\n      <p><strong>Cliente:</strong> \").concat(saleData.client||'N/A',\"</p>\\n    </div>\\n\\n    <table style=\\\"width: 100%; border-collapse: collapse; margin-top: 10px; margin-bottom: 20px;\\\">\\n      <thead style=\\\"background-color: #f4f4f4;\\\">\\n        <tr>\\n          <th style=\\\"padding: 10px; border: 1px solid #ccc;\\\">Producto</th>\\n          <th style=\\\"padding: 10px; border: 1px solid #ccc;\\\">Cantidad</th>\\n          <th style=\\\"padding: 10px; border: 1px solid #ccc;\\\">Unidad</th>\\n          <th style=\\\"padding: 10px; border: 1px solid #ccc;\\\">Precio Unitario</th>\\n          <th style=\\\"padding: 10px; border: 1px solid #ccc;\\\">Total</th>\\n        </tr>\\n      </thead>\\n      <tbody>\\n        <tr>\\n          <td style=\\\"padding: 10px; border: 1px solid #ccc;\\\">\").concat(saleData.product,\"</td>\\n          <td style=\\\"padding: 10px; border: 1px solid #ccc;\\\">\").concat(saleData.quantity,\"</td>\\n          <td style=\\\"padding: 10px; border: 1px solid #ccc;\\\">\").concat(saleData.unit,\"</td>\\n          <td style=\\\"padding: 10px; border: 1px solid #ccc;\\\">$\").concat(parseFloat(saleData.pricePerUnit||0).toFixed(2),\"</td>\\n          <td style=\\\"padding: 10px; border: 1px solid #ccc;\\\">$\").concat(parseFloat(saleData.total||0).toFixed(2),\"</td>\\n        </tr>\\n      </tbody>\\n    </table>\\n\\n    <h2 style=\\\"text-align: right; color: #2c3e50;\\\">Total: $\").concat(parseFloat(saleData.total||0).toFixed(2),\"</h2>\\n\\n    <p style=\\\"text-align: center; font-size: 10pt; color: #7f8c8d; margin-top: 40px;\\\">\\n      Generado por Campo Inteligente | \").concat(adminName,\"\\n    </p>\\n  </div>\\n\");document.body.appendChild(tempDiv);html2canvas(tempDiv,{scale:2}).then(canvas=>{const imgData=canvas.toDataURL('image/png');const pdf=new jsPDF('p','mm','a4');const imgWidth=210;const pageHeight=297;const imgHeight=canvas.height*imgWidth/canvas.width;let heightLeft=imgHeight;let position=0;pdf.addImage(imgData,'PNG',0,position,imgWidth,imgHeight);heightLeft-=pageHeight;while(heightLeft>=0){position=heightLeft-imgHeight;pdf.addPage();pdf.addImage(imgData,'PNG',0,position,imgWidth,imgHeight);heightLeft-=pageHeight;}pdf.save(\"factura_${saleData.client || 'sin_cliente'}_${saleData.id || 'sin_id'}.pdf\");document.body.removeChild(tempDiv);});};// --- Funciones de Utilidad de Fechas ---\nconst normalizeDate=date=>{const d=new Date(date);d.setHours(0,0,0,0);return d;};function getWeekNumber(d){d=new Date(Date.UTC(d.getFullYear(),d.getMonth(),d.getDate()));d.setUTCDate(d.getUTCDate()+4-(d.getUTCDay()||7));const yearStart=new Date(Date.UTC(d.getUTCFullYear(),0,1));const weekNo=Math.ceil(((d-yearStart)/86400000+1)/7);return{year:d.getUTCFullYear(),week:weekNo};}const getStartAndEndOfWeek=(year,week)=>{const date=new Date(year,0,1+(week-1)*7);// Start of the week in the given year\nconst day=date.getDay();// Day of week (0-6)\nconst diff=date.getDate()-day+(day===0?-6:1);// Adjust to Monday\nconst startOfWeek=normalizeDate(new Date(date.setDate(diff)));const endOfWeek=normalizeDate(new Date(startOfWeek));endOfWeek.setDate(startOfWeek.getDate()+6);return{start:startOfWeek,end:endOfWeek};};// --- Lógica de Filtrado de Reportes ---\nconst filterItemsBySelectedPeriod=(items,dateProp)=>{return items.filter(item=>{const itemDate=normalizeDate(item[dateProp]);if(reportPeriod==='daily'){const selectedDay=normalizeDate(selectedDate);return itemDate.getTime()===selectedDay.getTime();}else if(reportPeriod==='weekly'){const{start,end}=getStartAndEndOfWeek(selectedWeek.year,selectedWeek.week);return itemDate>=start&&itemDate<=end;}else if(reportPeriod==='monthly'){const[year,month]=selectedMonth.split('-').map(Number);return itemDate.getFullYear()===year&&itemDate.getMonth()===month-1;}return false;// No debería llegar aquí\n});};const currentPeriodTransactions=filterItemsBySelectedPeriod(transactions,'date');const currentPeriodPayslips=filterItemsBySelectedPeriod(payslips,'paymentDate');const currentPeriodThirdPartyPayments=filterItemsBySelectedPeriod(thirdPartyPayments,'date');// Filtrar pagos a terceros\n// Calcular ingresos del período\nconst totalIncomePeriod=currentPeriodTransactions.filter(t=>t.type==='ingreso'||t.type==='venta').reduce((sum,t)=>sum+t.total,0);// Calcular gastos del período (compras, gastos, y nómina)\nconst transactionExpensesPeriod=currentPeriodTransactions.filter(t=>t.type==='gasto'||t.type==='compra').reduce((sum,t)=>sum+t.total,0);const payslipExpensesPeriod=currentPeriodPayslips.reduce((sum,ps)=>sum+(parseFloat(ps.netSalary)||0),0);const thirdPartyExpensesPeriod=currentPeriodThirdPartyPayments.reduce((sum,tpp)=>sum+(parseFloat(tpp.amount)||0),0);const totalExpensesPeriod=transactionExpensesPeriod+payslipExpensesPeriod+thirdPartyExpensesPeriod;// Calcular ganancia neta del período\nconst netProfitPeriod=totalIncomePeriod-totalExpensesPeriod;// --- Depuración (puedes quitar estos useEffects una vez que funcione) ---\nuseEffect(()=>{console.log(\"--- Reporte \".concat(reportPeriod,\" ---\"));console.log('Transacciones filtradas:',currentPeriodTransactions);console.log('Fichas de pago filtradas:',currentPeriodPayslips);console.log('Pagos a terceros filtrados:',currentPeriodThirdPartyPayments);console.log('Ingresos del periodo:',totalIncomePeriod);console.log('Gastos de transacciones del periodo:',transactionExpensesPeriod);console.log('Gastos de nómina del periodo:',payslipExpensesPeriod);console.log('Gastos de terceros del periodo:',thirdPartyExpensesPeriod);console.log('Gastos Totales del periodo:',totalExpensesPeriod);console.log('Ganancia Neta del periodo:',netProfitPeriod);},[reportPeriod,selectedDate,selectedMonth,selectedWeek,transactions,payslips,thirdPartyPayments]);// --- Rentabilidad por Animal (se mantiene igual, no depende del periodo de reporte) ---\nconst safeEmployees=employees||[];const safeAnimals=animals||[];const totalSalaries=safeEmployees.reduce((sum,emp)=>sum+(parseFloat(emp.salary)||0),0);const cowsInProductionCount=safeAnimals.filter(a=>a.tipoProduccion==='leche'&&a.status==='en_produccion').length;const laborCostPerCow=cowsInProductionCount>0?totalSalaries/cowsInProductionCount:0;const animalProfitability=safeAnimals.map(animal=>{const animalIncome=transactions.filter(t=>t.animalId===animal.id&&t.type==='venta').reduce((sum,t)=>sum+t.total,0);const animalExpenses=transactions.filter(t=>t.animalId===animal.id&&(t.type==='gasto'||t.type==='compra')).reduce((sum,t)=>sum+t.total,0);let proratedLaborCost=0;if(animal.tipoProduccion==='leche'&&animal.status==='en_produccion'){proratedLaborCost=laborCostPerCow;}const totalCost=animalExpenses+proratedLaborCost;const netProfitAnimal=animalIncome-totalCost;return{id:animal.id,name:animal.name,tipoProduccion:animal.tipoProduccion,status:animal.status,income:animalIncome,expenses:animalExpenses,proratedLabor:proratedLaborCost,totalCost:totalCost,netProfit:netProfitAnimal};});// Información de la finca/criador para PDFs\nconst farmName=(currentUser===null||currentUser===void 0?void 0:currentUser.farmName)||'Mi Finca Ganadera';const adminName=(currentUser===null||currentUser===void 0?void 0:currentUser.fullName)||'Administrador';const logoPlaceholder='https://via.placeholder.com/50x50?text=LOGO';// Placeholder de logo\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-4\",children:\"Gesti\\xF3n Econ\\xF3mica\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8 p-4 border rounded-lg bg-green-50\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold mb-3\",children:\"Reportes Financieros Peri\\xF3dicos\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center mb-4 space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setReportPeriod('daily'),className:\"px-4 py-2 rounded-lg \".concat(reportPeriod==='daily'?'bg-blue-600 text-white':'bg-gray-200 text-gray-800',\" hover:bg-blue-700 transition-colors\"),children:\"Diario\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setReportPeriod('weekly'),className:\"px-4 py-2 rounded-lg \".concat(reportPeriod==='weekly'?'bg-blue-600 text-white':'bg-gray-200 text-gray-800',\" hover:bg-blue-700 transition-colors\"),children:\"Semanal\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setReportPeriod('monthly'),className:\"px-4 py-2 rounded-lg \".concat(reportPeriod==='monthly'?'bg-blue-600 text-white':'bg-gray-200 text-gray-800',\" hover:bg-blue-700 transition-colors\"),children:\"Mensual\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 flex justify-center\",children:[reportPeriod==='daily'&&/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:selectedDate,onChange:e=>setSelectedDate(e.target.value),className:\"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"}),reportPeriod==='weekly'&&/*#__PURE__*/_jsx(\"input\",{type:\"week\"// Input tipo week (YYYY-WNN)\n,value:\"\".concat(selectedWeek.year,\"-W\").concat(String(selectedWeek.week).padStart(2,'0')),onChange:e=>{const[year,week]=e.target.value.split('-W');setSelectedWeek({year:Number(year),week:Number(week)});},className:\"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"}),reportPeriod==='monthly'&&/*#__PURE__*/_jsx(\"input\",{type:\"month\"// Input tipo month (YYYY-MM)\n,value:selectedMonth,onChange:e=>setSelectedMonth(e.target.value),className:\"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 text-center mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-green-100 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium\",children:\"Ingresos del Periodo\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold\",children:[\"$\",totalIncomePeriod.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-red-100 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium\",children:\"Gastos del Periodo\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold\",children:[\"$\",totalExpensesPeriod.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-blue-100 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium\",children:\"Ganancia Neta del Periodo\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold\",children:[\"$\",netProfitPeriod.toFixed(2)]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8 p-4 border rounded-lg bg-yellow-50\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold mb-3\",children:\"Rentabilidad por Animal\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full bg-white border\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"ID Animal\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Nombre\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Tipo Prod.\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Ingresos\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Gastos Directos\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Mano Obra Prorrat.\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Costo Total\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Ganancia Neta\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:animalProfitability.map(ap=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border\",children:ap.id}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border\",children:ap.name}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border\",children:ap.tipoProduccion}),/*#__PURE__*/_jsxs(\"td\",{className:\"py-2 px-4 border\",children:[\"$\",ap.income.toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{className:\"py-2 px-4 border\",children:[\"$\",ap.expenses.toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{className:\"py-2 px-4 border\",children:[\"$\",ap.proratedLabor.toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{className:\"py-2 px-4 border\",children:[\"$\",ap.totalCost.toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{className:\"py-2 px-4 border \".concat(ap.netProfit>=0?'text-green-600':'text-red-600'),children:[\"$\",ap.netProfit.toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border\"})]},ap.id))})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8 p-4 border rounded-lg bg-gray-50\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold mb-3\",children:\"Registrar Nueva Transacci\\xF3n\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"select\",{name:\"type\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:transaction.type,onChange:handleInputChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"ingreso\",children:\"Ingreso\"}),/*#__PURE__*/_jsx(\"option\",{value:\"gasto\",children:\"Gasto\"}),/*#__PURE__*/_jsx(\"option\",{value:\"compra\",children:\"Compra\"}),/*#__PURE__*/_jsx(\"option\",{value:\"venta\",children:\"Venta\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"category\",placeholder:\"Categor\\xEDa (Ej: Alimento, Venta de Leche)\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:transaction.category,onChange:handleInputChange}),transaction.type!=='venta'&&/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"amount\",placeholder:\"Monto\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:transaction.amount,onChange:handleInputChange}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"description\",placeholder:\"Descripci\\xF3n Detallada\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:transaction.description,onChange:handleInputChange}),/*#__PURE__*/_jsxs(\"select\",{name:\"animalId\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:transaction.animalId,onChange:handleInputChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Asociar a Animal (Opcional)\"}),safeAnimals.map(animal=>/*#__PURE__*/_jsxs(\"option\",{value:animal.id,children:[animal.name,\" (\",animal.id,\")\"]},animal.id))]}),transaction.type==='venta'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"product\",placeholder:\"Producto (Ej: Leche, Carne)\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:transaction.product,onChange:handleInputChange}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"quantity\",placeholder:\"Cantidad\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:transaction.quantity,onChange:handleInputChange}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"unit\",placeholder:\"Unidad (Ej: litros, kg)\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:transaction.unit,onChange:handleInputChange}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"pricePerUnit\",placeholder:\"Precio por unidad\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:transaction.pricePerUnit,onChange:handleInputChange}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"client\",placeholder:\"Cliente\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:transaction.client,onChange:handleInputChange}),/*#__PURE__*/_jsx(\"div\",{className:\"col-span-full p-2 bg-gray-100 rounded-lg\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold\",children:[\"Total de Venta: $\",calculateTotalSale()]})})]}),transaction.type==='ingreso'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"startDate\",placeholder:\"Fecha Inicio Per\\xEDodo Ingreso\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:transaction.startDate,onChange:handleInputChange}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"endDate\",placeholder:\"Fecha Fin Per\\xEDodo Ingreso\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:transaction.endDate,onChange:handleInputChange})]}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"date\",placeholder:\"Fecha de Transacci\\xF3n\",className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\",value:transaction.date,onChange:handleInputChange})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,className:\"mt-6 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors mr-2\",children:\"Registrar Transacci\\xF3n\"}),transaction.type==='venta'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleGenerateInvoice(transaction)// Pasar la transacción actual para generar PDF\n,className:\"mt-6 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors\",children:\"Generar Factura\"})]}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold mb-3\",children:\"Historial de Transacciones\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full bg-white border\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Tipo\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Categor\\xEDa\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Descripci\\xF3n\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Monto\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Animal ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Fecha\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border\",children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:transactions.map(trx=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border\",children:trx.id}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border\",children:trx.type}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border\",children:trx.category}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border\",children:trx.description||trx.product}),/*#__PURE__*/_jsxs(\"td\",{className:\"py-2 px-4 border\",children:[\"$\",trx.total.toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border\",children:trx.animalId||'N/A'}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border\",children:trx.date||'N/A'}),/*#__PURE__*/_jsxs(\"td\",{className:\"py-2 px-4 border\",children:[trx.type==='venta'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleGenerateInvoice(trx)// Pasar la transacción para generar PDF\n,className:\"text-blue-600 hover:underline mr-2\",children:\"Ver PDF\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onDeleteTransaction(trx.id),className:\"text-red-600 hover:underline\",children:\"Eliminar\"})]})]},trx.id))})]})})]});};export default EconomicManagementPage;","map":{"version":3,"names":["React","useState","useEffect","jsPDF","html2canvas","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","EconomicManagementPage","_ref","transactions","onAddTransaction","onDeleteTransaction","animals","employees","payslips","thirdPartyPayments","currentUser","transaction","setTransaction","type","category","amount","description","animalId","product","quantity","unit","pricePerUnit","client","date","Date","toISOString","split","startDate","endDate","reportPeriod","setReportPeriod","selectedDate","setSelectedDate","selectedMonth","setSelectedMonth","slice","selectedWeek","setSelectedWeek","getWeekNumber","handleInputChange","e","name","value","target","_objectSpread","calculateTotalSale","qty","parseFloat","price","toFixed","handleSubmit","alert","finalTransaction","total","newId","concat","now","toString","id","handleGenerateInvoice","saleData","farmName","adminName","fullName","logoPlaceholder","tempDiv","document","createElement","style","width","padding","fontFamily","fontSize","color","position","left","top","backgroundColor","precioUnitario","innerHTML","body","appendChild","scale","then","canvas","imgData","toDataURL","pdf","imgWidth","pageHeight","imgHeight","height","heightLeft","addImage","addPage","save","removeChild","normalizeDate","d","setHours","UTC","getFullYear","getMonth","getDate","setUTCDate","getUTCDate","getUTCDay","yearStart","getUTCFullYear","weekNo","Math","ceil","year","week","getStartAndEndOfWeek","day","getDay","diff","startOfWeek","setDate","endOfWeek","start","end","filterItemsBySelectedPeriod","items","dateProp","filter","item","itemDate","selectedDay","getTime","month","map","Number","currentPeriodTransactions","currentPeriodPayslips","currentPeriodThirdPartyPayments","totalIncomePeriod","t","reduce","sum","transactionExpensesPeriod","payslipExpensesPeriod","ps","netSalary","thirdPartyExpensesPeriod","tpp","totalExpensesPeriod","netProfitPeriod","console","log","safeEmployees","safeAnimals","totalSalaries","emp","salary","cowsInProductionCount","a","tipoProduccion","status","length","laborCostPerCow","animalProfitability","animal","animalIncome","animalExpenses","proratedLaborCost","totalCost","netProfitAnimal","income","expenses","proratedLabor","netProfit","className","children","onClick","onChange","String","padStart","ap","placeholder","trx"],"sources":["C:/Users/User/Downloads/project (10)/src/components/EconomicManagementPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\n\nconst EconomicManagementPage = ({ transactions, onAddTransaction, onDeleteTransaction, animals, employees, payslips, thirdPartyPayments, currentUser }) => {\n  const [transaction, setTransaction] = useState({\n    type: 'ingreso',\n    category: '',\n    amount: '', // Para ingresos, gastos, compras\n    description: '',\n    animalId: '', // Opcional\n    // Campos específicos para Venta\n    product: '',\n    quantity: '',\n    unit: '',\n    pricePerUnit: '',\n    client: '',\n    date: new Date().toISOString().split('T')[0], // Fecha de registro/emisión de la transacción\n    // Nuevos campos para ingresos con rango de fechas\n    startDate: '',\n    endDate: '',\n  });\n  const [reportPeriod, setReportPeriod] = useState('monthly'); // 'daily', 'weekly', 'monthly'\n  const [selectedDate, setSelectedDate] = useState(new Date().toISOString().split('T')[0]); // Para reporte diario\n  const [selectedMonth, setSelectedMonth] = useState(new Date().toISOString().slice(0, 7)); // Para reporte mensual (YYYY-MM)\n  const [selectedWeek, setSelectedWeek] = useState(getWeekNumber(new Date())); // Para reporte semanal {year, week}\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setTransaction({ ...transaction, [name]: value });\n  };\n\n  const calculateTotalSale = () => {\n    const qty = parseFloat(transaction.quantity);\n    const price = parseFloat(transaction.pricePerUnit);\n    return (qty * price).toFixed(2);\n  };\n\n  const handleSubmit = () => {\n    if (!transaction.date) {\n      alert('Por favor, selecciona la fecha de la transacción.');\n      return;\n    }\n    if (transaction.type === 'ingreso' && (!transaction.startDate || !transaction.endDate)) {\n      alert('Para ingresos, por favor, selecciona la fecha de inicio y fin del período.');\n      return;\n    }\n\n    let finalTransaction = { ...transaction };\n    if (transaction.type === 'venta') {\n      finalTransaction.total = parseFloat(calculateTotalSale());\n    } else {\n      finalTransaction.total = parseFloat(transaction.amount);\n    }\n    \n    const newId = `TRX-${Date.now().toString().slice(-5)}`;\n    onAddTransaction({ ...finalTransaction, id: newId });\n    alert(`Transacción de ${finalTransaction.type} registrada por $${finalTransaction.total}.`);\n    // Limpiar formulario\n    setTransaction({\n      type: 'ingreso', category: '', amount: '', description: '',\n      animalId: '', product: '', quantity: '', unit: '', pricePerUnit: '', client: '',\n      date: new Date().toISOString().split('T')[0], // Resetear fecha a hoy\n      startDate: '', endDate: '', // Resetear campos de fecha de período\n    });\n  };\n\n  const handleGenerateInvoice = (saleData) => {\n  if (!saleData || !saleData.client || !saleData.product || !saleData.quantity || !saleData.pricePerUnit) {\n    alert('Por favor, completa todos los campos de la venta para generar la factura.');\n    return;\n  }\n\n  const farmName = currentUser?.farmName || 'Mi Finca Ganadera';\n  const adminName = currentUser?.fullName || 'Administrador';\n  const logoPlaceholder = 'https://via.placeholder.com/60x60?text=LOGO';\n\n  const tempDiv = document.createElement('div');\n  tempDiv.style.width = '210mm';\n  tempDiv.style.padding = '20mm';\n  tempDiv.style.fontFamily = 'Arial, sans-serif';\n  tempDiv.style.fontSize = '11pt';\n  tempDiv.style.color = '#333';\n  tempDiv.style.position = 'absolute';\n  tempDiv.style.left = '-9999px';\n  tempDiv.style.top = '-9999px';\n  tempDiv.style.backgroundColor = '#fff';\n\n  const total = parseFloat(saleData.total || 0).toFixed(2);\n  const precioUnitario = parseFloat(saleData.pricePerUnit || 0).toFixed(2);\n\n  tempDiv.innerHTML = `\n  <div style=\"border: 2px solid #ccc; border-radius: 10px; padding: 20px;\">\n    <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;\">\n      <img src=\"${logoPlaceholder}\" style=\"width: 60px;\" alt=\"Logo Finca\" />\n      <div style=\"text-align: right;\">\n        <h1 style=\"margin: 0; color: #2c3e50;\">${farmName}</h1>\n        <p style=\"margin: 0; color: #7f8c8d;\">Factura de Venta</p>\n      </div>\n    </div>\n\n    <div style=\"margin-bottom: 15px;\">\n      <p><strong>ID Factura:</strong> ${saleData.id || 'N/A'}</p>\n      <p><strong>Fecha:</strong> ${saleData.date || 'N/A'}</p>\n      <p><strong>Cliente:</strong> ${saleData.client || 'N/A'}</p>\n    </div>\n\n    <table style=\"width: 100%; border-collapse: collapse; margin-top: 10px; margin-bottom: 20px;\">\n      <thead style=\"background-color: #f4f4f4;\">\n        <tr>\n          <th style=\"padding: 10px; border: 1px solid #ccc;\">Producto</th>\n          <th style=\"padding: 10px; border: 1px solid #ccc;\">Cantidad</th>\n          <th style=\"padding: 10px; border: 1px solid #ccc;\">Unidad</th>\n          <th style=\"padding: 10px; border: 1px solid #ccc;\">Precio Unitario</th>\n          <th style=\"padding: 10px; border: 1px solid #ccc;\">Total</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td style=\"padding: 10px; border: 1px solid #ccc;\">${saleData.product}</td>\n          <td style=\"padding: 10px; border: 1px solid #ccc;\">${saleData.quantity}</td>\n          <td style=\"padding: 10px; border: 1px solid #ccc;\">${saleData.unit}</td>\n          <td style=\"padding: 10px; border: 1px solid #ccc;\">$${parseFloat(saleData.pricePerUnit || 0).toFixed(2)}</td>\n          <td style=\"padding: 10px; border: 1px solid #ccc;\">$${parseFloat(saleData.total || 0).toFixed(2)}</td>\n        </tr>\n      </tbody>\n    </table>\n\n    <h2 style=\"text-align: right; color: #2c3e50;\">Total: $${parseFloat(saleData.total || 0).toFixed(2)}</h2>\n\n    <p style=\"text-align: center; font-size: 10pt; color: #7f8c8d; margin-top: 40px;\">\n      Generado por Campo Inteligente | ${adminName}\n    </p>\n  </div>\n`;\n\n  document.body.appendChild(tempDiv);\n  html2canvas(tempDiv, { scale: 2 }).then(canvas => {\n    const imgData = canvas.toDataURL('image/png');\n    const pdf = new jsPDF('p', 'mm', 'a4');\n    const imgWidth = 210;\n    const pageHeight = 297;\n    const imgHeight = canvas.height * imgWidth / canvas.width;\n    let heightLeft = imgHeight;\n    let position = 0;\n\n    pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n    heightLeft -= pageHeight;\n\n    while (heightLeft >= 0) {\n      position = heightLeft - imgHeight;\n      pdf.addPage();\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pageHeight;\n    }\n\n    pdf.save(`factura_\\${saleData.client || 'sin_cliente'}_\\${saleData.id || 'sin_id'}.pdf`);\n    document.body.removeChild(tempDiv);\n  });\n};\n\n  // --- Funciones de Utilidad de Fechas ---\n  const normalizeDate = (date) => {\n    const d = new Date(date);\n    d.setHours(0, 0, 0, 0);\n    return d;\n  };\n\n  function getWeekNumber(d) {\n    d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));\n    d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay() || 7));\n    const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\n    const weekNo = Math.ceil((((d - yearStart) / 86400000) + 1) / 7);\n    return { year: d.getUTCFullYear(), week: weekNo };\n  }\n\n  const getStartAndEndOfWeek = (year, week) => {\n    const date = new Date(year, 0, 1 + (week - 1) * 7); // Start of the week in the given year\n    const day = date.getDay(); // Day of week (0-6)\n    const diff = date.getDate() - day + (day === 0 ? -6 : 1); // Adjust to Monday\n    const startOfWeek = normalizeDate(new Date(date.setDate(diff)));\n    const endOfWeek = normalizeDate(new Date(startOfWeek));\n    endOfWeek.setDate(startOfWeek.getDate() + 6);\n    return { start: startOfWeek, end: endOfWeek };\n  };\n\n  // --- Lógica de Filtrado de Reportes ---\n  const filterItemsBySelectedPeriod = (items, dateProp) => {\n    return items.filter(item => {\n      const itemDate = normalizeDate(item[dateProp]);\n\n      if (reportPeriod === 'daily') {\n        const selectedDay = normalizeDate(selectedDate);\n        return itemDate.getTime() === selectedDay.getTime();\n      } else if (reportPeriod === 'weekly') {\n        const { start, end } = getStartAndEndOfWeek(selectedWeek.year, selectedWeek.week);\n        return itemDate >= start && itemDate <= end;\n      } else if (reportPeriod === 'monthly') {\n        const [year, month] = selectedMonth.split('-').map(Number);\n        return itemDate.getFullYear() === year && itemDate.getMonth() === (month - 1);\n      }\n      return false; // No debería llegar aquí\n    });\n  };\n\n  const currentPeriodTransactions = filterItemsBySelectedPeriod(transactions, 'date');\n  const currentPeriodPayslips = filterItemsBySelectedPeriod(payslips, 'paymentDate');\n  const currentPeriodThirdPartyPayments = filterItemsBySelectedPeriod(thirdPartyPayments, 'date'); // Filtrar pagos a terceros\n\n  // Calcular ingresos del período\n  const totalIncomePeriod = currentPeriodTransactions\n    .filter(t => t.type === 'ingreso' || t.type === 'venta')\n    .reduce((sum, t) => sum + t.total, 0);\n  \n  // Calcular gastos del período (compras, gastos, y nómina)\n  const transactionExpensesPeriod = currentPeriodTransactions\n    .filter(t => t.type === 'gasto' || t.type === 'compra')\n    .reduce((sum, t) => sum + t.total, 0);\n  \n  const payslipExpensesPeriod = currentPeriodPayslips\n    .reduce((sum, ps) => sum + (parseFloat(ps.netSalary) || 0), 0);\n\n  const thirdPartyExpensesPeriod = currentPeriodThirdPartyPayments\n    .reduce((sum, tpp) => sum + (parseFloat(tpp.amount) || 0), 0);\n  \n  const totalExpensesPeriod = transactionExpensesPeriod + payslipExpensesPeriod + thirdPartyExpensesPeriod;\n\n  // Calcular ganancia neta del período\n  const netProfitPeriod = totalIncomePeriod - totalExpensesPeriod;\n\n  // --- Depuración (puedes quitar estos useEffects una vez que funcione) ---\n  useEffect(() => {\n    console.log(`--- Reporte ${reportPeriod} ---`);\n    console.log('Transacciones filtradas:', currentPeriodTransactions);\n    console.log('Fichas de pago filtradas:', currentPeriodPayslips);\n    console.log('Pagos a terceros filtrados:', currentPeriodThirdPartyPayments);\n    console.log('Ingresos del periodo:', totalIncomePeriod);\n    console.log('Gastos de transacciones del periodo:', transactionExpensesPeriod);\n    console.log('Gastos de nómina del periodo:', payslipExpensesPeriod);\n    console.log('Gastos de terceros del periodo:', thirdPartyExpensesPeriod);\n    console.log('Gastos Totales del periodo:', totalExpensesPeriod);\n    console.log('Ganancia Neta del periodo:', netProfitPeriod);\n  }, [reportPeriod, selectedDate, selectedMonth, selectedWeek, transactions, payslips, thirdPartyPayments]);\n\n  // --- Rentabilidad por Animal (se mantiene igual, no depende del periodo de reporte) ---\n  const safeEmployees = employees || [];\n  const safeAnimals = animals || [];\n\n  const totalSalaries = safeEmployees.reduce((sum, emp) => sum + (parseFloat(emp.salary) || 0), 0);\n  const cowsInProductionCount = safeAnimals.filter(a => a.tipoProduccion === 'leche' && a.status === 'en_produccion').length;\n  const laborCostPerCow = cowsInProductionCount > 0 ? totalSalaries / cowsInProductionCount : 0;\n\n  const animalProfitability = safeAnimals.map(animal => {\n    const animalIncome = transactions\n      .filter(t => t.animalId === animal.id && t.type === 'venta')\n      .reduce((sum, t) => sum + t.total, 0);\n\n    const animalExpenses = transactions\n      .filter(t => t.animalId === animal.id && (t.type === 'gasto' || t.type === 'compra'))\n      .reduce((sum, t) => sum + t.total, 0);\n\n    let proratedLaborCost = 0;\n    if (animal.tipoProduccion === 'leche' && animal.status === 'en_produccion') {\n      proratedLaborCost = laborCostPerCow;\n    }\n\n    const totalCost = animalExpenses + proratedLaborCost;\n    const netProfitAnimal = animalIncome - totalCost;\n\n    return {\n      id: animal.id,\n      name: animal.name,\n      tipoProduccion: animal.tipoProduccion,\n      status: animal.status,\n      income: animalIncome,\n      expenses: animalExpenses,\n      proratedLabor: proratedLaborCost,\n      totalCost: totalCost,\n      netProfit: netProfitAnimal,\n    };\n  });\n\n  // Información de la finca/criador para PDFs\n  const farmName = currentUser?.farmName || 'Mi Finca Ganadera';\n  const adminName = currentUser?.fullName || 'Administrador';\n  const logoPlaceholder = 'https://via.placeholder.com/50x50?text=LOGO'; // Placeholder de logo\n\n  return (\n    <div className=\"bg-white p-6 rounded-lg shadow-md\">\n      <h3 className=\"text-xl font-semibold mb-4\">Gestión Económica</h3>\n\n      {/* Sección de Reportes Financieros Periódicos */}\n      <div className=\"mb-8 p-4 border rounded-lg bg-green-50\">\n        <h4 className=\"text-lg font-semibold mb-3\">Reportes Financieros Periódicos</h4>\n        <div className=\"flex justify-center mb-4 space-x-2\">\n          <button\n            onClick={() => setReportPeriod('daily')}\n            className={`px-4 py-2 rounded-lg ${reportPeriod === 'daily' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'} hover:bg-blue-700 transition-colors`}\n          >\n            Diario\n          </button>\n          <button\n            onClick={() => setReportPeriod('weekly')}\n            className={`px-4 py-2 rounded-lg ${reportPeriod === 'weekly' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'} hover:bg-blue-700 transition-colors`}\n          >\n            Semanal\n          </button>\n          <button\n            onClick={() => setReportPeriod('monthly')}\n            className={`px-4 py-2 rounded-lg ${reportPeriod === 'monthly' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'} hover:bg-blue-700 transition-colors`}\n          >\n            Mensual\n          </button>\n        </div>\n\n        {/* Controles de selección de fecha/período */}\n        <div className=\"mb-4 flex justify-center\">\n          {reportPeriod === 'daily' && (\n            <input\n              type=\"date\"\n              value={selectedDate}\n              onChange={(e) => setSelectedDate(e.target.value)}\n              className=\"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            />\n          )}\n          {reportPeriod === 'weekly' && (\n            <input\n              type=\"week\" // Input tipo week (YYYY-WNN)\n              value={`${selectedWeek.year}-W${String(selectedWeek.week).padStart(2, '0')}`}\n              onChange={(e) => {\n                const [year, week] = e.target.value.split('-W');\n                setSelectedWeek({ year: Number(year), week: Number(week) });\n              }}\n              className=\"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            />\n          )}\n          {reportPeriod === 'monthly' && (\n            <input\n              type=\"month\" // Input tipo month (YYYY-MM)\n              value={selectedMonth}\n              onChange={(e) => setSelectedMonth(e.target.value)}\n              className=\"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            />\n          )}\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-center mb-6\">\n          <div className=\"p-3 bg-green-100 rounded-lg\">\n            <p className=\"text-sm font-medium\">Ingresos del Periodo</p>\n            <p className=\"text-2xl font-bold\">${totalIncomePeriod.toFixed(2)}</p>\n          </div>\n          <div className=\"p-3 bg-red-100 rounded-lg\">\n            <p className=\"text-sm font-medium\">Gastos del Periodo</p>\n            <p className=\"text-2xl font-bold\">${totalExpensesPeriod.toFixed(2)}</p>\n          </div>\n          <div className=\"p-3 bg-blue-100 rounded-lg\">\n            <p className=\"text-sm font-medium\">Ganancia Neta del Periodo</p>\n            <p className=\"text-2xl font-bold\">${netProfitPeriod.toFixed(2)}</p>\n          </div>\n        </div>\n      </div>\n\n      {/* Sección de Rentabilidad por Animal */}\n      <div className=\"mb-8 p-4 border rounded-lg bg-yellow-50\">\n        <h4 className=\"text-lg font-semibold mb-3\">Rentabilidad por Animal</h4>\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full bg-white border\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"py-2 px-4 border\">ID Animal</th>\n                <th className=\"py-2 px-4 border\">Nombre</th>\n                <th className=\"py-2 px-4 border\">Tipo Prod.</th>\n                <th className=\"py-2 px-4 border\">Ingresos</th>\n                <th className=\"py-2 px-4 border\">Gastos Directos</th>\n                <th className=\"py-2 px-4 border\">Mano Obra Prorrat.</th>\n                <th className=\"py-2 px-4 border\">Costo Total</th>\n                <th className=\"py-2 px-4 border\">Ganancia Neta</th>\n                <th className=\"py-2 px-4 border\">Acciones</th>\n              </tr>\n            </thead>\n            <tbody>\n              {animalProfitability.map(ap => (\n                <tr key={ap.id} className=\"hover:bg-gray-50\">\n                  <td className=\"py-2 px-4 border\">{ap.id}</td>\n                  <td className=\"py-2 px-4 border\">{ap.name}</td>\n                  <td className=\"py-2 px-4 border\">{ap.tipoProduccion}</td>\n                  <td className=\"py-2 px-4 border\">${ap.income.toFixed(2)}</td>\n                  <td className=\"py-2 px-4 border\">${ap.expenses.toFixed(2)}</td>\n                  <td className=\"py-2 px-4 border\">${ap.proratedLabor.toFixed(2)}</td>\n                  <td className=\"py-2 px-4 border\">${ap.totalCost.toFixed(2)}</td>\n                  <td className={`py-2 px-4 border ${ap.netProfit >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                    ${ap.netProfit.toFixed(2)}\n                  </td>\n                  <td className=\"py-2 px-4 border\">\n                    {/* No hay una función de eliminación directa para la rentabilidad, ya que es un reporte */}\n                    {/* Podrías añadir un botón para ver detalles del animal o sus transacciones */}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Sección de Registro de Transacciones */}\n      <div className=\"mb-8 p-4 border rounded-lg bg-gray-50\">\n        <h4 className=\"text-lg font-semibold mb-3\">Registrar Nueva Transacción</h4>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <select\n            name=\"type\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={transaction.type}\n            onChange={handleInputChange}\n          >\n            <option value=\"ingreso\">Ingreso</option>\n            <option value=\"gasto\">Gasto</option>\n            <option value=\"compra\">Compra</option>\n            <option value=\"venta\">Venta</option>\n          </select>\n          <input\n            type=\"text\"\n            name=\"category\"\n            placeholder=\"Categoría (Ej: Alimento, Venta de Leche)\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={transaction.category}\n            onChange={handleInputChange}\n          />\n          \n          {transaction.type !== 'venta' && (\n            <input\n              type=\"number\"\n              name=\"amount\"\n              placeholder=\"Monto\"\n              className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n              value={transaction.amount}\n              onChange={handleInputChange}\n            />\n          )}\n\n          <input\n            type=\"text\"\n            name=\"description\"\n            placeholder=\"Descripción Detallada\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={transaction.description}\n            onChange={handleInputChange}\n          />\n          <select\n            name=\"animalId\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={transaction.animalId}\n            onChange={handleInputChange}\n          >\n            <option value=\"\">Asociar a Animal (Opcional)</option>\n            {safeAnimals.map(animal => (\n              <option key={animal.id} value={animal.id}>{animal.name} ({animal.id})</option>\n            ))}\n          </select>\n\n          {/* Campos específicos para Venta */}\n          {transaction.type === 'venta' && (\n            <>\n              <input\n                type=\"text\"\n                name=\"product\"\n                placeholder=\"Producto (Ej: Leche, Carne)\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                value={transaction.product}\n                onChange={handleInputChange}\n              />\n              <input\n                type=\"number\"\n                name=\"quantity\"\n                placeholder=\"Cantidad\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                value={transaction.quantity}\n                onChange={handleInputChange}\n              />\n              <input\n                type=\"text\"\n                name=\"unit\"\n                placeholder=\"Unidad (Ej: litros, kg)\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                value={transaction.unit}\n                onChange={handleInputChange}\n              />\n              <input\n                type=\"number\"\n                name=\"pricePerUnit\"\n                placeholder=\"Precio por unidad\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                value={transaction.pricePerUnit}\n                onChange={handleInputChange}\n              />\n              <input\n                type=\"text\"\n                name=\"client\"\n                placeholder=\"Cliente\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                value={transaction.client}\n                onChange={handleInputChange}\n              />\n              <div className=\"col-span-full p-2 bg-gray-100 rounded-lg\">\n                <p className=\"font-semibold\">Total de Venta: ${calculateTotalSale()}</p>\n              </div>\n            </>\n          )}\n          {/* Campos de fecha de período para Ingreso */}\n          {transaction.type === 'ingreso' && (\n            <>\n              <input\n                type=\"date\"\n                name=\"startDate\"\n                placeholder=\"Fecha Inicio Período Ingreso\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                value={transaction.startDate}\n                onChange={handleInputChange}\n              />\n              <input\n                type=\"date\"\n                name=\"endDate\"\n                placeholder=\"Fecha Fin Período Ingreso\"\n                className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n                value={transaction.endDate}\n                onChange={handleInputChange}\n              />\n            </>\n          )}\n          <input\n            type=\"date\"\n            name=\"date\"\n            placeholder=\"Fecha de Transacción\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black\"\n            value={transaction.date}\n            onChange={handleInputChange}\n          />\n        </div>\n        <button\n          onClick={handleSubmit}\n          className=\"mt-6 bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors mr-2\"\n        >\n          Registrar Transacción\n        </button>\n        {transaction.type === 'venta' && (\n          <button\n            onClick={() => handleGenerateInvoice(transaction)} // Pasar la transacción actual para generar PDF\n            className=\"mt-6 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            Generar Factura\n          </button>\n        )}\n      </div>\n\n      {/* Historial de Transacciones */}\n      <h4 className=\"text-lg font-semibold mb-3\">Historial de Transacciones</h4>\n      <div className=\"overflow-x-auto\">\n        <table className=\"min-w-full bg-white border\">\n          <thead>\n            <tr className=\"bg-gray-100\">\n              <th className=\"py-2 px-4 border\">ID</th>\n              <th className=\"py-2 px-4 border\">Tipo</th>\n              <th className=\"py-2 px-4 border\">Categoría</th>\n              <th className=\"py-2 px-4 border\">Descripción</th>\n              <th className=\"py-2 px-4 border\">Monto</th>\n              <th className=\"py-2 px-4 border\">Animal ID</th>\n              <th className=\"py-2 px-4 border\">Fecha</th>\n              <th className=\"py-2 px-4 border\">Acciones</th>\n            </tr>\n          </thead>\n          <tbody>\n            {transactions.map(trx => (\n              <tr key={trx.id} className=\"hover:bg-gray-50\">\n                <td className=\"py-2 px-4 border\">{trx.id}</td>\n                <td className=\"py-2 px-4 border\">{trx.type}</td>\n                <td className=\"py-2 px-4 border\">{trx.category}</td>\n                <td className=\"py-2 px-4 border\">{trx.description || trx.product}</td>\n                <td className=\"py-2 px-4 border\">${trx.total.toFixed(2)}</td>\n                <td className=\"py-2 px-4 border\">{trx.animalId || 'N/A'}</td>\n                <td className=\"py-2 px-4 border\">{trx.date || 'N/A'}</td>\n                <td className=\"py-2 px-4 border\">\n                  {trx.type === 'venta' && (\n                    <button\n                      onClick={() => handleGenerateInvoice(trx)} // Pasar la transacción para generar PDF\n                      className=\"text-blue-600 hover:underline mr-2\"\n                    >\n                      Ver PDF\n                    </button>\n                  )}\n                  <button\n                    onClick={() => onDeleteTransaction(trx.id)}\n                    className=\"text-red-600 hover:underline\"\n                  >\n                    Eliminar\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n\nexport default EconomicManagementPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}